import{r as d,i as g,j as e,b as x,c as p,d as m,e as v,f as N,M as h,g as f,N as w,h as y,k as S,u as L,C as M,O as k}from"./index-a7e106b5.js";import{S as E}from"./SplitPane-03cf8902.js";import{I as j}from"./Input-8fe384ab.js";function I({models:o,search:l,setSearch:r}){const n=d.useMemo(()=>o.map(a=>[a,a.index]),[o]),s=l!==""&&l.length>1,t=g(s)?[]:C(n,l);return e.jsxs("div",{className:"p-2 relative",children:[e.jsx(j,{className:"w-full !m-0",size:x.md,value:l,placeholder:"Search",onInput:a=>{r(a.target.value.trim())},autoFocus:!0}),s&&e.jsxs("ul",{className:"p-4 bg-theme dark:bg-theme-lighter absolute z-10 w-full top-16 left-0 right-0 rounded-lg max-h-[25vh] overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",children:[p(t)&&e.jsx("li",{className:"p-2",onClick:()=>{r("")},children:"No Results Found"},"not-found"),m(t)&&t.map(([a,c])=>e.jsx("li",{className:"p-2 cursor-pointer hover:bg-primary-10 rounded-lg",children:e.jsxs(v,{to:`${N.IdeDocsModels}/${h.encodeName(a.name)}`,className:"text-md font-normal mb-1 w-full",children:[e.jsx("span",{className:"font-bold",children:a.name}),e.jsx("small",{className:"block text-neutral-600 p-2 italic",dangerouslySetInnerHTML:{__html:A(c,l)}})]})},a.name))]})]})}function A(o,l){return o.replaceAll(l,`<b class="inline-block text-brand-500 bg-brand-10">${l}</b>`)}function C(o=[],l){return o.reduce((n,[s,t])=>{const a=t.indexOf(l.toLocaleLowerCase());if(a>-1){const c=Math.max(0,a-40),i=Math.min(t.length-1,a+l.length+40);n.push([s,(c>0?"... ":"")+t.slice(c,i)+(i<t.length?" ...":"")])}return n},[])}function z({models:o,filter:l,setFilter:r}){const n=Array.from(new Set(o.values())).filter(s=>l===""?!0:s.name.includes(l));return e.jsxs("div",{className:"flex flex-col w-full h-full",children:[e.jsxs("div",{className:"px-2 w-full flex justify-between",children:[e.jsx(j,{className:"w-full !m-0",size:x.sm,value:l,placeholder:"Filter models",onInput:s=>{r(s.target.value)}}),e.jsx("div",{className:"ml-3 px-3 bg-primary-10 text-primary-500 rounded-full text-xs flex items-center",children:n.length})]}),e.jsxs("ul",{className:"p-2 overflow-auto scrollbar scrollbar--horizontal scrollbar--vertical",children:[p(n)&&e.jsx("li",{className:"p-2",onClick:()=>{r("")},children:"No Results Found"},"not-found"),m(n)&&n.map(s=>e.jsx("li",{className:f("text-sm font-normal"),children:e.jsxs(w,{to:`${N.IdeDocsModels}/${h.encodeName(s.name)}`,className:({isActive:t})=>f("block px-2 overflow-hidden whitespace-nowrap overflow-ellipsis py-1 rounded-md w-full hover:bg-primary-10",t?"text-primary-500 bg-primary-10":"text-neutral-500 dark:text-neutral-100"),children:[s.name,e.jsxs("span",{title:s.type==="python"?"Column lineage disabled for Python models":"SQL Model",className:"inline-block ml-2 bg-primary-10 px-2 rounded-md text-[0.65rem]",children:[s.type==="python"&&"Python",s.type==="sql"&&"SQL",s.type==="seed"&&"Seed"]})]})},s.name))]})]})}function _(){const o=y(),{modelName:l}=S(),r=L(i=>i.models),[n,s]=d.useState(""),[t,a]=d.useState(""),c=Array.from(r.entries()).reduce((i,[b,u])=>(u.name===b||(l==null||u.name!==h.decodeName(l))&&i.push(u),i),[]);return d.useEffect(()=>{a(""),s("")},[o.pathname]),e.jsx(M.Page,{children:r.size===0?e.jsx("div",{className:"p-4 flex flex-col w-full h-full overflow-hidden",children:e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsxs("div",{className:"center",children:[e.jsx("h3",{className:"text-lg mb-4",children:"Still Waiting For Models To Load..."}),e.jsx("p",{children:"It should take few more seconds."}),e.jsx("p",{children:"If it takes too long, probably, there is a problem with API response."}),e.jsx("p",{children:"Check if the server is running and refresh."})]})})}):e.jsxs("div",{className:"p-4 flex flex-col w-full h-full overflow-hidden",children:[m(c)&&e.jsx(I,{models:c,search:n,setSearch:s}),e.jsxs(E,{className:"flex w-full h-full overflow-hidden mt-8",sizes:[25,75],minSize:0,snapOffset:0,children:[e.jsx("div",{className:"py-4 w-full",children:r.size>0&&e.jsx(z,{models:r,filter:t,setFilter:a})}),e.jsx("div",{className:"w-full",children:e.jsx(k,{})})]})]})})}export{_ as default};
