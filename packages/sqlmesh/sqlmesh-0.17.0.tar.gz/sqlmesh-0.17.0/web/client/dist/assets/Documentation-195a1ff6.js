import{r as c,R as C,j as r,g as I,ah as ce,aj as de,P as fe,a3 as xe}from"./index-a7e106b5.js";import{u as pe,M as me,C as A}from"./Graph-c8c0c3fa.js";import{a as be}from"./editor-7f8c8c07.js";import{g as se,i as he,S as re,D as B,y as z,s as Y,o as $,l as Q,X as U,I as le,u as _,f as k,N as G,j as ge,a as w,O as D,M as y,z as ve}from"./transition-d28674b8.js";import{s as je}from"./popover-08eb9d97.js";import{v as K,M as we,P as ye}from"./disclosure-cfafe5dc.js";function Ne({onFocus:e}){let[t,n]=c.useState(!0);return t?C.createElement(se,{as:"button",type:"button",features:he.Focusable,onFocus:s=>{s.preventDefault();let l,a=50;function i(){if(a--<=0){l&&cancelAnimationFrame(l);return}if(e()){n(!1),cancelAnimationFrame(l);return}l=requestAnimationFrame(i)}l=requestAnimationFrame(i)}}):null}const ae=c.createContext(null);function Te(){return{groups:new Map,get(e,t){var n;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let l=(n=s.get(t))!=null?n:0;s.set(t,l+1);let a=Array.from(s.keys()).indexOf(t);function i(){let p=s.get(t);p>1?s.set(t,p-1):s.delete(t)}return[a,i]}}}function Ie({children:e}){let t=c.useRef(Te());return c.createElement(ae.Provider,{value:t},e)}function ie(e){let t=c.useContext(ae);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=Pe(),[s,l]=t.current.get(e,n);return c.useEffect(()=>l,[]),s}function Pe(){var e,t,n;let s=(n=(t=(e=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:e.ReactCurrentOwner)==null?void 0:t.current)!=null?n:null;if(!s)return Symbol();let l=[],a=s;for(;a;)l.push(a.index),a=a.return;return"$."+l.join(".")}var Ee=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ee||{}),Se=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Se||{}),$e=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))($e||{});let De={[0](e,t){var n;let s=k(e.tabs,u=>u.current),l=k(e.panels,u=>u.current),a=s.filter(u=>{var g;return!((g=u.current)!=null&&g.hasAttribute("disabled"))}),i={...e,tabs:s,panels:l};if(t.index<0||t.index>s.length-1){let u=_(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,[0]:()=>_(Math.sign(t.index),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0});return a.length===0?i:{...i,selectedIndex:_(u,{[0]:()=>s.indexOf(a[0]),[1]:()=>s.indexOf(a[a.length-1])})}}let p=s.slice(0,t.index),m=[...s.slice(t.index),...p].find(u=>a.includes(u));if(!m)return i;let d=(n=s.indexOf(m))!=null?n:e.selectedIndex;return d===-1&&(d=e.selectedIndex),{...i,selectedIndex:d}},[1](e,t){var n;if(e.tabs.includes(t.tab))return e;let s=e.tabs[e.selectedIndex],l=k([...e.tabs,t.tab],i=>i.current),a=(n=l.indexOf(s))!=null?n:e.selectedIndex;return a===-1&&(a=e.selectedIndex),{...e,tabs:l,selectedIndex:a}},[2](e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},[3](e,t){return e.panels.includes(t.panel)?e:{...e,panels:k([...e.panels,t.panel],n=>n.current)}},[4](e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},J=c.createContext(null);J.displayName="TabsDataContext";function F(e){let t=c.useContext(J);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,F),n}return t}let V=c.createContext(null);V.displayName="TabsActionsContext";function Z(e){let t=c.useContext(V);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Z),n}return t}function Ce(e,t){return _(t.type,De,e,t)}let Re=c.Fragment;function Fe(e,t){let{defaultIndex:n=0,vertical:s=!1,manual:l=!1,onChange:a,selectedIndex:i=null,...p}=e;const m=s?"vertical":"horizontal",d=l?"manual":"auto";let u=i!==null,g=z(t),[f,j]=c.useReducer(Ce,{selectedIndex:i??n,tabs:[],panels:[]}),b=c.useMemo(()=>({selectedIndex:f.selectedIndex}),[f.selectedIndex]),M=Y(a||(()=>{})),L=Y(f.tabs),h=c.useMemo(()=>({orientation:m,activation:d,...f}),[m,d,f]),v=$(x=>(j({type:1,tab:x}),()=>j({type:2,tab:x}))),P=$(x=>(j({type:3,panel:x}),()=>j({type:4,panel:x}))),E=$(x=>{S.current!==x&&M.current(x),u||j({type:0,index:x})}),S=Y(u?e.selectedIndex:f.selectedIndex),H=c.useMemo(()=>({registerTab:v,registerPanel:P,change:E}),[]);Q(()=>{j({type:0,index:i??n})},[i]),Q(()=>{if(S.current===void 0||f.tabs.length<=0)return;let x=k(f.tabs,T=>T.current);x.some((T,o)=>f.tabs[o]!==T)&&E(x.indexOf(f.tabs[S.current]))});let X={ref:g};return C.createElement(Ie,null,C.createElement(V.Provider,{value:H},C.createElement(J.Provider,{value:h},h.tabs.length<=0&&C.createElement(Ne,{onFocus:()=>{var x,T;for(let o of L.current)if(((x=o.current)==null?void 0:x.tabIndex)===0)return(T=o.current)==null||T.focus(),!0;return!1}}),U({ourProps:X,theirProps:p,slot:b,defaultTag:Re,name:"Tabs"}))))}let Me="div";function Le(e,t){let{orientation:n,selectedIndex:s}=F("Tab.List"),l=z(t);return U({ourProps:{ref:l,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:s},defaultTag:Me,name:"Tabs.List"})}let Ae="button";function Oe(e,t){var n,s;let l=le(),{id:a=`headlessui-tabs-tab-${l}`,...i}=e,{orientation:p,activation:m,selectedIndex:d,tabs:u,panels:g}=F("Tab"),f=Z("Tab"),j=F("Tab"),b=c.useRef(null),M=z(b,t);Q(()=>f.registerTab(b),[f,b]);let L=ie("tabs"),h=u.indexOf(b);h===-1&&(h=L);let v=h===d,P=$(o=>{var N;let q=o();if(q===G.Success&&m==="auto"){let oe=(N=ge(b))==null?void 0:N.activeElement,ne=j.tabs.findIndex(ue=>ue.current===oe);ne!==-1&&f.change(ne)}return q}),E=$(o=>{let N=u.map(q=>q.current).filter(Boolean);if(o.key===w.Space||o.key===w.Enter){o.preventDefault(),o.stopPropagation(),f.change(h);return}switch(o.key){case w.Home:case w.PageUp:return o.preventDefault(),o.stopPropagation(),P(()=>D(N,y.First));case w.End:case w.PageDown:return o.preventDefault(),o.stopPropagation(),P(()=>D(N,y.Last))}if(P(()=>_(p,{vertical(){return o.key===w.ArrowUp?D(N,y.Previous|y.WrapAround):o.key===w.ArrowDown?D(N,y.Next|y.WrapAround):G.Error},horizontal(){return o.key===w.ArrowLeft?D(N,y.Previous|y.WrapAround):o.key===w.ArrowRight?D(N,y.Next|y.WrapAround):G.Error}}))===G.Success)return o.preventDefault()}),S=c.useRef(!1),H=$(()=>{var o;S.current||(S.current=!0,(o=b.current)==null||o.focus(),f.change(h),ve(()=>{S.current=!1}))}),X=$(o=>{o.preventDefault()}),x=c.useMemo(()=>({selected:v}),[v]),T={ref:M,onKeyDown:E,onMouseDown:X,onClick:H,id:a,role:"tab",type:je(e,b),"aria-controls":(s=(n=g[h])==null?void 0:n.current)==null?void 0:s.id,"aria-selected":v,tabIndex:v?0:-1};return U({ourProps:T,theirProps:i,slot:x,defaultTag:Ae,name:"Tabs.Tab"})}let ke="div";function _e(e,t){let{selectedIndex:n}=F("Tab.Panels"),s=z(t),l=c.useMemo(()=>({selectedIndex:n}),[n]);return U({ourProps:{ref:s},theirProps:e,slot:l,defaultTag:ke,name:"Tabs.Panels"})}let Be="div",ze=re.RenderStrategy|re.Static;function Ue(e,t){var n,s,l,a;let i=le(),{id:p=`headlessui-tabs-panel-${i}`,tabIndex:m=0,...d}=e,{selectedIndex:u,tabs:g,panels:f}=F("Tab.Panel"),j=Z("Tab.Panel"),b=c.useRef(null),M=z(b,t);Q(()=>j.registerPanel(b),[j,b]);let L=ie("panels"),h=f.indexOf(b);h===-1&&(h=L);let v=h===u,P=c.useMemo(()=>({selected:v}),[v]),E={ref:M,id:p,role:"tabpanel","aria-labelledby":(s=(n=g[h])==null?void 0:n.current)==null?void 0:s.id,tabIndex:v?m:-1};return!v&&((l=d.unmount)==null||l)&&!((a=d.static)!=null&&a)?C.createElement(se,{as:"span",...E}):U({ourProps:E,theirProps:d,slot:P,defaultTag:Be,features:ze,visible:v,name:"Tabs.Panel"})}let qe=B(Oe),Ge=B(Fe),We=B(Le),Qe=B(_e),He=B(Ue),R=Object.assign(qe,{Group:Ge,List:We,Panels:Qe,Panel:He});function Xe({list:e,children:t=[],className:n}){return r.jsxs(R.List,{className:"w-full whitespace-nowrap px-2 py-0.5 flex justify-between items-center bg-primary-10 dark:bg-secondary-10",children:[r.jsx("div",{className:I("flex w-full overflow-hidden overflow-x-auto py-1 scrollbar scrollbar--horizontal",n),children:r.jsx("div",{className:"flex items-center bg-secondary-10 dark:bg-primary-10 cursor-pointer rounded-full p-1 overflow-hidden",children:e.map(s=>r.jsx(R,{className:({selected:l})=>I("text-xs px-2 py-0.5 mr-2 last:mr-0 rounded-full relative align-middle",l?"bg-secondary-500 text-secondary-100 cursor-default font-bold":"cursor-pointer font-medium text-secondary-400 dark:text-secondary-400"),children:s},s))})}),t]})}const ee=function({model:t,withModel:n=!0,withDescription:s=!0,withColumns:l=!0,withCode:a=!0,withQuery:i=!0}){const{handleClickModel:p}=be(),m=pe(t.path,d=>{p==null||p(d.name)});return r.jsxs(te,{children:[n&&r.jsx(W,{headline:"Model",defaultOpen:!0,children:r.jsxs("ul",{className:"px-2 w-full",children:[r.jsx(O,{name:"Path",value:t.path.split("/").slice(0,-1).join("/")}),r.jsx(O,{name:"Name",value:t.name}),r.jsx(O,{name:"Dialect",value:t.dialect}),r.jsx(O,{name:"Type",value:t.type}),Object.entries(t.details??{}).map(([d,u])=>r.jsx(O,{name:d.replaceAll("_"," "),value:u,isCapitalize:!0},d))]})}),s&&r.jsx(W,{headline:"Description",defaultOpen:!0,children:t.description==null?"No description":t.description}),l&&r.jsx(W,{headline:"Columns",children:r.jsx(me,{className:"max-h-[15rem]",nodeId:t.name,columns:t.columns,disabled:(t==null?void 0:t.type)==="python",withHandles:!1,withSource:!1,limit:10})}),(a||i)&&r.jsx(W,{headline:"SQL",children:r.jsx(A.RemoteFile,{path:t.path,children:({file:d})=>r.jsxs(R.Group,{defaultIndex:i?1:0,children:[r.jsx(Xe,{list:[a&&"Source Code",i&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),r.jsxs(R.Panels,{className:"h-full w-full overflow-hidden bg-neutral-10 mt-4 rounded-lg",children:[r.jsx(R.Panel,{unmount:!1,className:I("flex flex-col w-full h-full relative px-2 overflow-hidden p-2","ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2"),children:r.jsx(A.SQLMeshDialect,{content:d.content,type:d.extension,children:({extensions:u,content:g})=>r.jsx(A,{extensions:u.concat(m),content:g,className:"text-xs"})})}),r.jsx(R.Panel,{unmount:!1,className:I("w-full h-full ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2 p-2"),children:r.jsx(A.SQLMeshDialect,{type:ce.SQL,content:t.sql??"",children:({extensions:u,content:g})=>r.jsx(A,{extensions:u.concat(m),content:g,className:"text-xs"})})})]})]})})})]})};function Ye({headline:e}){return r.jsx("div",{className:"text-lg font-bold whitespace-nowrap w-full",id:e,children:r.jsx("h3",{className:"py-2",children:e})})}function Ke(){return r.jsx(te,{className:"font-bold whitespace-nowrap w-full h-full",children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function te({children:e,className:t}){return r.jsx("div",{className:I("w-full h-full rounded-xl",t),children:r.jsx("div",{className:"w-full h-full py-4 rounded-xl",children:r.jsx("div",{className:"w-full h-full overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",children:e})})})}function W({children:e,className:t,headline:n,defaultOpen:s=!1}){return r.jsx("div",{className:"px-4",children:r.jsx(K,{defaultOpen:s,children:({open:l})=>r.jsxs(r.Fragment,{children:[r.jsxs(K.Button,{className:I("flex items-center justify-between rounded-lg text-left w-full bg-neutral-10 px-3 mb-2",t),children:[r.jsx(Ye,{headline:n}),r.jsx("div",{children:l?r.jsx(we,{className:"h-6 w-6 text-neutral-50"}):r.jsx(ye,{className:"h-6 w-6 text-neutral-50"})})]}),r.jsx(K.Panel,{className:"pb-2 overflow-hidden",children:r.jsx("div",{className:"px-2",children:e})})]})})})}function O({className:e,name:t,value:n,isHighlighted:s=!1,isCapitalize:l=!1,children:a}){const i=new Date(n),p=de(n)&&!isNaN(i.getTime()),m=typeof n=="boolean";return r.jsxs("li",{className:I("w-full border-b border-primary-10 py-1 mb-1",e),children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("strong",{className:I("mr-2",l&&"capitalize",s&&"text-brand-500"),children:t}),r.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:m?fe(n)?"True":"False":p?xe(i):n})]}),r.jsx("p",{className:"text-xs ",children:a})]})}ee.NotFound=Ke;ee.Container=te;const rt=ee;export{rt as D,Xe as T,R as r};
