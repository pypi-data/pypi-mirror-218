import{l as F,I as q,r as K,c as Q,O as a,a6 as T,b as G,w as H,a0 as J,q as l,v as u,x as n,y as v,z as P,A as o,F as D,aD as $,j as i,L as d,N as r,k as p,K as y,M as _,Q as W}from"./index-4e9c0066.js";import{_ as I,V}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-a5d9de60.js";import{V as X}from"./VContainer-169e75da.js";import{c as S,V as m}from"./VCard-e45f718f.js";import{V as Y}from"./VToolbar-e0e7883b.js";import{b as E,V as N}from"./VMenu-1368abb6.js";import{V as b,j as k}from"./VBtn-61a2102f.js";import{V as Z}from"./VDivider-267318d1.js";import{V as x}from"./VAlert-e85e83fa.js";/* empty css              */const ee={class:"line-clamp-1"},te=d("br",null,null,-1),ne={class:"line-clamp-1"},ie={class:"line-clamp-1"},ae={class:"list-actions"},se={key:0},oe={key:1},le={key:2},re={key:3},ke=F({__name:"Providers",setup(de){const w=q(),g=K([]),U=Q(()=>Object.values(a.providerManifests).filter(t=>!t.hidden&&(t.multi_instance||!g.value.find(c=>c.domain==t.domain))).sort((t,c)=>(t.name||a.providerManifests[t.domain].name).toUpperCase()>(c.name||a.providerManifests[c.domain].name).toUpperCase()?1:-1)),L=a.subscribe(T.PROVIDERS_UPDATED,()=>{B()});G(L);const B=async function(){g.value=await a.getProviderConfigs()},j=function(t){a.removeProviderConfig(t),g.value=g.value.filter(c=>c.instance_id!=t)},M=function(t){w.push(`/settings/editprovider/${t}`)},z=function(t){w.push(`/settings/addprovider/${t.domain}`)},A=function(t){t.enabled=!t.enabled,a.saveProviderConfig(t.domain,{enabled:t.enabled},t.instance_id)},O=function(t){a.getData("config/providers/reload",{instance_id:t}).catch(c=>alert(c))};return H(()=>a.providers,t=>{t&&B()},{immediate:!0}),(t,c)=>{const R=J("hold");return l(),u(X,null,{default:n(()=>[(l(!0),v(D,null,P(o($),f=>(l(),u(S,{key:f,style:{"margin-bottom":"10px"}},{default:n(()=>[i(Y,{color:"transparent",density:"compact",class:"titlebar"},{title:n(()=>[d("h2",ee,r(t.$t(`settings.${f}providers`)),1)]),append:n(()=>[U.value.filter(e=>e.type==f).length?(l(),u(E,{key:0},{activator:n(({props:e})=>[i(b,p({variant:"text"},e),{default:n(()=>[y(r(t.$t("settings.add_new")),1)]),_:2},1040)]),default:n(()=>[i(S,{density:"compact"},{default:n(()=>[(l(!0),v(D,null,P(U.value.filter(e=>e.type==f),e=>(l(),u(m,{class:"list-item-main",key:e.domain,density:"compact",style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:e.name,onClick:h=>z(e)},{prepend:n(()=>[i(I,{domain:e.domain,size:26,class:"media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1024)):_("",!0)]),_:2},1024),i(Z),f==o($).MUSIC&&g.value.filter(e=>e.type==o($).MUSIC&&e.domain in o(a).providerManifests&&!o(a).providerManifests[e.domain].hidden).length==0?(l(),u(x,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-bottom":"15px"}},{default:n(()=>[d("b",null,r(t.$t("settings.no_providers")),1),te,y(" "+r(t.$t("settings.no_providers_detail")),1)]),_:1})):_("",!0),i(N,null,{default:n(()=>[(l(!0),v(D,null,P(g.value.filter(e=>e.type==f),e=>W((l(),u(m,{class:"list-item-main",link:"",density:"compact",onClick:h=>M(e.instance_id),key:e.instance_id},{prepend:n(()=>[i(I,{domain:e.domain,size:"40px",class:"listitem-media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),title:n(()=>[d("div",ne,r(e.name||o(a).providerManifests[e.domain].name),1)]),subtitle:n(()=>[d("div",ie,r(o(a).providerManifests[e.domain].description),1)]),append:n(()=>{var h;return[d("div",ae,[o(a).syncTasks.value.filter(s=>s.provider_instance==e.instance_id).length>0?(l(),v("div",se,[i(V,{location:"top end",origin:"end center"},{activator:n(({props:s})=>[i(b,p({class:"buttonicon",variant:"plain",ripple:!1,icon:!0},s),{default:n(()=>[i(k,p(s,{color:"grey"}),{default:n(()=>[y(" mdi-sync ")]),_:2},1040)]),_:2},1040)]),default:n(()=>[d("span",null,r(t.$t("settings.sync_running")),1)]),_:1})])):_("",!0),e.enabled?e.last_error?(l(),v("div",le,[i(V,{location:"top end",origin:"end center"},{activator:n(({props:s})=>[i(b,p({class:"buttonicon",variant:"plain",ripple:!1,icon:!0},s),{default:n(()=>[i(k,p(s,{color:"red"}),{default:n(()=>[y(" mdi-alert-circle ")]),_:2},1040)]),_:2},1040)]),default:n(()=>[d("span",null,r(e.last_error),1)]),_:2},1024)])):(h=o(a).providers[e.instance_id])!=null&&h.available?_("",!0):(l(),v("div",re,[i(V,{location:"top end",origin:"end center"},{activator:n(({props:s})=>[i(b,p({class:"buttonicon",variant:"plain",ripple:!1,icon:!0},s),{default:n(()=>[i(k,{icon:"mdi-timer-sand"})]),_:2},1040)]),default:n(()=>[d("span",null,r(t.$t("settings.not_loaded")),1)]),_:1})])):(l(),v("div",oe,[i(V,{location:"top end",origin:"end center"},{activator:n(({props:s})=>[i(b,p({class:"buttonicon",variant:"plain",ripple:!1,icon:!0},s),{default:n(()=>[i(k,p(s,{color:"grey"}),{default:n(()=>[y(" mdi-cancel ")]),_:2},1040)]),_:2},1040)]),default:n(()=>[d("span",null,r(t.$t("settings.provider_disabled")),1)]),_:1})])),i(E,{location:"bottom end"},{activator:n(({props:s})=>[i(b,p({class:"buttonicon",variant:"plain",ripple:!1,icon:!0},s),{default:n(()=>[i(k,{icon:"mdi-dots-vertical"})]),_:2},1040)]),default:n(()=>[i(N,null,{default:n(()=>{var s;return[i(m,{class:"list-item-main",title:t.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:C=>M(e.instance_id)},null,8,["title","onClick"]),i(m,{class:"list-item-main",title:e.enabled?t.$t("settings.disable"):t.$t("settings.enable"),"prepend-icon":"mdi-cancel",disabled:o(a).providerManifests[e.domain].builtin,onClick:C=>A(e)},null,8,["title","disabled","onClick"]),o(a).providerManifests[e.domain].documentation?(l(),u(m,{key:0,class:"list-item-main",title:t.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:o(a).providerManifests[e.domain].documentation,target:"_blank"},null,8,["title","href"])):_("",!0),(s=o(a).providers[e.instance_id])!=null&&s.available&&f==o($).MUSIC?(l(),u(m,{key:1,class:"list-item-main",title:t.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:C=>o(a).startSync(void 0,[e.instance_id])},null,8,["title","onClick"])):_("",!0),!o(a).providerManifests[e.domain].builtin&&!o(a).providerManifests[e.domain].load_by_default?(l(),u(m,{key:2,class:"list-item-main",title:t.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:C=>j(e.instance_id)},null,8,["title","onClick"])):_("",!0),i(m,{class:"list-item-main",title:t.$t("settings.reload"),"prepend-icon":"mdi-refresh",onClick:C=>O(e.instance_id)},null,8,["title","onClick"])]}),_:2},1024)]),_:2},1024)])]}),_:2},1032,["onClick"])),[[R,()=>{M(e.instance_id)}]])),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})}}});export{ke as default};
