import{l as j,I as x,r as _,w as N,q as u,y as g,j as s,x as i,K as c,N as r,v as m,L as l,M as d,O as f}from"./index-4e9c0066.js";import{_ as $}from"./EditConfig.vue_vue_type_style_index_0_lang-8228ada2.js";import{n as B}from"./index.browser-7e542916.js";import{f as O,b as p,g as E}from"./VCard-e45f718f.js";import{V as y}from"./VDivider-267318d1.js";import{k as S}from"./VBtn-61a2102f.js";import{c as T}from"./VMenu-1368abb6.js";import"./VExpansionPanel-d4b6f258.js";import"./VLabel-93f5b94a.js";import"./VSpacer-a4df716c.js";import"./VDialog-cb2c1193.js";import"./VCheckboxBtn-e7c81f63.js";import"./VSelect-9c82ccea.js";const D={key:0,style:{"margin-left":"-5px","margin-right":"-5px"}},I=l("br",null,null,-1),q=["href"],z=l("br",null,null,-1),A=l("br",null,null,-1),K=l("br",null,null,-1),Z=j({__name:"EditCoreConfig",props:{domain:{}},setup(h){const C=h,V=x(),e=_(),b=B(11),o=_(!1);N(()=>C.domain,async t=>{t&&(e.value=await f.getCoreConfig(t))},{immediate:!0});const k=async function(t){o.value=!0,f.saveCoreConfig(e.value.domain,t).then(()=>{o.value=!1,V.push({name:"providersettings"})}).catch(n=>{alert(n),o.value=!1})},w=async function(t,n){o.value=!0;for(const a of Object.values(e.value.values))a.value!==void 0&&n[a.key]==null&&(n[a.key]=a.value);n.session_id=b,f.getCoreConfigEntries(e.value.domain,t,n).then(a=>{e.value.values={};for(const v of a)e.value.values[v.key]=v;o.value=!1}).catch(a=>{alert(a),o.value=!1})};return(t,n)=>(u(),g("section",null,[s(E,null,{default:i(()=>[e.value?(u(),g("div",D,[s(O,null,{default:i(()=>[c(r(t.$t("settings.setup_provider",[e.value.manifest.name])),1)]),_:1}),s(p,null,{default:i(()=>[c(r(e.value.manifest.description),1)]),_:1}),I,e.value.manifest.codeowners.length?(u(),m(p,{key:0},{default:i(()=>[l("b",null,r(t.$t("settings.codeowners"))+": ",1),c(r(e.value.manifest.codeowners.join(" / ")),1)]),_:1})):d("",!0),e.value.manifest.documentation?(u(),m(p,{key:1},{default:i(()=>[l("b",null,r(t.$t("settings.need_help_setup_provider")),1),c("Â  "),l("a",{href:e.value.manifest.documentation,target:"_blank"},r(t.$t("settings.check_docs")),9,q)]),_:1})):d("",!0),z,s(y),A,K])):d("",!0),s(y),e.value?(u(),m($,{key:1,"config-entries":Object.values(e.value.values),disabled:!1,onSubmit:k,onAction:w},null,8,["config-entries"])):d("",!0)]),_:1}),s(T,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=a=>o.value=a),scrim:"true",persistent:"",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[s(S,{indeterminate:"",size:"64",color:"primary"})]),_:1},8,["modelValue"])]))}});export{Z as default};
