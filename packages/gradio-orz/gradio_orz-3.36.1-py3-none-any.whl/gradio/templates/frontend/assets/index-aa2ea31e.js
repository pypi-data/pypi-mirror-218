import{S as J,i as L,s as M,H as N,D as y,h as z,F as B,G as D,r as U,O as ce,u as G,J as I,I as O,N as Y,K as me,L as Z,e as A,f as K,m as p,n as R,t as g,p as H,q as h,o as v,z as C,a3 as be,b as de,a as ge,l as he,a6 as we,a8 as ke,a9 as Ae,aa as pe,aq as ve,ar as ye,y as Fe,ab as Be,j as ze,k as Ue}from"./index-4a731cdb.js";import{B as je}from"./DropdownArrow.svelte_svelte_type_style_lang-25b2145a.js";import{B as ne}from"./BlockLabel-5f2d5dd2.js";import{E as Ee}from"./Empty-e6410b38.js";import{F as W}from"./File-c0a89608.js";import{U as Ne}from"./Upload-42bf873d.js";import{M as Oe}from"./ModifyUpload-0662b573.js";import{n as x,b as Se}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{U as Te}from"./UploadText-67097d3b.js";import"./Blocks-0428e75b.js";const qe=t=>{let l=["B","KB","MB","GB","PB"],n=0;for(;t>1024;)t/=1024,n++;let e=l[n];return t.toFixed(1)+" "+e},$=t=>{var l;return l=t.orig_name||t.name,l.length>30?`${l.substr(0,30)}...`:l},ee=t=>{var l=0;if(Array.isArray(t))for(var n of t)n.size!==void 0&&(l+=n.size);else l=t.size||0;return qe(l)};function le(t,l,n){const e=t.slice();return e[4]=l[n],e[6]=n,e}function Ce(t){let l;return{c(){l=I("Uploading...")},m(n,e){z(n,l,e)},p:D,d(n){n&&U(l)}}}function De(t){let l,n,e,a;return{c(){l=N("a"),n=I("Download"),y(l,"href",e=t[4].data),y(l,"target","_blank"),y(l,"download",a=window.__is_colab__?null:t[4].orig_name||t[4].name),y(l,"class","svelte-xrr240")},m(s,i){z(s,l,i),B(l,n)},p(s,i){i&1&&e!==(e=s[4].data)&&y(l,"href",e),i&1&&a!==(a=window.__is_colab__?null:s[4].orig_name||s[4].name)&&y(l,"download",a)},d(s){s&&U(l)}}}function te(t){let l,n,e=$(t[4])+"",a,s,i,o=ee(t[4])+"",r,d,f,m,u,b;function F(c,j){return c[4].data?De:Ce}let w=F(t),k=w(t);function S(){return t[3](t[4],t[6])}return{c(){l=N("tr"),n=N("td"),a=I(e),s=O(),i=N("td"),r=I(o),d=O(),f=N("td"),k.c(),m=O(),y(n,"class","svelte-xrr240"),y(i,"class","svelte-xrr240"),y(f,"class","download svelte-xrr240"),y(l,"class","file svelte-xrr240"),Y(l,"selectable",t[1])},m(c,j){z(c,l,j),B(l,n),B(n,a),B(l,s),B(l,i),B(i,r),B(l,d),B(l,f),k.m(f,null),B(l,m),u||(b=me(l,"click",S),u=!0)},p(c,j){t=c,j&1&&e!==(e=$(t[4])+"")&&Z(a,e),j&1&&o!==(o=ee(t[4])+"")&&Z(r,o),w===(w=F(t))&&k?k.p(t,j):(k.d(1),k=w(t),k&&(k.c(),k.m(f,null))),j&2&&Y(l,"selectable",t[1])},d(c){c&&U(l),k.d(),u=!1,b()}}}function Ie(t){let l,n,e,a=Array.isArray(t[0])?t[0]:[t[0]],s=[];for(let i=0;i<a.length;i+=1)s[i]=te(le(t,a,i));return{c(){l=N("div"),n=N("table"),e=N("tbody");for(let i=0;i<s.length;i+=1)s[i].c();y(n,"class","file-preview svelte-xrr240"),y(l,"class","file-preview-holder svelte-xrr240")},m(i,o){z(i,l,o),B(l,n),B(n,e);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,[o]){if(o&7){a=Array.isArray(i[0])?i[0]:[i[0]];let r;for(r=0;r<a.length;r+=1){const d=le(i,a,r);s[r]?s[r].p(d,o):(s[r]=te(d),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i:D,o:D,d(i){i&&U(l),ce(s,i)}}}function Je(t,l,n){const e=G();let{value:a}=l,{selectable:s=!1}=l;const i=(o,r)=>e("select",{value:o.orig_name||o.name,index:r});return t.$$set=o=>{"value"in o&&n(0,a=o.value),"selectable"in o&&n(1,s=o.selectable)},[a,s,e,i]}class ae extends J{constructor(l){super(),L(this,l,Je,Ie,M,{value:0,selectable:1})}}function Le(t){let l,n;return l=new Ee({props:{unpadded_box:!0,size:"large",$$slots:{default:[Pe]},$$scope:{ctx:t}}}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&32&&(s.$$scope={dirty:a,ctx:e}),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function Me(t){let l,n;return l=new ae({props:{selectable:t[3],value:t[0]}}),l.$on("select",t[4]),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&8&&(s.selectable=e[3]),a&1&&(s.value=e[0]),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function Pe(t){let l,n;return l=new W({}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function Ge(t){let l,n,e,a,s,i;l=new ne({props:{show_label:t[2],float:t[0]===null,Icon:W,label:t[1]||"File"}});const o=[Me,Le],r=[];function d(f,m){return f[0]?0:1}return e=d(t),a=r[e]=o[e](t),{c(){A(l.$$.fragment),n=O(),a.c(),s=K()},m(f,m){p(l,f,m),z(f,n,m),r[e].m(f,m),z(f,s,m),i=!0},p(f,[m]){const u={};m&4&&(u.show_label=f[2]),m&1&&(u.float=f[0]===null),m&2&&(u.label=f[1]||"File"),l.$set(u);let b=e;e=d(f),e===b?r[e].p(f,m):(R(),g(r[b],1,1,()=>{r[b]=null}),H(),a=r[e],a?a.p(f,m):(a=r[e]=o[e](f),a.c()),h(a,1),a.m(s.parentNode,s))},i(f){i||(h(l.$$.fragment,f),h(a),i=!0)},o(f){g(l.$$.fragment,f),g(a),i=!1},d(f){v(l,f),f&&U(n),r[e].d(f),f&&U(s)}}}function Ke(t,l,n){let{value:e=null}=l,{label:a}=l,{show_label:s=!0}=l,{selectable:i=!1}=l;function o(r){C.call(this,t,r)}return t.$$set=r=>{"value"in r&&n(0,e=r.value),"label"in r&&n(1,a=r.label),"show_label"in r&&n(2,s=r.show_label),"selectable"in r&&n(3,i=r.selectable)},[e,a,s,i,o]}class Re extends J{constructor(l){super(),L(this,l,Ke,Ge,M,{value:0,label:1,show_label:2,selectable:3})}}function He(t){let l,n,e;function a(i){t[12](i)}let s={filetype:t[6],parse_to_data_url:!1,file_count:t[3],$$slots:{default:[Qe]},$$scope:{ctx:t}};return t[5]!==void 0&&(s.dragging=t[5]),l=new Ne({props:s}),de.push(()=>ge(l,"dragging",a)),l.$on("load",t[7]),{c(){A(l.$$.fragment)},m(i,o){p(l,i,o),e=!0},p(i,o){const r={};o&64&&(r.filetype=i[6]),o&8&&(r.file_count=i[3]),o&8192&&(r.$$scope={dirty:o,ctx:i}),!n&&o&32&&(n=!0,r.dragging=i[5],he(()=>n=!1)),l.$set(r)},i(i){e||(h(l.$$.fragment,i),e=!0)},o(i){g(l.$$.fragment,i),e=!1},d(i){v(l,i)}}}function We(t){let l,n,e,a;return l=new Oe({props:{absolute:!0}}),l.$on("clear",t[8]),e=new ae({props:{selectable:t[4],value:t[0]}}),e.$on("select",t[11]),{c(){A(l.$$.fragment),n=O(),A(e.$$.fragment)},m(s,i){p(l,s,i),z(s,n,i),p(e,s,i),a=!0},p(s,i){const o={};i&16&&(o.selectable=s[4]),i&1&&(o.value=s[0]),e.$set(o)},i(s){a||(h(l.$$.fragment,s),h(e.$$.fragment,s),a=!0)},o(s){g(l.$$.fragment,s),g(e.$$.fragment,s),a=!1},d(s){v(l,s),s&&U(n),v(e,s)}}}function Qe(t){let l;const n=t[10].default,e=we(n,t,t[13],null);return{c(){e&&e.c()},m(a,s){e&&e.m(a,s),l=!0},p(a,s){e&&e.p&&(!l||s&8192)&&ke(e,n,a,a[13],l?pe(n,a[13],s,null):Ae(a[13]),null)},i(a){l||(h(e,a),l=!0)},o(a){g(e,a),l=!1},d(a){e&&e.d(a)}}}function Ve(t){let l,n,e,a,s,i;l=new ne({props:{show_label:t[2],Icon:W,float:t[0]===null,label:t[1]||"File"}});const o=[We,He],r=[];function d(f,m){return f[0]?0:1}return e=d(t),a=r[e]=o[e](t),{c(){A(l.$$.fragment),n=O(),a.c(),s=K()},m(f,m){p(l,f,m),z(f,n,m),r[e].m(f,m),z(f,s,m),i=!0},p(f,[m]){const u={};m&4&&(u.show_label=f[2]),m&1&&(u.float=f[0]===null),m&2&&(u.label=f[1]||"File"),l.$set(u);let b=e;e=d(f),e===b?r[e].p(f,m):(R(),g(r[b],1,1,()=>{r[b]=null}),H(),a=r[e],a?a.p(f,m):(a=r[e]=o[e](f),a.c()),h(a,1),a.m(s.parentNode,s))},i(f){i||(h(l.$$.fragment,f),h(a),i=!0)},o(f){g(l.$$.fragment,f),g(a),i=!1},d(f){v(l,f),f&&U(n),r[e].d(f),f&&U(s)}}}function Xe(t,l,n){let{$$slots:e={},$$scope:a}=l,{value:s}=l,{label:i}=l,{show_label:o=!0}=l,{file_count:r="single"}=l,{file_types:d=null}=l,{selectable:f=!1}=l;async function m({detail:c}){n(0,s=c),await be(),b("change",s),b("upload",c)}function u({detail:c}){n(0,s=null),b("change",s),b("clear")}const b=G();let F;d==null?F=null:(d=d.map(c=>c.startsWith(".")?c:c+"/*"),F=d.join(", "));let w=!1;function k(c){C.call(this,t,c)}function S(c){w=c,n(5,w)}return t.$$set=c=>{"value"in c&&n(0,s=c.value),"label"in c&&n(1,i=c.label),"show_label"in c&&n(2,o=c.show_label),"file_count"in c&&n(3,r=c.file_count),"file_types"in c&&n(9,d=c.file_types),"selectable"in c&&n(4,f=c.selectable),"$$scope"in c&&n(13,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&b("drag",w)},[s,i,o,r,f,w,F,m,u,d,e,k,S,a]}class Ye extends J{constructor(l){super(),L(this,l,Xe,Ve,M,{value:0,label:1,show_label:2,file_count:3,file_types:9,selectable:4})}}function Ze(t){let l,n;return l=new Re({props:{selectable:t[9],value:t[14],label:t[5],show_label:t[6]}}),l.$on("select",t[24]),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&512&&(s.selectable=e[9]),a&16384&&(s.value=e[14]),a&32&&(s.label=e[5]),a&64&&(s.show_label=e[6]),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function xe(t){let l,n;return l=new Ye({props:{label:t[5],show_label:t[6],value:t[14],file_count:t[7],file_types:t[8],selectable:t[9],$$slots:{default:[$e]},$$scope:{ctx:t}}}),l.$on("change",t[20]),l.$on("drag",t[21]),l.$on("clear",t[22]),l.$on("select",t[23]),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&32&&(s.label=e[5]),a&64&&(s.show_label=e[6]),a&16384&&(s.value=e[14]),a&128&&(s.file_count=e[7]),a&256&&(s.file_types=e[8]),a&512&&(s.selectable=e[9]),a&134217728&&(s.$$scope={dirty:a,ctx:e}),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function $e(t){let l,n;return l=new Te({props:{type:"file"}}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p:D,i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function el(t){let l,n,e,a,s,i;const o=[t[10],{status:t[16]?"generating":t[10]?.status||"complete"}];let r={};for(let u=0;u<o.length;u+=1)r=Fe(r,o[u]);l=new Be({props:r});const d=[xe,Ze],f=[];function m(u,b){return u[4]==="dynamic"?0:1}return e=m(t),a=f[e]=d[e](t),{c(){A(l.$$.fragment),n=O(),a.c(),s=K()},m(u,b){p(l,u,b),z(u,n,b),f[e].m(u,b),z(u,s,b),i=!0},p(u,b){const F=b&66560?ze(o,[b&1024&&Ue(u[10]),{status:u[16]?"generating":u[10]?.status||"complete"}]):{};l.$set(F);let w=e;e=m(u),e===w?f[e].p(u,b):(R(),g(f[w],1,1,()=>{f[w]=null}),H(),a=f[e],a?a.p(u,b):(a=f[e]=d[e](u),a.c()),h(a,1),a.m(s.parentNode,s))},i(u){i||(h(l.$$.fragment,u),h(a),i=!0)},o(u){g(l.$$.fragment,u),g(a),i=!1},d(u){v(l,u),u&&U(n),f[e].d(u),u&&U(s)}}}function ll(t){let l,n;return l=new je({props:{visible:t[3],variant:t[4]==="dynamic"&&t[0]===null?"dashed":"solid",border_mode:t[15]?"focus":"base",padding:!1,elem_id:t[1],elem_classes:t[2],container:t[11],scale:t[12],min_width:t[13],$$slots:{default:[el]},$$scope:{ctx:t}}}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,[a]){const s={};a&8&&(s.visible=e[3]),a&17&&(s.variant=e[4]==="dynamic"&&e[0]===null?"dashed":"solid"),a&32768&&(s.border_mode=e[15]?"focus":"base"),a&2&&(s.elem_id=e[1]),a&4&&(s.elem_classes=e[2]),a&2048&&(s.container=e[11]),a&4096&&(s.scale=e[12]),a&8192&&(s.min_width=e[13]),a&134334449&&(s.$$scope={dirty:a,ctx:e}),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function tl(t,l,n){let e,{elem_id:a=""}=l,{elem_classes:s=[]}=l,{visible:i=!0}=l,{value:o}=l,r,{mode:d}=l,{root:f}=l,{label:m}=l,{show_label:u}=l,{file_count:b}=l,{file_types:F=["file"]}=l,{root_url:w}=l,{selectable:k=!1}=l,{loading_status:S}=l,{container:c=!1}=l,{scale:j=null}=l,{min_width:Q=void 0}=l;const se=ve("upload_files")??ye;let V=!1,T=!1;const P=G(),ie=({detail:_})=>n(0,o=_),fe=({detail:_})=>n(15,V=_);function re(_){C.call(this,t,_)}function oe(_){C.call(this,t,_)}function ue(_){C.call(this,t,_)}return t.$$set=_=>{"elem_id"in _&&n(1,a=_.elem_id),"elem_classes"in _&&n(2,s=_.elem_classes),"visible"in _&&n(3,i=_.visible),"value"in _&&n(0,o=_.value),"mode"in _&&n(4,d=_.mode),"root"in _&&n(17,f=_.root),"label"in _&&n(5,m=_.label),"show_label"in _&&n(6,u=_.show_label),"file_count"in _&&n(7,b=_.file_count),"file_types"in _&&n(8,F=_.file_types),"root_url"in _&&n(18,w=_.root_url),"selectable"in _&&n(9,k=_.selectable),"loading_status"in _&&n(10,S=_.loading_status),"container"in _&&n(11,c=_.container),"scale"in _&&n(12,j=_.scale),"min_width"in _&&n(13,Q=_.min_width)},t.$$.update=()=>{if(t.$$.dirty&393217&&n(14,e=x(o,f,w)),t.$$.dirty&933905&&JSON.stringify(e)!==JSON.stringify(r)){if(n(19,r=e),e===null)P("change"),n(16,T=!1);else if(!(Array.isArray(e)?e:[e]).every(_=>_.blob))n(16,T=!1);else if(d==="dynamic"){let _=(Array.isArray(e)?e:[e]).map(q=>q.blob),_e=e;n(16,T=!0),se(f,_).then(q=>{_e===e&&(n(16,T=!1),q.error?(Array.isArray(e)?e:[e]).forEach(async(E,X)=>{E.data=await Se(E.blob),E.blob=void 0}):((Array.isArray(e)?e:[e]).forEach((E,X)=>{q.files&&(E.orig_name=E.name,E.name=q.files[X],E.is_file=!0,E.blob=void 0)}),n(19,r=n(14,e=x(o,f,w)))),P("change"),P("upload"))})}}},[o,a,s,i,d,m,u,b,F,k,S,c,j,Q,e,V,T,f,w,r,ie,fe,re,oe,ue]}class nl extends J{constructor(l){super(),L(this,l,tl,ll,M,{elem_id:1,elem_classes:2,visible:3,value:0,mode:4,root:17,label:5,show_label:6,file_count:7,file_types:8,root_url:18,selectable:9,loading_status:10,container:11,scale:12,min_width:13})}}const bl=nl,dl=["static","dynamic"],gl=t=>({type:{input_payload:"{ name: string; data: string }",response_object:"{ orig_name: string; name: string, size: number, data: string, is_file: boolean}"},description:{input_payload:"object with file name and base64 data",response_object:"object that includes path to file. The URL: {ROOT}file={name} contains the data"},example_data:{name:"zip.zip",data:"data:@file/octet-stream;base64,UEsFBgAAAAAAAAAAAAAAAAAAAAAAAA=="}});export{bl as Component,gl as document,dl as modes};
//# sourceMappingURL=index-aa2ea31e.js.map
