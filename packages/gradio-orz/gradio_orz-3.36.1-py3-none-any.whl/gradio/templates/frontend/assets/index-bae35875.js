import{S as ue,i as ce,s as he,T as me,I as L,f as He,h as C,K as P,q as y,n as U,t as z,p as V,r as H,u as Ie,e as N,m as T,o as q,a3 as Le,b as $,z as O,H as E,D as w,N as I,F as G,ao as Ne,O as ge,M as J,E as ee,W as Te,J as be,L as we,y as qe,ab as Me,j as Re,k as Fe}from"./index-4a731cdb.js";import{B as Je}from"./DropdownArrow.svelte_svelte_type_style_lang-25b2145a.js";import{B as Ke}from"./BlockLabel-5f2d5dd2.js";import{E as Oe}from"./Empty-e6410b38.js";import{u as Pe,S as Ue}from"./ShareButton-792925e9.js";import{n as le}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{M as Ve}from"./ModifyUpload-0662b573.js";import{I as de}from"./Image-8dee79e5.js";const We=async l=>l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([e,i])=>e===null?"":await Pe(e.data,"url")))).map(e=>`<img src="${e}" style="height: 400px" />`).join("")}</div>`:"";function te(l,t,e){const i=l.slice();return i[39]=t[e][0],i[40]=t[e][1],i[42]=e,i}function ie(l,t,e){const i=l.slice();return i[39]=t[e],i[43]=t,i[42]=e,i}function ne(l){let t,e;return t=new Ke({props:{show_label:l[1],Icon:de,label:l[2]||"Gallery",disable:l[0]===!1}}),{c(){N(t.$$.fragment)},m(i,n){T(t,i,n),e=!0},p(i,n){const s={};n[0]&2&&(s.show_label=i[1]),n[0]&4&&(s.label=i[2]||"Gallery"),n[0]&1&&(s.disable=i[0]===!1),t.$set(s)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){q(t,i)}}}function Qe(l){let t,e,i,n,s,d,o,a=l[9]!==null&&l[5]&&re(l),u=l[7]&&oe(l),f=l[8],m=[];for(let r=0;r<f.length;r+=1)m[r]=_e(te(l,f,r));return{c(){a&&a.c(),t=L(),e=E("div"),i=E("div"),u&&u.c(),n=L();for(let r=0;r<m.length;r+=1)m[r].c();w(i,"class","grid-container svelte-w0jac3"),w(i,"style",s=l[14]+" "+l[15]+" --object-fit: "+l[6]+"; height: "+l[4]),I(i,"pt-6",l[1]),w(e,"class","grid-wrap svelte-w0jac3"),me(()=>l[35].call(e)),I(e,"fixed-height",!l[4]||l[4]=="auto")},m(r,b){a&&a.m(r,b),C(r,t,b),C(r,e,b),G(e,i),u&&u.m(i,null),G(i,n);for(let c=0;c<m.length;c+=1)m[c]&&m[c].m(i,null);d=Ne(e,l[35].bind(e)),o=!0},p(r,b){if(r[9]!==null&&r[5]?a?(a.p(r,b),b[0]&544&&y(a,1)):(a=re(r),a.c(),y(a,1),a.m(t.parentNode,t)):a&&(U(),z(a,1,1,()=>{a=null}),V()),r[7]?u?(u.p(r,b),b[0]&128&&y(u,1)):(u=oe(r),u.c(),y(u,1),u.m(i,n)):u&&(U(),z(u,1,1,()=>{u=null}),V()),b[0]&768){f=r[8];let c;for(c=0;c<f.length;c+=1){const A=te(r,f,c);m[c]?m[c].p(A,b):(m[c]=_e(A),m[c].c(),m[c].m(i,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=f.length}(!o||b[0]&49232&&s!==(s=r[14]+" "+r[15]+" --object-fit: "+r[6]+"; height: "+r[4]))&&w(i,"style",s),(!o||b[0]&2)&&I(i,"pt-6",r[1]),(!o||b[0]&16)&&I(e,"fixed-height",!r[4]||r[4]=="auto")},i(r){o||(y(a),y(u),o=!0)},o(r){z(a),z(u),o=!1},d(r){a&&a.d(r),r&&H(t),r&&H(e),u&&u.d(),ge(m,r),d()}}}function Xe(l){let t,e;return t=new Oe({props:{unpadded_box:!0,size:"large",$$slots:{default:[Ye]},$$scope:{ctx:l}}}),{c(){N(t.$$.fragment)},m(i,n){T(t,i,n),e=!0},p(i,n){const s={};n[1]&8192&&(s.$$scope={dirty:n,ctx:i}),t.$set(s)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){q(t,i)}}}function re(l){let t,e,i,n,s,d,o,a,u,f,m,r,b;e=new Ve({}),e.$on("clear",l[27]);let c=l[8][l[9]][1]&&ae(l),A=l[8],j=[];for(let g=0;g<A.length;g+=1)j[g]=se(ie(l,A,g));return{c(){t=E("div"),N(e.$$.fragment),i=L(),n=E("img"),a=L(),c&&c.c(),u=L(),f=E("div");for(let g=0;g<j.length;g+=1)j[g].c();w(n,"data-testid","detailed-image"),J(n.src,s=l[8][l[9]][0].data)||w(n,"src",s),w(n,"alt",d=l[8][l[9]][1]||""),w(n,"title",o=l[8][l[9]][1]||null),ee(n,"height","calc(100% - "+(l[8][l[9]][1]?"80px":"60px")+")"),w(n,"class","svelte-w0jac3"),I(n,"with-caption",!!l[8][l[9]][1]),w(f,"class","thumbnails scroll-hide svelte-w0jac3"),w(f,"data-testid","container_el"),w(t,"class","preview svelte-w0jac3")},m(g,B){C(g,t,B),T(e,t,null),G(t,i),G(t,n),G(t,a),c&&c.m(t,null),G(t,u),G(t,f);for(let k=0;k<j.length;k+=1)j[k]&&j[k].m(f,null);l[31](f),m=!0,r||(b=[P(n,"click",l[28]),P(t,"keydown",l[17])],r=!0)},p(g,B){if((!m||B[0]&768&&!J(n.src,s=g[8][g[9]][0].data))&&w(n,"src",s),(!m||B[0]&768&&d!==(d=g[8][g[9]][1]||""))&&w(n,"alt",d),(!m||B[0]&768&&o!==(o=g[8][g[9]][1]||null))&&w(n,"title",o),(!m||B[0]&768)&&ee(n,"height","calc(100% - "+(g[8][g[9]][1]?"80px":"60px")+")"),(!m||B[0]&768)&&I(n,"with-caption",!!g[8][g[9]][1]),g[8][g[9]][1]?c?c.p(g,B):(c=ae(g),c.c(),c.m(t,u)):c&&(c.d(1),c=null),B[0]&1792){A=g[8];let k;for(k=0;k<A.length;k+=1){const D=ie(g,A,k);j[k]?j[k].p(D,B):(j[k]=se(D),j[k].c(),j[k].m(f,null))}for(;k<j.length;k+=1)j[k].d(1);j.length=A.length}},i(g){m||(y(e.$$.fragment,g),m=!0)},o(g){z(e.$$.fragment,g),m=!1},d(g){g&&H(t),q(e),c&&c.d(),ge(j,g),l[31](null),r=!1,Te(b)}}}function ae(l){let t,e=l[8][l[9]][1]+"",i;return{c(){t=E("div"),i=be(e),w(t,"class","caption svelte-w0jac3")},m(n,s){C(n,t,s),G(t,i)},p(n,s){s[0]&768&&e!==(e=n[8][n[9]][1]+"")&&we(i,e)},d(n){n&&H(t)}}}function se(l){let t,e,i,n,s,d,o=l[42],a,u;const f=()=>l[29](t,o),m=()=>l[29](null,o);function r(){return l[30](l[42])}return{c(){t=E("button"),e=E("img"),d=L(),J(e.src,i=l[39][0].data)||w(e,"src",i),w(e,"title",n=l[39][1]||null),w(e,"alt",s=l[39][1]||null),w(e,"class","svelte-w0jac3"),w(t,"class","thumbnail-item thumbnail-small svelte-w0jac3"),I(t,"selected",l[9]===l[42])},m(b,c){C(b,t,c),G(t,e),G(t,d),f(),a||(u=P(t,"click",r),a=!0)},p(b,c){l=b,c[0]&256&&!J(e.src,i=l[39][0].data)&&w(e,"src",i),c[0]&256&&n!==(n=l[39][1]||null)&&w(e,"title",n),c[0]&256&&s!==(s=l[39][1]||null)&&w(e,"alt",s),o!==l[42]&&(m(),o=l[42],f()),c[0]&512&&I(t,"selected",l[9]===l[42])},d(b){b&&H(t),m(),a=!1,u()}}}function oe(l){let t,e,i;return e=new Ue({props:{value:l[8],formatter:We}}),e.$on("share",l[32]),e.$on("error",l[33]),{c(){t=E("div"),N(e.$$.fragment),w(t,"class","icon-button svelte-w0jac3")},m(n,s){C(n,t,s),T(e,t,null),i=!0},p(n,s){const d={};s[0]&256&&(d.value=n[8]),e.$set(d)},i(n){i||(y(e.$$.fragment,n),i=!0)},o(n){z(e.$$.fragment,n),i=!1},d(n){n&&H(t),q(e)}}}function fe(l){let t,e=l[40]+"",i;return{c(){t=E("div"),i=be(e),w(t,"class","caption-label svelte-w0jac3")},m(n,s){C(n,t,s),G(t,i)},p(n,s){s[0]&256&&e!==(e=n[40]+"")&&we(i,e)},d(n){n&&H(t)}}}function _e(l){let t,e,i,n,s,d,o,a,u=l[40]&&fe(l);function f(){return l[34](l[42])}return{c(){t=E("button"),e=E("img"),s=L(),u&&u.c(),d=L(),w(e,"alt",i=l[40]||""),J(e.src,n=typeof l[39]=="string"?l[39]:l[39].data)||w(e,"src",n),w(e,"class","svelte-w0jac3"),w(t,"class","thumbnail-item thumbnail-lg svelte-w0jac3"),I(t,"selected",l[9]===l[42])},m(m,r){C(m,t,r),G(t,e),G(t,s),u&&u.m(t,null),G(t,d),o||(a=P(t,"click",f),o=!0)},p(m,r){l=m,r[0]&256&&i!==(i=l[40]||"")&&w(e,"alt",i),r[0]&256&&!J(e.src,n=typeof l[39]=="string"?l[39]:l[39].data)&&w(e,"src",n),l[40]?u?u.p(l,r):(u=fe(l),u.c(),u.m(t,d)):u&&(u.d(1),u=null),r[0]&512&&I(t,"selected",l[9]===l[42])},d(m){m&&H(t),u&&u.d(),o=!1,a()}}}function Ye(l){let t,e;return t=new de({}),{c(){N(t.$$.fragment)},m(i,n){T(t,i,n),e=!0},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){q(t,i)}}}function Ze(l){let t,e,i,n,s,d,o;me(l[26]);let a=l[1]&&ne(l);const u=[Xe,Qe],f=[];function m(r,b){return r[3]===null||r[8]===null||r[8].length===0?0:1}return e=m(l),i=f[e]=u[e](l),{c(){a&&a.c(),t=L(),i.c(),n=He()},m(r,b){a&&a.m(r,b),C(r,t,b),f[e].m(r,b),C(r,n,b),s=!0,d||(o=P(window,"resize",l[26]),d=!0)},p(r,b){r[1]?a?(a.p(r,b),b[0]&2&&y(a,1)):(a=ne(r),a.c(),y(a,1),a.m(t.parentNode,t)):a&&(U(),z(a,1,1,()=>{a=null}),V());let c=e;e=m(r),e===c?f[e].p(r,b):(U(),z(f[c],1,1,()=>{f[c]=null}),V(),i=f[e],i?i.p(r,b):(i=f[e]=u[e](r),i.c()),y(i,1),i.m(n.parentNode,n))},i(r){s||(y(a),y(i),s=!0)},o(r){z(a),z(i),s=!1},d(r){a&&a.d(r),r&&H(t),f[e].d(r),r&&H(n),d=!1,o()}}}function pe(l,t,e){let i,n,{container:s=!0}=t,{show_label:d=!0}=t,{label:o}=t,{root:a=""}=t,{root_url:u=null}=t,{value:f=null}=t,{grid_cols:m=[2]}=t,{grid_rows:r=void 0}=t,{height:b="auto"}=t,{preview:c}=t,{allow_preview:A=!0}=t,{object_fit:j="cover"}=t,{show_share_button:g=!1}=t;const B=Ie();let k=!0,D=null,R=f,v=c&&f?.length?0:null,K=v;function W(_){switch(_.code){case"Escape":_.preventDefault(),e(9,v=null);break;case"ArrowLeft":_.preventDefault(),e(9,v=i);break;case"ArrowRight":_.preventDefault(),e(9,v=n);break}}let h=[],F;async function ke(_){if(typeof _!="number")return;await Le(),h[_].focus();const{left:S,width:X}=F.getBoundingClientRect(),{left:M,width:Ce}=h[_].getBoundingClientRect(),x=M-S+Ce/2-X/2+F.scrollLeft;F?.scrollTo({left:x<0?0:x,behavior:"smooth"})}let Q=0,Y=0,Z="",p="";function ve(){e(13,Y=window.innerHeight)}const je=()=>e(9,v=null),ye=()=>e(9,v=n);function Ae(_,S){$[_?"unshift":"push"](()=>{h[S]=_,e(10,h)})}const ze=_=>e(9,v=_);function Be(_){$[_?"unshift":"push"](()=>{F=_,e(11,F)})}function Ge(_){O.call(this,l,_)}function De(_){O.call(this,l,_)}const Ee=_=>e(9,v=_);function Se(){Q=this.clientHeight,e(12,Q)}return l.$$set=_=>{"container"in _&&e(0,s=_.container),"show_label"in _&&e(1,d=_.show_label),"label"in _&&e(2,o=_.label),"root"in _&&e(18,a=_.root),"root_url"in _&&e(19,u=_.root_url),"value"in _&&e(3,f=_.value),"grid_cols"in _&&e(20,m=_.grid_cols),"grid_rows"in _&&e(21,r=_.grid_rows),"height"in _&&e(4,b=_.height),"preview"in _&&e(22,c=_.preview),"allow_preview"in _&&e(5,A=_.allow_preview),"object_fit"in _&&e(6,j=_.object_fit),"show_share_button"in _&&e(7,g=_.show_share_button)},l.$$.update=()=>{if(l.$$.dirty[0]&8388616&&e(23,k=f==null||f.length==0?!0:k),l.$$.dirty[0]&786440&&e(8,D=f===null?null:f.map(_=>Array.isArray(_)?[le(_[0],a,u),_[1]]:[le(_,a,u),null])),l.$$.dirty[0]&29360648&&R!==f&&(k?(e(9,v=c&&f?.length?0:null),e(23,k=!1)):e(9,v=v!==null&&f!==null&&v<f.length?v:null),e(24,R=f)),l.$$.dirty[0]&768&&(i=((v??0)+(D?.length??0)-1)%(D?.length??0)),l.$$.dirty[0]&768&&e(16,n=((v??0)+1)%(D?.length??0)),l.$$.dirty[0]&33555200&&v!==K&&(e(25,K=v),v!==null&&B("select",{index:v,value:D?.[v][1]})),l.$$.dirty[0]&544&&A&&ke(v),l.$$.dirty[0]&1048576){let _=["","sm-","md-","lg-","xl-","2xl-"],S=Array.isArray(m)?m:[m];e(14,Z=[0,0,0,0,0,0].map((X,M)=>`--${_[M]}grid-cols: var(--grid-${S?.[M]||S?.[S?.length-1]});`).join(" "))}if(l.$$.dirty[0]&2097152){let _=["","sm-","md-","lg-","xl-","2xl-"],S=Array.isArray(r)?r:[r];e(15,p=[0,0,0,0,0,0].map((X,M)=>`--${_[M]}grid-rows: var(--grid-${S?.[M]||S?.[S?.length-1]});`).join(" "))}},[s,d,o,f,b,A,j,g,D,v,h,F,Q,Y,Z,p,n,W,a,u,m,r,c,k,R,K,ve,je,ye,Ae,ze,Be,Ge,De,Ee,Se]}class xe extends ue{constructor(t){super(),ce(this,t,pe,Ze,he,{container:0,show_label:1,label:2,root:18,root_url:19,value:3,grid_cols:20,grid_rows:21,height:4,preview:22,allow_preview:5,object_fit:6,show_share_button:7},null,[-1,-1])}}function $e(l){let t,e,i,n;const s=[l[0]];let d={};for(let o=0;o<s.length;o+=1)d=qe(d,s[o]);return t=new Me({props:d}),i=new xe({props:{label:l[2],value:l[8],show_label:l[1],root:l[3],root_url:l[4],grid_cols:l[12],grid_rows:l[13],height:l[14],preview:l[15],object_fit:l[17],allow_preview:l[16],show_share_button:l[18]}}),i.$on("select",l[19]),i.$on("share",l[20]),i.$on("error",l[21]),{c(){N(t.$$.fragment),e=L(),N(i.$$.fragment)},m(o,a){T(t,o,a),C(o,e,a),T(i,o,a),n=!0},p(o,a){const u=a&1?Re(s,[Fe(o[0])]):{};t.$set(u);const f={};a&4&&(f.label=o[2]),a&256&&(f.value=o[8]),a&2&&(f.show_label=o[1]),a&8&&(f.root=o[3]),a&16&&(f.root_url=o[4]),a&4096&&(f.grid_cols=o[12]),a&8192&&(f.grid_rows=o[13]),a&16384&&(f.height=o[14]),a&32768&&(f.preview=o[15]),a&131072&&(f.object_fit=o[17]),a&65536&&(f.allow_preview=o[16]),a&262144&&(f.show_share_button=o[18]),i.$set(f)},i(o){n||(y(t.$$.fragment,o),y(i.$$.fragment,o),n=!0)},o(o){z(t.$$.fragment,o),z(i.$$.fragment,o),n=!1},d(o){q(t,o),o&&H(e),q(i,o)}}}function el(l){let t,e;return t=new Je({props:{visible:l[7],variant:"solid",padding:!1,elem_id:l[5],elem_classes:l[6],container:l[9],scale:l[10],min_width:l[11],allow_overflow:!1,height:typeof l[14]=="number"?l[14]:void 0,$$slots:{default:[$e]},$$scope:{ctx:l}}}),{c(){N(t.$$.fragment)},m(i,n){T(t,i,n),e=!0},p(i,[n]){const s={};n&128&&(s.visible=i[7]),n&32&&(s.elem_id=i[5]),n&64&&(s.elem_classes=i[6]),n&512&&(s.container=i[9]),n&1024&&(s.scale=i[10]),n&2048&&(s.min_width=i[11]),n&16384&&(s.height=typeof i[14]=="number"?i[14]:void 0),n&4714783&&(s.$$scope={dirty:n,ctx:i}),t.$set(s)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){q(t,i)}}}function ll(l,t,e){let{loading_status:i}=t,{show_label:n}=t,{label:s}=t,{root:d}=t,{root_url:o}=t,{elem_id:a=""}=t,{elem_classes:u=[]}=t,{visible:f=!0}=t,{value:m=null}=t,{container:r=!1}=t,{scale:b=null}=t,{min_width:c=void 0}=t,{grid_cols:A=[2]}=t,{grid_rows:j=void 0}=t,{height:g="auto"}=t,{preview:B}=t,{allow_preview:k=!0}=t,{object_fit:D="cover"}=t,{show_share_button:R=!1}=t;function v(h){O.call(this,l,h)}function K(h){O.call(this,l,h)}function W(h){O.call(this,l,h)}return l.$$set=h=>{"loading_status"in h&&e(0,i=h.loading_status),"show_label"in h&&e(1,n=h.show_label),"label"in h&&e(2,s=h.label),"root"in h&&e(3,d=h.root),"root_url"in h&&e(4,o=h.root_url),"elem_id"in h&&e(5,a=h.elem_id),"elem_classes"in h&&e(6,u=h.elem_classes),"visible"in h&&e(7,f=h.visible),"value"in h&&e(8,m=h.value),"container"in h&&e(9,r=h.container),"scale"in h&&e(10,b=h.scale),"min_width"in h&&e(11,c=h.min_width),"grid_cols"in h&&e(12,A=h.grid_cols),"grid_rows"in h&&e(13,j=h.grid_rows),"height"in h&&e(14,g=h.height),"preview"in h&&e(15,B=h.preview),"allow_preview"in h&&e(16,k=h.allow_preview),"object_fit"in h&&e(17,D=h.object_fit),"show_share_button"in h&&e(18,R=h.show_share_button)},[i,n,s,d,o,a,u,f,m,r,b,c,A,j,g,B,k,D,R,v,K,W]}class tl extends ue{constructor(t){super(),ce(this,t,ll,el,he,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,grid_cols:12,grid_rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18})}}const cl=tl,hl=["static"],ml=l=>({type:{payload:"Array<{ name: string } | [{ name: string }, string]>"},description:{payload:"list of objects, with filename and optional caption,"}});export{cl as Component,ml as document,hl as modes};
//# sourceMappingURL=index-bae35875.js.map
