import{S as f,i as p,s as h,e as m,m as d,q as g,t as w,o as _,u as y}from"./index-4a731cdb.js";import{I as b}from"./ModifyUpload-0662b573.js";class c extends Error{constructor(t){super(t),this.name="ShareError"}}const R=async(a,t)=>{if(window.__gradio_space__==null)throw new c("Must be on Spaces to share.");let r,e,n;if(t==="url"){const o=await fetch(a);r=await o.blob(),e=o.headers.get("content-type")||"",n=o.headers.get("content-disposition")||""}else r=S(a),e=a.split(";")[0].split(":")[1],n="file"+e.split("/")[1];const s=new File([r],n,{type:e}),i=await fetch("https://huggingface.co/uploads",{method:"POST",body:s,headers:{"Content-Type":s.type,"X-Requested-With":"XMLHttpRequest"}});if(!i.ok){if(i.headers.get("content-type")?.includes("application/json")){const o=await i.json();throw new c(`Upload failed: ${o.error}`)}throw new c("Upload failed.")}return await i.text()};function S(a){for(var t=a.split(","),r=t[0].match(/:(.*?);/)[1],e=atob(t[1]),n=e.length,s=new Uint8Array(n);n--;)s[n]=e.charCodeAt(n);return new Blob([s],{type:r})}function q(a){let t,r;return t=new b({props:{Icon:null,label:"Share",pending:a[2]}}),t.$on("click",a[4]),{c(){m(t.$$.fragment)},m(e,n){d(t,e,n),r=!0},p(e,[n]){const s={};n&4&&(s.pending=e[2]),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){_(t,e)}}}function v(a,t,r){const e=y();let{formatter:n}=t,{value:s}=t,i=!1;const l=async()=>{try{r(2,i=!0);const o=await n(s);e("share",{description:o})}catch(o){console.error(o);let u=o instanceof c?o.message:"Share failed.";e("error",u)}finally{r(2,i=!1)}};return a.$$set=o=>{"formatter"in o&&r(0,n=o.formatter),"value"in o&&r(1,s=o.value)},[n,s,i,e,l]}class T extends f{constructor(t){super(),p(this,t,v,q,h,{formatter:0,value:1})}}export{T as S,R as u};
//# sourceMappingURL=ShareButton-792925e9.js.map
