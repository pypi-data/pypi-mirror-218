{"version":3,"file":"index-827513a3.js","sources":["../../../../js/icons/src/Maximise.svelte","../../../../js/icons/src/Pause.svelte","../../../../js/icons/src/Play.svelte","../../../../js/icons/src/Video.svelte","../../../../js/video/src/utils.ts","../../../../js/video/src/Player.svelte","../../../../js/video/src/Video.svelte","../../../../js/video/src/StaticVideo.svelte","../../../../js/app/src/components/Video/Video.svelte","../../../../js/app/src/components/Video/index.ts"],"sourcesContent":["<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\twidth=\"100%\"\r\n\theight=\"100%\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tfill=\"none\"\r\n\tstroke=\"currentColor\"\r\n\tstroke-width=\"1.5\"\r\n\tstroke-linecap=\"round\"\r\n\tstroke-linejoin=\"round\"\r\n>\r\n\t<path\r\n\t\td=\"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3\"\r\n\t/>\r\n</svg>\r\n","<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\twidth=\"100%\"\r\n\theight=\"100%\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tfill=\"none\"\r\n\tstroke=\"currentColor\"\r\n\tstroke-width=\"1.5\"\r\n\tstroke-linecap=\"round\"\r\n\tstroke-linejoin=\"round\"\r\n>\r\n\t<rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" />\r\n\t<rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" />\r\n</svg>\r\n","<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\twidth=\"100%\"\r\n\theight=\"100%\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tfill=\"none\"\r\n\tstroke=\"currentColor\"\r\n\tstroke-width=\"1.5\"\r\n\tstroke-linecap=\"round\"\r\n\tstroke-linejoin=\"round\"\r\n>\r\n\t<polygon points=\"5 3 19 12 5 21 5 3\" />\r\n</svg>\r\n","<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\twidth=\"100%\"\r\n\theight=\"100%\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tfill=\"none\"\r\n\tstroke=\"currentColor\"\r\n\tstroke-width=\"1.5\"\r\n\tstroke-linecap=\"round\"\r\n\tstroke-linejoin=\"round\"\r\n\tclass=\"feather feather-video\"\r\n>\r\n\t<polygon points=\"23 7 16 12 23 17 23 7\" />\r\n\t<rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\" />\r\n</svg>\r\n","import type { ActionReturn } from \"svelte/action\";\r\n\r\nexport const prettyBytes = (bytes: number): string => {\r\n\tlet units = [\"B\", \"KB\", \"MB\", \"GB\", \"PB\"];\r\n\tlet i = 0;\r\n\twhile (bytes > 1024) {\r\n\t\tbytes /= 1024;\r\n\t\ti++;\r\n\t}\r\n\tlet unit = units[i];\r\n\treturn bytes.toFixed(1) + \" \" + unit;\r\n};\r\n\r\nexport const playable = (): boolean => {\r\n\t// let video_element = document.createElement(\"video\");\r\n\t// let mime_type = mime.lookup(filename);\r\n\t// return video_element.canPlayType(mime_type) != \"\";\r\n\treturn true; // FIX BEFORE COMMIT - mime import causing issues\r\n};\r\n\r\nexport function loaded(\r\n\tnode: HTMLVideoElement,\r\n\t{ autoplay }: { autoplay: boolean }\r\n): ActionReturn {\r\n\tasync function handle_playback(): Promise<void> {\r\n\t\tif (!autoplay) return;\r\n\t\tawait node.play();\r\n\t}\r\n\r\n\tnode.addEventListener(\"loadeddata\", handle_playback);\r\n\r\n\treturn {\r\n\t\tdestroy(): void {\r\n\t\t\tnode.removeEventListener(\"loadeddata\", handle_playback);\r\n\t\t}\r\n\t};\r\n}\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { Play, Pause, Maximise, Undo } from \"@gradio/icons\";\r\n\timport { loaded } from \"./utils\";\r\n\r\n\texport let src: string;\r\n\texport let subtitle: string | null = null;\r\n\texport let mirror: boolean;\r\n\texport let autoplay: boolean;\r\n\texport let label = \"test\";\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tplay: undefined;\r\n\t\tpause: undefined;\r\n\t\tstop: undefined;\r\n\t\tend: undefined;\r\n\t}>();\r\n\r\n\tlet time = 0;\r\n\tlet duration: number;\r\n\tlet paused = true;\r\n\tlet video: HTMLVideoElement;\r\n\r\n\tfunction handleMove(e: TouchEvent | MouseEvent): void {\r\n\t\tif (!duration) return;\r\n\r\n\t\tif (e.type === \"click\") {\r\n\t\t\thandle_click(e as MouseEvent);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.type !== \"touchmove\" && !((e as MouseEvent).buttons & 1)) return;\r\n\r\n\t\tconst clientX =\r\n\t\t\te.type === \"touchmove\"\r\n\t\t\t\t? (e as TouchEvent).touches[0].clientX\r\n\t\t\t\t: (e as MouseEvent).clientX;\r\n\t\tconst { left, right } = (\r\n\t\t\te.currentTarget as HTMLProgressElement\r\n\t\t).getBoundingClientRect();\r\n\t\ttime = (duration * (clientX - left)) / (right - left);\r\n\t}\r\n\r\n\tasync function play_pause(): Promise<void> {\r\n\t\tif (document.fullscreenElement != video) {\r\n\t\t\tconst isPlaying =\r\n\t\t\t\tvideo.currentTime > 0 &&\r\n\t\t\t\t!video.paused &&\r\n\t\t\t\t!video.ended &&\r\n\t\t\t\tvideo.readyState > video.HAVE_CURRENT_DATA;\r\n\r\n\t\t\tif (!isPlaying) {\r\n\t\t\t\tawait video.play();\r\n\t\t\t} else video.pause();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handle_click(e: MouseEvent): void {\r\n\t\tconst { left, right } = (\r\n\t\t\te.currentTarget as HTMLProgressElement\r\n\t\t).getBoundingClientRect();\r\n\t\ttime = (duration * (e.clientX - left)) / (right - left);\r\n\t}\r\n\r\n\tfunction format(seconds: number): string {\r\n\t\tif (isNaN(seconds) || !isFinite(seconds)) return \"...\";\r\n\r\n\t\tconst minutes = Math.floor(seconds / 60);\r\n\t\tlet _seconds: number | string = Math.floor(seconds % 60);\r\n\t\tif (seconds < 10) _seconds = `0${_seconds}`;\r\n\r\n\t\treturn `${minutes}:${_seconds}`;\r\n\t}\r\n\r\n\tfunction handle_end(): void {\r\n\t\tdispatch(\"stop\");\r\n\t\tdispatch(\"end\");\r\n\t}\r\n</script>\r\n\r\n<div class=\"wrap\">\r\n\t<video\r\n\t\t{src}\r\n\t\tpreload=\"auto\"\r\n\t\ton:click={play_pause}\r\n\t\ton:play\r\n\t\ton:pause\r\n\t\ton:ended={handle_end}\r\n\t\tbind:currentTime={time}\r\n\t\tbind:duration\r\n\t\tbind:paused\r\n\t\tbind:this={video}\r\n\t\tclass:mirror\r\n\t\tuse:loaded={{ autoplay }}\r\n\t\tdata-testid={`${label}-player`}\r\n\t>\r\n\t\t<track kind=\"captions\" src={subtitle} default />\r\n\t</video>\r\n\r\n\t<div class=\"controls\">\r\n\t\t<div class=\"inner\">\r\n\t\t\t<span class=\"icon\" on:click={play_pause}>\r\n\t\t\t\t{#if time === duration}\r\n\t\t\t\t\t<Undo />\r\n\t\t\t\t{:else if paused}\r\n\t\t\t\t\t<Play />\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<Pause />\r\n\t\t\t\t{/if}\r\n\t\t\t</span>\r\n\r\n\t\t\t<span class=\"time\">{format(time)} / {format(duration)}</span>\r\n\t\t\t<progress\r\n\t\t\t\tvalue={time / duration || 0}\r\n\t\t\t\ton:mousemove={handleMove}\r\n\t\t\t\ton:touchmove|preventDefault={handleMove}\r\n\t\t\t\ton:click|stopPropagation|preventDefault={handle_click}\r\n\t\t\t/>\r\n\r\n\t\t\t<div class=\"icon\" on:click={() => video.requestFullscreen()}>\r\n\t\t\t\t<Maximise />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<style lang=\"postcss\">\r\n\tspan {\r\n\t\ttext-shadow: 0 0 8px rgba(0, 0, 0, 0.5);\r\n\t}\r\n\r\n\tprogress {\r\n\t\tmargin-right: var(--size-3);\r\n\t\tborder-radius: var(--radius-sm);\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-2);\r\n\t}\r\n\r\n\tprogress::-webkit-progress-bar {\r\n\t\tborder-radius: 2px;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\tprogress::-webkit-progress-value {\r\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t}\r\n\r\n\tvideo {\r\n\t\tposition: inherit;\r\n\t\tbackground-color: black;\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\tobject-fit: contain;\r\n\t}\r\n\r\n\t.mirror {\r\n\t\ttransform: scaleX(-1);\r\n\t}\r\n\r\n\t.controls {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\topacity: 0;\r\n\t\ttransition: 500ms;\r\n\t\tmargin: var(--size-2);\r\n\t\tborder-radius: var(--radius-md);\r\n\t\tbackground: var(--color-grey-800);\r\n\t\tpadding: var(--size-2) var(--size-1);\r\n\t\twidth: calc(100% - 0.375rem * 2);\r\n\t\twidth: calc(100% - var(--size-2) * 2);\r\n\t}\r\n\t.wrap:hover .controls {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.inner {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding-right: var(--size-2);\r\n\t\tpadding-left: var(--size-2);\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t}\r\n\r\n\t.icon {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tcursor: pointer;\r\n\t\twidth: var(--size-6);\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t.time {\r\n\t\tflex-shrink: 0;\r\n\t\tmargin-right: var(--size-3);\r\n\t\tmargin-left: var(--size-3);\r\n\t\tcolor: white;\r\n\t\tfont-size: var(--text-sm);\r\n\t\tfont-family: var(--font-mono);\r\n\t}\r\n\t.wrap {\r\n\t\tposition: relative;\r\n\t\tbackground-color: var(--background-fill-secondary);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\r\n\timport type { FileData } from \"@gradio/upload\";\r\n\timport { BlockLabel } from \"@gradio/atoms\";\r\n\timport { Webcam } from \"@gradio/image\";\r\n\timport { Video } from \"@gradio/icons\";\r\n\r\n\timport { prettyBytes, playable } from \"./utils\";\r\n\timport Player from \"./Player.svelte\";\r\n\r\n\texport let value: FileData | null = null;\r\n\texport let subtitle: FileData | null = null;\r\n\texport let source: string;\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label = true;\r\n\texport let mirror_webcam = false;\r\n\texport let include_audio: boolean;\r\n\texport let autoplay: boolean;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: any;\r\n\t\tclear: undefined;\r\n\t\tplay: undefined;\r\n\t\tpause: undefined;\r\n\t\tend: undefined;\r\n\t\tdrag: boolean;\r\n\t\terror: string;\r\n\t\tupload: FileData;\r\n\t\tstart_recording: undefined;\r\n\t\tstop_recording: undefined;\r\n\t}>();\r\n\r\n\tfunction handle_load({ detail }: CustomEvent<FileData | null>) {\r\n\t\tdispatch(\"change\", detail);\r\n\t\tdispatch(\"upload\", detail!);\r\n\t\tvalue = detail;\r\n\t}\r\n\r\n\tfunction handle_clear({ detail }: CustomEvent<FileData | null>) {\r\n\t\tvalue = null;\r\n\t\tdispatch(\"change\", detail);\r\n\t\tdispatch(\"clear\");\r\n\t}\r\n\r\n\tlet dragging = false;\r\n\t$: dispatch(\"drag\", dragging);\r\n</script>\r\n\r\n<BlockLabel {show_label} Icon={Video} label={label || \"Video\"} />\r\n{#if value === null}\r\n\t{#if source === \"upload\"}\r\n\t\t<Upload bind:dragging filetype=\"video/x-m4v,video/*\" on:load={handle_load}>\r\n\t\t\t<slot />\r\n\t\t</Upload>\r\n\t{:else if source === \"webcam\"}\r\n\t\t<Webcam\r\n\t\t\t{mirror_webcam}\r\n\t\t\t{include_audio}\r\n\t\t\tmode=\"video\"\r\n\t\t\ton:error\r\n\t\t\ton:capture={({ detail }) => dispatch(\"change\", detail)}\r\n\t\t\ton:start_recording\r\n\t\t\ton:stop_recording\r\n\t\t/>\r\n\t{/if}\r\n{:else}\r\n\t<ModifyUpload on:clear={handle_clear} />\r\n\t{#if playable()}\r\n\t\t{#key value?.data}\r\n\t\t\t<Player\r\n\t\t\t\t{autoplay}\r\n\t\t\t\tsrc={value.data}\r\n\t\t\t\tsubtitle={subtitle?.data}\r\n\t\t\t\ton:play\r\n\t\t\t\ton:pause\r\n\t\t\t\ton:stop\r\n\t\t\t\ton:end\r\n\t\t\t\tmirror={mirror_webcam && source === \"webcam\"}\r\n\t\t\t\t{label}\r\n\t\t\t/>\r\n\t\t{/key}\r\n\t{:else if value.size}\r\n\t\t<div class=\"file-name\">{value.name}</div>\r\n\t\t<div class=\"file-size\">\r\n\t\t\t{prettyBytes(value.size)}\r\n\t\t</div>\r\n\t{/if}\r\n{/if}\r\n\r\n<style>\r\n\t.file-name {\r\n\t\tpadding: var(--size-6);\r\n\t\tfont-size: var(--text-xxl);\r\n\t\tword-break: break-all;\r\n\t}\r\n\r\n\t.file-size {\r\n\t\tpadding: var(--size-2);\r\n\t\tfont-size: var(--text-xl);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher, afterUpdate, tick } from \"svelte\";\r\n\timport { BlockLabel, Empty, IconButton, ShareButton } from \"@gradio/atoms\";\r\n\timport type { FileData } from \"@gradio/upload\";\r\n\timport { Video, Download } from \"@gradio/icons\";\r\n\r\n\timport Player from \"./Player.svelte\";\r\n\r\n\texport let value: FileData | null = null;\r\n\texport let subtitle: FileData | null = null;\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label = true;\r\n\texport let autoplay: boolean;\r\n\texport let show_share_button: boolean = true;\r\n\r\n\tlet old_value: FileData | null = null;\r\n\tlet old_subtitle: FileData | null = null;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: FileData;\r\n\t\tplay: undefined;\r\n\t\tpause: undefined;\r\n\t\tend: undefined;\r\n\t\tstop: undefined;\r\n\t}>();\r\n\r\n\t$: value && dispatch(\"change\", value);\r\n\r\n\tafterUpdate(async () => {\r\n\t\t// needed to bust subtitle caching issues on Chrome\r\n\t\tif (\r\n\t\t\tvalue !== old_value &&\r\n\t\t\tsubtitle !== old_subtitle &&\r\n\t\t\told_subtitle !== null\r\n\t\t) {\r\n\t\t\told_value = value;\r\n\t\t\tvalue = null;\r\n\t\t\tawait tick();\r\n\t\t\tvalue = old_value;\r\n\t\t}\r\n\t\told_value = value;\r\n\t\told_subtitle = subtitle;\r\n\t});\r\n</script>\r\n\r\n<BlockLabel {show_label} Icon={Video} label={label || \"Video\"} />\r\n{#if value === null}\r\n\t<Empty unpadded_box={true} size=\"large\"><Video /></Empty>\r\n{:else}\r\n\t<!-- svelte-ignore a11y-media-has-caption -->\r\n\t{#key value.data}\r\n\t\t<Player\r\n\t\t\tsrc={value.data}\r\n\t\t\tsubtitle={subtitle?.data}\r\n\t\t\t{autoplay}\r\n\t\t\ton:play\r\n\t\t\ton:pause\r\n\t\t\ton:ended\r\n\t\t\tmirror={false}\r\n\t\t\t{label}\r\n\t\t/>\r\n\t{/key}\r\n\t<div class=\"icon-buttons\" data-testid=\"download-div\">\r\n\t\t<a\r\n\t\t\thref={value.data}\r\n\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\r\n\t\t\tdownload={value.orig_name || value.name}\r\n\t\t>\r\n\t\t\t<IconButton Icon={Download} label=\"Download\" />\r\n\t\t</a>\r\n\t\t{#if show_share_button}\r\n\t\t\t<ShareButton\r\n\t\t\t\ton:error\r\n\t\t\t\ton:share\r\n\t\t\t\t{value}\r\n\t\t\t\tformatter={async (value) => {\r\n\t\t\t\t\t return \"\";\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t</div>\r\n{/if}\r\n\r\n<style>\r\n\t.icon-buttons {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: 6px;\r\n\t\tright: 6px;\r\n\t\tgap: var(--size-1);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport type { FileData } from \"@gradio/upload\";\r\n\timport { normalise_file } from \"@gradio/upload\";\r\n\timport { Block } from \"@gradio/atoms\";\r\n\timport { Video, StaticVideo } from \"@gradio/video\";\r\n\timport UploadText from \"../UploadText.svelte\";\r\n\r\n\timport StatusTracker from \"../StatusTracker/StatusTracker.svelte\";\r\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\r\n\timport { _ } from \"svelte-i18n\";\r\n\r\n\texport let elem_id = \"\";\r\n\texport let elem_classes: string[] = [];\r\n\texport let visible = true;\r\n\texport let value: [FileData, FileData | null] | null = null;\r\n\tlet old_value: [FileData, FileData | null] | null = null;\r\n\r\n\texport let label: string;\r\n\texport let source: string;\r\n\texport let root: string;\r\n\texport let root_url: null | string;\r\n\texport let show_label: boolean;\r\n\texport let loading_status: LoadingStatus;\r\n\texport let height: number | undefined;\r\n\texport let width: number | undefined;\r\n\texport let mirror_webcam: boolean;\r\n\texport let include_audio: boolean;\r\n\texport let container = false;\r\n\texport let scale: number | null = null;\r\n\texport let min_width: number | undefined = undefined;\r\n\texport let mode: \"static\" | \"dynamic\";\r\n\texport let autoplay = false;\r\n\texport let show_share_button: boolean = true;\r\n\r\n\tlet _video: FileData | null = null;\r\n\tlet _subtitle: FileData | null = null;\r\n\r\n\t$: {\r\n\t\tif (value != null) {\r\n\t\t\t_video = normalise_file(value[0], root, root_url);\r\n\t\t\t_subtitle = normalise_file(value[1], root, root_url);\r\n\t\t} else {\r\n\t\t\t_video = null;\r\n\t\t\t_subtitle = null;\r\n\t\t}\r\n\t}\r\n\r\n\tlet dragging = false;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: undefined;\r\n\t}>();\r\n\r\n\tfunction handle_change({ detail }: CustomEvent<FileData | null>) {\r\n\t\tif (detail != null) {\r\n\t\t\tvalue = [detail, null] as [FileData, FileData | null];\r\n\t\t} else {\r\n\t\t\tvalue = null;\r\n\t\t}\r\n\r\n\t\tdispatch(\"change\");\r\n\t}\r\n\r\n\t$: {\r\n\t\tif (JSON.stringify(value) !== JSON.stringify(old_value)) {\r\n\t\t\told_value = value;\r\n\t\t\tdispatch(\"change\");\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<Block\r\n\t{visible}\r\n\tvariant={mode === \"dynamic\" && value === null && source === \"upload\"\r\n\t\t? \"dashed\"\r\n\t\t: \"solid\"}\r\n\tborder_mode={dragging ? \"focus\" : \"base\"}\r\n\tpadding={false}\r\n\t{elem_id}\r\n\t{elem_classes}\r\n\t{height}\r\n\t{width}\r\n\t{container}\r\n\t{scale}\r\n\t{min_width}\r\n\tallow_overflow={false}\r\n>\r\n\t<StatusTracker {...loading_status} />\r\n\r\n\t{#if mode === \"static\"}\r\n\t\t<StaticVideo\r\n\t\t\tvalue={_video}\r\n\t\t\tsubtitle={_subtitle}\r\n\t\t\t{label}\r\n\t\t\t{show_label}\r\n\t\t\t{autoplay}\r\n\t\t\t{show_share_button}\r\n\t\t\ton:play\r\n\t\t\ton:pause\r\n\t\t\ton:stop\r\n\t\t\ton:share\r\n\t\t\ton:error\r\n\t\t/>\r\n\t{:else}\r\n\t\t<Video\r\n\t\t\tvalue={_video}\r\n\t\t\tsubtitle={_subtitle}\r\n\t\t\ton:change={handle_change}\r\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\r\n\t\t\ton:error={({ detail }) => {\r\n\t\t\t\tloading_status = loading_status || {};\r\n\t\t\t\tloading_status.status = \"error\";\r\n\t\t\t\tloading_status.message = detail;\r\n\t\t\t}}\r\n\t\t\t{label}\r\n\t\t\t{show_label}\r\n\t\t\t{source}\r\n\t\t\t{mirror_webcam}\r\n\t\t\t{include_audio}\r\n\t\t\t{autoplay}\r\n\t\t\ton:clear\r\n\t\t\ton:play\r\n\t\t\ton:pause\r\n\t\t\ton:upload\r\n\t\t\ton:stop\r\n\t\t\ton:end\r\n\t\t\ton:start_recording\r\n\t\t\ton:stop_recording\r\n\t\t>\r\n\t\t\t<UploadText type=\"video\" />\r\n\t\t</Video>\r\n\t{/if}\r\n</Block>\r\n","export { default as Component } from \"./Video.svelte\";\r\nexport const modes = [\"static\", \"dynamic\"];\r\n\r\nexport const document = (config: Record<string, any>) => ({\r\n\ttype: {\r\n\t\tinput_payload: \"{ name: string; data: string }\",\r\n\t\tresponse_object: \"{ name: string; data: string, is_file: boolean }\"\r\n\t},\r\n\tdescription: {\r\n\t\tinput_payload: \"object with file name and base64 data\",\r\n\t\tresponse_object:\r\n\t\t\t\"object that includes path to video file. The URL: {ROOT}file={name} contains the data\"\r\n\t}\r\n});\r\n"],"names":["insert","target","svg","anchor","append","path","rect0","rect1","polygon","rect","prettyBytes","bytes","units","i","unit","playable","loaded","node","autoplay","handle_playback","t2_value","format","ctx","t4_value","attr","track","track_src_value","div3","video_1","div2","div1","span0","span1","progress","div0","action_destroyer","loaded_action","is_function","dirty","current","set_data","t2","t4","seconds","minutes","_seconds","src","$$props","subtitle","mirror","label","dispatch","createEventDispatcher","time","duration","paused","video","handleMove","e","handle_click","clientX","left","right","play_pause","handle_end","$$value","click_handler","t0_value","t0","previous_key","safe_not_equal","player_changes","Video","blocklabel_changes","value","source","show_label","mirror_webcam","include_audio","handle_load","detail","$$invalidate","handle_clear","dragging","capture_handler","Download","create_if_block_1","a_href_value","a_download_value","div","show_share_button","old_value","old_subtitle","afterUpdate","tick","elem_id","elem_classes","visible","root","root_url","loading_status","height","width","container","scale","min_width","mode","_video","_subtitle","handle_change","normalise_file","modes","document","config"],"mappings":"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"}