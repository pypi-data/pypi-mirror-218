import{S as de,i as he,s as ge,I as K,H as O,D as b,N as q,h as S,K as I,G as le,r as C,W as me,z as oe,b as Z,J as $,L as be,f as al,am as rl,a as te,e as G,F as E,m as P,l as ne,q as M,n as Q,t as z,p as X,o as V,u as Fe,C as x,a2 as Y,A as ce,B as _e,ah as il,y as fl,aa as ul,j as ol,k as cl}from"./index-d3a1fb8c.js";import{a as He,B as _l}from"./Button-54d1361f.js";import{U as dl}from"./Upload-24c7bf6e.js";/* empty css                                                    */import"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{d as hl}from"./dsv-576afacd.js";var De=Object.prototype.hasOwnProperty;function se(s,e){var l,t;if(s===e)return!0;if(s&&e&&(l=s.constructor)===e.constructor){if(l===Date)return s.getTime()===e.getTime();if(l===RegExp)return s.toString()===e.toString();if(l===Array){if((t=s.length)===e.length)for(;t--&&se(s[t],e[t]););return t===-1}if(!l||typeof s=="object"){t=0;for(l in s)if(De.call(s,l)&&++t&&!De.call(e,l)||!(l in e)||!se(s[l],e[l]))return!1;return Object.keys(e).length===t}}return s!==s&&e!==e}function Le(s){let e,l,t;return{c(){e=O("input"),b(e,"tabindex","-1"),e.value=s[0],b(e,"class","svelte-q8uklq"),q(e,"header",s[3])},m(n,r){S(n,e,r),s[7](e),l||(t=[I(e,"keydown",s[6]),I(e,"blur",s[8])],l=!0)},p(n,r){r&1&&e.value!==n[0]&&(e.value=n[0]),r&8&&q(e,"header",n[3])},d(n){n&&C(e),s[7](null),l=!1,me(t)}}}function gl(s){let e;return{c(){e=$(s[0])},m(l,t){S(l,e,t)},p(l,t){t&1&&be(e,l[0])},d(l){l&&C(e)}}}function ml(s){let e,l;return{c(){e=new rl(!1),l=al(),e.a=l},m(t,n){e.m(s[0],t,n),S(t,l,n)},p(t,n){n&1&&e.p(t[0])},d(t){t&&C(l),t&&e.d()}}}function bl(s){let e,l,t,n,r=s[2]&&Le(s);function c(f,o){return f[4]==="markdown"||f[4]==="html"?ml:gl}let i=c(s),_=i(s);return{c(){r&&r.c(),e=K(),l=O("span"),_.c(),b(l,"tabindex","-1"),b(l,"role","button"),b(l,"class","svelte-q8uklq"),q(l,"edit",s[2])},m(f,o){r&&r.m(f,o),S(f,e,o),S(f,l,o),_.m(l,null),t||(n=I(l,"dblclick",s[5]),t=!0)},p(f,[o]){f[2]?r?r.p(f,o):(r=Le(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),i===(i=c(f))&&_?_.p(f,o):(_.d(1),_=i(f),_&&(_.c(),_.m(l,null))),o&4&&q(l,"edit",f[2])},i:le,o:le,d(f){r&&r.d(f),f&&C(e),f&&C(l),_.d(),t=!1,n()}}}function pl(s,e,l){let{edit:t}=e,{value:n=""}=e,{el:r}=e,{header:c=!1}=e,{datatype:i="str"}=e;function _(p){oe.call(this,s,p)}function f(p){oe.call(this,s,p)}function o(p){Z[p?"unshift":"push"](()=>{r=p,l(1,r)})}const m=({currentTarget:p})=>{l(0,n=p.value),p.setAttribute("tabindex","-1")};return s.$$set=p=>{"edit"in p&&l(2,t=p.edit),"value"in p&&l(0,n=p.value),"el"in p&&l(1,r=p.el),"header"in p&&l(3,c=p.header),"datatype"in p&&l(4,i=p.datatype)},[n,r,t,c,i,_,f,o,m]}class Je extends de{constructor(e){super(),he(this,e,pl,bl,ge,{edit:2,value:0,el:1,header:3,datatype:4})}}function Ne(s,e,l){const t=s.slice();return t[53]=e[l],t[55]=l,t}function Be(s,e,l){const t=s.slice();return t[56]=e[l].value,t[57]=e[l].id,t[58]=e,t[59]=l,t}function Ee(s,e,l){const t=s.slice();return t[56]=e[l].value,t[57]=e[l].id,t[60]=e,t[55]=l,t}function qe(s){let e,l;return{c(){e=O("p"),l=$(s[1]),b(e,"class","svelte-1tclfmr")},m(t,n){S(t,e,n),E(e,l)},p(t,n){n[0]&2&&be(l,t[1])},d(t){t&&C(e)}}}function Me(s){let e,l;return{c(){e=O("caption"),l=$(s[1]),b(e,"class","sr-only")},m(t,n){S(t,e,n),E(e,l)},p(t,n){n[0]&2&&be(l,t[1])},d(t){t&&C(e)}}}function Se(s,e){let l,t,n,r,c,i,_,f,o,m,p,h=e[57],A,d,T;function y(w){e[30](w,e[57])}function g(){return e[31](e[57])}let L={value:e[56],edit:e[13]===e[57],header:!0};e[10][e[57]].input!==void 0&&(L.el=e[10][e[57]].input),n=new Je({props:L}),Z.push(()=>te(n,"el",y)),n.$on("keydown",e[21]),n.$on("dblclick",g);function B(){return e[32](e[55])}const v=()=>e[33](l,h),R=()=>e[33](null,h);return{key:s,first:null,c(){l=O("th"),t=O("div"),G(n.$$.fragment),c=K(),i=O("div"),_=x("svg"),f=x("path"),m=K(),b(f,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),b(_,"width","1em"),b(_,"height","1em"),b(_,"viewBox","0 0 9 7"),b(_,"fill","none"),b(_,"xmlns","http://www.w3.org/2000/svg"),b(_,"class","svelte-1tclfmr"),b(i,"class",o="sort-button "+e[11]+" svelte-1tclfmr"),q(i,"sorted",e[12]===e[55]),q(i,"des",e[12]===e[55]&&e[11]==="des"),b(t,"class","cell-wrap svelte-1tclfmr"),b(l,"aria-sort",p=e[15](e[56],e[12],e[11])),b(l,"class","svelte-1tclfmr"),q(l,"editing",e[13]===e[57]),this.first=l},m(w,F){S(w,l,F),E(l,t),P(n,t,null),E(t,c),E(t,i),E(i,_),E(_,f),E(l,m),v(),A=!0,d||(T=I(i,"click",B),d=!0)},p(w,F){e=w;const U={};F[0]&256&&(U.value=e[56]),F[0]&8448&&(U.edit=e[13]===e[57]),!r&&F[0]&1280&&(r=!0,U.el=e[10][e[57]].input,ne(()=>r=!1)),n.$set(U),(!A||F[0]&2048&&o!==(o="sort-button "+e[11]+" svelte-1tclfmr"))&&b(i,"class",o),(!A||F[0]&6400)&&q(i,"sorted",e[12]===e[55]),(!A||F[0]&6400)&&q(i,"des",e[12]===e[55]&&e[11]==="des"),(!A||F[0]&6400&&p!==(p=e[15](e[56],e[12],e[11])))&&b(l,"aria-sort",p),h!==e[57]&&(R(),h=e[57],v()),(!A||F[0]&8448)&&q(l,"editing",e[13]===e[57])},i(w){A||(M(n.$$.fragment,w),A=!0)},o(w){z(n.$$.fragment,w),A=!1},d(w){w&&C(l),V(n),R(),d=!1,T()}}}function Ce(s,e){let l,t,n,r,c,i=e[57],_,f,o;function m(B){e[34](B,e[56],e[58],e[59])}function p(B){e[35](B,e[57])}let h={edit:e[7]===e[57],datatype:Array.isArray(e[0])?e[0][e[59]]:e[0]};e[56]!==void 0&&(h.value=e[56]),e[10][e[57]].input!==void 0&&(h.el=e[10][e[57]].input),n=new Je({props:h}),Z.push(()=>te(n,"value",m)),Z.push(()=>te(n,"el",p));const A=()=>e[36](l,i),d=()=>e[36](null,i);function T(){return e[37](e[57])}function y(){return e[38](e[57])}function g(){return e[39](e[57])}function L(...B){return e[40](e[55],e[59],e[57],...B)}return{key:s,first:null,c(){l=O("td"),t=O("div"),G(n.$$.fragment),b(t,"class","cell-wrap svelte-1tclfmr"),q(t,"border-transparent",e[6]!==e[57]),b(l,"tabindex","0"),b(l,"class","svelte-1tclfmr"),this.first=l},m(B,v){S(B,l,v),E(l,t),P(n,t,null),A(),_=!0,f||(o=[I(l,"touchstart",T,{passive:!0}),I(l,"click",y),I(l,"dblclick",g),I(l,"keydown",L)],f=!0)},p(B,v){e=B;const R={};v[0]&640&&(R.edit=e[7]===e[57]),v[0]&513&&(R.datatype=Array.isArray(e[0])?e[0][e[59]]:e[0]),!r&&v[0]&512&&(r=!0,R.value=e[56],ne(()=>r=!1)),!c&&v[0]&1536&&(c=!0,R.el=e[10][e[57]].input,ne(()=>c=!1)),n.$set(R),(!_||v[0]&576)&&q(t,"border-transparent",e[6]!==e[57]),i!==e[57]&&(d(),i=e[57],A())},i(B){_||(M(n.$$.fragment,B),_=!0)},o(B){z(n.$$.fragment,B),_=!1},d(B){B&&C(l),V(n),d(),f=!1,me(o)}}}function Oe(s,e){let l,t=[],n=new Map,r,c,i=e[53];const _=f=>f[57];for(let f=0;f<i.length;f+=1){let o=Be(e,i,f),m=_(o);n.set(m,t[f]=Ce(m,o))}return{key:s,first:null,c(){l=O("tr");for(let f=0;f<t.length;f+=1)t[f].c();r=K(),b(l,"class","svelte-1tclfmr"),this.first=l},m(f,o){S(f,l,o);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(l,null);E(l,r),c=!0},p(f,o){e=f,o[0]&460481&&(i=e[53],Q(),t=ce(t,o,_,1,e,i,n,l,_e,Ce,r,Be),X())},i(f){if(!c){for(let o=0;o<i.length;o+=1)M(t[o]);c=!0}},o(f){for(let o=0;o<t.length;o+=1)z(t[o]);c=!1},d(f){f&&C(l);for(let o=0;o<t.length;o+=1)t[o].d()}}}function wl(s){let e,l,t,n,r=[],c=new Map,i,_,f=[],o=new Map,m,p=s[1]&&s[1].length!==0&&Me(s),h=s[8];const A=y=>y[57];for(let y=0;y<h.length;y+=1){let g=Ee(s,h,y),L=A(g);c.set(L,r[y]=Se(L,g))}let d=s[9];const T=y=>y[53];for(let y=0;y<d.length;y+=1){let g=Ne(s,d,y),L=T(g);o.set(L,f[y]=Oe(L,g))}return{c(){e=O("table"),p&&p.c(),l=K(),t=O("thead"),n=O("tr");for(let y=0;y<r.length;y+=1)r[y].c();i=K(),_=O("tbody");for(let y=0;y<f.length;y+=1)f[y].c();b(n,"class","svelte-1tclfmr"),b(t,"class","svelte-1tclfmr"),b(_,"class","svelte-1tclfmr"),b(e,"class","svelte-1tclfmr"),q(e,"dragging",s[14])},m(y,g){S(y,e,g),p&&p.m(e,null),E(e,l),E(e,t),E(t,n);for(let L=0;L<r.length;L+=1)r[L]&&r[L].m(n,null);E(e,i),E(e,_);for(let L=0;L<f.length;L+=1)f[L]&&f[L].m(_,null);m=!0},p(y,g){y[1]&&y[1].length!==0?p?p.p(y,g):(p=Me(y),p.c(),p.m(e,l)):p&&(p.d(1),p=null),g[0]&3718400&&(h=y[8],Q(),r=ce(r,g,A,1,y,h,c,n,_e,Se,null,Ee),X()),g[0]&460481&&(d=y[9],Q(),f=ce(f,g,T,1,y,d,o,_,_e,Oe,null,Ne),X()),(!m||g[0]&16384)&&q(e,"dragging",y[14])},i(y){if(!m){for(let g=0;g<h.length;g+=1)M(r[g]);for(let g=0;g<d.length;g+=1)M(f[g]);m=!0}},o(y){for(let g=0;g<r.length;g+=1)z(r[g]);for(let g=0;g<f.length;g+=1)z(f[g]);m=!1},d(y){y&&C(e),p&&p.d();for(let g=0;g<r.length;g+=1)r[g].d();for(let g=0;g<f.length;g+=1)f[g].d()}}}function Te(s){let e,l,t,n=s[3][1]==="dynamic"&&Re(s),r=s[2][1]==="dynamic"&&ze(s);return{c(){e=O("div"),n&&n.c(),l=K(),r&&r.c(),b(e,"class","controls-wrap svelte-1tclfmr")},m(c,i){S(c,e,i),n&&n.m(e,null),E(e,l),r&&r.m(e,null),t=!0},p(c,i){c[3][1]==="dynamic"?n?(n.p(c,i),i[0]&8&&M(n,1)):(n=Re(c),n.c(),M(n,1),n.m(e,l)):n&&(Q(),z(n,1,1,()=>{n=null}),X()),c[2][1]==="dynamic"?r?(r.p(c,i),i[0]&4&&M(r,1)):(r=ze(c),r.c(),M(r,1),r.m(e,null)):r&&(Q(),z(r,1,1,()=>{r=null}),X())},i(c){t||(M(n),M(r),t=!0)},o(c){z(n),z(r),t=!1},d(c){c&&C(e),n&&n.d(),r&&r.d()}}}function Re(s){let e,l,t;return l=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[kl]},$$scope:{ctx:s}}}),l.$on("click",s[43]),{c(){e=O("span"),G(l.$$.fragment),b(e,"class","button-wrap svelte-1tclfmr")},m(n,r){S(n,e,r),P(l,e,null),t=!0},p(n,r){const c={};r[1]&1073741824&&(c.$$scope={dirty:r,ctx:n}),l.$set(c)},i(n){t||(M(l.$$.fragment,n),t=!0)},o(n){z(l.$$.fragment,n),t=!1},d(n){n&&C(e),V(l)}}}function kl(s){let e,l,t;return{c(){e=x("svg"),l=x("path"),t=$(`\r
						New row`),b(l,"fill","currentColor"),b(l,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-1tclfmr")},m(n,r){S(n,e,r),E(e,l),S(n,t,r)},p:le,d(n){n&&C(e),n&&C(t)}}}function ze(s){let e,l,t;return l=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[yl]},$$scope:{ctx:s}}}),l.$on("click",s[23]),{c(){e=O("span"),G(l.$$.fragment),b(e,"class","button-wrap svelte-1tclfmr")},m(n,r){S(n,e,r),P(l,e,null),t=!0},p(n,r){const c={};r[1]&1073741824&&(c.$$scope={dirty:r,ctx:n}),l.$set(c)},i(n){t||(M(l.$$.fragment,n),t=!0)},o(n){z(l.$$.fragment,n),t=!1},d(n){n&&C(e),V(l)}}}function yl(s){let e,l,t;return{c(){e=x("svg"),l=x("path"),t=$(`\r
						New column`),b(l,"fill","currentColor"),b(l,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-1tclfmr")},m(n,r){S(n,e,r),E(e,l),S(n,t,r)},p:le,d(n){n&&C(e),n&&C(t)}}}function vl(s){let e,l,t,n,r,c,i,_,f,o=s[1]&&s[1].length!==0&&qe(s);function m(A){s[41](A)}let p={flex:!1,center:!1,boundedheight:!1,disable_click:!0,$$slots:{default:[wl]},$$scope:{ctx:s}};s[14]!==void 0&&(p.dragging=s[14]),n=new dl({props:p}),Z.push(()=>te(n,"dragging",m)),n.$on("load",s[42]);let h=s[4]&&Te(s);return{c(){e=O("div"),o&&o.c(),l=K(),t=O("div"),G(n.$$.fragment),c=K(),h&&h.c(),b(t,"class","table-wrap scroll-hide svelte-1tclfmr"),q(t,"dragging",s[14]),q(t,"no-wrap",!s[5]),b(e,"class","svelte-1tclfmr"),q(e,"label",s[1]&&s[1].length!==0)},m(A,d){S(A,e,d),o&&o.m(e,null),E(e,l),E(e,t),P(n,t,null),E(e,c),h&&h.m(e,null),i=!0,_||(f=[I(window,"click",s[24]),I(window,"touchstart",s[24])],_=!0)},p(A,d){A[1]&&A[1].length!==0?o?o.p(A,d):(o=qe(A),o.c(),o.m(e,l)):o&&(o.d(1),o=null);const T={};d[0]&32707|d[1]&1073741824&&(T.$$scope={dirty:d,ctx:A}),!r&&d[0]&16384&&(r=!0,T.dragging=A[14],ne(()=>r=!1)),n.$set(T),(!i||d[0]&16384)&&q(t,"dragging",A[14]),(!i||d[0]&32)&&q(t,"no-wrap",!A[5]),A[4]?h?(h.p(A,d),d[0]&16&&M(h,1)):(h=Te(A),h.c(),M(h,1),h.m(e,null)):h&&(Q(),z(h,1,1,()=>{h=null}),X()),(!i||d[0]&2)&&q(e,"label",A[1]&&A[1].length!==0)},i(A){i||(M(n.$$.fragment,A),M(h),i=!0)},o(A){z(n.$$.fragment,A),z(h),i=!1},d(A){A&&C(e),o&&o.d(),V(n),h&&h.d(),_=!1,me(f)}}}function Al(s,e){return e.filter(l);function l(t){var n=-1;return s.split(`
`).every(r);function r(c){if(!c)return!0;var i=c.split(t).length;return n<0&&(n=i),n===i&&i>1}}}function Dl(s){const e=atob(s.split(",")[1]),l=s.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return new Blob([t],{type:l})}function Ll(s,e,l){let{datatype:t}=e,{label:n=null}=e,{headers:r=[]}=e,{values:c=[[]]}=e,{col_count:i}=e,{row_count:_}=e,{editable:f=!0}=e,{wrap:o=!1}=e,m=!1;const p=Fe();let h=!1;const A=(a,u)=>v[a][u].value;let d={};function T(a){let u=a||[];if(i[1]==="fixed"&&u.length<i[0]){const k=Array(i[0]-u.length).fill("").map((D,N)=>`${N+u.length}`);u=u.concat(k)}return!u||u.length===0?Array(i[0]).fill(0).map((k,D)=>{const N=`h-${D}`;return l(10,d[N]={cell:null,input:null},d),{id:N,value:JSON.stringify(D+1)}}):u.map((k,D)=>{const N=`h-${D}`;return l(10,d[N]={cell:null,input:null},d),{id:N,value:k??""}})}function y(a){const u=a.length>0?a.length:_[0];return Array(_[1]==="fixed"||u<_[0]?_[0]:u).fill(0).map((k,D)=>Array(i[1]==="fixed"?i[0]:a[0].length).fill(0).map((N,J)=>{const j=`${D}-${J}`;return l(10,d[j]={input:null,cell:null},d),{value:a?.[D]?.[J]??"",id:j}}))}let g=T(r),L;async function B(){typeof h=="string"?(await Y(),d[h]?.input?.focus()):typeof m=="string"&&(await Y(),d[m]?.input?.focus())}let v=[[]],R;function w(a,u,k){if(!u)return"none";if(r[u]===a){if(k==="asc")return"ascending";if(k==="des")return"descending"}}function F(a){return v.reduce((u,k,D)=>{const N=k.reduce((J,j,fe)=>a===j.id?fe:J,-1);return N===-1?u:[D,N]},[-1,-1])}async function U(a,u){if(!f||h===a)return;if(u){const[D,N]=F(a);l(9,v[D][N].value="",v)}l(7,h=a),await Y();const{input:k}=d[a];k?.focus()}async function pe(a,u,k,D){let N;switch(a.key){case"ArrowRight":if(h)break;a.preventDefault(),N=v[u][k+1],l(6,m=N?N.id:m);break;case"ArrowLeft":if(h)break;a.preventDefault(),N=v[u][k-1],l(6,m=N?N.id:m);break;case"ArrowDown":if(h)break;a.preventDefault(),N=v[u+1],l(6,m=N?N[k].id:m);break;case"ArrowUp":if(h)break;a.preventDefault(),N=v[u-1],l(6,m=N?N[k].id:m);break;case"Escape":if(!f)break;a.preventDefault(),l(6,m=h),l(7,h=!1);break;case"Enter":if(!f)break;if(a.preventDefault(),a.shiftKey){re(u),await Y();const[sl]=F(D);l(6,m=v[sl+1][k].id)}else h===D?l(7,h=!1):U(D);break;case"Backspace":if(!f)break;h||(a.preventDefault(),l(9,v[u][k].value="",v));break;case"Delete":if(!f)break;h||(a.preventDefault(),l(9,v[u][k].value="",v));break;case"Tab":let J=a.shiftKey?-1:1,j=v[u][k+J],fe=v?.[u+J]?.[J>0?0:g.length-1],ue=j||fe;ue&&(a.preventDefault(),l(6,m=ue?ue.id:m)),l(7,h=!1);break;default:(!h||h&&h!==D)&&a.key.length===1&&U(D,!0);break}}async function we(a){h!==a&&m!==a&&(l(7,h=!1),l(6,m=a))}async function ke(a,u){if(u==="edit"&&typeof a=="string"&&(await Y(),d[a].input?.focus()),u==="edit"&&typeof a=="boolean"&&typeof m=="string"){let k=d[m]?.cell;await Y(),k?.focus()}if(u==="select"&&typeof a=="string"){const{cell:k}=d[a];await Y(),k?.focus()}}let W,ee;function Ue(a,u){u==="asc"?l(9,v=v.sort((k,D)=>k[a].value<D[a].value?-1:1)):u==="des"&&l(9,v=v.sort((k,D)=>k[a].value>D[a].value?-1:1))}function ye(a){typeof ee!="number"||ee!==a?(l(11,W="asc"),l(12,ee=a)):W==="asc"?l(11,W="des"):W==="des"&&l(11,W="asc"),Ue(a,W)}let H;function ve(){if(typeof m=="string"){const a=d[m].input?.value;if(g.find(u=>u.id===m)){let u=g.find(k=>k.id===m);a&&(u.value=a)}else a&&g.push({id:m,value:a})}}async function ae(a,u){!f||i[1]!=="dynamic"||h===a||(l(13,H=a),await Y(),d[a].input?.focus(),u&&d[a].input?.select())}function Ie(a){if(f)switch(a.key){case"Escape":case"Enter":case"Tab":a.preventDefault(),l(6,m=H),l(13,H=!1),ve();break}}function re(a){_[1]==="dynamic"&&(v.splice(a?a+1:v.length,0,Array(v[0].length).fill(0).map((u,k)=>{const D=`${v.length}-${k}`;return l(10,d[D]={cell:null,input:null},d),{id:D,value:""}})),l(9,v),l(27,c),l(29,R),l(26,r))}async function Ke(){if(i[1]!=="dynamic")return;for(let u=0;u<v.length;u++){const k=`${u}-${v[u].length}`;l(10,d[k]={cell:null,input:null},d),v[u].push({id:k,value:""})}const a=`h-${g.length}`;l(10,d[a]={cell:null,input:null},d),g.push({id:a,value:`Header ${g.length+1}`}),l(9,v),l(27,c),l(29,R),l(26,r),l(8,g),l(26,r),l(28,L),l(27,c),await Y(),ae(a,!0)}function Ye(a){typeof h=="string"&&d[h]&&d[h].cell!==a.target&&!d[h].cell?.contains(a?.target)&&l(7,h=!1),typeof H=="string"&&d[H]&&d[H].cell!==a.target&&!d[H].cell?.contains(a.target)&&(l(6,m=H),l(13,H=!1),ve(),l(13,H=!1))}function Ae(a){const u=new FileReader;function k(D){if(!D?.target?.result||typeof D.target.result!="string")return;const[N]=Al(D.target.result,[",","	"]),[J,...j]=hl(N).parseRows(D.target.result);l(8,g=T(i[1]==="fixed"?J.slice(0,i[0]):J)),l(27,c=j),u.removeEventListener("loadend",k)}u.addEventListener("loadend",k),u.readAsText(a)}let ie=!1;function je(a,u){s.$$.not_equal(d[u].input,a)&&(d[u].input=a,l(10,d))}const Ge=a=>ae(a),Pe=a=>ye(a);function Ve(a,u){Z[a?"unshift":"push"](()=>{d[u].cell=a,l(10,d)})}function We(a,u,k,D){k[D].value=a,l(9,v),l(27,c),l(29,R),l(26,r)}function Ze(a,u){s.$$.not_equal(d[u].input,a)&&(d[u].input=a,l(10,d))}function Qe(a,u){Z[a?"unshift":"push"](()=>{d[u].cell=a,l(10,d)})}const Xe=a=>U(a),xe=a=>we(a),$e=a=>U(a),el=(a,u,k,D)=>pe(D,a,u,k);function ll(a){ie=a,l(14,ie)}const tl=a=>Ae(Dl(a.detail.data)),nl=()=>re();return s.$$set=a=>{"datatype"in a&&l(0,t=a.datatype),"label"in a&&l(1,n=a.label),"headers"in a&&l(26,r=a.headers),"values"in a&&l(27,c=a.values),"col_count"in a&&l(2,i=a.col_count),"row_count"in a&&l(3,_=a.row_count),"editable"in a&&l(4,f=a.editable),"wrap"in a&&l(5,o=a.wrap)},s.$$.update=()=>{if(s.$$.dirty[0]&201326592&&(c&&!Array.isArray(c)?(l(26,r=c.headers),l(27,c=c.data.length===0?[Array(r.length).fill("")]:c.data),l(6,m=!1)):c===null&&(l(27,c=[Array(r.length).fill("")]),l(6,m=!1))),s.$$.dirty[0]&64&&m!==!1){const a=m.split("-"),u=parseInt(a[0]),k=parseInt(a[1]);!isNaN(u)&&!isNaN(k)&&p("select",{index:[u,k],value:A(u,k)})}s.$$.dirty[0]&335544320&&(se(r,L)||(l(8,g=T(r)),l(28,L=r),B())),s.$$.dirty[0]&671088640&&(se(c,R)||(l(9,v=y(c)),l(29,R=c),B())),s.$$.dirty[0]&768&&g&&p("change",{data:v.map(a=>a.map(({value:u})=>u)),headers:g.map(a=>a.value)}),s.$$.dirty[0]&128&&ke(h,"edit"),s.$$.dirty[0]&64&&ke(m,"select")},[t,n,i,_,f,o,m,h,g,v,d,W,ee,H,ie,w,U,pe,we,ye,ae,Ie,re,Ke,Ye,Ae,r,c,L,R,je,Ge,Pe,Ve,We,Ze,Qe,Xe,xe,$e,el,ll,tl,nl]}class Nl extends de{constructor(e){super(),he(this,e,Ll,vl,ge,{datatype:0,label:1,headers:26,values:27,col_count:2,row_count:3,editable:4,wrap:5},null,[-1,-1])}}function Bl(s){let e,l,t,n;const r=[s[13]];let c={};for(let i=0;i<r.length;i+=1)c=fl(c,r[i]);return e=new ul({props:c}),t=new Nl({props:{label:s[8],row_count:s[7],col_count:s[6],values:s[0],headers:s[1],editable:s[5]==="dynamic",wrap:s[9],datatype:s[10]}}),t.$on("change",s[16]),t.$on("select",s[17]),{c(){G(e.$$.fragment),l=K(),G(t.$$.fragment)},m(i,_){P(e,i,_),S(i,l,_),P(t,i,_),n=!0},p(i,_){const f=_&8192?ol(r,[cl(i[13])]):{};e.$set(f);const o={};_&256&&(o.label=i[8]),_&128&&(o.row_count=i[7]),_&64&&(o.col_count=i[6]),_&1&&(o.values=i[0]),_&2&&(o.headers=i[1]),_&32&&(o.editable=i[5]==="dynamic"),_&512&&(o.wrap=i[9]),_&1024&&(o.datatype=i[10]),t.$set(o)},i(i){n||(M(e.$$.fragment,i),M(t.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),z(t.$$.fragment,i),n=!1},d(i){V(e,i),i&&C(l),V(t,i)}}}function El(s){let e,l;return e=new _l({props:{visible:s[4],padding:!1,elem_id:s[2],elem_classes:s[3],container:!1,scale:s[11],min_width:s[12],allow_overflow:!1,$$slots:{default:[Bl]},$$scope:{ctx:s}}}),{c(){G(e.$$.fragment)},m(t,n){P(e,t,n),l=!0},p(t,[n]){const r={};n&16&&(r.visible=t[4]),n&4&&(r.elem_id=t[2]),n&8&&(r.elem_classes=t[3]),n&2048&&(r.scale=t[11]),n&4096&&(r.min_width=t[12]),n&1058787&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function ql(s,e,l){let{headers:t=[]}=e,{elem_id:n=""}=e,{elem_classes:r=[]}=e,{visible:c=!0}=e,{value:i={data:[["","",""]],headers:["1","2","3"]}}=e,_=JSON.stringify(i),{value_is_output:f=!1}=e,{mode:o}=e,{col_count:m}=e,{row_count:p}=e,{label:h=null}=e,{wrap:A}=e,{datatype:d}=e,{scale:T=null}=e,{min_width:y=void 0}=e;const g=Fe();let{loading_status:L}=e;function B(){g("change",i),f||g("input")}il(()=>{l(14,f=!1)});const v=({detail:w})=>{l(0,i=w)};function R(w){oe.call(this,s,w)}return s.$$set=w=>{"headers"in w&&l(1,t=w.headers),"elem_id"in w&&l(2,n=w.elem_id),"elem_classes"in w&&l(3,r=w.elem_classes),"visible"in w&&l(4,c=w.visible),"value"in w&&l(0,i=w.value),"value_is_output"in w&&l(14,f=w.value_is_output),"mode"in w&&l(5,o=w.mode),"col_count"in w&&l(6,m=w.col_count),"row_count"in w&&l(7,p=w.row_count),"label"in w&&l(8,h=w.label),"wrap"in w&&l(9,A=w.wrap),"datatype"in w&&l(10,d=w.datatype),"scale"in w&&l(11,T=w.scale),"min_width"in w&&l(12,y=w.min_width),"loading_status"in w&&l(13,L=w.loading_status)},s.$$.update=()=>{s.$$.dirty&32769&&JSON.stringify(i)!==_&&(l(15,_=JSON.stringify(i)),B())},[i,t,n,r,c,o,m,p,h,A,d,T,y,L,f,_,v,R]}class Ml extends de{constructor(e){super(),he(this,e,ql,El,ge,{headers:1,elem_id:2,elem_classes:3,visible:4,value:0,value_is_output:14,mode:5,col_count:6,row_count:7,label:8,wrap:9,datatype:10,scale:11,min_width:12,loading_status:13})}}const Fl=Ml,Hl=["static","dynamic"],Jl=s=>({type:{payload:"{ data: Array<Array<string | number>>; headers: Array<string> }"},description:{payload:"an object with an array of data and an array of headers"},example_data:s.value});export{Fl as Component,Jl as document,Hl as modes};
//# sourceMappingURL=index-513060da.js.map
