(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8170],{18221:function(e,n,t){"use strict";var r;t.d(n,{R:function(){return i}}),function(e){e.AZURE_CONTAINER_INSTANCE="azure_container_instance",e.ECS="ecs",e.GCP_CLOUD_RUN="gcp_cloud_run",e.K8S="k8s",e.LOCAL_PYTHON="local_python",e.PYSPARK="pyspark"}(r||(r={}));var i=[r.AZURE_CONTAINER_INSTANCE,r.ECS,r.GCP_CLOUD_RUN,r.K8S,r.LOCAL_PYTHON,r.PYSPARK]},70814:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(77837),i=t(75582),o=t(82394),u=t(38860),c=t.n(u),l=t(82684),a=t(60547),s=t(41788),f=t(60328),d=t(38341),p=t(67971),v=t(87372),g=t(10919),h=t(55378),y=t(86673),m=t(19711),b=t(82944),_=t(66166),w=t(18221),j=t(11366),x=t(49125),O=t(91427),k=t(7715),Z=t(90211),C=t(28598);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=function(e){var n,t,r,i,u=e.isPipelineUpdating,c=e.pipeline,a=e.updatePipeline,s=(0,l.useRef)(null),P=(0,l.useRef)(null),E=null===c||void 0===c?void 0:c.uuid,S=(0,l.useMemo)((function(){return(null===c||void 0===c?void 0:c.blocks)||[]}),[c]),M=(0,l.useState)(!1),R=M[0],D=M[1],T=(0,l.useState)(!1),A=T[0],U=T[1],L=(0,l.useState)(null),H=L[0],I=L[1],W=(0,_.Z)(c);(0,l.useEffect)((function(){(0,k.Xy)(c,W)||I(c)}),[c,W]);var Y=(0,l.useCallback)((function(e){D(!0),I(e)}),[]),z="".concat(j.g6,"_").concat(E),q=(0,l.useState)({}),F=q[0],G=q[1],J="".concat(j.vF,"_").concat(E),K=(0,l.useState)(!1),X=K[0],B=K[1],Q=(0,l.useCallback)((function(e){G((function(n){var t=e(n);return(0,O.t8)(z,JSON.stringify(t)),t}))}),[z,G]),V=(0,l.useCallback)((function(e){B((function(n){var t=e(n);return(0,O.t8)(J,t),t}))}),[J,B]);(0,l.useEffect)((function(){var e=(0,O.U2)(z);e&&(0,Z.Pb)(e)&&G(JSON.parse(e))}),[z,G]),(0,l.useEffect)((function(){var e=(0,O.U2)(J);e&&B(e)}),[J,B]);var $=(0,l.useMemo)((function(){return null===H||void 0===H?void 0:H.executor_type}),[H]);(0,l.useEffect)((function(){A||!$||w.R.find((function(e){return e===$}))||U(!0)}),[A,$]);var ee=(0,l.useMemo)((function(){return(null===S||void 0===S?void 0:S.filter((function(e){var n=e.uuid;return!(null===F||void 0===F||!F[n])}))).length===S.length}),[S,F]),ne=(0,l.useMemo)((function(){return!(null!==S&&void 0!==S&&S.length)}),[S]);return(0,C.jsxs)(y.Z,{p:x.cd,children:[(0,C.jsx)(b.Z,{label:"Pipeline name",onChange:function(e){return Y((function(n){return N(N({},n),{},{name:e.target.value})}))},primary:!0,required:!0,setContentOnMount:!0,value:(null===H||void 0===H?void 0:H.name)||""}),(0,C.jsxs)(y.Z,{mt:x.HN,children:[(0,C.jsx)(v.Z,{children:"Executor type"}),(0,C.jsxs)(m.ZP,{muted:!0,children:["For more information on this setting, please read the ",(0,C.jsx)(g.Z,{href:"https://docs.mage.ai/production/configuring-production-settings/compute-resource#2-set-executor-type-and-customize-the-compute-resource-of-the-mage-executor",openNewWindow:!0,children:"documentation"}),"."]}),(0,C.jsxs)(y.Z,{mt:1,children:[!A&&(0,C.jsx)(h.Z,{label:"Executor type",onChange:function(e){return Y((function(){return e.target.value}))},primary:!0,ref:s,value:(null===H||void 0===H?void 0:H.executor_type)||"",children:w.R.map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))}),A&&(0,C.jsx)(b.Z,{label:"Executor type",monospace:!0,onChange:function(e){return Y((function(n){return N(N({},n),{},{executor_type:e.target.value})}))},ref:P,setContentOnMount:!0,value:(null===H||void 0===H?void 0:H.executor_type)||""}),(0,C.jsx)(y.Z,{mt:1,children:(0,C.jsx)(g.Z,{muted:!0,onClick:function(){A?(Y((function(e){return N(N({},e),{},{executor_type:null===c||void 0===c?void 0:c.executor_type})})),setTimeout((function(){var e;return null===s||void 0===s||null===(e=s.current)||void 0===e?void 0:e.focus()}),1)):setTimeout((function(){var e;return null===P||void 0===P||null===(e=P.current)||void 0===e?void 0:e.focus()}),1),U(!A)},preventDefault:!0,small:!0,children:A?"Select a preset executor type":"Enter a custom executor type"})})]})]}),(0,C.jsxs)(y.Z,{mt:x.HN,children:[(0,C.jsx)(v.Z,{children:"Retry configuration"}),(0,C.jsxs)(m.ZP,{muted:!0,children:["For more information on this setting, please read the ",(0,C.jsx)(g.Z,{href:"https://docs.mage.ai/orchestration/pipeline-runs/retrying-block-runs",openNewWindow:!0,children:"documentation"}),"."]}),(0,C.jsx)(y.Z,{mt:1,children:(0,C.jsxs)(p.Z,{children:[(0,C.jsx)(b.Z,{label:"Retries",monospace:!0,onChange:function(e){return Y((function(n){return N(N({},n),{},{retry_config:N(N({},null===n||void 0===n?void 0:n.retry_config),{},{retries:"undefined"!==typeof e.target.value&&null!==e.target.value?Number(e.target.value):e.target.value})})}))},setContentOnMount:!0,type:"number",value:(null===H||void 0===H||null===(n=H.retry_config)||void 0===n?void 0:n.retries)||""}),(0,C.jsx)(y.Z,{mr:1}),(0,C.jsx)(b.Z,{label:"Delay",monospace:!0,onChange:function(e){return Y((function(n){return N(N({},n),{},{retry_config:N(N({},null===n||void 0===n?void 0:n.retry_config),{},{delay:"undefined"!==typeof e.target.value&&null!==e.target.value?Number(e.target.value):e.target.value})})}))},setContentOnMount:!0,type:"number",value:(null===H||void 0===H||null===(t=H.retry_config)||void 0===t?void 0:t.delay)||""}),(0,C.jsx)(y.Z,{mr:1}),(0,C.jsx)(b.Z,{label:"Max delay",monospace:!0,onChange:function(e){return Y((function(n){return N(N({},n),{},{retry_config:N(N({},null===n||void 0===n?void 0:n.retry_config),{},{max_delay:"undefined"!==typeof e.target.value&&null!==e.target.value?Number(e.target.value):e.target.value})})}))},setContentOnMount:!0,type:"number",value:(null===H||void 0===H||null===(r=H.retry_config)||void 0===r?void 0:r.max_delay)||""}),(0,C.jsx)(y.Z,{mr:1}),(0,C.jsx)(d.Z,{checked:!(null===H||void 0===H||null===(i=H.retry_config)||void 0===i||!i.exponential_backoff),label:"Exponential backoff",onClick:function(){return Y((function(e){var n;return N(N({},e),{},{retry_config:N(N({},null===e||void 0===e?void 0:e.retry_config),{},{exponential_backoff:!(null!==e&&void 0!==e&&null!==(n=e.retry_config)&&void 0!==n&&n.exponential_backoff)})})}))}})]})})]}),(0,C.jsx)(y.Z,{mt:x.HN,children:(0,C.jsx)(p.Z,{children:(0,C.jsx)(f.Z,{disabled:!R,loading:u,onClick:function(){return a({executor_type:null===H||void 0===H?void 0:H.executor_type,name:null===H||void 0===H?void 0:H.name,retry_config:null===H||void 0===H?void 0:H.retry_config}).then((function(){return D(!1)}))},primary:!0,children:"Save pipeline settings"})})}),(0,C.jsx)(y.Z,{mt:x.HN,children:(0,C.jsx)(d.Z,{checked:ee&&!ne,disabled:ne,label:"Hide all blocks in notebook",onClick:function(){return Q((function(){return ee?{}:null===S||void 0===S?void 0:S.reduce((function(e,n){var t=n.uuid;return N(N({},e),{},(0,o.Z)({},t,!0))}),{})}))}})}),(0,C.jsx)(y.Z,{mt:x.Mq,children:(0,C.jsx)(d.Z,{checked:X,label:"When running a block while editing a pipeline, output the block messages to the logs",onClick:function(){return V((function(e){return!e}))}})})]})},S=t(82531),M=t(59920),R=t(83455),D=t(96510);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function U(e){var n=e.pipeline,t=(0,l.useState)(null),r=t[0],o=t[1],u=null===n||void 0===n?void 0:n.uuid,c=S.ZP.pipelines.detail(u).data,s=A(A({},null===c||void 0===c?void 0:c.pipeline),n),f=(0,R.Db)(S.ZP.pipelines.useUpdate(u,{update_content:!0}),{onSuccess:function(e){return(0,D.wD)(e,{callback:function(e){if(null!==e&&void 0!==e&&e.pipeline){var n=e.pipeline.uuid;u!==n&&(window.location.href="/pipelines/".concat(n,"/settings"))}},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),d=(0,i.Z)(f,2),p=d[0],v=d[1].isLoading;return(0,C.jsx)(a.Z,{breadcrumbs:[{label:function(){return"Settings"}}],errors:r,pageName:M.M.SETTINGS,pipeline:s,setErrors:o,title:function(e){var n=e.name;return"".concat(n," settings")},uuid:"".concat(M.M.SETTINGS,"_").concat(u),children:s&&(0,C.jsx)(E,{isPipelineUpdating:v,pipeline:s,updatePipeline:function(e){return p({pipeline:e})}})})}U.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var L=(0,s.Z)(U)},11366:function(e,n,t){"use strict";t.d(n,{H8:function(){return i},g6:function(){return o},kY:function(){return r},vF:function(){return u}});var r="automatically_name_blocks",i="pipeline_edit_before_tab_selected",o="pipeline_edit_hidden_blocks",u="pipeline_edit_block_output_logs"},90211:function(e,n,t){"use strict";t.d(n,{RA:function(){return s},kC:function(){return f},vg:function(){return m},kE:function(){return x},Mp:function(){return d},Pb:function(){return l},HW:function(){return _},wX:function(){return p},x6:function(){return v},_6:function(){return g},zf:function(){return b},Y6:function(){return j},wE:function(){return O},J3:function(){return h},We:function(){return a},QV:function(){return w},C5:function(){return y}});var r=t(75582),i=t(17717),o=["aged","ancient","autumn","billowing","bitter","black","blue","bold","broken","cold","cool","crimson","damp","dark","dawn","delicate","divine","dry","empty","falling","floral","fragrant","frosty","green","hidden","holy","icy","late","lingering","little","lively","long","misty","morning","muddy","nameless","old","patient","polished","proud","purple","quiet","red","restless","rough","shy","silent","small","snowy","solitary","sparkling","spring","still","summer","throbbing","twilight","wandering","weathered","white","wild","winter","wispy","withered","young"],u=(t(92083),["bird","breeze","brook","bush","butterfly","cherry","cloud","darkness","dawn","dew","dream","dust","feather","field","fire","firefly","flower","fog","forest","frog","frost","glade","glitter","grass","haze","hill","lake","leaf","meadow","moon","morning","mountain","night","paper","pine","pond","rain","resonance","river","sea","shadow","shape","silence","sky","smoke","snow","snowflake","sound","star","sun","sun","sunset","surf","thunder","tree","violet","voice","water","water","waterfall","wave","wildflower","wind","wood"]),c=t(24224);function l(e){if(!e)return!1;try{JSON.parse(e)}catch(n){return!1}return!0}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.split(" ").join(n)}function s(e){return e.split(" ").join("_")}function f(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return String((new Date).getTime()*e)}function p(e){return e.charAt(0).toLowerCase()+e.slice(1)}function v(e){if(null===e||"undefined"===typeof e)return"";var n=e.toString().split("."),t=(0,r.Z)(n,2),i=t[0],o=t[1],u=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return o?"".concat(u,".").concat(o):u}function g(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n,o=void 0!==i&&null!==i;if(o||(i=2),1===i)t=e;else{var u=e.length,c=e[u-1];t="y"===c&&"day"!==e?"".concat(e.slice(0,u-1),"ies"):"".concat(e,"s"===c?"es":"s")}if(o){var l=r?v(i):i;return"".concat(l," ").concat(t)}return t}function h(e){return null===e||void 0===e?void 0:e.replace(/_/g," ")}function y(e){var n=e.length;return"ies"===e.slice(n-3,n)?"".concat(e.slice(0,n-3),"y"):"es"===e.slice(n-2,n)&&"ces"!==e.slice(n-3,n)?e.slice(0,n-2):e.slice(0,n-1)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f(h(e.toLowerCase()))}function b(e){var n,t=[["second",60],["minute",60],["hour",24],["day",7],["week",4],["month",12],["year",null]];return t.forEach((function(i,o){if(!n){var u=(0,r.Z)(i,2),c=u[0],l=u[1],a=t.slice(0,o).reduce((function(e,n){return e*Number(n[1])}),1);e<Number(l)*a&&(n=g(c,Math.round(e/a)))}})),n}function _(e){return!isNaN(e)}function w(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=Math.pow(10,n);return Math.round((e||0)*t)/t}function j(){return"".concat((0,c.mp)(o)," ").concat((0,c.mp)(u))}function x(e){return null===e||void 0===e?void 0:e.toLowerCase().replace(/\W+/g,"_")}function O(e){var n,t=e.split(i.sep),r=t[t.length-1].split(".");return n=1===r.length?r[0]:r.slice(0,-1).join("."),t.slice(0,t.length-1).concat(n).join(i.sep)}},59606:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/settings",function(){return t(70814)}])}},function(e){e.O(0,[844,7607,1424,1005,547,9774,2888,179],(function(){return n=59606,e(e.s=n);var n}));var n=e.O();_N_E=n}]);