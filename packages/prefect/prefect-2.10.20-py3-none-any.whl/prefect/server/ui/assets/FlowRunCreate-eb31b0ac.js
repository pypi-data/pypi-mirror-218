import{aR as v,d as g,y as S,E as b,M as k,v as N,ab as T,c as x,a as D,u as e,b as F,w as m,e as I,o as B,h as p,aS as J,aT as O,aU as P,aV as U,a6 as d,aP as i}from"./index-538dcecb.js";import{u as V}from"./usePageTitle-f05c4385.js";class E extends v{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const $=g({__name:"FlowRunCreate",setup(y){const t=S(),n=b("deploymentId"),s=k(),f=N("parameters",E,void 0),{deployment:a}=T(n),w=async r=>{var u,o;try{const c=await t.deployments.createDeploymentFlowRun(n.value,r),l=((o=(u=r.state)==null?void 0:u.stateDetails)==null?void 0:o.scheduledTime)??void 0,h=!l,C=P(U,{flowRun:c,flowRunRoute:d.flowRun,router:s,immediate:h,startTime:l});i(C,"success"),s.push(d.deployment(n.value))}catch(c){i("Something went wrong trying to create a flow run","error"),console.error(c)}},R=()=>{s.back()},_=x(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return V(_),(r,u)=>{const o=D("p-layout-default");return e(a)?(B(),F(o,{key:0},{header:m(()=>[p(e(J),{deployment:e(a)},null,8,["deployment"])]),default:m(()=>[p(e(O),{deployment:e(a),parameters:e(f),onSubmit:w,onCancel:R},null,8,["deployment","parameters"])]),_:1})):I("",!0)}}});export{$ as default};
