import{d as D,M as E,y as O,R as p,c as r,r as v,O as Q,Q as j,T as q,a as k,b as o,w as c,o as s,h as a,u as e,V as M,g as b,B as P,F as h,Y,S as C,Z,e as d,H as m,_ as G,a0 as I,a1 as J,a2 as K,a3 as W,a4 as X,a5 as $,x as ee,j as se,a6 as te}from"./index-538dcecb.js";import{u as oe}from"./usePageTitle-f05c4385.js";const ne={class:"flow-runs__list"},le={class:"flow-runs__list-controls"},ae={class:"flow-runs__list-controls--right"},ie=D({__name:"FlowRuns",setup(ue){const F=E(),i=O(),w=p(i.flowRuns.getFlowRunsCount,[{}]),g=r(()=>w.executed),S=r(()=>w.response===0),f=v(),V=Q(f,1200),{filter:t,isCustomFilter:x}=j({flowRuns:{nameLike:V}}),_={interval:3e4},R=p(i.flowRuns.getFlowRunsCount,[t],_),T=r(()=>R.response),B=p(i.ui.getFlowRunHistory,[t],_),N=r(()=>B.response??[]),{flowRuns:y,subscription:H}=q(t),n=v([]);function z(){F.push(te.flowRuns())}const L=()=>{n.value=[],H.refresh(),R.refresh()};return oe("Flow Runs"),(re,l)=>{const U=k("p-button"),A=k("p-layout-default");return s(),o(A,{class:"flow-runs"},{header:c(()=>[a(e(M))]),default:c(()=>[g.value?(s(),b(h,{key:0},[S.value?(s(),o(e(P),{key:0})):(s(),b(h,{key:1},[a(e(Y)),e(C).md?(s(),o(e(Z),{key:0,history:N.value,"start-date":e(t).flowRuns.expectedStartTimeAfter,"end-date":e(t).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):d("",!0),m("div",ne,[m("div",le,[m("div",ae,[n.value.length==0?(s(),o(e(G),{key:0,count:T.value,label:"Flow run"},null,8,["count"])):(s(),o(e(I),{key:1,count:n.value.length},null,8,["count"])),a(e(J),{selected:n.value,onDelete:L},null,8,["selected"])]),e(C).md?(s(),o(e(K),{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=u=>f.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):d("",!0),a(e(W),{modelValue:e(t).sort,"onUpdate:modelValue":l[1]||(l[1]=u=>e(t).sort=u)},null,8,["modelValue"])]),a(e(X),{selected:n.value,"onUpdate:selected":l[2]||(l[2]=u=>n.value=u),selectable:"","flow-runs":e(y)},null,8,["selected","flow-runs"]),e(y).length?d("",!0):(s(),o(e($),{key:0},ee({_:2},[e(x)?{name:"actions",fn:c(()=>[a(U,{size:"sm",secondary:"",onClick:z},{default:c(()=>[se(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):d("",!0)]),_:1})}}});export{ie as default};
