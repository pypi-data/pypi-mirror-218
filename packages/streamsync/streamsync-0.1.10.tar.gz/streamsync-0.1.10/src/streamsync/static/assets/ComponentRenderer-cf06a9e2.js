import{d as L,i as B,b as h,q as ne,c as g,o as $,e as x,f as o,t as S,u as N,l as H,_ as w,Q as se,r as T,B as F,R as M,O as U,S as I,U as oe,D as ae,w as O,v as W,h as le,F as ce,y as ie,n as X,p as z,j as q,k as re,s as de,x as ue,P as pe}from"./index-4232d0ff.js";const _e={class:"ChildlessPlaceholder"},ve={class:"content"},me={class:"title"},fe={key:0,class:"message"},he=L({__name:"ChildlessPlaceholder",props:{componentId:null},setup(c){const i=c,y=10,s=B(h.core),{componentId:l}=ne(i),u=g(()=>s.getComponentById(l.value)),p=g(()=>s.getComponentDefinition(u.value.type)),_=(f,r)=>{const n=f.map(C=>s.getComponentDefinition(C)).map(C=>C==null?void 0:C.name);return`${n.slice(0,-1).join(", ")} ${n.length>1?r:""} ${n.at(-1)}`},b=g(()=>{const f=s.getContainableTypes(l.value);let r;return f.length<=y&&(r=`You can add ${_(f,"and")} components`),r});return(f,r)=>($(),x("div",_e,[o("div",ve,[o("div",me,[o("h2",null,"Empty "+S(N(p).name),1)]),N(b)?($(),x("div",fe,S(N(b)),1)):H("",!0)])]))}});const ge=w(he,[["__scopeId","data-v-b958fd6f"]]),ye=c=>()=>M("div",`Component type ${c} not supported.`),Ce={props:["componentId","instancePath","instanceData"],setup(c){const i=B(h.core),y=B(h.builderManager),s=c.componentId,l=g(()=>i.getComponentById(s)),u=se[l.value.type];if(!u)return ye(l.value.type);const p=c.instancePath,_=c.instanceData,{getEvaluatedFields:b,isComponentVisible:f}=U(i),r=b(p),e=g(()=>i.getComponents(s,!0)),n=g(()=>!!y&&y.getMode()!="preview"),v=()=>{if(!(e.value.length>0))return M(ge,{componentId:l.value.id})},C=(t,a=0)=>M(G,{componentId:t,key:`${t}:${a}`,instancePath:[...p,{componentId:t,instanceNumber:a}],instanceData:[..._,T(null)]}),E=(t=0,a=()=>!0,d=!1)=>{const m=P=>M("div",{"data-streamsync-slot-of-id":s,"data-streamsync-position":P}),V=n.value&&!d,k=e.value.filter(a).map((P,K)=>[C(P.id,t),...V?[m(K+1)]:[]]);return[...V?[m(0)]:[]].concat(k.flat())};I(h.evaluatedFields,r),I(h.componentId,s),I(h.isBeingEdited,n),I(h.instancePath,p),I(h.instanceData,_),I(h.renderProxiedComponent,C),I(h.getChildrenVNodes,E);const Q={"data-streamsync-id":s,"data-streamsync-instance-path":(t=>t.map(a=>`${a.componentId}:${a.instanceNumber}`).join(","))(p)},A=T(!1);F(()=>(y==null?void 0:y.getSelectedId())==s,t=>{A.value=t}),F(()=>r,()=>{A.value=!1},{deep:!0});const j=g(()=>e.value.length==0),Y=g(()=>f(s,p)),J=t=>{if(!t.startsWith("$"))return d=>i.forwardEvent(d,p);if(t.startsWith("$goToPage_")){const d=t.substring(10);return m=>i.setActivePageFromKey(d)}return null},Z=g(()=>{const t={};if(l.value.binding){const a=l.value.binding.eventType,d=`on${a.charAt(0).toUpperCase()}${a.slice(1)}`;t[d]=m=>i.forwardEvent(m,p)}return Object.entries(l.value.handlers??{}).forEach(([a,d])=>{const m=`on${a.charAt(0).toUpperCase()}${a.slice(1)}`;t[m]=J(d)}),t}),ee=g(()=>{var d;const t=(d=i.getComponentDefinition(l.value.type))==null?void 0:d.fields;if(!t)return;const a={};return Object.keys(t).forEach(m=>{t[m].applyStyleVariable&&r[m]&&(a[`--${m}`]=r[m].value)}),a}),te=function(){return{class:{component:!0,childless:j.value,selected:A.value},style:{...ee.value,...Y.value?{}:{display:"none"}},...Q,...Z.value,draggable:n.value}};return()=>{const t=n.value?v():void 0,a=({instanceNumber:V=0,componentFilter:k=()=>!0,positionlessSlot:P=!1})=>j.value?P?void 0:t:E(V,k,P),d={...te()};return M(u,d,{default:a})}}};const G=w(Ce,[["__scopeId","data-v-6fe56db3"]]),D=c=>(z("data-v-cbbb395f"),c=c(),q(),c),be=D(()=>o("i",{class:"ri-notification-2-line ri-xl"},null,-1)),Ie={class:"counter"},$e=D(()=>o("div",{class:"balloonFlash"},null,-1)),Pe={class:"main"},Se=D(()=>o("i",{class:"ri-close-line"},null,-1)),xe=D(()=>o("i",{class:"ri-error-warning-fill ri-xl"},null,-1)),Te=[xe],Ee={class:"content"},Me={class:"title"},Ne={class:"time"},Be={class:"message"},Ve=L({__name:"RendererNotifications",setup(c){const y=B(h.core),s=T(!1),l=T(null),u=oe([]),p=f=>{const{type:r,title:e,message:n,code:v}=f;u.unshift({type:r,title:e,message:n,code:v,timestampReceived:new Date}),u.splice(100),l.value.classList.remove("alert"),l.value.offsetWidth,l.value.classList.add("alert")};ae(()=>{y.addMailSubscription("notification",p)});const _=()=>{u.length!=0&&(s.value=!s.value)},b=()=>{u.splice(0),s.value=!1};return(f,r)=>O(($(),x("div",{class:"RendererNotifications",onClick:_},[o("div",{class:"balloon",ref_key:"balloon",ref:l,title:"Toggle notifications"},[be,o("div",Ie,S(u.length),1)],512),$e,O(o("div",Pe,[o("div",{class:"clearContainer"},[o("button",{onClick:b},[Se,le(" Clear all ")])]),($(!0),x(ce,null,ie(u,(e,n)=>($(),x("div",{class:"notification",key:n},[o("div",{class:X(["icon",e.type])},Te,2),o("div",Ee,[o("header",null,[o("strong",Me,S(e.title),1),o("span",Ne,S(e.timestampReceived.toLocaleTimeString()),1)]),o("div",Be,S(e.message),1)])]))),128))],512),[[W,s.value]])],512)),[[W,u.length>0]])}});const we=w(Ve,[["__scopeId","data-v-cbbb395f"]]),De=c=>(z("data-v-6abd8afe"),c=c(),q(),c),Re=De(()=>o("div",{class:"loadingBar"},null,-1)),Ae={class:"rootComponentArea"},ke=L({__name:"ComponentRenderer",setup(c){const i=B(h.core),y=U(i),s=i.getComponents();s.length==0&&console.error("No pages found.");const l=[{componentId:"root",instanceNumber:0}],u=[T(null)],p=T(s[0]),_=y.getEvaluatedFields(l),b=g(()=>{var e,n,v,C,E,R;return{"--accentColor":(e=_.accentColor)==null?void 0:e.value,"--emptinessColor":(n=_.emptinessColor)==null?void 0:n.value,"--containerBackgroundColor":(v=_.parentIdBackgroundColor)==null?void 0:v.value,"--primaryTextColor":(C=_.primaryTextColor)==null?void 0:C.value,"--secondaryTextColor":(E=_.secondaryTextColor)==null?void 0:E.value,"--separatorColor":(R=_.separatorColor)==null?void 0:R.value}}),f=g(()=>i.isMessagePending.value);F(()=>{var e;return(e=_.appName)==null?void 0:e.value},e=>{r(e)},{immediate:!0});function r(e){const n=i.getMode();let v;e&&n=="edit"?v=`${e} | Streamsync Builder`:!e&&n=="edit"?v="Streamsync Builder":e&&n=="run"?v=`${e}`:!e&&n=="run"&&(v="Streamsync App"),document.title=v}return(e,n)=>($(),x("div",{class:X(["ComponentRenderer",{loadingActive:N(f)}]),tabindex:"-1",style:pe(N(b))},[re(we,{class:"notifications"}),Re,o("div",Ae,[p.value?($(),de(G,{key:0,"component-id":p.value.id,"instance-path":l,"instance-data":u},null,8,["component-id"])):H("",!0),ue(e.$slots,"default",{},void 0,!0)])],6))}});const je=w(ke,[["__scopeId","data-v-6abd8afe"]]);export{je as default};
