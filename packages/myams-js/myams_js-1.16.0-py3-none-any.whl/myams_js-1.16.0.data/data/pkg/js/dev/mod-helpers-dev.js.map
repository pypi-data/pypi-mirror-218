{"version":3,"file":"mod-helpers-dev.js","names":["$","MyAMS","helpers","clearValue","evt","target","currentTarget","data","val","clearDatetimeValue","picker","date","scrollTo","parent","anchor","props","exists","require","then","ajax","check","fn","env","baseURL","extext","setLoginHash","form","hash","window","location","setSEOStatus","input","progress","siblings","children","length","Math","min","status","removeClassPrefix","addClass","css","select2ChangeHelper","Promise","resolve","reject","source","amsSelect2HelperTarget","params","callback","amsSelect2HelperType","html","amsSelect2HelperArgument","get","amsSelect2HelperUrl","result","core","getFunctionByName","amsSelect2HelperCallback","initContent","empty","catch","executeFunctionByName","refreshElement","options","element","object_id","config","clearContent","document","replaceWith","content","parents","first","refreshWidget","widget","widget_id","group","addTableRow","selector","table_id","table","dtTable","DataTable","newRow","rows","add","draw","row_id","refreshTableRow","row","remove","refreshImage","image","image_id","attr","src","moveElementToParentEnd","detach","appendTo","addElementToParent","scrollParent","hideDropdown","closest","dropdown","bundle","modules","push","console","debug"],"sources":["mod-helpers.js"],"sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic helpers\n */\n\nconst $ = MyAMS.$;\n\n\nexport const helpers = {\n\n\t/**\n\t * Click handler used to clear input\n\t */\n\tclearValue: (evt) => {\n\t\tconst target = $(evt.currentTarget).data('target');\n\t\tif (target) {\n\t\t\t$(target).val(null);\n\t\t}\n\t},\n\n\t/**\n\t * Click handler used to clear datetime input\n\t */\n\tclearDatetimeValue: (evt) => {\n\t\tconst\n\t\t\ttarget = $(evt.currentTarget).data('target'),\n\t\t\tpicker = $(target).data('datetimepicker');\n\t\tif (picker) {\n\t\t\tpicker.date(null);\n\t\t}\n\t},\n\n\t/**\n\t * Scroll anchor parent element to given anchor\n\t *\n\t * @param anchor: scroll target\n\t * @param parent: scroll parent\n\t * @param props: scroll properties\n\t */\n\tscrollTo: (parent='#content', anchor, {...props}) => {\n\t\tif (typeof anchor === 'string') {\n\t\t\tanchor = $(anchor);\n\t\t}\n\t\tif (anchor.exists()) {\n\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t$(parent).scrollTo(anchor, props);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Store location hash when redirecting to log in form\n\t *\n\t * This helper is used to store window location hash into form input, to redirect\n\t * user correctly after login.\n\t */\n\tsetLoginHash: () => {\n\t\tconst\n\t\t\tform = $('#login_form'),\n\t\t\thash = $(`input[name=\"login_form.widgets.hash\"]`, form);\n\t\thash.val(window.location.hash);\n\t},\n\n\t/**\n\t * SEO input helper\n\t *\n\t * This helper is used to display a small coloured progress bar below a text input\n\t * to display its SEO quality based on text length.\n\t */\n\tsetSEOStatus: (evt) => {\n\t\tconst\n\t\t\tinput = $(evt.target),\n\t\t\tprogress = input.siblings('.progress').children('.progress-bar'),\n\t\t\tlength = Math.min(input.val().length, 100);\n\t\tlet status = 'success';\n\t\tif (length < 20 || length > 80) {\n\t\t\tstatus = 'danger';\n\t\t} else if (length < 40 || length > 66) {\n\t\t\tstatus = 'warning';\n\t\t}\n\t\tprogress.removeClassPrefix('bg-')\n\t\t\t\t.addClass('bg-' + status)\n\t\t\t\t.css('width', length + '%');\n\t},\n\n\t/**\n\t * Select2 change helper\n\t *\n\t * This helper is used to handle a change event on a Select2 input. Data attributes\n\t * defined on Select2 input can be used to define behaviour of this helper:\n\t *  - data-ams-select2-helper-type: can be set to \"html\" when HTML code is loaded via a\n\t *    webservice call, and included into a *target* element\n\t *  - data-ams-select2-helper-url: remote webservice URL\n\t *  - data-ams-select2-helper-target: CSS selector of a DOM element which will receive\n\t *    result of a webservice call\n\t *  - data-ams-select2-helper-argument: name of the argument used to call webservice; if\n\t *    not defined, the used name is 'value'; this argument is filled with the selected value\n\t *    of the Select2 input\n\t *  - data-ams-select2-helper-callback: name of a callback function which can be used to\n\t *    handle webservice result; if no callback is defined, the webservice result will be\n\t *    inserted directly into defined target\n\t */\n\tselect2ChangeHelper: (evt) => {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst\n\t\t\t\tsource = $(evt.currentTarget),\n\t\t\t\tdata = source.data(),\n\t\t\t\ttarget = $(data.amsSelect2HelperTarget),\n\t\t\t\tparams = {};\n\t\t\tlet callback;\n\t\t\tswitch (data.amsSelect2HelperType) {\n\n\t\t\t\tcase 'html':\n\t\t\t\t\ttarget.html('<div class=\"text-center\"><i class=\"fas fa-2x fa-spinner fa-spin\"></i></div>');\n\t\t\t\t\tparams[data.amsSelect2HelperArgument || 'value'] = source.val();\n\t\t\t\t\t$.get(data.amsSelect2HelperUrl, params).then((result) => {\n\t\t\t\t\t\tcallback = MyAMS.core.getFunctionByName(data.amsSelect2HelperCallback) || ((result) => {\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\ttarget.html(result);\n\t\t\t\t\t\t\t\tMyAMS.core.initContent(target).then(() => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(result);\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tcallback = data.amsSelect2HelperCallback;\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(callback, source, data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a DOM element with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - object_id: ID of the refreshed element\n\t *   - content: new element content\n\t */\n\trefreshElement: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet element = $(`[id=\"${options.object_id}\"]`);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, element).then(() => {\n\t\t\t\telement.replaceWith($(options.content));\n\t\t\t\telement = $(`[id=\"${options.object_id}\"]`);\n\t\t\t\tconst parent = element.parents().first();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, parent).then(() => {\n\t\t\t\t\tresolve(element);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a form widget with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated widget properties:\n\t *   - widget_id: ID of the refreshed widget\n\t *   - content: new element content\n\t */\n\trefreshWidget: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet widget = $(`[id=\"${options.widget_id}\"]`),\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, group).then(() => {\n\t\t\t\tgroup.replaceWith($(options.content));\n\t\t\t\twidget = $(`[id=\"${options.widget_id}\"]`);\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, group).then(() => {\n\t\t\t\t\tresolve(widget);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Add new row to table\n\t *\n\t * @param form: optional parent form\n\t * @param options: added row properties:\n\t *  - content: new row content\n\t */\n\taddTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `table[id=\"${options.table_id}\"]`,\n\t\t\t\ttable = $(selector),\n\t\t\t\tdtTable = table.DataTable();\n\t\t\tlet newRow;\n\t\t\tif (options.data) {\n\t\t\t\tdtTable.rows.add(options.data).draw();\n\t\t\t\tnewRow = $(`tr[id=\"${options.row_id}\"]`, table);\n\t\t\t\tresolve(newRow);\n\t\t\t} else {\n\t\t\t\tnewRow = $(options.content);\n\t\t\t\tdtTable.rows.add(newRow).draw();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a table row with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated row properties:\n\t *   - row_id: ID of the refreshed row\n\t *   - content: new row content\n\t */\n\trefreshTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif (options.data) {\n\t\t\t\tif ($.fn.DataTable) {\n\t\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\t\tif (typeof options.data === 'string') {\n\t\t\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\t\t\tdtTable.row.add($(options.data)).draw();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdtTable.row(selector).data(options.data).draw();\n\t\t\t\t\t}\n\t\t\t\t\tresolve(row);\n\t\t\t\t} else {\n\t\t\t\t\treject('No DataTable plug-in available!');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newRow = $(options.content);\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a single image with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: image properties:\n\t *   - image_id: ID of the refreshed image\n\t *   - src: new image source URL\n\t */\n\trefreshImage: (form, options) => {\n\t\tconst image = $(`[id=\"${options.image_id}\"]`);\n\t\timage.attr('src', options.src);\n\t},\n\n\t/**\n\t * Move given element to the end of it's parent\n\t *\n\t * @param element: the element to be moved\n\t * @returns {*}\n\t */\n\tmoveElementToParentEnd: (element) => {\n\t\tconst parent = element.parent();\n\t\treturn element.detach()\n\t\t\t.appendTo(parent);\n\t},\n\n\t/**\n\t * Add given element to the end of specified parent\n\t *\n\t * @param source: event source\n\t * @param element: the provided element\n\t * @param parent: the parent to which element should be added\n\t * @param props: additional props\n\t * @returns {*}\n\t */\n\taddElementToParent: (source, {element, parent, ...props}) => {\n\t\telement = $(element);\n\t\tparent = $(parent);\n\t\tconst result = element.appendTo(parent);\n\t\tif (props.scrollTo) {\n\t\t\tMyAMS.helpers.scrollTo(props.scrollParent, element);\n\t\t}\n\t\treturn result;\n\t},\n\n\t/**\n\t * Toggle dropdown associated with given event target\n\t *\n\t * @param evt: source event\n\t */\n\thideDropdown: (evt) => {\n\t\t$(evt.target).closest('.dropdown-menu').dropdown('hide');\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('helpers');\n\t} else {\n\t\tMyAMS.helpers = helpers;\n\t\tconsole.debug(\"MyAMS: helpers module loaded...\");\n\t}\n}\n"],"mappings":"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"}