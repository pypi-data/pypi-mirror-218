{"version":3,"file":"mod-nav-dev.js","names":["$","MyAMS","MenuHeader","constructor","props","render","text","header","MenuDivider","Menu","items","menu","item","label","link","attr","href","key","val","Object","entries","attrs","icon","addClass","appendTo","badge","status","value","append","children","NavigationMenu","menus","parent","settings","getMenus","nav","undefined","init","find","each","idx","elt","menuItem","length","firstLink","sign","closedSign","on","evt","preventDefault","click","subMenu","slideDown","speed","html","openedSign","activeParent","parents","activeItem","currentTarget","hasClass","removeClass","replace","parentUL","accordion","visibleMenus","visibleIndex","visibleElt","close","parentIndex","parentElt","visibleItem","slideUp","delay","firstUL","is","_initialized","_hammer","_openPage","location","startsWith","hash","toString","reload","window","linkClickHandler","Promise","resolve","reject","handlers","data","stopPropagation","url","target","params","indexOf","split","unserialize","hrefGetter","core","getFunctionByName","ctrlKey","open","linkTarget","form","confirmChangedForm","then","result","skin","loadURL","fn","extend","navigationMenu","options","defaults","amsMenuAccordion","config","useSVGIcons","downIcon","FontAwesome","findIconDefinition","iconName","upIcon","menuFactory","getObject","amsMenuFactory","amsMenuConfig","require","ajax","get","checkURL","ajaxNav","document","handler","tagName","table","stats","logEvent","exists","amsUrl","amsTabLoaded","amsTabLoadOnce","remove","isMobile","dom","root","enableFastclick","check","noClickDelay","env","baseURL","extext","Hammer","Manager","add","Pan","direction","DIRECTION_HORIZONTAL","threshold","switchMenu","restoreState","initElement","element","menuSpeed","setActiveMenu","show","scroll","scrollTop","position","top","height","drawBreadcrumbs","crumb","not","template","i18n","HOME","trim","clone","end","minifyMenu","toggleClass","switchIcon","localStorage","setItem","state","getItem","bundle","modules","push","console","debug"],"sources":["mod-nav.js"],"sourcesContent":["/* global MyAMS, FontAwesome, Hammer */\n/**\n * MyAMS navigation module\n */\n\nconst $ = MyAMS.$;\n\n\n/**\n * Dynamic navigation menu class\n */\nclass MenuHeader {\n\n\tconstructor(props) {\n\t\tthis.props = props;\n\t}\n\n\trender() {\n\t\treturn $('<li class=\"header\"></li>')\n\t\t\t.text(this.props.header || '');\n\t}\n}\n\nclass MenuDivider {\n\n\trender() {\n\t\treturn $('<li class=\"divider\"></li>');\n\t}\n}\n\nclass Menu {\n\n\tconstructor(items) {\n\t\tthis.items = items;\n\t}\n\n\trender() {\n\t\tconst menu = $('<div></div>');\n\t\tfor (const item of this.items) {\n\t\t\tif (item.label) {\n\t\t\t\tconst\n\t\t\t\t\tprops = $('<li></li>'),\n\t\t\t\t\tlink = $('<a></a>')\n\t\t\t\t\t\t.attr('href', item.href || '#')\n\t\t\t\t\t\t.attr('title', item.label);\n\t\t\t\tfor (const [key, val] of Object.entries(item.attrs || {})) {\n\t\t\t\t\tlink.attr(key, val);\n\t\t\t\t}\n\t\t\t\tif (item.icon) {\n\t\t\t\t\t$('<i class=\"fa-lg fa-fw mr-1\"></i>')\n\t\t\t\t\t\t.addClass(item.icon)\n\t\t\t\t\t\t.appendTo(link);\n\t\t\t\t}\n\t\t\t\t$('<span class=\"menu-item-parent\"></span>')\n\t\t\t\t\t.text(item.label)\n\t\t\t\t\t.appendTo(link);\n\t\t\t\tif (item.badge) {\n\t\t\t\t\t$('<span class=\"badge ml-1 mr-3 float-right\"></span>')\n\t\t\t\t\t\t.addClass(`bg-${item.badge.status}`)\n\t\t\t\t\t\t.text(item.badge.value)\n\t\t\t\t\t\t.appendTo(link);\n\t\t\t\t}\n\t\t\t\tlink.appendTo(props);\n\t\t\t\tif (item.items) {\n\t\t\t\t\t$('<ul></ul>')\n\t\t\t\t\t\t.append(new Menu(item.items).render())\n\t\t\t\t\t\t.appendTo(props);\n\t\t\t\t}\n\t\t\t\tprops.appendTo(menu);\n\t\t\t} else {\n\t\t\t\tnew MenuDivider().render().appendTo(menu);\n\t\t\t}\n\t\t}\n\t\treturn menu.children();\n\t}\n}\n\nexport class NavigationMenu {\n\n\tconstructor(menus, parent, settings) {\n\t\tthis.menus = menus;\n\t\tthis.parent = parent;\n\t\tthis.settings = settings;\n\t}\n\n\tgetMenus() {\n\t\tconst nav = $('<ul></ul>');\n\t\tfor (const props of this.menus) {\n\t\t\tif (props.header !== undefined) {\n\t\t\t\tnav.append(new MenuHeader(props).render());\n\t\t\t}\n\t\t\tnav.append(new Menu(props.items).render());\n\t\t}\n\t\treturn nav;\n\t}\n\n\trender() {\n\t\tconst menus = this.getMenus();\n\t\tthis.init(menus);\n\t\tthis.parent.append(menus);\n\t}\n\n\tinit(menus) {\n\t\tconst settings = this.settings;\n\t\t// add mark to menus with children\n\t\tmenus.find('li').each((idx, elt) => {\n\t\t\tconst menuItem = $(elt);\n\t\t\tif (menuItem.find('ul').length > 0) {\n\t\t\t\tconst firstLink = menuItem.find('a:first');\n\t\t\t\t// add multi-level sign next to link\n\t\t\t\tconst sign = $(`<b class=\"collapse-sign\">${settings.closedSign}</b>`);\n\t\t\t\tsign.on('click', (evt) => {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t\tfirstLink.append(sign);\n\t\t\t\t// avoid jumping to top of page when href is a #\n\t\t\t\tif (firstLink.attr('href') === '#') {\n\t\t\t\t\tfirstLink.click(() => {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// slide down open menus\n\t\tmenus.find('li.open').each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tmenu = $(elt),\n\t\t\t\tsubMenu = $('> ul', menu);\n\t\t\tsubMenu.slideDown(settings.speed);\n\t\t\tmenu.find('>a b.collapse-sign').html(settings.openedSign);\n\t\t});\n\t\t// open active level\n\t\tmenus.find('li.active').each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tactiveParent = $(elt).parents('ul'),\n\t\t\t\tactiveItem = activeParent.parent('li');\n\t\t\tactiveParent.slideDown(settings.speed);\n\t\t\tactiveItem.find('b:first').html(settings.openedSign);\n\t\t\tactiveItem.addClass('open');\n\t\t});\n\t\t// handle click event\n\t\tmenus.find(\"li a\").on('click', (evt) => {\n\t\t\tconst link = $(evt.currentTarget);\n\t\t\tif (link.hasClass('active')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlink.parents('li').removeClass('active');\n\t\t\tconst\n\t\t\t\thref = link.attr('href').replace(/^#/, ''),\n\t\t\t\tparentUL = link.parent().find(\"ul\");\n\t\t\tif (settings.accordion) {\n\t\t\t\tconst\n\t\t\t\t\tparents = link.parent().parents(\"ul\"),\n\t\t\t\t\tvisibleMenus = menus.find(\"ul:visible\");\n\t\t\t\tvisibleMenus.each((visibleIndex, visibleElt) => {\n\t\t\t\t\tlet close = true;\n\t\t\t\t\tparents.each((parentIndex, parentElt) => {\n\t\t\t\t\t\tif (parentElt === visibleElt) {\n\t\t\t\t\t\t\tclose = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (close && (parentUL !== visibleElt)) {\n\t\t\t\t\t\tconst visibleItem = $(visibleElt);\n\t\t\t\t\t\tif (href || !visibleItem.hasClass('active')) {\n\t\t\t\t\t\t\tvisibleItem.slideUp(settings.speed, () => {\n\t\t\t\t\t\t\t\tvisibleItem.parent(\"li\")\n\t\t\t\t\t\t\t\t\t.removeClass('open')\n\t\t\t\t\t\t\t\t\t.find(\"b:first\")\n\t\t\t\t\t\t\t\t\t.delay(settings.speed)\n\t\t\t\t\t\t\t\t\t.html(settings.closedSign);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst firstUL = link.parent().find(\"ul:first\");\n\t\t\tif (!href && firstUL.is(\":visible\") && !firstUL.hasClass(\"active\")) {\n\t\t\t\tfirstUL.slideUp(settings.speed, () => {\n\t\t\t\t\tlink.parent(\"li\")\n\t\t\t\t\t\t.removeClass(\"open\")\n\t\t\t\t\t\t.find(\"b:first\")\n\t\t\t\t\t\t.delay(settings.speed)\n\t\t\t\t\t\t.html(settings.closedSign);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfirstUL.slideDown(settings.speed, () => {\n\t\t\t\t\tlink.parent(\"li\")\n\t\t\t\t\t\t.addClass(\"open\")\n\t\t\t\t\t\t.find(\"b:first\")\n\t\t\t\t\t\t.delay(settings.speed)\n\t\t\t\t\t\t.html(settings.openedSign);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n\n\nlet _initialized = false,\n\t_hammer = null;\n\n\n/**\n * Main navigation module\n */\n\nfunction _openPage(href) {\n\tif (location && href.startsWith('#')) {\n\t\tif (href !== location.hash) {\n\t\t\tlocation.hash = href;\n\t\t}\n\t} else {\n\t\tif (location.toString() === href) {\n\t\t\tlocation.reload();\n\t\t} else {\n\t\t\twindow.location = href;\n\t\t}\n\t}\n}\n\n/**\n * Main link click event handler\n *\n * @param evt\n */\nexport function linkClickHandler(evt) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst\n\t\t\tlink = $(evt.currentTarget),\n\t\t\thandlers = link.data('ams-disabled-handlers');\n\t\tif ((handlers === true) || (handlers === 'click') || (handlers === 'all')) {\n\t\t\treturn;\n\t\t}\n\t\tlet href = link.attr('href') || link.data('ams-url');\n\t\tif (!href ||\n\t\t\thref.startsWith('javascript:') ||\n\t\t\tlink.attr('target') ||\n\t\t\t(link.data('ams-context-menu') === true)) {\n\t\t\treturn;\n\t\t}\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\n\t\tlet url,\n\t\t\ttarget,\n\t\t\tparams;\n\t\tif (href.indexOf('?') >= 0) {\n\t\t\turl = href.split('?');\n\t\t\ttarget = url[0];\n\t\t\tparams = url[1].unserialize();\n\t\t} else {\n\t\t\ttarget = href;\n\t\t\tparams = undefined;\n\t\t}\n\t\tconst hrefGetter = MyAMS.core.getFunctionByName(target);\n\t\tif (typeof hrefGetter === 'function') {\n\t\t\thref = hrefGetter(link, params);\n\t\t}\n\t\tif (!href) {\n\t\t\tresolve(null);\n\t\t}\n\t\telse if (typeof href === 'function') {\n\t\t\tresolve(href(link, params));\n\t\t} else {\n\t\t\t// Standard AJAX or browser URL call\n\t\t\t// Convert %23 characters to #\n\t\t\thref = href.replace(/%23/, '#');\n\t\t\tif (evt.ctrlKey) {\n\t\t\t\twindow.open && window.open(href);\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tconst linkTarget = link.data('ams-target') || link.attr('target');\n\t\t\t\tif (linkTarget) {\n\t\t\t\t\tif (linkTarget === '_blank') {\n\t\t\t\t\t\twindow.open && window.open(href);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else if (linkTarget === '_top') {\n\t\t\t\t\t\twindow.location = href;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (MyAMS.form) {\n\t\t\t\t\t\t\tMyAMS.form.confirmChangedForm().then((result) => {\n\t\t\t\t\t\t\t\tif (result !== 'success') {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tMyAMS.skin && MyAMS.skin.loadURL(href, linkTarget,\n\t\t\t\t\t\t\t\t\tlink.data('ams-link-options'),\n\t\t\t\t\t\t\t\t\tlink.data('ams-link-callback')).then(resolve, reject);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tMyAMS.skin && MyAMS.skin.loadURL(href, linkTarget,\n\t\t\t\t\t\t\t\tlink.data('ams-link-options'),\n\t\t\t\t\t\t\t\tlink.data('ams-link-callback')).then(resolve, reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (MyAMS.form) {\n\t\t\t\t\t\tMyAMS.form.confirmChangedForm().then((result) => {\n\t\t\t\t\t\t\tif (result !== 'success') {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_openPage(href);\n\t\t\t\t\t\t}).then(resolve);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_openPage(href);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\n\nexport const nav = {\n\n\t/**\n\t * initialize navigation through data attributes\n\t */\n\tinit: () => {\n\n\t\tif (_initialized) {\n\t\t\treturn;\n\t\t}\n\t\t_initialized = true;\n\n\t\t$.fn.extend({\n\n\t\t\tnavigationMenu: function(options) {\n\t\t\t\tif (this.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = this.data();\n\t\t\t\tconst defaults = {\n\t\t\t\t\taccordion: data.amsMenuAccordion !== false,\n\t\t\t\t\tspeed: 200\n\t\t\t\t}\n\t\t\t\tif (MyAMS.config.useSVGIcons) {\n\t\t\t\t\tconst\n\t\t\t\t\t\tdownIcon = FontAwesome.findIconDefinition({iconName: 'angle-down'}),\n\t\t\t\t\t\tupIcon = FontAwesome.findIconDefinition({iconName: 'angle-up'});\n\t\t\t\t\t$.extend(defaults, {\n\t\t\t\t\t\tclosedSign: `<em data-fa-i2svg>${FontAwesome.icon(downIcon).html}</em>`,\n\t\t\t\t\t\topenedSign: `<em data-fa-i2svg>${FontAwesome.icon(upIcon).html}</em>`\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$.extend(defaults, {\n\t\t\t\t\t\tclosedSign: '<em class=\"fa fa-angle-down\"></em>',\n\t\t\t\t\t\topenedSign: '<em class=\"fa fa-angle-up\"></em>'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst\n\t\t\t\t\tsettings = $.extend({}, defaults, options),\n\t\t\t\t\tmenuFactory = MyAMS.core.getObject(data.amsMenuFactory) || NavigationMenu;\n\t\t\t\tif (data.amsMenuConfig) {\n\t\t\t\t\tMyAMS.require('ajax', 'skin').then(() => {\n\t\t\t\t\t\tMyAMS.ajax.get(data.amsMenuConfig).then(result => {\n\t\t\t\t\t\t\tnew menuFactory(result, $(this), settings).render();\n\t\t\t\t\t\t\tMyAMS.skin.checkURL();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {  // static menus\n\t\t\t\t\tconst menus = $('ul', this);\n\t\t\t\t\tnew menuFactory(null, $(this), settings).init(menus);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (MyAMS.config.ajaxNav) {\n\n\t\t\t// Disable clicks on # hrefs\n\t\t\t$(document).on('click', 'a[href=\"#\"]', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t});\n\n\t\t\t// Activate clicks\n\t\t\t$(document).on('click',\n\t\t\t\t'a[href!=\"#\"]:not([data-toggle]), [data-ams-url]:not([data-toggle])', (evt) => {\n\t\t\t\t// check for specific click handler\n\t\t\t\tconst handler = $(evt).data('ams-click-handler');\n\t\t\t\tif (handler) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// check for DataTable collapse handler\n\t\t\t\tif (evt.target.tagName === 'TD') {\n\t\t\t\t\tconst target = $(evt.target);\n\t\t\t\t\tif (target.hasClass('dtr-control')) {\n\t\t\t\t\t\tconst table = target.parents('table.datatable');\n\t\t\t\t\t\tif (table.hasClass('collapsed')) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn linkClickHandler(evt);\n\t\t\t});\n\n\t\t\t// Blank target clicks\n\t\t\t$(document).on('click', 'a[target=\"_blank\"]', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tconst target = $(evt.currentTarget);\n\t\t\t\twindow.open && window.open(target.attr('href'));\n\t\t\t\tMyAMS.stats && MyAMS.stats.logEvent(\n\t\t\t\t\ttarget.data('ams-stats-category') || 'Navigation',\n\t\t\t\t\ttarget.data('ams-stats-action') || 'External',\n\t\t\t\t\ttarget.data('ams-stats-label') || target.attr('href'));\n\t\t\t});\n\n\t\t\t// Top target clicks\n\t\t\t$(document).on('click', 'a[target=\"_top\"]', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tMyAMS.form && MyAMS.form.confirmChangedForm().then((result) => {\n\t\t\t\t\tif (result !== 'success') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twindow.location = $(evt.currentTarget).attr('href');\n\t\t\t\t})\n\t\t\t});\n\n\t\t\t// Disable clicks on disabled tabs\n\t\t\t$(document).on(\"click\", '.nav-tabs a[data-toggle=tab]', (evt) => {\n\t\t\t\tif ($(evt.currentTarget).parent('li').hasClass(\"disabled\")) {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Enable tabs dynamic loading\n\t\t\t$(document).on('show.bs.tab', (evt) => {\n\t\t\t\tlet link = $(evt.target);\n\t\t\t\tif (link.exists() && (link.get(0).tagName !== 'A')) {\n\t\t\t\t\tlink = $('a[href]', link);\n\t\t\t\t}\n\t\t\t\tconst data = link.data();\n\t\t\t\tif (data && data.amsUrl) {\n\t\t\t\t\tif (data.amsTabLoaded) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlink.append('<i class=\"fa fa-spin fa-cog ml-1\"></i>');\n\t\t\t\t\tMyAMS.require('skin').then(() => {\n\t\t\t\t\t\tMyAMS.skin.loadURL(data.amsUrl, link.attr('href')).then(() => {\n\t\t\t\t\t\t\tif (data.amsTabLoadOnce) {\n\t\t\t\t\t\t\t\tdata.amsTabLoaded = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$('i', link).remove();\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t$('i', link).remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!MyAMS.config.isMobile) {\n\t\t\t\tMyAMS.dom.root.addClass('desktop-detected');\n\t\t\t} else {\n\t\t\t\tMyAMS.dom.root.addClass('mobile-detected');\n\t\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\t\tif (MyAMS.config.enableFastclick) {\n\t\t\t\t\t\tMyAMS.ajax.check($.fn.noClickDelay,\n\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/js-smartclick${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t$('a', MyAMS.dom.nav).noClickDelay();\n\t\t\t\t\t\t\t$('a', '#hide-menu').noClickDelay();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (MyAMS.dom.root.exists()) {\n\t\t\t\t\t\tMyAMS.ajax.check(window.Hammer,\n\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/hammer${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t_hammer = new Hammer.Manager(MyAMS.dom.root.get(0));\n\t\t\t\t\t\t\t_hammer.add(new Hammer.Pan({\n\t\t\t\t\t\t\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\t\t\t\t\t\t\tthreshold: 200\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t_hammer.on('panright', () => {\n\t\t\t\t\t\t\t\tif (!MyAMS.dom.root.hasClass('hidden-menu')) {\n\t\t\t\t\t\t\t\t\tMyAMS.nav.switchMenu();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_hammer.on('panleft', () => {\n\t\t\t\t\t\t\t\tif (MyAMS.dom.root.hasClass('hidden-menu')) {\n\t\t\t\t\t\t\t\t\tMyAMS.nav.switchMenu();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tnav.restoreState();\n\t},\n\n\tinitElement: (element) => {\n\n\t\t$('nav', element).navigationMenu({\n\t\t\tspeed: MyAMS.config.menuSpeed\n\t\t});\n\t},\n\n\t/**\n\t * Display current active menu\n\t *\n \t * @param menu: current active menu\n\t */\n\tsetActiveMenu: (menu) => {\n\t\tconst nav = MyAMS.dom.nav;\n\t\t$('.active', nav).removeClass('active');\n\t\tmenu.addClass('open')\n\t\t\t.addClass('active');\n\t\tmenu.parents('li').addClass('open active')\n\t\t\t.children('ul').addClass('active')\n\t\t\t.show();\n\t\tmenu.parents('li:first').removeClass('open');\n\t\tmenu.parents('ul').addClass(menu.attr('href').replace(/^#/, '') ? 'active' : '')\n\t\t\t.show();\n\t\tif (menu.exists()) {\n\t\t\tconst\n\t\t\t\tscroll = nav.scrollTop(),\n\t\t\t\tposition = $(menu).parents('li:last').position();\n\t\t\tif (position.top < scroll) {\n\t\t\t\tnav.scrollTop(position.top);\n\t\t\t} else if (position.top > nav.height() + scroll) {\n\t\t\t\tnav.scrollTop(position.top);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Internal breadcrumbs drawing function\n\t *\n\t * @private\n\t */\n\tdrawBreadcrumbs: () => {\n\t\tconst crumb = $('ol.breadcrumb', '#ribbon');\n\t\t$('li', crumb).not('.persistent').remove();\n\t\tif (!$('li', crumb).exists()) {\n\t\t\tconst template = `<li class=\"breadcrumb-item\">\n\t\t\t\t\t<a class=\"p-r-1\" href=\"${$('a[href!=\"#\"]:first', MyAMS.dom.nav).attr('href')}\">\n\t\t\t\t\t\t${MyAMS.i18n.HOME}\n\t\t\t\t\t</a>\n\t\t\t\t</li>`;\n\t\t\tcrumb.append($(template));\n\t\t}\n\t\t$('li.active >a', MyAMS.dom.nav).each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tmenu = $(elt),\n\t\t\t\ttext = $.trim(menu.clone()\n\t\t\t\t\t.children('.badge')\n\t\t\t\t\t.remove()\n\t\t\t\t\t.end()\n\t\t\t\t\t.text()),\n\t\t\t\thref = menu.attr('href'),\n\t\t\t\titem = $('<li class=\"breadcrumb-item\"></li>').append(href.replace(/^#/, '') ?\n\t\t\t\t\t$('<a></a>').html(text).attr('href', href) : text);\n\t\t\tcrumb.append(item);\n\t\t});\n\t},\n\n\t/**\n\t * Click handler for navigation menu \"minify\" button\n\t *\n\t * @param evt: original click event\n\t */\n\tminifyMenu: (evt) => {\n\t\tevt && evt.preventDefault();\n\t\tMyAMS.dom.root.toggleClass('minified');\n\t\tif (MyAMS.dom.root.hasClass('minified')) {\n\t\t\tMyAMS.core.switchIcon($('i', evt.currentTarget),\n\t\t\t\t'arrow-circle-left', 'arrow-circle-right');\n\t\t} else {\n\t\t\tMyAMS.core.switchIcon($('i', evt.currentTarget),\n\t\t\t\t'arrow-circle-right', 'arrow-circle-left');\n\t\t}\n\t\tif (window.localStorage) {\n\t\t\tif (MyAMS.dom.root.hasClass('minified')) {\n\t\t\t\tlocalStorage.setItem('window-state', 'minified');\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('window-state', '');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Click handler for menu hide button\n\t *\n\t * @param evt: original click event\n\t */\n\tswitchMenu: (evt) => {\n\t\tevt && evt.preventDefault();\n\t\tMyAMS.dom.root.toggleClass('hidden-menu');\n\t\tif (window.localStorage) {\n\t\t\tif (MyAMS.dom.root.hasClass('hidden-menu')) {\n\t\t\t\tlocalStorage.setItem('window-state', 'hidden-menu');\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('window-state', '');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Restore window state on application startup\n\t *\n\t * Previous window state is stored in local storage.\n\t */\n\trestoreState: () => {\n\t\t// restore window state\n\t\tif (window.localStorage) {\n\t\t\tconst state = localStorage.getItem('window-state');\n\t\t\tif (state === 'minified') {\n\t\t\t\tMyAMS.nav.minifyMenu({\n\t\t\t\t\tcurrentTarget: $('#minifyme'),\n\t\t\t\t\tpreventDefault: () => {}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMyAMS.dom.root.addClass(state);\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (MyAMS.env.bundle) {\n\tMyAMS.config.modules.push('nav');\n} else {\n\tMyAMS.nav = nav;\n\tconsole.debug(\"MyAMS: nav module loaded...\");\n}\n"],"mappings":"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"}