"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectAlerts_settings_tsx"],{"./app/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),o=s("./app/components/forms/fieldFromConfig.tsx"),r=s("./app/components/panels/index.tsx"),l=s("./app/icons/index.tsx"),a=s("./app/utils/sanitizeQuerySelector.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{additionalFieldProps:t={},title:s,fields:i,access:p,disabled:c,renderFooter:u,renderHeader:g,collapsible:h,initiallyCollapsed:f=!1,...x}=e;const[b,y]=(0,n.useState)(f),j=(0,n.useCallback)((()=>y((e=>!e))),[]);return(0,d.BX)(r.s_,{id:"string"==typeof s?(0,a.m)(s):void 0,children:[s&&(0,d.BX)(r.V9,{children:[s,h&&(0,d.tZ)(m,{onClick:j,children:(0,d.tZ)(l.g6,{"data-test-id":"form-panel-collapse-chevron",direction:b?"down":"up",size:"xs"})})]}),(0,d.BX)(r.N,{hidden:b,children:["function"==typeof g&&g({title:s,fields:i}),i.map((e=>{if("function"==typeof e)return e();const{defaultValue:s,...i}=e;return!0===c&&(i.disabled=!0,i.disabledReason=void 0),(0,d.tZ)(o.Z,{access:p,disabled:c,...x,...t,field:i,highlighted:x.highlighted===`#${e.name}`},e.name)})),"function"==typeof u&&u({title:s,fields:i})]})]})}p.displayName="FormPanel";const c=p,m=(0,i.Z)("span",{target:"eovlw60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("../node_modules/@sentry/core/esm/exports.js"),r=s("../node_modules/scroll-to-element/index.js"),l=s.n(r),a=s("./app/utils.tsx"),d=s("./app/utils/sanitizeQuerySelector.tsx"),p=s("./app/utils/withSentryRouter.tsx"),c=s("./app/components/forms/formPanel.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends n.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{highlighted:this.props.location?.hash})}componentDidMount(){this.scrollToHash()}componentDidUpdate(e){if(this.props.location&&this.props.location.hash!==e.location.hash){const e=this.props.location.hash;this.scrollToHash(e),this.setState({highlighted:e})}}scrollToHash(e){const t=e||this.props.location?.hash;if(t)try{l()((0,d.m)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){o.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,a.ri)(e?.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm(e){let{fields:t,formPanelProps:s,title:i}=e;return this.shouldDisplayForm(t)||s?.renderFooter||s?.renderHeader?(0,m.tZ)(c.Z,{title:i,fields:t,...s}):null}render(){const{access:e,collapsible:t,initiallyCollapsed:s,fields:i,title:o,forms:r,disabled:l,features:a,additionalFieldProps:d,renderFooter:p,renderHeader:c,location:u,params:g,router:h,routes:f,...x}=this.props,b={access:e,disabled:l,features:a,additionalFieldProps:d,renderFooter:p,renderHeader:c,highlighted:this.state.highlighted,collapsible:t,initiallyCollapsed:s};return(0,m.BX)("div",{...x,children:[void 0!==r&&r.map(((e,t)=>(0,m.tZ)(n.Fragment,{children:this.renderForm({formPanelProps:b,...e})},t))),void 0===r&&void 0!==i&&this.renderForm({fields:i,formPanelProps:b,title:o})]})}}u.displayName="JsonForm";const g=(0,p.Z)(u)},"./app/components/pluginList.tsx":(e,t,s)=>{s.d(t,{Z:()=>v});var i=s("./app/actionCreators/plugins.tsx"),n=s("./app/components/acl/access.tsx"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/button.tsx"),l=s("./app/components/panels/index.tsx"),a=s("./app/components/textOverflow.tsx"),d=s("./app/locale.tsx"),p=s("./app/plugins/components/pluginIcon.tsx"),c=s("./app/styles/space.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{disabled:t,plugins:s,onEnablePlugin:i}=e;return 0===s.length?null:(0,m.BX)(l.s_,{children:[(0,m.tZ)(l.V9,{children:(0,d.t)("Inactive Integrations")}),(0,m.tZ)(l.N,{children:(0,m.tZ)(g,{children:s.map((e=>(0,m.tZ)(h,{disabled:t,title:t?(0,d.t)("You do not have permission to set up an integration."):"",onClick:()=>i(e),className:`ref-plugin-enable-${e.id}`,children:(0,m.BX)(f,{children:[(0,m.tZ)(x,{pluginId:e.id}),(0,m.tZ)(a.Z,{children:e.shortName||e.name})]})},e.id)))})})]})}u.displayName="InactivePlugins";const g=(0,o.Z)("div",{target:"e1mpcvbx3"})("display:flex;padding:",(0,c.D)(1),";flex:1;flex-wrap:wrap;"),h=(0,o.Z)(r.zx,{target:"e1mpcvbx2"})("margin:",(0,c.D)(1),";width:175px;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";color:#889ab0;letter-spacing:0.1px;font-weight:600;text-transform:uppercase;border:1px solid #eee;background:inherit;border-radius:",(e=>e.theme.borderRadius),";padding:10px;&:hover{border-color:#ccc;}"),f=(0,o.Z)("div",{target:"e1mpcvbx1"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),x=(0,o.Z)(p.ZP,{target:"e1mpcvbx0"})("margin-right:",(0,c.D)(1),";"),b=u;var y=s("./app/components/pluginConfig.tsx");function j(e){let{organization:t,project:s,pluginList:o,onDisablePlugin:r=(()=>{}),onEnablePlugin:a=(()=>{})}=e;const p=(0,n.d)(["project:write"],{organization:t,project:s}),c=e=>{(0,i.rR)({projectId:s.slug,orgId:t.slug,pluginId:e.slug}),r(e)};return o.length?(0,m.BX)("div",{children:[o.filter((e=>e.enabled)).map((e=>(0,m.tZ)(y.Z,{data:e,organization:t,project:s,onDisablePlugin:c},e.id))),(0,m.tZ)(b,{disabled:!p,plugins:o.filter((e=>!e.enabled&&!e.isHidden)),onEnablePlugin:e=>{(0,i.Cg)({projectId:s.slug,orgId:t.slug,pluginId:e.slug}),a(e)}})]}):(0,m.tZ)(l.s_,{children:(0,m.tZ)(l.Lv,{children:(0,d.t)("Oops! Looks like there aren't any available integrations installed.")})})}j.displayName="PluginList";const v=j},"./app/data/forms/projectAlerts.tsx":(e,t,s)=>{s.r(t),s.d(t,{fields:()=>r,route:()=>n});var i=s("./app/locale.tsx");const n="/settings/:orgId/projects/:projectId/alerts/",o=e=>(e=Number(e)/60,(0,i.tn)("%s minute","%s minutes",e)),r={subjectTemplate:{name:"subjectTemplate",type:"string",label:(0,i.t)("Subject Template"),placeholder:"e.g. $shortID - $title",help:(0,i.t)("The email subject to use (excluding the prefix) for individual alerts. Usable variables include: $title, $shortID, $projectID, $orgID, and ${tag:key}, such as ${tag:environment} or ${tag:release}.")},digestsMinDelay:{name:"digestsMinDelay",type:"range",min:60,max:3600,step:60,defaultValue:300,label:(0,i.t)("Minimum delivery interval"),help:(0,i.t)("Notifications will be delivered at most this often."),formatLabel:o},digestsMaxDelay:{name:"digestsMaxDelay",type:"range",min:60,max:3600,step:60,defaultValue:300,label:(0,i.t)("Maximum delivery interval"),help:(0,i.t)("Notifications will be delivered at least this often."),formatLabel:o}}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});const i=function(e,t){let s=arguments.length>3?arguments[3]:void 0;const i=`${e} - ${t}`,n=s?`${i} - ${s}`:i;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?n:`${n} - Sentry`}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends i.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var i=s("./app/components/acl/access.tsx"),n=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=(0,o.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function a(e){let{access:t=["project:write"],project:s,team:o,...a}=e;return(0,r.tZ)(i.Z,{access:t,project:s,team:o,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(n.bZ,{"data-test-id":"project-permission-alert",type:"warning",...a,children:l})}})}a.displayName="PermissionAlert";const d=a},"./app/views/settings/projectAlerts/settings.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("./app/components/alertLink.tsx"),r=s("./app/components/button.tsx"),l=s("./app/components/forms/form.tsx"),a=s("./app/components/forms/jsonForm.tsx"),d=s("./app/components/panels/index.tsx"),p=s("./app/components/pluginList.tsx"),c=s("./app/data/forms/projectAlerts.tsx"),m=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),g=s("./app/utils/routeTitle.tsx"),h=s("./app/views/asyncView.tsx"),f=s("./app/views/settings/components/settingsPageHeader.tsx"),x=s("./app/views/settings/project/permissionAlert.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends h.Z{constructor(){super(...arguments),(0,i.Z)(this,"handleEnablePlugin",(e=>{this.setState((t=>({pluginList:(t.pluginList??[]).map((t=>t.id!==e.id?t:{...e,enabled:!0}))})))})),(0,i.Z)(this,"handleDisablePlugin",(e=>{this.setState((t=>({pluginList:(t.pluginList??[]).map((t=>t.id!==e.id?t:{...e,enabled:!1}))})))}))}getDefaultState(){return{...super.getDefaultState(),project:null,pluginList:[]}}getProjectEndpoint(){const{organization:e,params:t}=this.props;return`/projects/${e.slug}/${t.projectId}/`}getEndpoints(){const{organization:e,params:t}=this.props;return[["project",this.getProjectEndpoint()],["pluginList",`/projects/${e.slug}/${t.projectId}/plugins/`]]}getTitle(){const{projectId:e}=this.props.params;return(0,g.Z)((0,u.t)("Alerts Settings"),e,!1)}renderBody(){const{canEditRule:e,organization:t}=this.props,{project:s,pluginList:i}=this.state;if(!s)return null;const g=this.getProjectEndpoint();return(0,b.BX)(n.Fragment,{children:[(0,b.tZ)(f.Z,{title:(0,u.t)("Alerts Settings"),action:(0,b.tZ)(r.zx,{to:{pathname:`/organizations/${t.slug}/alerts/rules/`,query:{project:s.id}},size:"sm",children:(0,u.t)("View Alert Rules")})}),(0,b.tZ)(x.Z,{project:s}),(0,b.tZ)(o.Z,{to:"/settings/account/notifications/",icon:(0,b.tZ)(m.h,{}),children:(0,u.t)("Looking to fine-tune your personal notification preferences? Visit your Account Settings")}),(0,b.BX)(l.Z,{saveOnBlur:!0,allowUndo:!0,initialData:{subjectTemplate:s.subjectTemplate,digestsMinDelay:s.digestsMinDelay,digestsMaxDelay:s.digestsMaxDelay},apiMethod:"PUT",apiEndpoint:g,children:[(0,b.tZ)(a.Z,{disabled:!e,title:(0,u.t)("Email Settings"),fields:[c.fields.subjectTemplate]}),(0,b.tZ)(a.Z,{title:(0,u.t)("Digests"),disabled:!e,fields:[c.fields.digestsMinDelay,c.fields.digestsMaxDelay],renderHeader:()=>(0,b.tZ)(d.aU,{type:"info",children:(0,u.t)("Sentry will automatically digest alerts sent by some services to avoid flooding your inbox with individual issue notifications. To control how frequently notifications are delivered, use the sliders below.")})})]}),e&&(0,b.tZ)(p.Z,{organization:t,project:s,pluginList:(i??[]).filter((e=>"notification"===e.type&&e.hasConfiguration)),onEnablePlugin:this.handleEnablePlugin,onDisablePlugin:this.handleDisablePlugin})]})}}const j=y}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectAlerts_settings_tsx.b9438764dc4dd7896c3002750c604aa8.js.map