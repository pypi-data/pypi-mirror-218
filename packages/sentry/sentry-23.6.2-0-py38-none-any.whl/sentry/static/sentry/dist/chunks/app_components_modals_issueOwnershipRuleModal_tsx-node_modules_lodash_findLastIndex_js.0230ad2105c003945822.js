(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_issueOwnershipRuleModal_tsx-node_modules_lodash_findLastIndex_js"],{"./app/components/modals/issueOwnershipRuleModal.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y,modalCss:()=>v});var n=s("../node_modules/react/index.js"),a=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=s("./app/locale.tsx"),r=s("./app/utils/integrationUtil.tsx"),i=s("./app/utils/theme.tsx"),l=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=s("../node_modules/lodash/uniq.js"),u=s.n(d),p=s("./app/components/asyncComponent.tsx"),c=s("./app/components/links/externalLink.tsx"),h=s("./app/stores/configStore.tsx"),m=s("./app/styles/space.tsx"),g=s("./app/views/settings/project/projectOwnership/ownerInput.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){let{paths:t,urls:s,eventData:a}=e;const r=h.Z.get("user")?.email;if(!r)return null;const i=t.length?`path:${t[0]} ${r}`:null,l=s.length?`url:${function(e){if(!e)return"";try{return`*${new URL(e).pathname}`}catch{return e}}(s[0])} ${r}`:null,d=a?.tags?.find((e=>{let{key:t}=e;return"transaction"===t})),u=d?`tags.transaction:${d.value} ${r}`:null;return(0,b.BX)(w,{children:["# ",(0,o.t)("Hereâ€™s some suggestions based on this issue"),(0,b.tZ)("br",{}),[i,l,u].filter((e=>e)).map((e=>(0,b.BX)(n.Fragment,{children:[e,(0,b.tZ)("br",{})]},e)))]})}x.displayName="OwnershipSuggestions";class _ extends p.Z{getEndpoints(){const{organization:e,project:t,issueId:s}=this.props;return[["ownership",`/projects/${e.slug}/${t.slug}/ownership/`],["urlTagData",`/issues/${s}/tags/url/`,{},{allowError:e=>404===e.status}]]}renderBody(){const{ownership:e,urlTagData:t}=this.state,{eventData:s,organization:a,project:r,onCancel:i}=this.props;if(!e)return null;const l=t?t.topValues.sort(((e,t)=>e.count-t.count)).map((e=>e.value)).slice(0,5):[],d=a.features.includes("streamline-targeting-context"),p=function(e){const t=e?.entries?.find((e=>{let{type:t}=e;return["exception","stacktrace"].includes(t)}));let s=[];return"exception"===t?.type?s=t?.data?.values?.[0]?.stacktrace?.frames??[]:"stacktrace"===t?.type&&(s=t?.data?.frames??[]),s=s.filter((e=>e&&e.inApp)).reverse(),u()(s.map((e=>e.filename||e.absPath||"")))}(s);return(0,b.BX)(n.Fragment,{children:[d?(0,b.BX)(n.Fragment,{children:[(0,b.tZ)(f,{children:(0,o._N)("Assign issues based on custom rules. To learn more, [docs:read the docs].",{docs:(0,b.tZ)(c.Z,{href:"https://docs.sentry.io/product/issues/issue-owners/"})})}),(0,b.tZ)(x,{paths:p,urls:l,eventData:s})]}):(0,b.tZ)("p",{children:(0,o.t)("Match against Issue Data: (globbing syntax *, ? supported)")}),(0,b.tZ)(g.Z,{organization:a,project:r,initialText:e?.raw||"",urls:l,paths:p,dateUpdated:e.lastUpdated,onCancel:i,page:"issue_details"})]})}}const f=(0,l.Z)("p",{target:"e32z9mb1"})("margin-bottom:",(0,m.D)(1),";"),w=(0,l.Z)("pre",{target:"e32z9mb0"})("word-break:break-word;padding:",(0,m.D)(2),";line-height:1.6;color:",(e=>e.theme.subText),";"),j=_;function Z(e){let{Body:t,Header:s,Footer:a,organization:i,project:l,issueId:d,eventData:u,closeModal:p}=e;return(0,n.useEffect)((()=>{(0,r.Db)("project_ownership.modal_opened",{page:"issue_details",organization:i})}),[i]),(0,b.BX)(n.Fragment,{children:[(0,b.tZ)(s,{closeButton:!0,children:(0,b.tZ)("h4",{children:(0,o.t)("Edit Ownership Rules")})}),(0,b.tZ)(t,{children:(0,b.tZ)(j,{organization:i,project:l,issueId:d,eventData:u,onCancel:p})})]})}Z.displayName="IssueOwnershipRuleModal";const v=(0,a.iv)("@media (min-width: ",i.ZP.breakpoints.small,"){width:80%;}",""),y=Z},"../node_modules/lodash/findLastIndex.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseFindIndex.js"),a=s("../node_modules/lodash/_baseIteratee.js"),o=s("../node_modules/lodash/toInteger.js"),r=Math.max,i=Math.min;e.exports=function(e,t,s){var l=null==e?0:e.length;if(!l)return-1;var d=l-1;return void 0!==s&&(d=o(s),d=s<0?r(l+d,0):i(d,l-1)),n(e,a(t,3),d,!0)}},"../node_modules/lodash/uniq.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseUniq.js");e.exports=function(e){return e&&e.length?n(e):[]}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_issueOwnershipRuleModal_tsx-node_modules_lodash_findLastIndex_js.e1db959cc0ebe797c24b401ab6f025b6.js.map