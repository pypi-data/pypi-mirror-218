"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationAuthTokens_newAuthToken_tsx"],{"./app/views/settings/organizationAuthTokens/newAuthToken.tsx":(e,t,n)=>{n.r(t),n.d(t,{OrganizationAuthTokensNewAuthToken:()=>_,default:()=>O});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),i=n("./app/actionCreators/indicator.tsx"),r=n("./app/components/alert.tsx"),l=n("./app/components/button.tsx"),u=n("./app/components/forms/fieldGroup/index.tsx"),p=n("./app/components/forms/fields/textField.tsx"),d=n("./app/components/forms/form.tsx"),h=n("./app/components/links/externalLink.tsx"),c=n("./app/components/panels/index.tsx"),m=n("./app/components/sentryDocumentTitle.tsx"),g=n("./app/components/textCopyInput.tsx"),k=n("./app/locale.tsx"),x=n("./app/styles/space.tsx"),Z=n("./app/utils/getDynamicText.tsx"),y=n("./app/utils/handleXhrErrorResponse.tsx"),w=n("./app/utils/queryClient.tsx"),b=n("./app/utils/useApi.tsx"),T=n("./app/utils/withDomainRequired.tsx"),f=n("./app/utils/withOrganization.tsx"),A=n("./app/views/settings/components/settingsPageHeader.tsx"),C=n("./app/views/settings/components/text/textBlock.tsx"),v=n("./app/views/settings/organizationAuthTokens/index.tsx"),z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function S(e){let{organization:t,onCreatedToken:n}=e;const o=(0,b.Z)(),r=(0,w.NL)(),l=(0,a.useCallback)((()=>{s.browserHistory.push((0,T.D)(`/settings/${t.slug}/auth-tokens/`))}),[t.slug]),{mutate:h}=(0,w.Db)({mutationFn:e=>{let{name:n}=e;return(0,i.E3)(),o.requestPromise(`/organizations/${t.slug}/org-auth-tokens/`,{method:"POST",data:{name:n}})},onSuccess:e=>{(0,i.S9)((0,k.t)("Created auth token.")),r.invalidateQueries({queryKey:(0,v.makeFetchOrgAuthTokensForOrgQueryKey)({orgSlug:t.slug})}),n(e)},onError:e=>{const t=(0,k.t)("Failed to create a new auth token.");(0,y.X)(t,e),(0,i.Iw)(t)}});return(0,z.BX)(d.Z,{apiMethod:"POST",initialData:{name:""},apiEndpoint:`/organizations/${t.slug}/org-auth-tokens/`,onSubmit:e=>{let{name:t}=e;h({name:t})},onCancel:l,submitLabel:(0,k.t)("Create Auth Token"),requireChanges:!0,children:[(0,z.tZ)(p.Z,{name:"name",label:(0,k.t)("Name"),required:!0,help:(0,k.t)("A name to help you identify this token.")}),(0,z.tZ)(u.Z,{label:(0,k.t)("Scopes"),help:(0,k.t)("Organization auth tokens currently have a limited set of scopes."),children:(0,z.BX)("div",{children:[(0,z.tZ)("div",{children:"org:ci"}),(0,z.tZ)(F,{children:(0,k.t)("Source Map Upload, Release Creation")})]})})]})}function N(e){let{token:t,organization:n}=e;const o=(0,a.useCallback)((()=>{s.browserHistory.push((0,T.D)(`/settings/${n.slug}/auth-tokens/`))}),[n.slug]);return(0,z.BX)("div",{children:[(0,z.tZ)(r.ZP,{type:"warning",showIcon:!0,system:!0,children:(0,k.t)("Please copy this token to a safe place â€” it won't be shown again!")}),(0,z.tZ)(c.Lv,{children:(0,z.tZ)(j,{children:(0,z.tZ)(P,{label:(0,k.t)("Token"),help:(0,k.t)("You can only view this token when it was created."),inline:!0,flexibleControlStateSize:!0,children:(0,z.tZ)(g.Z,{"aria-label":(0,k.t)("Generated token"),children:(0,Z.Z)({value:t.token,fixed:"ORG_AUTH_TOKEN"})})})})}),(0,z.tZ)(c.Lv,{children:(0,z.tZ)(D,{children:(0,z.tZ)(l.zx,{onClick:o,priority:"primary",children:(0,k.t)("Done")})})})]})}function _(e){let{organization:t}=e;const[n,o]=(0,a.useState)(null);return(0,z.BX)("div",{children:[(0,z.tZ)(m.Z,{title:(0,k.t)("Create New Auth Token")}),(0,z.tZ)(A.Z,{title:(0,k.t)("Create New Auth Token")}),(0,z.tZ)(C.Z,{children:(0,k.t)("Authentication tokens allow you to perform actions against the Sentry API on behalf of your organization. They're the easiest way to get started using the API.")}),(0,z.tZ)(C.Z,{children:(0,k._N)("For more information on how to use the web API, see our [link:documentation].",{link:(0,z.tZ)(h.Z,{href:"https://docs.sentry.io/api/"})})}),(0,z.BX)(c.s_,{children:[(0,z.tZ)(c.V9,{children:(0,k.t)("Create New Auth Token")}),(0,z.tZ)(c.N,{children:n?(0,z.tZ)(N,{token:n,organization:t}):(0,z.tZ)(S,{organization:t,onCreatedToken:o})})]})]})}S.displayName="AuthTokenCreateForm",N.displayName="ShowNewToken",_.displayName="OrganizationAuthTokensNewAuthToken";const O=(0,f.Z)(_),j=(0,o.Z)("div",{target:"egrobao3"})({name:"82a6rk",styles:"flex:1"}),D=(0,o.Z)("div",{target:"egrobao2"})("margin-left:auto;display:flex;flex-direction:column;align-items:flex-end;font-size:",(e=>e.theme.fontSizeSmall),";gap:",(0,x.D)(1),";"),P=(0,o.Z)(u.Z,{target:"egrobao1"})({name:"1hcx8jb",styles:"padding:0"}),F=(0,o.Z)("div",{target:"egrobao0"})("color:",(e=>e.theme.gray300),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationAuthTokens_newAuthToken_tsx.fabb4d578eca33712195ea72297d12ef.js.map