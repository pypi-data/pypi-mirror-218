"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_performance_searchBar_tsx-app_components_searchSyntax_parser_tsx-app_utils_get-02464a","app_components_performance_searchBar_tsx-app_views_performance_landing_utils_tsx-app_views_pe-e5f306","app_utils_performance_contexts_metricsEnhancedSetting_tsx"],{"./app/components/performance/searchBar.tsx":(e,t,a)=>{a.d(t,{D:()=>O,Z:()=>y});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/core-js/modules/es.error.cause.js"),a("../node_modules/react/index.js")),r=a("../node_modules/react-router/es/index.js"),n=a("../node_modules/lodash/debounce.js"),o=a.n(n),l=a("./app/components/searchBar.tsx"),c=a("./app/components/smartSearchBar/utils.tsx"),u=a("./app/constants/index.tsx"),d=a("./app/locale.tsx"),p=a("./app/utils/discover/genericDiscoverQuery.tsx"),A=a("./app/utils/tokenizeSearch.tsx"),_=a("./app/utils/useApi.tsx"),E=a("./app/utils/useOnClickOutside.tsx"),T=a("./app/utils/withDomainRequired.tsx"),m=a("./app/views/performance/transactionSummary/utils.tsx"),h=a("./app/components/smartSearchBar/searchDropdown.tsx"),S=a("./app/components/smartSearchBar/types.tsx"),f=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function I(e){const{organization:t,eventView:a,onSearch:s,query:n,className:I}=e,[y,v]=(0,i.useState)([]),D=y[0]?.children?.length||0,[N,P]=(0,i.useState)(-1),[C,x]=(0,i.useState)(!1),M=()=>x(!1),[F,k]=(0,i.useState)(!1),[w,U]=(0,i.useState)(n),V=(0,i.useRef)(null);(0,E.Z)(V,(0,i.useCallback)(M,[]));const G=(0,_.Z)(),Z=a.clone(),b=`/organizations/${t.slug}/events/`,K=Z.project?.map(String),j=(0,i.useCallback)(o()((async e=>{try{k(!0);const t=new A.MY("");t.addFilterValues("transaction",[O(e)],!1),t.addFilterValues("event.type",["transaction"]),Object.keys(G.activeRequests).length&&G.clear();const[a]=await(0,p.AA)(G,b,{field:["transaction","project_id","count()"],project:K,sort:"-count()",query:t.formatString(),statsPeriod:Z.statsPeriod,referrer:"api.performance.transaction-name-search-bar"}),s=a.data.reduce(((e,t)=>(e.children.push({value:R(t),title:t.transaction,type:S.qG.LINK,desc:""}),e)),{title:"All Transactions",children:[],icon:null,type:"header"});P(-1),v([s])}catch(e){throw new Error("Unable to fetch event field values")}finally{k(!1)}}),u.Dk,{leading:!0}),[G,b,Z.statsPeriod,K.join(",")]),W=e=>{const t=L(e);B(t.transaction,!1)},B=(e,t)=>{v([]),U(e),e=new A.MY(e).formatString(),s(e?t?e:`transaction:"${e}"`:""),M()};return(0,f.BX)(g,{className:I||"","data-test-id":"transaction-search-bar",ref:V,children:[(0,f.tZ)(l.Z,{placeholder:(0,d.t)("Search Transactions"),onChange:e=>{if(U(e),0===e.length&&s(""),e.length<3)return v([]),void M();x(!0),j(e)},onKeyDown:e=>{const{key:t}=e;if(!F)if("Escape"===t&&C)M();else{if(("ArrowUp"===t||"ArrowDown"===t)&&C&&D>0){const e=y[0].children[N],a=(N+D+("ArrowUp"===t?-1:1))%D;P(a);const s=y[0].children[a];let i=y;return e&&(i=(0,c.$l)(y,e,!1)),s&&(i=(0,c.$l)(i,s,!0)),void v(i)}if("Enter"===t){e.preventDefault();const t=y[0]?.children[N];t?.value?W(t.value):B(w,!0)}}},query:w}),C&&(0,f.tZ)(h.Z,{maxMenuHeight:300,searchSubstring:w,loading:F,items:y,onClick:W,onIconClick:e=>{(e=>{const{transaction:a,project_id:s}=e,i=Z.generateQueryStringObject();v([]);const n=(0,m.e1)({orgSlug:t.slug,transaction:a,projectID:String(s),query:i});r.browserHistory.push((0,T.D)(n))})(L(e))}})]})}I.displayName="SearchBar";const R=e=>`${e.transaction}:${e.project_id}`,L=e=>{const t=e.lastIndexOf(":");return{project_id:parseInt(e.slice(t+1),10),transaction:e.slice(0,t)}},O=e=>(e.startsWith("*")||(e="*"+e),e.endsWith("*")||(e+="*"),e),g=(0,s.Z)("div",{target:"efn8czs0"})({name:"bjn8wh",styles:"position:relative"}),y="app"==a.j?I:null},"./app/components/searchSyntax/parser.tsx":(e,t,a)=>{a.d(t,{D3:()=>D,J$:()=>f,UG:()=>v,WU:()=>_,_2:()=>O,iq:()=>L,me:()=>h,oV:()=>E,vA:()=>m});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=a("../node_modules/lodash/mergeWith.js"),r=a.n(i),n=a("../node_modules/moment/moment.js"),o=a.n(n),l=a("./app/locale.tsx"),c=a("./app/utils/discover/fields.tsx"),u=a("./app/components/searchSyntax/grammar.pegjs"),d=a.n(u),p=a("./app/components/searchSyntax/utils.tsx");const A=e=>{let[t,a,s,i,r]=e;return{separator:[t.value,a,s.value].join(""),value:r}};let _,E,T,m;!function(e){e.SPACES="spaces",e.FILTER="filter",e.FREE_TEXT="freeText",e.LOGIC_GROUP="logicGroup",e.LOGIC_BOOLEAN="logicBoolean",e.KEY_SIMPLE="keySimple",e.KEY_EXPLICIT_TAG="keyExplicitTag",e.KEY_AGGREGATE="keyAggregate",e.KEY_AGGREGATE_ARGS="keyAggregateArgs",e.KEY_AGGREGATE_PARAMS="keyAggregateParam",e.VALUE_ISO_8601_DATE="valueIso8601Date",e.VALUE_RELATIVE_DATE="valueRelativeDate",e.VALUE_DURATION="valueDuration",e.VALUE_SIZE="valueSize",e.VALUE_PERCENTAGE="valuePercentage",e.VALUE_BOOLEAN="valueBoolean",e.VALUE_NUMBER="valueNumber",e.VALUE_TEXT="valueText",e.VALUE_NUMBER_LIST="valueNumberList",e.VALUE_TEXT_LIST="valueTextList"}(_||(_={})),function(e){e.DEFAULT="",e.GREATER_THAN_EQUAL=">=",e.LESS_THAN_EQUAL="<=",e.GREATER_THAN=">",e.LESS_THAN="<",e.EQUAL="=",e.NOT_EQUAL="!="}(E||(E={})),function(e){e.AND="AND",e.OR="OR"}(T||(T={})),function(e){e.TEXT="text",e.TEXT_IN="textIn",e.DATE="date",e.SPECIFIC_DATE="specificDate",e.RELATIVE_DATE="relativeDate",e.DURATION="duration",e.SIZE="size",e.NUMERIC="numeric",e.NUMERIC_IN="numericIn",e.BOOLEAN="boolean",e.AGGREGATE_DURATION="aggregateDuration",e.AGGREGATE_SIZE="aggregateSize",e.AGGREGATE_PERCENTAGE="aggregatePercentage",e.AGGREGATE_NUMERIC="aggregateNumeric",e.AGGREGATE_DATE="aggregateDate",e.AGGREGATE_RELATIVE_DATE="aggregateRelativeDate",e.HAS="has",e.IS="is"}(m||(m={}));const h=[E.DEFAULT,E.GREATER_THAN_EQUAL,E.LESS_THAN_EQUAL,E.GREATER_THAN,E.LESS_THAN,E.EQUAL,E.NOT_EQUAL],S=[E.DEFAULT,E.NOT_EQUAL],f={[m.SPECIFIC_DATE]:[m.DATE],[m.DATE]:[m.SPECIFIC_DATE]},I=[_.KEY_SIMPLE,_.KEY_EXPLICIT_TAG],R={b:1e9,m:1e6,k:1e3},L={[m.TEXT]:{validKeys:I,validOps:S,validValues:[_.VALUE_TEXT],canNegate:!0},[m.TEXT_IN]:{validKeys:I,validOps:[],validValues:[_.VALUE_TEXT_LIST],canNegate:!0},[m.DATE]:{validKeys:[_.KEY_SIMPLE],validOps:h,validValues:[_.VALUE_ISO_8601_DATE],canNegate:!1},[m.SPECIFIC_DATE]:{validKeys:[_.KEY_SIMPLE],validOps:[],validValues:[_.VALUE_ISO_8601_DATE],canNegate:!1},[m.RELATIVE_DATE]:{validKeys:[_.KEY_SIMPLE],validOps:[],validValues:[_.VALUE_RELATIVE_DATE],canNegate:!1},[m.DURATION]:{validKeys:[_.KEY_SIMPLE],validOps:h,validValues:[_.VALUE_DURATION],canNegate:!0},[m.SIZE]:{validKeys:[_.KEY_SIMPLE],validOps:h,validValues:[_.VALUE_SIZE],canNegate:!0},[m.NUMERIC]:{validKeys:[_.KEY_SIMPLE],validOps:h,validValues:[_.VALUE_NUMBER],canNegate:!0},[m.NUMERIC_IN]:{validKeys:[_.KEY_SIMPLE],validOps:[],validValues:[_.VALUE_NUMBER_LIST],canNegate:!0},[m.BOOLEAN]:{validKeys:[_.KEY_SIMPLE],validOps:S,validValues:[_.VALUE_BOOLEAN],canNegate:!0},[m.AGGREGATE_DURATION]:{validKeys:[_.KEY_AGGREGATE],validOps:h,validValues:[_.VALUE_DURATION],canNegate:!0},[m.AGGREGATE_SIZE]:{validKeys:[_.KEY_AGGREGATE],validOps:h,validValues:[_.VALUE_SIZE],canNegate:!0},[m.AGGREGATE_NUMERIC]:{validKeys:[_.KEY_AGGREGATE],validOps:h,validValues:[_.VALUE_NUMBER],canNegate:!0},[m.AGGREGATE_PERCENTAGE]:{validKeys:[_.KEY_AGGREGATE],validOps:h,validValues:[_.VALUE_PERCENTAGE],canNegate:!0},[m.AGGREGATE_DATE]:{validKeys:[_.KEY_AGGREGATE],validOps:h,validValues:[_.VALUE_ISO_8601_DATE],canNegate:!0},[m.AGGREGATE_RELATIVE_DATE]:{validKeys:[_.KEY_AGGREGATE],validOps:h,validValues:[_.VALUE_RELATIVE_DATE],canNegate:!0},[m.HAS]:{validKeys:[_.KEY_SIMPLE],validOps:S,validValues:[],canNegate:!0},[m.IS]:{validKeys:[_.KEY_SIMPLE],validOps:S,validValues:[_.VALUE_TEXT],canNegate:!0}};let O;!function(e){e.WILDCARD_NOT_ALLOWED="wildcard-not-allowed",e.MUST_BE_QUOTED="must-be-quoted",e.FILTER_MUST_HAVE_VALUE="filter-must-have-value",e.INVALID_BOOLEAN="invalid-boolean",e.INVALID_FILE_SIZE="invalid-file-size",e.INVALID_NUMBER="invalid-number",e.EMPTY_VALUE_IN_LIST_NOT_ALLOWED="empty-value-in-list-not-allowed",e.INVALID_KEY="invalid-key",e.INVALID_DURATION="invalid-duration",e.INVALID_DATE_FORMAT="invalid-date-format"}(O||(O={}));const g={textOperatorKeys:new Set(["release.version","release.build","release.package","release.stage"]),durationKeys:new Set(["transaction.duration"]),percentageKeys:new Set(["percentage"]),numericKeys:new Set(["project_id","project.id","issue.id","stack.colno","stack.lineno","stack.stack_level","transaction.duration"]),dateKeys:new Set(["start","end","firstSeen","lastSeen","last_seen()","time","event.timestamp","timestamp","timestamp.to_hour","timestamp.to_day"]),booleanKeys:new Set(["error.handled","error.unhandled","stack.in_app","team_key_transaction"]),sizeKeys:new Set([]),allowBoolean:!0,disallowWildcard:!1,invalidMessages:{[O.WILDCARD_NOT_ALLOWED]:(0,l.t)("Wildcards not supported in search"),[O.MUST_BE_QUOTED]:(0,l.t)("Quotes must enclose text or be escaped"),[O.FILTER_MUST_HAVE_VALUE]:(0,l.t)("Filter must have a value"),[O.INVALID_BOOLEAN]:(0,l.t)("Invalid boolean. Expected true, 1, false, or 0."),[O.INVALID_FILE_SIZE]:(0,l.t)("Invalid file size. Expected number followed by file size unit suffix"),[O.INVALID_NUMBER]:(0,l.t)("Invalid number. Expected number then optional k, m, or b suffix (e.g. 500k)"),[O.EMPTY_VALUE_IN_LIST_NOT_ALLOWED]:(0,l.t)("Lists should not have empty values")}},y={TokenConverter:class{constructor(e){let{text:t,location:a,config:i}=e;(0,s.Z)(this,"text",void 0),(0,s.Z)(this,"location",void 0),(0,s.Z)(this,"config",void 0),(0,s.Z)(this,"keyValidation",{isNumeric:e=>this.config.numericKeys.has(e)||(0,c.Xr)(e)||(0,c.yK)(e),isBoolean:e=>this.config.booleanKeys.has(e),isPercentage:e=>this.config.percentageKeys.has(e),isDate:e=>this.config.dateKeys.has(e),isDuration:e=>this.config.durationKeys.has(e)||(0,c.yK)(e)||"duration"===(0,c.Cq)(e),isSize:e=>this.config.sizeKeys.has(e)}),(0,s.Z)(this,"tokenSpaces",(e=>({...this.defaultTokenFields,type:_.SPACES,value:e}))),(0,s.Z)(this,"tokenFilter",((e,t,a,s,i)=>{const r={type:_.FILTER,filter:e,key:t,value:a,negated:i,operator:s??E.DEFAULT,invalid:this.checkInvalidFilter(e,t,a)};return{...this.defaultTokenFields,...r}})),(0,s.Z)(this,"tokenFreeText",((e,t)=>({...this.defaultTokenFields,type:_.FREE_TEXT,value:e,quoted:t,invalid:this.checkInvalidFreeText(e)}))),(0,s.Z)(this,"tokenLogicGroup",(e=>({...this.defaultTokenFields,type:_.LOGIC_GROUP,inner:e}))),(0,s.Z)(this,"tokenLogicBoolean",(e=>({...this.defaultTokenFields,type:_.LOGIC_BOOLEAN,value:e}))),(0,s.Z)(this,"tokenKeySimple",((e,t)=>({...this.defaultTokenFields,type:_.KEY_SIMPLE,value:e,quoted:t}))),(0,s.Z)(this,"tokenKeyExplicitTag",((e,t)=>({...this.defaultTokenFields,type:_.KEY_EXPLICIT_TAG,prefix:e,key:t}))),(0,s.Z)(this,"tokenKeyAggregateParam",((e,t)=>({...this.defaultTokenFields,type:_.KEY_AGGREGATE_PARAMS,value:e,quoted:t}))),(0,s.Z)(this,"tokenKeyAggregate",((e,t,a,s)=>({...this.defaultTokenFields,type:_.KEY_AGGREGATE,name:e,args:t,argsSpaceBefore:a,argsSpaceAfter:s}))),(0,s.Z)(this,"tokenKeyAggregateArgs",((e,t)=>({...this.defaultTokenFields,type:_.KEY_AGGREGATE_ARGS,args:[{separator:"",value:e},...t.map(A)]}))),(0,s.Z)(this,"tokenValueIso8601Date",(e=>({...this.defaultTokenFields,type:_.VALUE_ISO_8601_DATE,value:o()(e)}))),(0,s.Z)(this,"tokenValueRelativeDate",((e,t,a)=>({...this.defaultTokenFields,type:_.VALUE_RELATIVE_DATE,value:Number(e),sign:t,unit:a}))),(0,s.Z)(this,"tokenValueDuration",((e,t)=>({...this.defaultTokenFields,type:_.VALUE_DURATION,value:Number(e),unit:t}))),(0,s.Z)(this,"tokenValueSize",((e,t)=>({...this.defaultTokenFields,type:_.VALUE_SIZE,value:Number(e),unit:t}))),(0,s.Z)(this,"tokenValuePercentage",(e=>({...this.defaultTokenFields,type:_.VALUE_PERCENTAGE,value:Number(e)}))),(0,s.Z)(this,"tokenValueBoolean",(e=>({...this.defaultTokenFields,type:_.VALUE_BOOLEAN,value:["1","true"].includes(e.toLowerCase())}))),(0,s.Z)(this,"tokenValueNumber",((e,t)=>({...this.defaultTokenFields,type:_.VALUE_NUMBER,value:e,rawValue:Number(e)*(R[t]??1),unit:t}))),(0,s.Z)(this,"tokenValueNumberList",((e,t)=>({...this.defaultTokenFields,type:_.VALUE_NUMBER_LIST,items:[{separator:"",value:e},...t.map(A)]}))),(0,s.Z)(this,"tokenValueTextList",((e,t)=>({...this.defaultTokenFields,type:_.VALUE_TEXT_LIST,items:[{separator:"",value:e},...t.map(A)]}))),(0,s.Z)(this,"tokenValueText",((e,t)=>({...this.defaultTokenFields,type:_.VALUE_TEXT,value:e,quoted:t}))),(0,s.Z)(this,"predicateFilter",((e,t)=>{const a=(0,p.Ck)(t),s=t,{isNumeric:i,isDuration:r,isBoolean:n,isDate:o,isPercentage:l,isSize:c}=this.keyValidation,u=e=>s.args?.args.some((t=>e(t?.value?.value??"")));switch(e){case m.NUMERIC:case m.NUMERIC_IN:return i(a);case m.DURATION:return r(a);case m.SIZE:return c(a);case m.BOOLEAN:return n(a);case m.DATE:case m.RELATIVE_DATE:case m.SPECIFIC_DATE:return o(a);case m.AGGREGATE_DURATION:return u(r);case m.AGGREGATE_DATE:return u(o);case m.AGGREGATE_PERCENTAGE:return u(l);default:return!0}})),(0,s.Z)(this,"predicateTextOperator",(e=>this.config.textOperatorKeys.has((0,p.Ck)(e)))),(0,s.Z)(this,"checkInvalidFreeText",(e=>this.config.disallowWildcard&&e.includes("*")?{type:O.WILDCARD_NOT_ALLOWED,reason:this.config.invalidMessages[O.WILDCARD_NOT_ALLOWED]}:null)),(0,s.Z)(this,"checkInvalidFilter",((e,t,a)=>this.config.validateKeys&&this.config.supportedTags&&!this.config.supportedTags[t.text]?{type:O.INVALID_KEY,reason:(0,l.t)('Invalid key. "%s" is not a supported search key.',t.text)}:e===m.TEXT?this.checkInvalidTextFilter(t,a):e===m.IS||e===m.HAS?this.checkInvalidTextValue(a):[m.TEXT_IN,m.NUMERIC_IN].includes(e)?this.checkInvalidInFilter(a):null)),(0,s.Z)(this,"checkInvalidTextFilter",((e,t)=>{if(e.type===_.KEY_EXPLICIT_TAG)return this.checkInvalidTextValue(t);const a=(0,p.Ck)(e);if(this.keyValidation.isDuration(a))return{type:O.INVALID_DURATION,reason:(0,l.t)("Invalid duration. Expected number followed by duration unit suffix"),expectedType:[m.DURATION]};if(this.keyValidation.isDate(a)){const e=new Date;e.setSeconds(0),e.setMilliseconds(0);const t=e.toISOString();return{type:O.INVALID_DATE_FORMAT,reason:(0,l.t)("Invalid date format. Expected +/-duration (e.g. +1h) or ISO 8601-like (e.g. %s or %s)",t.slice(0,10),t),expectedType:[m.DATE,m.SPECIFIC_DATE,m.RELATIVE_DATE]}}return this.keyValidation.isBoolean(a)?{type:O.INVALID_BOOLEAN,reason:this.config.invalidMessages[O.INVALID_BOOLEAN],expectedType:[m.BOOLEAN]}:this.keyValidation.isSize(a)?{type:O.INVALID_FILE_SIZE,reason:this.config.invalidMessages[O.INVALID_FILE_SIZE],expectedType:[m.SIZE]}:this.keyValidation.isNumeric(a)?{type:O.INVALID_NUMBER,reason:this.config.invalidMessages[O.INVALID_NUMBER],expectedType:[m.NUMERIC,m.NUMERIC_IN]}:this.checkInvalidTextValue(t)})),(0,s.Z)(this,"checkInvalidTextValue",(e=>this.config.disallowWildcard&&e.value.includes("*")?{type:O.WILDCARD_NOT_ALLOWED,reason:this.config.invalidMessages[O.WILDCARD_NOT_ALLOWED]}:!e.quoted&&/(^|[^\\])"/.test(e.value)?{type:O.MUST_BE_QUOTED,reason:this.config.invalidMessages[O.MUST_BE_QUOTED]}:e.quoted||""!==e.value?null:{type:O.FILTER_MUST_HAVE_VALUE,reason:this.config.invalidMessages[O.FILTER_MUST_HAVE_VALUE]})),(0,s.Z)(this,"checkInvalidInFilter",(e=>{let{items:t}=e;return t.some((e=>null===e.value))?{type:O.EMPTY_VALUE_IN_LIST_NOT_ALLOWED,reason:this.config.invalidMessages[O.EMPTY_VALUE_IN_LIST_NOT_ALLOWED]}:this.config.disallowWildcard&&t.some((e=>e.value.value.includes("*")))?{type:O.WILDCARD_NOT_ALLOWED,reason:this.config.invalidMessages[O.WILDCARD_NOT_ALLOWED]}:null})),this.text=t,this.location=a,this.config=i}get defaultTokenFields(){return{text:this.text(),location:this.location()}}},TermOperator:E,FilterType:m};function v(e,t){const a={...g},s=r()(a,t,((e,t)=>{if(t instanceof Set)return new Set([...t,...e])}));try{return d().parse(e,{...y,config:s})}catch(e){}return null}function D(e,t,a){return e&&e.length?(t?" ":"")+(1===e.length?e[0].text:e.map((e=>e.text)).join(a?" ":"")):""}},"./app/utils/getRouteStringFromRoutes.tsx":(e,t,a)=>{a.d(t,{Z:()=>r});var s=a("../node_modules/lodash/findLastIndex.js"),i=a.n(s);function r(e){if(!Array.isArray(e))return"";const t=e.filter((e=>!!e.path)),a=i()(t,(e=>{let{path:t}=e;return t.startsWith("/")}));return t.slice(a).filter((e=>{let{path:t}=e;return!!t})).map((e=>{let{path:t}=e;return t})).join("")}},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,a)=>{a.d(t,{BT:()=>R,e0:()=>O});var s=a("../node_modules/react/index.js"),i=a("./app/utils/analytics.tsx"),r=a("./app/utils/dates.tsx"),n=a("./app/utils/discover/eventView.tsx"),o=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),l=a("../node_modules/lodash/omit.js"),c=a.n(l),u=a("./app/utils/discover/genericDiscoverQuery.tsx"),d=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{eventView:t,location:a}=e;return c()(t.getEventsAPIPayload(a),["field","sort","per_page","query"])}function A(e){let{children:t,...a}=e;return(0,d.tZ)(u.ZP,{route:"metrics-compatibility-sums",getRequestPayload:p,...a,children:e=>{let{tableData:a,...s}=e;return t({tableData:a,...s})}})}function _(e){let{eventView:t,location:a}=e;return c()(t.getEventsAPIPayload(a),["field","sort","per_page","query"])}function E(e){let{children:t,...a}=e;return(0,d.tZ)(u.ZP,{route:"metrics-compatibility",getRequestPayload:_,...a,children:e=>{let{tableData:a,...s}=e;return t({tableData:a,...s})}})}A.displayName="MetricsCompatibilityQuery",E.displayName="MetricsCompatibilitySumsQuery";var T=a("./app/utils/performance/contexts/utils.tsx");const m=.01,h=.01,[S,f,I]=(0,T.n)({name:"MetricsCardinalityContext",strict:!1});function R(e){if(!(0,o.gp)(e.organization))return(0,d.tZ)(S,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},a=n.ZP.fromLocation(e.location);a.fields=[{field:"tpm()"}];const i=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,r.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(a);return(0,d.tZ)(s.Fragment,{children:(0,d.tZ)(A,{eventView:i,...t,children:a=>(0,d.tZ)(E,{eventView:i,...t,children:t=>{const s=a.isLoading||t.isLoading,i=a.isLoading||t.isLoading?void 0:function(e,t,a){const s={forceTransactionsOnly:!0},i=a.features.includes("performance-mep-bannerless-ui");if(!e)return s;const r=e.compatible_projects;return t?s:e?function(e){return!g(e).metricsCount}(e)?s:function(e,t){const a=g(e);return t?a.nullCount/a.metricsCount>h:a.nullCount>0}(e,i)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:r}:function(e){const t=g(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:r}:function(e,t){const a=g(e);return t?a.unparamCount/a.metricsCount>m:a.unparamCount>0}(e,i)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:r,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:s}(a.tableData&&t.tableData?{...a.tableData,...t.tableData}:null,!!a.error&&!!t.error,e.organization);return(0,d.tZ)(L,{sendOutcomeAnalytics:e.sendOutcomeAnalytics,organization:e.organization,value:{isLoading:s,outcome:i},children:e.children})}})})})}function L(e){const t=e.value.outcome?.shouldWarnIncompatibleSDK??!1,a=e.value.outcome?.shouldNotifyUnnamedTransactions??!1,r=!e.value.outcome?.forceTransactionsOnly;return(0,s.useEffect)((()=>{!e.value.isLoading&&e.sendOutcomeAnalytics&&(0,i.Gi)("performance_views.mep.metrics_outcome",{organization:e.organization,is_on_metrics:r,fallback_from_null:t,fallback_from_unparam:a})}),[e.organization,e.value.isLoading,r,a,t,e.sendOutcomeAnalytics]),(0,d.tZ)(S,{...e,children:e.children})}R.displayName="MetricsCardinalityProvider",L.displayName="Provider",I.Consumer;const O=f;function g(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx":(e,t,a)=>{a.d(t,{AQ:()=>_,EA:()=>A,UT:()=>p,hX:()=>E});var s=a("../node_modules/react/index.js"),i=a("./app/components/tag.tsx"),r=a("./app/utils/useOrganization.tsx"),n=a("./app/views/performance/landing/widgets/utils.tsx"),o=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),l=a("./app/utils/performance/contexts/utils.tsx"),c=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[u,d]=(0,l.n)({name:"MetricsEnhancedPerformanceDataContext"});function p(e){let{children:t,chartSetting:a}=e;const{setAutoSampleState:i}=(0,o.Eg)(),[r,l]=(0,s.useState)(void 0),d=(0,s.useCallback)((e=>{n.zS.includes(a)||(!0===e?i(o.nl.METRICS):!1===e&&i(o.nl.TRANSACTIONS),l(e))}),[i,l,a]);return(0,c.tZ)(u,{value:{isMetricsData:r,setIsMetricsData:d},children:t})}p.displayName="MEPDataProvider";const A=d;function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?.meta?.isMetricsData??e?.seriesAdditionalInfo?.[t]?.isMetricsData??e?.histograms?.meta?.isMetricsData??e?.tableData?.meta?.isMetricsData}function E(){const{isMetricsData:e}=A();if(!(0,r.Z)().features.includes("performance-use-metrics"))return null;if(void 0===e)return(0,c.tZ)("span",{"data-test-id":"no-metrics-data-tag"});const t=e?"processed":"indexed";return(0,c.tZ)(i.Z,{"data-test-id":"has-metrics-data-tag",children:t})}E.displayName="MEPTag"},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(e,t,a)=>{a.d(t,{Eg:()=>f,gp:()=>h,kP:()=>S,nP:()=>A,nl:()=>_,oR:()=>E,tm:()=>m});var s=a("../node_modules/react/index.js"),i=a("../node_modules/react-router/es/index.js"),r=(a("./app/utils/localStorage.tsx"),a("./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx")),n=a("./app/utils/queryString.tsx"),o=a("./app/utils/useOrganization.tsx"),l=a("./app/utils/performance/contexts/utils.tsx"),c=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[u,d,p]=(0,l.n)({name:"MetricsEnhancedSettingContext"}),A=p.Consumer;let _,E;!function(e){e.UNSET="unset",e.METRICS="metrics",e.TRANSACTIONS="transactions"}(_||(_={})),function(e){e.AUTO="auto",e.METRICS_ONLY="metricsOnly",e.TRANSACTIONS_ONLY="transactionsOnly"}(E||(E={}));const T="metricSetting",m="metricSearchSetting";function h(e){const t=function(e){return e.features.includes("performance-use-metrics")}(e),a=e.features.includes("performance-transaction-name-only-search"),s=e.features.includes("dynamic-sampling")&&e.features.includes("mep-rollout-flag");return t||a||s}function S(e){let{children:t,location:a,_hasMEPState:l,forceTransactions:d}=e;const p=h((0,o.Z)()),A=[E.METRICS_ONLY,E.TRANSACTIONS_ONLY],m=a?(0,n.ro)(a.query[T]):E.METRICS_ONLY;let S=E.METRICS_ONLY;d&&(S=E.TRANSACTIONS_ONLY);const f=A.find((e=>e===m))??S,I=void 0!==l,[R,L]=(0,s.useReducer)(((e,t)=>t),f),O=(0,s.useCallback)((e=>{a&&(i.browserHistory.replace({...a,query:{...a.query,[T]:e}}),L(e))}),[a,L]),[g,y]=(0,s.useReducer)(((e,t)=>t),_.UNSET),v=I?l:R,D=p&&v===E.AUTO,N=p&&v===E.METRICS_ONLY,P=p&&v===E.TRANSACTIONS_ONLY,C=`${v}`;return(0,c.tZ)(u,{value:{autoSampleState:g,metricSettingState:v,shouldQueryProvideMEPAutoParams:D,shouldQueryProvideMEPMetricParams:N,shouldQueryProvideMEPTransactionParams:P,memoizationKey:C,setMetricSettingState:O,setAutoSampleState:y},children:(0,c.tZ)(r.UT,{children:t})})}S.displayName="MEPSettingProvider";const f=d},"./app/utils/useRoutes.tsx":(e,t,a)=>{a.d(t,{V:()=>i});var s=a("./app/utils/useRouteContext.tsx");function i(){return(0,s.s)().routes}},"./app/utils/withProject.tsx":(e,t,a)=>{a.d(t,{Z:()=>l});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=a("../node_modules/react/index.js"),r=a("./app/sentryTypes.tsx"),n=a("./app/utils/getDisplayName.tsx"),o=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{var t;return t=class extends i.Component{render(){const{project:t,...a}=this.props;return(0,o.tZ)(e,{project:t??this.context.project,...a})}},(0,s.Z)(t,"displayName",`withProject(${(0,n.Z)(e)})`),(0,s.Z)(t,"contextTypes",{project:r.Z.Project}),t}},"./app/views/performance/landing/metricsDataSwitcher.tsx":(e,t,a)=>{a.d(t,{d:()=>d});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),r=a("../node_modules/react-router/es/index.js"),n=a("./app/components/loadingIndicator.tsx"),o=a("./app/utils/performance/contexts/metricsCardinality.tsx"),l=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),c=a("./app/utils/queryString.tsx"),u=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){const t=(0,l.gp)(e.organization),a=(0,o.e0)();return t?a.isLoading&&!e.hideLoadingIndicator?(0,u.tZ)(i.Fragment,{children:(0,u.tZ)(A,{children:(0,u.tZ)(n.Z,{})})}):a.outcome?(0,u.tZ)(i.Fragment,{children:(0,u.tZ)(p,{eventView:e.eventView,location:e.location,outcome:a.outcome,switcherChildren:e.children})}):(0,u.tZ)(i.Fragment,{children:e.children({forceTransactionsOnly:!0})}):(0,u.tZ)(i.Fragment,{children:e.children({forceTransactionsOnly:!0})})}function p(e){let{switcherChildren:t,outcome:a,location:s,eventView:n}=e;const{query:o}=s,d=(0,c.ro)(o[l.tm],""),p=(0,c.ro)(o.query,""),A=d===l.oR.TRANSACTIONS_ONLY,_=p&&A&&!a.forceTransactionsOnly;return(0,i.useEffect)((()=>{_&&r.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:void 0,[l.tm]:void 0}})}),[_,s]),p&&A&&!a.forceTransactionsOnly&&(n.query=""),(0,u.tZ)(i.Fragment,{children:t(a)})}d.displayName="MetricsDataSwitcher",p.displayName="MetricsSwitchHandler";const A=(0,s.Z)("div",{target:"e11vcqhu0"})({name:"zl1inp",styles:"display:flex;justify-content:center"})},"./app/views/performance/landing/utils.tsx":(e,t,a)=>{a.d(t,{BY:()=>E,Cf:()=>h,Lx:()=>T,NJ:()=>I,Oo:()=>R,Q_:()=>f,TT:()=>S,ZR:()=>O,hv:()=>L,kP:()=>m}),a("../node_modules/core-js/modules/es.array.push.js");var s=a("../node_modules/react-router/es/index.js"),i=a("../node_modules/lodash/omit.js"),r=a.n(i),n=a("./app/locale.tsx"),o=a("./app/utils/analytics.tsx"),l=a("./app/utils/formatters.tsx"),c=a("./app/utils/queryString.tsx"),u=a("./app/utils/tokenizeSearch.tsx"),d=a("./app/views/performance/data.tsx"),p=a("./app/views/performance/utils.tsx");const A="left",_="right";let E;!function(e){e.ALL="all",e.FRONTEND_PAGELOAD="frontend_pageload",e.FRONTEND_OTHER="frontend_other",e.BACKEND="backend",e.MOBILE="mobile"}(E||(E={}));const T=[{label:(0,n.t)("All Transactions"),field:E.ALL},{label:(0,n.t)("Web Vitals"),field:E.FRONTEND_PAGELOAD},{label:(0,n.t)("Frontend"),field:E.FRONTEND_OTHER},{label:(0,n.t)("Backend"),field:E.BACKEND},{label:(0,n.t)("Mobile"),field:E.MOBILE}];function m(e,t){const{eventView:a,location:i}=t,r=new u.MY(a.query);r.addFilterValues("!transaction",[`${e}`]),s.browserHistory.push({pathname:i.pathname,query:{...i.query,cursor:void 0,query:r.formatString()}})}function h(e){const t=(0,c.ro)(e?.query?.landingDisplay);return T.find((e=>{let{field:a}=e;return a===t}))}function S(e,t){const a=R(e,t);return T.find((e=>{let{field:t}=e;return t===a}))||T[0]}function f(e,t,a){return h(e)||S(t,a)}function I(e,t,a,i,n){const l=(0,c.ro)(t.query.query,""),d=new u.MY(l);d.removeFilter("transaction.op");const p={...r()(t.query,["landingDisplay","sort"]),query:d.formatString()};delete p[A],delete p[_];const E=R(a,n),T=f(t,a,n).field,m=E===e?{...p}:{...p,landingDisplay:e};(0,o.Gi)("performance_views.landingv3.display_change",{organization:i,change_to_display:e,default_display:E,current_display:T,is_default:E===T}),s.browserHistory.push({pathname:t.pathname,query:m})}function R(e,t){if(!t)return E.ALL;const a=t.project;return{[p.jq.ANY]:E.ALL,[p.jq.FRONTEND]:E.FRONTEND_PAGELOAD,[p.jq.BACKEND]:E.BACKEND,[p.jq.MOBILE]:E.MOBILE}[(0,p.Bh)(e,a)]??E.ALL}const L=e=>({"p75(transaction.duration)":{title:(0,n.t)("Duration (p75)"),tooltip:(0,d.$r)(e,d.kK.P75),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"tpm()":{title:(0,n.t)("Throughput"),tooltip:(0,d.$r)(e,d.kK.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,n.t)("Failure Rate"),tooltip:(0,d.$r)(e,d.kK.FAILURE_RATE),formatter:e=>(0,l.rl)(e,2)},"apdex()":{title:(0,n.t)("Apdex"),tooltip:(0,d.$r)(e,d.kK.APDEX),formatter:e=>(0,l.$1)(e,4)},"p75(measurements.frames_slow_rate)":{title:(0,n.t)("Slow Frames (p75)"),tooltip:(0,d.$r)(e,d.kK.SLOW_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.frames_frozen_rate)":{title:(0,n.t)("Frozen Frames (p75)"),tooltip:(0,d.$r)(e,d.kK.FROZEN_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.app_start_cold)":{title:(0,n.t)("Cold Start (p75)"),tooltip:(0,d.$r)(e,d.kK.APP_START_COLD),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,n.t)("Warm Start (p75)"),tooltip:(0,d.$r)(e,d.kK.APP_START_WARM),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,n.t)("Stall Percentage (p75)"),tooltip:(0,d.$r)(e,d.kK.STALL_PERCENTAGE),formatter:e=>(0,l.rl)(e,2)}});function O(e){return Boolean(e.getFields().find((e=>e.includes("measurements.stall_percentage"))))}},"./app/views/performance/landing/widgets/types.tsx":(e,t,a)=>{let s,i;a.d(t,{A:()=>i}),function(e){e.ERROR="error",e.LOADING="loading",e.EMPTY="empty",e.DATA="data"}(s||(s={})),function(e){e.HISTOGRAM="histogram",e.AREA="area",e.VITALS="vitals",e.LINE_LIST="line_list",e.TRENDS="trends",e.STACKED_AREA="stacked_area"}(i||(i={}))},"./app/views/performance/landing/widgets/utils.tsx":(e,t,a)=>{a.d(t,{CJ:()=>o,I2:()=>d,gM:()=>c,hD:()=>h,rp:()=>E,zM:()=>T,zS:()=>u});var s=a("./app/utils.tsx"),i=a("./app/utils/localStorage.tsx"),r=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),n=a("./app/views/performance/landing/widgets/widgetDefinitions.tsx");const o="app"==a.j?["children","organization","yAxis","period","start","end","environment","project","referrer"]:null,l={};function c(e,t){let a={};const i=l;return(e.shouldQueryProvideMEPAutoParams||t)&&(a={...a,...i,dataset:"metricsEnhanced"},t)?a:(e.shouldQueryProvideMEPTransactionParams&&(a={...a,...i,dataset:"discover"}),e.shouldQueryProvideMEPMetricParams&&(a={...a,...i,dataset:"metrics"}),(0,s.z)(a)?void 0:a)}const u=[n.s.MOST_RELATED_ERRORS,n.s.MOST_RELATED_ISSUES];function d(e,t){if(!u.includes(t))return c(e)}const p="landing-chart-container",A=(e,t,a)=>`landing-chart-container#${t}#${a}#${e}`;function _(){return JSON.parse(i.Z.getItem(p)||"{}")}const E=(e,t,a,s,i)=>{if(i)return s;const r=A(e,a,t),o=_(),l=o?.[r];return l&&Object.values(n.s).includes(l)?l:s},T=(e,t,a,s)=>{const r=A(e,a,t),n=_();n[r]=s,function(e){i.Z.setItem(p,JSON.stringify(e))}(n)},m=[n.s.DURATION_HISTOGRAM,n.s.FCP_HISTOGRAM,n.s.LCP_HISTOGRAM,n.s.FID_HISTOGRAM];function h(e,t,a){return!(0,r.gp)(e)||e.features.includes("performance-mep-reintroduce-histograms")||a.metricSettingState===r.oR.TRANSACTIONS_ONLY?t:t.filter((e=>!m.includes(e)))}},"./app/views/performance/landing/widgets/widgetDefinitions.tsx":(e,t,a)=>{a.d(t,{W:()=>u,s:()=>l});var s=a("./app/constants/chartPalette.tsx"),i=a("./app/locale.tsx"),r=a("./app/utils/discover/fields.tsx"),n=a("./app/views/performance/data.tsx"),o=a("./app/views/performance/landing/widgets/types.tsx");let l;!function(e){e.DURATION_HISTOGRAM="duration_histogram",e.LCP_HISTOGRAM="lcp_histogram",e.FCP_HISTOGRAM="fcp_histogram",e.FID_HISTOGRAM="fid_histogram",e.APDEX_AREA="apdex_area",e.P50_DURATION_AREA="p50_duration_area",e.P75_DURATION_AREA="p75_duration_area",e.P95_DURATION_AREA="p95_duration_area",e.P99_DURATION_AREA="p99_duration_area",e.P75_LCP_AREA="p75_lcp_area",e.TPM_AREA="tpm_area",e.FAILURE_RATE_AREA="failure_rate_area",e.USER_MISERY_AREA="user_misery_area",e.WORST_LCP_VITALS="worst_lcp_vitals",e.WORST_FCP_VITALS="worst_fcp_vitals",e.WORST_CLS_VITALS="worst_cls_vitals",e.WORST_FID_VITALS="worst_fid_vitals",e.MOST_CHANGED="most_changed",e.MOST_IMPROVED="most_improved",e.MOST_REGRESSED="most_regressed",e.MOST_RELATED_ERRORS="most_related_errors",e.MOST_RELATED_ISSUES="most_related_issues",e.SLOW_HTTP_OPS="slow_http_ops",e.SLOW_DB_OPS="slow_db_ops",e.SLOW_RESOURCE_OPS="slow_resource_ops",e.SLOW_BROWSER_OPS="slow_browser_ops",e.COLD_STARTUP_AREA="cold_startup_area",e.WARM_STARTUP_AREA="warm_startup_area",e.SLOW_FRAMES_AREA="slow_frames_area",e.FROZEN_FRAMES_AREA="frozen_frames_area",e.MOST_SLOW_FRAMES="most_slow_frames",e.MOST_FROZEN_FRAMES="most_frozen_frames",e.SPAN_OPERATIONS="span_operations",e.TIME_TO_INITIAL_DISPLAY="time_to_initial_display",e.TIME_TO_FULL_DISPLAY="time_to_full_display"}(l||(l={}));const c=s.$[5],u=e=>{let{organization:t}=e;return{[l.DURATION_HISTOGRAM]:{title:(0,i.t)("Duration Distribution"),titleTooltip:(0,n.$r)(t,n.kK.DURATION_DISTRIBUTION),fields:["transaction.duration"],dataType:o.A.HISTOGRAM,chartColor:c[5]},[l.LCP_HISTOGRAM]:{title:(0,i.t)("LCP Distribution"),titleTooltip:(0,n.$r)(t,n.kK.DURATION_DISTRIBUTION),fields:["measurements.lcp"],dataType:o.A.HISTOGRAM,chartColor:c[5]},[l.FCP_HISTOGRAM]:{title:(0,i.t)("FCP Distribution"),titleTooltip:(0,n.$r)(t,n.kK.DURATION_DISTRIBUTION),fields:["measurements.fcp"],dataType:o.A.HISTOGRAM,chartColor:c[5]},[l.FID_HISTOGRAM]:{title:(0,i.t)("FID Distribution"),titleTooltip:(0,n.$r)(t,n.kK.DURATION_DISTRIBUTION),fields:["measurements.fid"],dataType:o.A.HISTOGRAM,chartColor:c[5]},[l.WORST_LCP_VITALS]:{title:(0,i.t)("Worst LCP Web Vitals"),titleTooltip:(0,n.$r)(t,n.kK.LCP),fields:["measurements.lcp"],vitalStops:{poor:4e3,meh:2500},dataType:o.A.VITALS},[l.WORST_FCP_VITALS]:{title:(0,i.t)("Worst FCP Web Vitals"),titleTooltip:(0,n.$r)(t,n.kK.FCP),fields:["measurements.fcp"],vitalStops:{poor:3e3,meh:1e3},dataType:o.A.VITALS},[l.WORST_FID_VITALS]:{title:(0,i.t)("Worst FID Web Vitals"),titleTooltip:(0,n.$r)(t,n.kK.FID),fields:["measurements.fid"],vitalStops:{poor:300,meh:100},dataType:o.A.VITALS},[l.WORST_CLS_VITALS]:{title:(0,i.t)("Worst CLS Web Vitals"),titleTooltip:(0,n.$r)(t,n.kK.CLS),fields:["measurements.cls"],vitalStops:{poor:.25,meh:.1},dataType:o.A.VITALS},[l.TPM_AREA]:{title:(0,i.t)("Transactions Per Minute"),titleTooltip:(0,n.$r)(t,n.kK.TPM),fields:["tpm()"],dataType:o.A.AREA,chartColor:c[1],allowsOpenInDiscover:!0},[l.APDEX_AREA]:{title:(0,i.t)("Apdex"),titleTooltip:(0,n.$r)(t,n.kK.APDEX),fields:["apdex()"],dataType:o.A.AREA,chartColor:c[4],allowsOpenInDiscover:!0},[l.P50_DURATION_AREA]:{title:(0,i.t)("p50 Duration"),titleTooltip:(0,n.$r)(t,n.kK.P50),fields:["p50(transaction.duration)"],dataType:o.A.AREA,chartColor:c[3],allowsOpenInDiscover:!0},[l.P75_DURATION_AREA]:{title:(0,i.t)("p75 Duration"),titleTooltip:(0,n.$r)(t,n.kK.P75),fields:["p75(transaction.duration)"],dataType:o.A.AREA,chartColor:c[3],allowsOpenInDiscover:!0},[l.P95_DURATION_AREA]:{title:(0,i.t)("p95 Duration"),titleTooltip:(0,n.$r)(t,n.kK.P95),fields:["p95(transaction.duration)"],dataType:o.A.AREA,chartColor:c[3],allowsOpenInDiscover:!0},[l.P99_DURATION_AREA]:{title:(0,i.t)("p99 Duration"),titleTooltip:(0,n.$r)(t,n.kK.P99),fields:["p99(transaction.duration)"],dataType:o.A.AREA,chartColor:c[3],allowsOpenInDiscover:!0},[l.P75_LCP_AREA]:{title:(0,i.t)("p75 LCP"),titleTooltip:(0,n.$r)(t,n.kK.P75),fields:["p75(measurements.lcp)"],dataType:o.A.AREA,chartColor:c[1],allowsOpenInDiscover:!0},[l.FAILURE_RATE_AREA]:{title:(0,i.t)("Failure Rate"),titleTooltip:(0,n.$r)(t,n.kK.FAILURE_RATE),fields:["failure_rate()"],dataType:o.A.AREA,chartColor:c[2],allowsOpenInDiscover:!0},[l.USER_MISERY_AREA]:{title:(0,i.t)("User Misery"),titleTooltip:(0,n.$r)(t,n.kK.USER_MISERY),fields:["user_misery()"],dataType:o.A.AREA,chartColor:c[0],allowsOpenInDiscover:!0},[l.COLD_STARTUP_AREA]:{title:(0,i.t)("Cold Startup Time"),titleTooltip:(0,n.$r)(t,n.kK.APP_START_COLD),fields:["p75(measurements.app_start_cold)"],dataType:o.A.AREA,chartColor:c[4],allowsOpenInDiscover:!0},[l.WARM_STARTUP_AREA]:{title:(0,i.t)("Warm Startup Time"),titleTooltip:(0,n.$r)(t,n.kK.APP_START_WARM),fields:["p75(measurements.app_start_warm)"],dataType:o.A.AREA,chartColor:c[3],allowsOpenInDiscover:!0},[l.SLOW_FRAMES_AREA]:{title:(0,i.t)("Slow Frames"),titleTooltip:(0,n.$r)(t,n.kK.SLOW_FRAMES),fields:["p75(measurements.frames_slow_rate)"],dataType:o.A.AREA,chartColor:c[0],allowsOpenInDiscover:!0},[l.FROZEN_FRAMES_AREA]:{title:(0,i.t)("Frozen Frames"),titleTooltip:(0,n.$r)(t,n.kK.FROZEN_FRAMES),fields:["p75(measurements.frames_frozen_rate)"],dataType:o.A.AREA,chartColor:c[5],allowsOpenInDiscover:!0},[l.MOST_RELATED_ERRORS]:{title:(0,i.t)("Most Related Errors"),titleTooltip:(0,n.$r)(t,n.kK.MOST_ERRORS),fields:["failure_count()"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.MOST_RELATED_ISSUES]:{title:(0,i.t)("Most Related Issues"),titleTooltip:(0,n.$r)(t,n.kK.MOST_ISSUES),fields:["count()"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.SLOW_HTTP_OPS]:{title:(0,i.t)("Slow HTTP Ops"),titleTooltip:(0,n.$r)(t,n.kK.SLOW_HTTP_SPANS),fields:["p75(spans.http)"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.SLOW_BROWSER_OPS]:{title:(0,i.t)("Slow Browser Ops"),titleTooltip:(0,n.$r)(t,n.kK.SLOW_HTTP_SPANS),fields:["p75(spans.browser)"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.SLOW_RESOURCE_OPS]:{title:(0,i.t)("Slow Resource Ops"),titleTooltip:(0,n.$r)(t,n.kK.SLOW_HTTP_SPANS),fields:["p75(spans.resource)"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.SLOW_DB_OPS]:{title:(0,i.t)("Slow DB Ops"),titleTooltip:(0,n.$r)(t,n.kK.SLOW_HTTP_SPANS),fields:["p75(spans.db)"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.TIME_TO_INITIAL_DISPLAY]:{title:(0,i.t)("Time to Initial Display"),titleTooltip:(0,n.$r)(t,n.kK.TIME_TO_INITIAL_DISPLAY),fields:["p75(measurements.time_to_initial_display)"],dataType:o.A.AREA,chartColor:c[4],allowsOpenInDiscover:!0},[l.TIME_TO_FULL_DISPLAY]:{title:(0,i.t)("Time to Full Display"),titleTooltip:(0,n.$r)(t,n.kK.TIME_TO_FULL_DISPLAY),fields:["p75(measurements.time_to_full_display)"],dataType:o.A.AREA,chartColor:c[4],allowsOpenInDiscover:!0},[l.MOST_SLOW_FRAMES]:{title:(0,i.t)("Most Slow Frames"),titleTooltip:(0,n.$r)(t,n.kK.SLOW_FRAMES),fields:["avg(measurements.frames_slow)"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.MOST_FROZEN_FRAMES]:{title:(0,i.t)("Most Frozen Frames"),titleTooltip:(0,n.$r)(t,n.kK.FROZEN_FRAMES),fields:["avg(measurements.frames_frozen)"],dataType:o.A.LINE_LIST,chartColor:c[0]},[l.MOST_IMPROVED]:{title:(0,i.t)("Most Improved"),titleTooltip:(0,i.t)("This compares the baseline (%s) of the past with the present.","improved"),fields:[],dataType:o.A.TRENDS},[l.MOST_REGRESSED]:{title:(0,i.t)("Most Regressed"),titleTooltip:(0,i.t)("This compares the baseline (%s) of the past with the present.","regressed"),fields:[],dataType:o.A.TRENDS},[l.MOST_CHANGED]:{title:(0,i.t)("Most Changed"),titleTooltip:(0,i.t)("This compares the baseline (%s) of the past with the present.","changed"),fields:[],dataType:o.A.TRENDS},[l.SPAN_OPERATIONS]:{title:(0,i.t)("Span Operations Breakdown"),titleTooltip:"",fields:r.$4.map((e=>`p75(${e})`)),dataType:o.A.STACKED_AREA}}}},"./app/views/performance/vitalDetail/utils.tsx":(e,t,a)=>{a.d(t,{EX:()=>N,MN:()=>_,Np:()=>m,SP:()=>E,Uy:()=>f,Ve:()=>I,W0:()=>y,a7:()=>g,cD:()=>D,eE:()=>A,fL:()=>T,i4:()=>h,iF:()=>S,il:()=>O,jo:()=>L,q4:()=>R,vk:()=>v});var s=a("./app/components/charts/components/markLine.tsx"),i=a("./app/components/charts/utils.tsx"),r=a("./app/icons/index.tsx"),n=a("./app/locale.tsx"),o=a("./app/utils/discover/charts.tsx"),l=a("./app/utils/discover/fields.tsx"),c=a("./app/utils/fields/index.ts"),u=a("./app/utils/performance/vitals/constants.tsx"),d=a("./app/utils/queryString.tsx"),p=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A={[c.Zl.FP]:3e3,[c.Zl.FCP]:3e3,[c.Zl.LCP]:4e3,[c.Zl.FID]:300,[c.Zl.CLS]:.25},_={[c.Zl.FP]:1e3,[c.Zl.FCP]:1e3,[c.Zl.LCP]:2500,[c.Zl.FID]:100,[c.Zl.CLS]:.1};let E;!function(e){e.POOR="Poor",e.MEH="Meh",e.GOOD="Good"}(E||(E={}));const T={[E.POOR]:"red300",[E.MEH]:"yellow300",[E.GOOD]:"green300"},m={[E.POOR]:(0,p.tZ)(r.pY,{color:T[E.POOR]}),[E.MEH]:(0,p.tZ)(r.tC,{color:T[E.MEH]}),[E.GOOD]:(0,p.tZ)(r.O1,{color:T[E.GOOD]})};function h(e){let{orgSlug:t,vitalName:a,projectID:s,query:i}=e;const r=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/vitaldetail/`}({orgSlug:t});return{pathname:r,query:{vitalName:a,project:s,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}function S(e){const t=(0,d.ro)(e.query.vitalName);return Object.values(c.Zl).find((e=>e===t))||c.Zl.LCP}function f(e){return e===c.Zl.CLS?(0,n.t)("CLS p75"):(0,n.t)("Duration p75")}function I(e){const t=A[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}function R(e){const t=_[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}const L={[c.Zl.FCP]:(0,n.t)("First Contentful Paint"),[c.Zl.CLS]:(0,n.t)("Cumulative Layout Shift"),[c.Zl.FID]:(0,n.t)("First Input Delay"),[c.Zl.LCP]:(0,n.t)("Largest Contentful Paint")},O={[c.Zl.FCP]:(0,n.t)("First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks. At the moment, there is support for FCP in the following browsers:"),[c.Zl.CLS]:(0,n.t)("Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts. At the moment, there is support for CLS in the following browsers:"),[c.Zl.FID]:(0,n.t)("First Input Delay (FID) measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not. At the moment, there is support for FID in the following browsers:"),[c.Zl.LCP]:(0,n.t)("Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. It’s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page. At the moment, there is support for LCP in the following browsers:")},g={[c.Zl.FCP]:"FCP",[c.Zl.CLS]:"CLS",[c.Zl.FID]:"FID",[c.Zl.LCP]:"LCP"},y={[c.Zl.FCP]:"custom",[c.Zl.CLS]:"cls",[c.Zl.FID]:"fid",[c.Zl.LCP]:"lcp"};function v(e){let t=-1/0;for(const{data:a}of e)for(const e of a)t=Math.max(t,e.value);return t}const D={[c.Zl.LCP]:[u.AR.CHROME,u.AR.EDGE,u.AR.OPERA],[c.Zl.FID]:[u.AR.CHROME,u.AR.EDGE,u.AR.OPERA,u.AR.FIREFOX,u.AR.SAFARI,u.AR.IE],[c.Zl.CLS]:[u.AR.CHROME,u.AR.EDGE,u.AR.OPERA],[c.Zl.FP]:[u.AR.CHROME,u.AR.EDGE,u.AR.OPERA],[c.Zl.FCP]:[u.AR.CHROME,u.AR.EDGE,u.AR.OPERA,u.AR.FIREFOX,u.AR.SAFARI],[c.Zl.TTFB]:[u.AR.CHROME,u.AR.EDGE,u.AR.OPERA,u.AR.FIREFOX,u.AR.SAFARI,u.AR.IE]};function N(e){let{theme:t,location:a,vital:r,yAxis:u}=e;const p="false"!==(0,d.ro)(a.query.utc),E=A[r],T=_[r];return{vitalPoor:E,vitalMeh:T,legend:{right:10,top:0,selected:(0,i.RI)(a)},chartOptions:{grid:{left:"5px",right:"10px",top:"35px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,o.CX)(e,(0,l.Px)(r===c.Zl.CLS?t:u))},yAxis:{min:0,max:E,axisLabel:{color:t.chartLabel,showMaxLabel:!1,formatter:e=>(0,o.gu)(e,(0,l.Px)(u))}}},markLines:[{seriesName:"Thresholds",type:"line",data:[],markLine:(0,s.Z)({silent:!0,lineStyle:{color:t.red300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,n.t)("Poor")},data:[{yAxis:E}]})},{seriesName:"Thresholds",type:"line",data:[],markLine:(0,s.Z)({silent:!0,lineStyle:{color:t.yellow300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,n.t)("Meh")},data:[{yAxis:T}]})}],utc:p}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_performance_searchBar_tsx-app_components_searchSyntax_parser_tsx-app_utils_get-02464a.13765110a13e4e43111a201eb5f9a2ab.js.map