"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamNotifications_tsx"],{"./app/views/asyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var s=n("./app/components/asyncComponent.tsx"),i=n("./app/components/sentryDocumentTitle.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends s.Z{getTitle(){return""}render(){return(0,a.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/organizationTeams/teamNotifications.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),r=n("./app/actionCreators/indicator.tsx"),o=n("./app/components/acl/access.tsx"),l=n("./app/components/button.tsx"),c=n("./app/components/confirm.tsx"),d=n("./app/components/emptyMessage.tsx"),m=n("./app/components/forms/fields/textField.tsx"),p=n("./app/components/links/externalLink.tsx"),h=n("./app/components/panels/index.tsx"),u=n("./app/components/tooltip.tsx"),g=n("./app/icons/index.tsx"),x=n("./app/locale.tsx"),Z=n("./app/styles/space.tsx"),y=n("./app/utils.tsx"),f=n("./app/utils/withOrganization.tsx"),w=n("./app/views/asyncView.tsx"),b=n("./app/views/settings/project/permissionAlert.tsx"),k=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v="https://docs.sentry.io/product/integrations/notification-incidents/slack/#team-notifications",j=["slack"];class z extends w.Z{constructor(){super(...arguments),(0,s.Z)(this,"handleDelete",(async e=>{try{const{organization:t,team:n}=this.props,s=`/teams/${t.slug}/${n.slug}/external-teams/${e.id}/`;await this.api.requestPromise(s,{method:"DELETE"}),(0,r.S9)((0,x.t)("Deletion successful")),this.fetchData()}catch{(0,r.Iw)((0,x.t)("An error occurred"))}}))}getTitle(){return"Team Notification Settings"}getEndpoints(){const{organization:e,team:t}=this.props;return[["teamDetails",`/teams/${e.slug}/${t.slug}/`,{query:{expand:["externalTeams"]}}],["integrations",`/organizations/${e.slug}/integrations/`,{query:{includeConfig:0}}]]}renderBody(){const{team:e}=this.props;return(0,k.BX)(a.Fragment,{children:[(0,k.tZ)(b.Z,{access:["team:write"],team:e}),(0,k.BX)(h.s_,{children:[(0,k.tZ)(h.V9,{children:(0,x.t)("Notifications")}),(0,k.tZ)(h.N,{children:this.renderPanelBody()})]})]})}renderPanelBody(){const{organization:e,team:t}=this.props,{teamDetails:n,integrations:s}=this.state,i=s.filter((e=>j.includes(e.provider.key)));if(!i.length)return(0,k.tZ)(d.Z,{children:(0,x.t)("No Notification Integrations have been installed yet.")});const a=(n.externalTeams||[]).filter((e=>j.includes(e.provider)));if(!a.length)return(0,k.BX)(d.Z,{children:[(0,k.tZ)("div",{children:(0,x.t)("No teams have been linked yet.")}),(0,k.tZ)(_,{children:(0,x._N)("Head over to Slack and type [code] to get started. [link].",{code:(0,k.tZ)("code",{children:"/sentry link team"}),link:(0,k.tZ)(p.Z,{href:v,children:(0,x.t)("Learn more")})})})]});const r=Object.fromEntries(i.map((e=>[e.id,e]))),m=(0,o.d)(["team:write"],{organization:e,team:t});return a.map((e=>(0,k.BX)(D,{children:[(0,k.tZ)(B,{disabled:!0,label:(0,k.BX)("div",{children:[(0,k.BX)(N,{children:[(0,y.LF)(e.provider),":",r[e.integrationId].name]}),(0,k.tZ)(_,{children:(0,x._N)("Unlink this channel in Slack with [code]. [link].",{code:(0,k.tZ)("code",{children:"/sentry unlink team"}),link:(0,k.tZ)(p.Z,{href:v,children:(0,x.t)("Learn more")})})})]}),labelText:(0,x.t)("Unlink this channel in slack with `/slack unlink team`"),name:"externalName",value:e.externalName}),(0,k.tZ)(C,{children:(0,k.tZ)(u.u,{title:(0,x.t)("You must be an organization owner, manager or admin to remove a Slack team link"),disabled:m,children:(0,k.tZ)(c.Z,{disabled:!m,onConfirm:()=>this.handleDelete(e),message:(0,x.t)("Are you sure you want to remove this Slack team link?"),children:(0,k.tZ)(l.zx,{size:"sm",icon:(0,k.tZ)(g.Fz,{size:"md"}),"aria-label":(0,x.t)("delete"),disabled:!m})})})})]},e.id)))}}const T=(0,f.Z)(z),N=(0,i.Z)("div",{target:"e84f6wt4"})("color:",(e=>e.theme.textColor),";line-height:",(0,Z.D)(2),";"),_=(0,i.Z)("div",{target:"e84f6wt3"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeRelativeSmall),";line-height:1.4;margin-top:",(0,Z.D)(1),";"),D=(0,i.Z)("div",{target:"e84f6wt2"})({name:"1dmiggy",styles:"display:flex;align-items:center;justify-content:flex-start"}),B=(0,i.Z)(m.Z,{target:"e84f6wt1"})({name:"82a6rk",styles:"flex:1"}),C=(0,i.Z)("div",{target:"e84f6wt0"})("margin-right:",(0,Z.D)(4),";padding-right:",(0,Z.D)(.5),";")},"./app/views/settings/project/permissionAlert.tsx":(e,t,n)=>{n.d(t,{Z:()=>c});var s=n("./app/components/acl/access.tsx"),i=n("./app/components/alert.tsx"),a=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=(0,a.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function l(e){let{access:t=["project:write"],project:n,team:a,...l}=e;return(0,r.tZ)(s.Z,{access:t,project:n,team:a,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(i.bZ,{"data-test-id":"project-permission-alert",type:"warning",...l,children:o})}})}l.displayName="PermissionAlert";const c=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamNotifications_tsx.86aafb38379cc1496c718fd65b2b44c9.js.map