"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_rules_issue_details_ruleDetails_tsx"],{"./app/components/alerts/snoozeAlert.tsx":(e,t,r)=>{r.d(t,{Z:()=>f});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/react/index.js"),o=r("../node_modules/react-router/es/index.js"),i=r("./app/actionCreators/indicator.tsx"),a=r("./app/components/button.tsx"),l=r("./app/components/buttonBar.tsx"),d=r("./app/components/dropdownMenu/index.tsx"),c=r("./app/icons/index.tsx"),u=r("./app/locale.tsx"),p=r("./app/types/alerts.tsx"),m=r("./app/utils/useApi.tsx"),g=r("./app/utils/useLocation.tsx"),h=r("./app/utils/useOrganization.tsx"),Z=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(e){let{isSnoozed:t,onSnooze:r,projectSlug:n,ruleId:y,ruleActionCategory:f,hasAccess:b,type:w}=e;const D=(0,h.Z)(),z=(0,m.Z)(),S=(0,g.T)(),[_,E]=(0,s.useState)(!1),T="issue"===w?"rules":"alert-rules",A=(0,s.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E(!0);try{await z.requestPromise(`/projects/${D.slug}/${n}/${T}/${y}/snooze/`,{method:"POST",data:{target:e}}),s&&o.browserHistory.replace({pathname:S.pathname,query:{...S.query,mute:void 0}}),E(!1),(0,i.S9)((0,u.t)("Alert muted")),r({snooze:!t,snoozeCreatedBy:"You",snoozeForEveryone:"me"!==e})}catch(e){403===e.status?(0,i.Iw)((0,u.t)("You do not have permission to mute this alert")):410===e.status?(0,i.Iw)((0,u.t)("This alert has already been muted")):(0,i.Iw)((0,u.t)("Unable to mute this alert"))}}),[z,t,S.pathname,S.query,r,D.slug,n,y,T]),j=f===p.IA.ALL_DEFAULT?"me":"everyone";(0,s.useEffect)((()=>{"1"!==S.query.mute||t||A(j,!0)}),[S.query,t,A,j]);const N=[{key:"me",label:(0,u.t)("Mute for me"),onAction:()=>A("me"),hidden:f!==p.IA.SOME_DEFAULT},{key:"everyone",label:(0,u.t)("Mute for everyone"),onAction:()=>A("everyone"),hidden:f!==p.IA.ALL_DEFAULT}],X=N.filter((e=>!e.hidden)).length>0;return t?(0,Z.tZ)(a.zx,{size:"sm",icon:(0,Z.tZ)(c.i1,{}),disabled:_||!b,onClick:()=>async function(){E(!0);try{await z.requestPromise(`/projects/${D.slug}/${n}/${T}/${y}/snooze/`,{method:"DELETE"}),E(!1),(0,i.S9)((0,u.t)("Alert unmuted")),r({snooze:!t})}catch(e){403===e.status?(0,i.Iw)((0,u.t)("You do not have permission to unmute this alert")):(0,i.Iw)((0,u.t)("Unable to unmute this alert"))}}(),children:(0,u.t)("Unmute")}):(0,Z.BX)(l.ZP,{children:[(0,Z.tZ)(v,{size:"sm",icon:(0,Z.tZ)(c.Pw,{}),disabled:_||!b,hasDropdown:X,onClick:()=>{A(j)},children:"me"===j?(0,u.t)("Mute for me"):(0,u.t)("Mute for everyone")}),f!==p.IA.NO_DEFAULT&&(0,Z.tZ)(d.h,{size:"sm",trigger:e=>(0,Z.tZ)(x,{...e,size:"sm","aria-label":(0,u.t)("Mute alert options"),icon:(0,Z.tZ)(c.g6,{direction:"down",size:"xs"})}),items:N,isDisabled:_||!b})]})}y.displayName="SnoozeAlert";const f=y,x=(0,n.Z)(a.zx,{target:"ev8ogja1"})("box-shadow:none;border-radius:",(e=>e.theme.borderRadiusRight),";border-left:none;"),v=(0,n.Z)(a.zx,{target:"ev8ogja0"})("box-shadow:none;border-radius:",(e=>e.hasDropdown?e.theme.borderRadiusLeft:e.theme.borderRadius),";")},"./app/components/keyValueTable.tsx":(e,t,r)=>{r.d(t,{G:()=>l,v:()=>a});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/react/index.js"),o=r("./app/styles/space.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,n.Z)("dl",{target:"ehev67y2"})("display:grid;grid-template-columns:50% 50%;",(e=>e.noMargin?"margin-bottom: 0;":null),";");function l(e){let{keyName:t,value:r}=e;return(0,i.BX)(s.Fragment,{children:[(0,i.tZ)(c,{children:t}),(0,i.tZ)(u,{children:r})]})}l.displayName="KeyValueTableRow";const d=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,o.D)(.5)} ${(0,o.D)(1)};\nfont-weight: normal;\nline-height: inherit;\n${e=>e.theme.overflowEllipsis};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},c=(0,n.Z)("dt",{target:"ehev67y1"})(d,";color:",(e=>e.theme.textColor),";"),u=(0,n.Z)("dd",{target:"ehev67y0"})(d,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/components/pageTimeRangeSelector.tsx":(e,t,r)=>{r.d(t,{Z:()=>p});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("./app/components/organizations/timeRangeSelector/index.tsx"),o=r("./app/components/panels/index.tsx"),i=r("./app/locale.tsx"),a=r("./app/styles/space.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{className:t,...r}=e;return(0,l.tZ)(c,{className:t,children:(0,l.tZ)(s.Z,{label:(0,l.tZ)(u,{children:(0,i.t)("Date Range:")}),detached:!0,...r},`period:${r.relative}-start:${r.start}-end:${r.end}-utc:${r.utc}-defaultPeriod:${r.defaultPeriod}`)})}d.displayName="PageTimeRangeSelector";const c=(0,n.Z)(o.s_,{target:"e81ghdn1"})("padding:0;margin:0;display:flex;justify-content:center;align-items:center;height:",(e=>e.theme.form.md.height),"px;background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";>div{width:100%;align-self:stretch;}>div>div:first-child>div{padding:0 ",(0,a.D)(2),";}>div>div:last-child:not(:first-child){min-width:calc(100% + 2px);transform:translateX(-1px);right:auto;}"),u=(0,n.Z)("span",{target:"e81ghdn0"})("text-align:left;font-weight:600;color:",(e=>e.theme.textColor),";>span:last-child{font-weight:400;}"),p=d},"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,r)=>{r.d(t,{Z:()=>o});var n=r("../node_modules/react/index.js"),s=r("./app/views/routeAnalyticsContextProvider.tsx");function o(e,t){const{setEventNames:r,previousUrl:o}=(0,n.useContext)(s.o);(0,n.useEffect)((()=>{r(e,t)}),[r,e,t,o])}},"./app/views/alerts/rules/issue/details/ruleDetails.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>He});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/lodash/pick.js")),o=r.n(s),i=r("../node_modules/moment/moment.js"),a=r.n(i),l=r("./app/components/acl/access.tsx"),d=r("./app/components/alert.tsx"),c=r("./app/components/alerts/snoozeAlert.tsx"),u=r("./app/components/breadcrumbs.tsx"),p=r("./app/components/button.tsx"),m=r("./app/components/buttonBar.tsx"),g=r("./app/components/errorBoundary.tsx"),h=r("./app/components/idBadge/index.tsx"),Z=r("./app/components/layouts/thirds.tsx"),y=r("./app/components/links/link.tsx"),f=r("./app/components/loadingError.tsx"),x=r("./app/components/loadingIndicator.tsx"),v=r("./app/components/organizations/pageFilters/container.tsx"),b=r("./app/components/organizations/pageFilters/parse.tsx"),w=r("./app/components/pageTimeRangeSelector.tsx"),D=r("./app/components/sentryDocumentTitle.tsx"),z=r("./app/icons/index.tsx"),S=r("./app/locale.tsx"),_=r("./app/styles/space.tsx"),E=r("./app/types/alerts.tsx"),T=r("./app/utils/analytics.tsx"),A=r("./app/utils/queryClient.tsx"),j=r("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),N=r("./app/utils/routeAnalytics/useRouteAnalyticsParams.tsx"),X=r("./app/utils/useOrganization.tsx"),k=r("./app/utils/useProjects.tsx"),B=r("./app/views/alerts/rules/issue/index.tsx"),I=r("./app/views/alerts/rules/metric/details/constants.tsx"),$=r("./app/views/alerts/rules/utils.tsx"),C=r("./app/components/charts/areaChart.tsx"),L=r("./app/components/charts/chartZoom.tsx"),R=r("./app/components/charts/styles.tsx"),F=r("./app/components/panels/index.tsx"),P=r("./app/components/placeholder.tsx"),H=r("./app/utils/getDynamicText.tsx"),U=r("./app/utils/useRouter.tsx"),M=r("./app/views/routeError.tsx"),O=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function q(e){let{project:t,period:r,start:n,end:s,utc:o,rule:i}=e;const a=(0,X.Z)(),l=(0,U.Z)(),{data:d,isLoading:c,isError:u,error:p}=(0,A.WE)([`/projects/${a.slug}/${t.slug}/rules/${i.id}/stats/`,{query:{...r&&{statsPeriod:r},start:n,end:s,utc:o}}],{staleTime:3e4}),m=d?.reduce(((e,t)=>e+t.count),0)??0;return u?(0,O.tZ)(M.Z,{error:p}):(0,O.BX)(F.s_,{children:[(0,O.BX)(K,{withPadding:!0,children:[(0,O.tZ)(Y,{children:(0,O.tZ)(R.ws,{children:(0,S.t)("Alerts Triggered")})}),(0,H.Z)({value:c?(0,O.tZ)(P.Z,{height:"200px"}):(0,O.tZ)(L.Z,{router:l,period:r,start:n,end:s,utc:o,usePageDate:!0,children:e=>(0,O.tZ)(C.T,{...e,isGroupedByDate:!0,showTimeInTooltip:!0,grid:{left:(0,_.D)(.25),right:(0,_.D)(2),top:(0,_.D)(3),bottom:0},yAxis:{minInterval:1},series:[{seriesName:"Alerts Triggered",data:d?.map((e=>({name:e.date,value:e.count})))??[],emphasis:{disabled:!0}}]})}),fixed:(0,O.tZ)(P.Z,{height:"200px",testId:"skeleton-ui"})})]}),(0,O.BX)(G,{children:[(0,O.tZ)(V,{children:(0,S.t)("Total Alerts")}),(0,O.tZ)(W,{children:c?(0,O.tZ)(P.Z,{height:"16px",width:"50px"}):m.toLocaleString()})]})]})}q.displayName="IssueAlertDetailsChart";const Y=(0,n.Z)("div",{target:"e1x37u3e4"})("margin-bottom:",(0,_.D)(3),";"),G=(0,n.Z)(F.jH,{target:"e1x37u3e3"})("display:flex;align-items:center;padding:",(0,_.D)(1)," 20px;"),V=(0,n.Z)(R.OT,{target:"e1x37u3e2"})("display:flex;align-items:center;margin:0;font-weight:bold;font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),W=(0,n.Z)("div",{target:"e1x37u3e1"})("display:flex;align-items:center;margin:0 ",(0,_.D)(1),";"),K=(0,n.Z)(F.N,{target:"e1x37u3e0"})({name:"sgs7ru",styles:"padding-right:6px"});var Q=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),J=r("../node_modules/react/index.js"),ee=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),te=r("./app/components/asyncComponent.tsx"),re=r("./app/components/count.tsx"),ne=r("./app/components/dateTime.tsx"),se=r("./app/components/pagination.tsx"),oe=r("./app/utils/events.tsx");class ie extends te.Z{constructor(){super(...arguments),(0,Q.Z)(this,"shouldRenderBadRequests",!0)}componentDidUpdate(e){const{project:t,organization:r,start:n,end:s,period:o,utc:i,cursor:a}=this.props;e.start===n&&e.end===s&&e.period===o&&e.utc===i&&e.organization.id===r.id&&e.project.id===t.id&&e.cursor===a||this.remountComponent()}getDefaultState(){return{...super.getDefaultState(),groupHistory:null}}getEndpoints(){const{project:e,rule:t,organization:r,period:n,start:s,end:o,utc:i,cursor:a}=this.props;return[["groupHistory",`/projects/${r.slug}/${e.slug}/rules/${t.id}/group-history/`,{query:{per_page:10,...n&&{statsPeriod:n},start:s,end:o,utc:i,cursor:a}}]]}renderLoading(){return this.renderBody()}renderBody(){const{organization:e,rule:t}=this.props,{loading:r,groupHistory:n,groupHistoryPageLinks:s}=this.state;return(0,O.BX)(J.Fragment,{children:[(0,O.tZ)(le,{isLoading:r,isEmpty:0===n?.length,emptyMessage:(0,S.t)("No issues exist for the current query."),headers:[(0,S.t)("Issue"),(0,O.tZ)(de,{children:(0,S.t)("Alerts")},"alerts"),(0,O.tZ)(de,{children:(0,S.t)("Events")},"events"),(0,S.t)("Last Triggered")],children:n?.map((r=>{let{group:n,count:s,lastTriggered:o,eventId:i}=r;const a=(0,oe.FC)(n),{title:l}=(0,oe.YQ)(n);return(0,O.BX)(J.Fragment,{children:[(0,O.BX)(ue,{children:[(0,O.BX)(y.Z,{to:{pathname:`/organizations/${e.slug}/issues/${n.id}/`+(i?`events/${i}`:""),query:{referrer:"alert-rule-issue-list",...t.environment?{environment:t.environment}:{}}},children:[l,":"]}),(0,O.tZ)(pe,{children:a})]}),(0,O.tZ)(de,{children:(0,O.tZ)(re.Z,{value:s})}),(0,O.tZ)(de,{children:(0,O.tZ)(re.Z,{value:n.count})}),(0,O.tZ)("div",{children:(0,O.tZ)(ce,{date:(0,H.Z)({value:o,fixed:"Mar 16, 2020 9:10:13 AM UTC"}),year:!0,seconds:!0,timeZone:!0})})]},n.id)}))}),(0,O.tZ)(me,{children:(0,O.tZ)(ge,{pageLinks:s,size:"xs"})})]})}}const ae=ie,le=(0,n.Z)(F.KB,{target:"e7abfdl6"})("grid-template-columns:1fr 0.2fr 0.2fr 0.5fr;font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,_.D)(1.5),";",(e=>!e.isEmpty&&(0,ee.iv)("&>div{padding:",(0,_.D)(1)," ",(0,_.D)(2),";}","")),";"),de=(0,n.Z)("div",{target:"e7abfdl5"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"}),ce=(0,n.Z)(ne.Z,{target:"e7abfdl4"})("white-space:nowrap;color:",(e=>e.theme.subText),";"),ue=(0,n.Z)("div",{target:"e7abfdl3"})((e=>e.theme.overflowEllipsis),";display:flex;gap:",(0,_.D)(.5),";min-width:200px;"),pe=(0,n.Z)("span",{target:"e7abfdl2"})((e=>e.theme.overflowEllipsis),";color:",(e=>e.theme.textColor),";"),me=(0,n.Z)("div",{target:"e7abfdl1"})("display:flex;align-items:center;justify-content:flex-end;margin-bottom:",(0,_.D)(2),";"),ge=(0,n.Z)(se.Z,{target:"e7abfdl0"})({name:"1i9vogi",styles:"margin-top:0"});var he=r("./app/components/avatar/actorAvatar.tsx"),Ze=r("./app/components/keyValueTable.tsx"),ye=r("./app/components/timeSince.tsx"),fe=r("./app/views/alerts/rules/metric/types.tsx"),xe=r("./app/views/alerts/utils/constants.tsx"),ve=r("./app/views/projectInstall/issueAlertOptions.tsx");function be(e){let{condition:t}=e;const r=(0,X.Z)();return xe.SD.includes(t.id)?t.comparisonType===fe.t6.PERCENT?t.id===ve.rq?(0,O.tZ)(J.Fragment,{children:(0,S.t)("Percent of sessions affected by an issue is %s%% higher in %s compared to %s ago",t.value,t.comparisonInterval,t.interval)}):(0,O.tZ)(J.Fragment,{children:(0,S.t)("Number of events in an issue is %s%% higher in %s compared to %s ago",t.value,t.comparisonInterval,t.interval)}):(0,O.tZ)(J.Fragment,{children:(0,S.t)("Number of events in an issue is more than %s in %s",t.value,t.interval)}):t.id===ve.FZ&&r.features.includes("escalating-issues")?(0,O.tZ)(J.Fragment,{children:(0,S.t)("The issue changes state from archived to escalating")}):(0,O.tZ)(J.Fragment,{children:t.name})}function we(e){let{action:t,memberList:r,teams:n}=e;if("Member"===t.targetType){const e=r.find((e=>e.user?.id===`${t.targetIdentifier}`));return(0,O.tZ)(J.Fragment,{children:(0,S.t)("Send a notification to %s",e?.email??(0,S.t)("unknown"))})}if("Team"===t.targetType){const e=n.find((e=>e.id===`${t.targetIdentifier}`));return(0,O.tZ)(J.Fragment,{children:(0,S.t)("Send a notification to #%s",e?.name??(0,S.t)("unknown"))})}if("sentry.integrations.slack.notify_action.SlackNotifyServiceAction"===t.id){const e=t.name.replace(/\(optionally.*\)/,"").replace("and show tags [] in notification","");return(0,O.tZ)(J.Fragment,{children:e})}return(0,O.tZ)(J.Fragment,{children:t.name})}function De(e){let{rule:t,teams:r,projectSlug:n}=e;const s=(0,X.Z)(),{data:o}=(0,A.WE)([`/organizations/${s.slug}/users/`,{query:{projectSlug:n}}],{staleTime:6e4});return(0,O.BX)(F.N,{children:[(0,O.tZ)(je,{children:(0,O.BX)(Ne,{children:[(0,O.tZ)(Be,{children:(0,O.tZ)(z.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,O.BX)(Xe,{children:[(0,O.tZ)(ke,{children:(0,S._N)("[when:When] an event is captured [selector]",{when:(0,O.tZ)(Ie,{}),selector:t.conditions.length?(0,S.t)("and %s...",t.actionMatch):""})}),t.conditions.map(((e,t)=>(0,O.tZ)($e,{children:(0,O.tZ)(be,{condition:e})},t)))]})]})}),t.filters.length?(0,O.tZ)(je,{children:(0,O.BX)(Ne,{children:[(0,O.tZ)(Be,{children:(0,O.tZ)(z.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,O.BX)(Xe,{children:[(0,O.tZ)(ke,{children:(0,S._N)("[if:If] [selector] of these filters match",{if:(0,O.tZ)(Ie,{}),selector:t.filterMatch})}),t.filters.map(((e,t)=>(0,O.tZ)($e,{children:e.time?e.name+"(s)":e.name},t)))]})]})}):null,(0,O.tZ)(je,{children:(0,O.BX)(Ne,{children:[(0,O.tZ)(Be,{children:(0,O.tZ)(z.g6,{isCircled:!0,color:"gray200",direction:"right",size:"sm"})}),(0,O.BX)("div",{children:[(0,O.tZ)(ke,{children:(0,S._N)("[then:Then] perform these actions",{then:(0,O.tZ)(Ie,{})})}),t.actions.length?t.actions.map(((e,t)=>(0,O.tZ)($e,{children:(0,O.tZ)(we,{action:e,memberList:o??[],teams:r})},t))):(0,O.tZ)($e,{children:(0,S.t)("Do nothing")})]})]})})]})}function ze(e){let{rule:t,teams:r,projectSlug:n}=e;const s=t.owner?.split(":")[1],o=s&&{type:"team",id:s,name:""};return(0,O.BX)(J.Fragment,{children:[(0,O.tZ)(Ae,{children:(0,O.BX)(Ee,{children:[(0,O.tZ)(Ce,{noMargin:!0,children:(0,S.t)("Last Triggered")}),(0,O.tZ)(Te,{children:t.lastTriggered?(0,O.tZ)(ye.Z,{date:t.lastTriggered}):(0,S.t)("No alerts triggered")})]})}),(0,O.BX)(_e,{children:[(0,O.tZ)(Ce,{noMargin:!0,children:(0,S.t)("Alert Conditions")}),(0,O.tZ)(De,{rule:t,teams:r,projectSlug:n})]}),(0,O.BX)(_e,{children:[(0,O.tZ)(Ce,{children:(0,S.t)("Alert Rule Details")}),(0,O.BX)(Ze.v,{children:[(0,O.tZ)(Ze.G,{keyName:(0,S.t)("Environment"),value:(0,O.tZ)(Le,{children:t.environment??"-"})}),t.dateCreated&&(0,O.tZ)(Ze.G,{keyName:(0,S.t)("Date Created"),value:(0,O.tZ)(ye.Z,{date:t.dateCreated,suffix:(0,S.t)("ago")})}),t.createdBy&&(0,O.tZ)(Ze.G,{keyName:(0,S.t)("Created By"),value:(0,O.tZ)(Le,{children:t.createdBy.name??"-"})}),(0,O.tZ)(Ze.G,{keyName:(0,S.t)("Team"),value:o?(0,O.tZ)(he.Z,{actor:o,size:24}):(0,S.t)("Unassigned")})]})]})]})}be.displayName="TextCondition",we.displayName="TextAction",De.displayName="Conditions",ze.displayName="Sidebar";const Se=ze,_e=(0,n.Z)("div",{target:"e2ynvv912"})("margin-bottom:",(0,_.D)(3),";"),Ee=(0,n.Z)("div",{target:"e2ynvv911"})({name:"10sya4f",styles:"flex:1;display:flex;flex-direction:column;>*:nth-child(2){flex:1;display:flex;align-items:center;}"}),Te=(0,n.Z)("div",{target:"e2ynvv910"})("position:relative;display:grid;grid-template-columns:auto auto auto;gap:",(0,_.D)(.5),";font-size:",(e=>e.theme.fontSizeLarge),";"),Ae=(0,n.Z)("div",{target:"e2ynvv99"})("height:60px;display:flex;margin-bottom:",(0,_.D)(1.5),";"),je=(0,n.Z)("div",{target:"e2ynvv98"})("position:relative;margin-top:",(0,_.D)(4),";:first-child{margin-top:",(0,_.D)(1),";}"),Ne=(0,n.Z)("div",{target:"e2ynvv97"})({name:"bnlinx",styles:"display:flex;align-items:flex-start;flex-grow:1"}),Xe=(0,n.Z)("div",{target:"e2ynvv96"})("&::before{content:'';position:absolute;height:100%;top:28px;left:",(0,_.D)(1),";border-right:1px ",(e=>e.theme.gray200)," dashed;}"),ke=(0,n.Z)("div",{target:"e2ynvv95"})("margin-bottom:",(0,_.D)(.5),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;"),Be=(0,n.Z)("div",{target:"e2ynvv94"})("display:flex;align-items:center;padding:",(0,_.D)(.5)," ",(0,_.D)(1)," ",(0,_.D)(.5)," 0;"),Ie=(0,n.Z)("span",{target:"e2ynvv93"})("display:inline-block;background-color:",(e=>e.theme.purple300),";padding:0 ",(0,_.D)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.white),";text-transform:uppercase;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";font-weight:400;line-height:1.5;"),$e=(0,n.Z)("span",{target:"e2ynvv92"})("display:block;background-color:",(e=>e.theme.surface200),";padding:0 ",(0,_.D)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeSmall),";margin-bottom:",(0,_.D)(1),";width:fit-content;font-weight:400;"),Ce=(0,n.Z)(R.OT,{target:"e2ynvv91"})("margin-top:",(e=>e.noMargin?0:(0,_.D)(2)),";margin-bottom:",(e=>e.noMargin?0:(0,_.D)(1)),";"),Le=(0,n.Z)("div",{target:"e2ynvv90"})((e=>e.theme.overflowEllipsis),";"),Re=["pageStatsPeriod","pageStart","pageEnd","pageUtc","cursor"],Fe=e=>{let{orgSlug:t,projectSlug:r,ruleId:n}=e;return[`/projects/${t}/${r}/rules/${n}/`,{query:{expand:"lastTriggered"}}]};function Pe(e){let{params:t,location:r,router:n}=e;const s=(0,A.NL)(),i=(0,X.Z)(),{projects:f,fetching:w}=(0,k.Z)(),_=f.find((e=>{let{slug:r}=e;return r===t.projectId})),{projectId:C,ruleId:L}=t,{data:R,isLoading:F,isError:P}=(0,A.WE)(Fe({orgSlug:i.slug,projectSlug:C,ruleId:L}),{staleTime:0});function H(e){return n.push({...r,query:{...r.query,...o()(e,Re)}})}function U(e){let{snooze:t,snoozeCreatedBy:r,snoozeForEveryone:n}=e;(0,A.XN)(s,Fe({orgSlug:i.slug,projectSlug:C,ruleId:L}),(e=>({...e,snooze:t,snoozeCreatedBy:r,snoozeForEveryone:n})))}if((0,j.Z)("issue_alert_rule_details.viewed","Issue Alert Rule Details: Viewed"),(0,N.Z)({rule_id:parseInt(t.ruleId,10)}),F||w)return(0,O.tZ)(Z.uT,{children:(0,O.tZ)(Z.or,{fullWidth:!0,children:(0,O.tZ)(x.Z,{})})});if(!R||P)return(0,O.tZ)(Me,{message:(0,S.t)("The alert rule you were looking for was not found.")});if(!_)return(0,O.tZ)(Me,{message:(0,S.t)("The project you were looking for was not found.")});const M=R.snooze,Y=(0,$.KM)(R),G={pathname:`/organizations/${i.slug}/alerts/new/issue/`,query:{project:_.slug,duplicateRuleId:R.id,createFromDuplicate:!0,referrer:"issue_rule_details"}},{period:V,start:W,end:K,utc:Q}=function(){const e=r?.query??{},{start:t,end:n,statsPeriod:s,utc:o}=(0,b.fK)(e,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0});if(!s&&!t&&!n)return{period:I.N7};if(s)return{period:s};const i="true"===o;return t&&n?i?{start:a().utc(t).format(),end:a().utc(n).format(),utc:i}:{start:a()(t).utc().format(),end:a()(n).utc().format(),utc:i}:{period:I.N7}}(),{cursor:J}=r.query;return(0,O.BX)(v.Z,{skipInitializeUrlParams:!0,skipLoadLastUsed:!0,shouldForceProject:!0,forceProject:_,children:[(0,O.tZ)(D.Z,{title:R.name,orgSlug:i.slug,projectSlug:C}),(0,O.BX)(Z.h4,{children:[(0,O.BX)(Z.oB,{children:[(0,O.tZ)(u.Z,{crumbs:[{label:(0,S.t)("Alerts"),to:`/organizations/${i.slug}/alerts/rules/`},{label:R.name,to:null}]}),(0,O.BX)(Z.Dx,{children:[(0,O.tZ)(h.Z,{project:_,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:_.slug}}),R.name]})]}),(0,O.tZ)(Z.kP,{children:(0,O.BX)(m.ZP,{gap:1,children:[(0,O.tZ)(l.Z,{access:["alerts:write"],children:e=>{let{hasAccess:t}=e;return(0,O.tZ)(c.Z,{isSnoozed:M,onSnooze:U,ruleId:R.id,projectSlug:C,ruleActionCategory:Y,hasAccess:t,type:"issue"})}}),(0,O.tZ)(p.zx,{size:"sm",icon:(0,O.tZ)(z.vU,{}),to:G,children:(0,S.t)("Duplicate")}),(0,O.tZ)(p.zx,{size:"sm",icon:(0,O.tZ)(z.yl,{}),to:`/organizations/${i.slug}/alerts/rules/${C}/${L}/`,onClick:()=>(0,T.Gi)("issue_alert_rule_details.edit_clicked",{organization:i,rule_id:parseInt(L,10)}),children:(0,S.t)("Edit Rule")})]})})]}),(0,O.BX)(Z.uT,{children:[(0,O.BX)(Z.or,{children:[function(){const e=(0,B.Y)(R);return e.conditionIndices||e.filterIndices?(0,O.tZ)(d.bZ,{type:"error",showIcon:!0,children:(0,S._N)("The conditions in this alert rule conflict and might not be working properly. [link:Edit alert rule]",{link:(0,O.tZ)(y.Z,{to:`/organizations/${i.slug}/alerts/rules/${C}/${L}/`})})}):null}(),M&&(0,O.tZ)(d.bZ,{showIcon:!0,children:Y===E.IA.NO_DEFAULT?(0,S._N)("[creator] muted this alert so these notifications won't be sent in the future.",{creator:R.snoozeCreatedBy}):(0,S._N)("[creator] muted this alert[forEveryone]so you won't get these notifications in the future.",{creator:R.snoozeCreatedBy,forEveryone:R.snoozeForEveryone?" for everyone ":" "})}),(0,O.tZ)(Ue,{organization:i,relative:V??"",start:W??null,end:K??null,utc:Q??null,onUpdate:function(e){const{start:t,end:r,relative:n,utc:s}=e;if(t&&r){const e=s?a().utc:a();return H({pageStatsPeriod:void 0,pageStart:e(t).format(),pageEnd:e(r).format(),pageUtc:s??void 0,cursor:void 0})}return H({pageStatsPeriod:n||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0,cursor:void 0})}}),(0,O.tZ)(g.Z,{children:(0,O.tZ)(q,{project:_,rule:R,period:V??"",start:W??null,end:K??null,utc:Q??null})}),(0,O.tZ)(ae,{organization:i,project:_,rule:R,period:V??"",start:W??null,end:K??null,utc:Q??null,cursor:J})]}),(0,O.tZ)(Z.MF,{children:(0,O.tZ)(Se,{rule:R,projectSlug:_.slug,teams:_.teams})})]})]})}Pe.displayName="AlertRuleDetails";const He=Pe,Ue=(0,n.Z)(w.Z,{target:"e1amk1uy1"})("margin-bottom:",(0,_.D)(2),";"),Me=(0,n.Z)(f.Z,{target:"e1amk1uy0"})("margin:",(0,_.D)(2),";")},"./app/views/alerts/rules/metric/details/constants.tsx":(e,t,r)=>{r.d(t,{N7:()=>i,U2:()=>c,UC:()=>d,e2:()=>l,ud:()=>o,v3:()=>a});var n=r("./app/locale.tsx"),s=r("./app/views/alerts/rules/metric/types.tsx");const o={[s.XH.SIX_HOURS]:(0,n.t)("Last 6 hours"),[s.XH.ONE_DAY]:(0,n.t)("Last 24 hours"),[s.XH.THREE_DAYS]:(0,n.t)("Last 3 days"),[s.XH.SEVEN_DAYS]:(0,n.t)("Last 7 days")},i="7d",a=[{label:(0,n.t)("Last 6 hours"),value:s.XH.SIX_HOURS},{label:(0,n.t)("Last 24 hours"),value:s.XH.ONE_DAY},{label:(0,n.t)("Last 3 days"),value:s.XH.THREE_DAYS},{label:(0,n.t)("Last 7 days"),value:s.XH.SEVEN_DAYS},{label:(0,n.t)("Last 14 days"),value:s.XH.FOURTEEN_DAYS}],l={[s.XH.SIX_HOURS]:6*s.Tb.ONE_HOUR*60*1e3,[s.XH.ONE_DAY]:60*s.Tb.ONE_DAY*1e3,[s.XH.THREE_DAYS]:3*s.Tb.ONE_DAY*60*1e3,[s.XH.SEVEN_DAYS]:7*s.Tb.ONE_DAY*60*1e3,[s.XH.FOURTEEN_DAYS]:14*s.Tb.ONE_DAY*60*1e3},d=(s.XH.FOURTEEN_DAYS,1e4),c=150}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_rules_issue_details_ruleDetails_tsx.9baf21c1666db410da0142b716c4989e.js.map