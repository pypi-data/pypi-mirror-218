(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_starfish_views_webServiceView_index_tsx-node_modules_lodash_omitBy_js"],{"./app/components/performance/layouts.tsx":(t,e,r)=>{"use strict";r.d(e,{c:()=>i});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/styles/space.tsx");const i=(0,s.Z)("div",{target:"eufzkx60"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,n.D)(2),";grid-row-gap:",(0,n.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(t=>t.theme.breakpoints.medium),"){",(t=>t.columns?`\n    grid-template-columns: repeat(${t.columns}, 1fr);\n    `:`\n    grid-template-columns: repeat(auto-fit, minmax(${t.minSize}px, 1fr));\n    `),";}")},"./app/utils/performance/contexts/pageError.tsx":(t,e,r)=>{"use strict";r.d(e,{De:()=>c,V_:()=>o,YY:()=>l});var s=r("../node_modules/react/index.js"),n=r("./app/components/alert.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,s.createContext)({pageError:void 0,setPageError:t=>{}});function o(t){let{children:e}=t;const[r,n]=(0,s.useState)();return(0,i.tZ)(a.Provider,{value:{pageError:r,setPageError:n},children:e})}function l(){const{pageError:t}=(0,s.useContext)(a);return t?(0,i.tZ)(n.bZ,{type:"error","data-test-id":"page-error-alert",showIcon:!0,children:t}):null}o.displayName="PageErrorProvider",l.displayName="PageErrorAlert";const c=()=>(0,s.useContext)(a)},"./app/views/starfish/components/tableCells/throughputCell.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var s=r("./app/locale.tsx"),n=r("./app/utils/discover/styles.tsx"),i=r("./app/utils/formatters.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(t){let{throughputPerSecond:e,containerProps:r}=t;const o=e?e.toFixed(2):"--";return(0,a.BX)(n.Hw,{...r,children:[(0,i.Du)(o),"/",(0,s.t)("s")]})}o.displayName="ThroughputCell"},"./app/views/starfish/views/webServiceView/index.tsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>St});var s=r("../node_modules/react/index.js"),n=r("../node_modules/lodash/isEqual.js"),i=r.n(n),a=r("./app/actionCreators/tags.tsx"),o=r("./app/components/sentryDocumentTitle.tsx"),l=r("./app/locale.tsx"),c=r("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),p=r("./app/utils/useApi.tsx"),d=r("./app/utils/useOrganization.tsx"),u=r("./app/utils/usePrevious.tsx"),m=r("./app/utils/withPageFilters.tsx"),h=r("./app/views/starfish/components/pageFilterContainer.tsx"),g=r("./app/components/gridEditable/index.tsx"),f=r("./app/components/performance/searchBar.tsx"),x=r("./app/utils/discover/eventView.tsx"),v=r("./app/utils/discover/types.tsx"),y=(r("./app/utils/performance/vitals/constants.tsx"),r("./app/utils/queryString.tsx")),Z=r("./app/utils/tokenizeSearch.tsx");r("./app/views/performance/trends/utils.tsx");const w=["transaction"],b="time_spent_percentage()";var _=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),k=r("./app/components/layouts/thirds.tsx"),S=r("./app/components/organizations/pageFilterBar.tsx"),j=r("./app/styles/space.tsx"),P=r("./app/utils/performance/contexts/pageError.tsx"),C=r("./app/views/starfish/components/datePicker.tsx"),E=r("./app/components/charts/eventsRequest.tsx"),F=r("./app/components/performance/layouts.tsx"),q=r("./app/constants/chartPalette.tsx"),B=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),D=r("./app/components/charts/utils.tsx"),T=r("./app/utils/discover/charts.tsx"),z=r("./app/utils/usePageFilters.tsx"),N=r("./app/utils/withApi.tsx"),L=r("./app/views/starfish/colours.tsx"),X=r("./app/views/starfish/components/chart.tsx"),V=r("./app/components/panels/index.tsx"),O=r("./app/styles/text.tsx"),A=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function M(t){let{title:e,children:r,button:s,subtitle:n}=t;return(0,A.tZ)(V.s_,{children:(0,A.BX)(Q,{children:[(0,A.BX)($,{children:[(0,A.BX)(Y,{children:[e&&(0,A.tZ)(R,{children:e}),s]}),n&&(0,A.tZ)(W,{children:n})]}),r]})})}M.displayName="MiniChartPanel";const R=(0,_.Z)("p",{target:"e1mibtmj4"})((t=>t.theme.text.cardTitle),";"),$=(0,_.Z)("div",{target:"e1mibtmj3"})("padding:0 ",(0,j.D)(1)," ",(0,j.D)(1)," 0;"),Y=(0,_.Z)("div",{target:"e1mibtmj2"})({name:"gt3bih",styles:"min-height:24px;width:100%;display:flex;align-items:center;justify-content:space-between"}),Q=(0,_.Z)("div",{target:"e1mibtmj1"})("padding:",(0,j.D)(1.5)," ",(0,j.D)(2),";",O.Z,";"),W=(0,_.Z)("span",{target:"e1mibtmj0"})("color:",(t=>t.theme.gray300),";font-size:",(t=>t.theme.fontSizeMedium),";display:inline-block;");var G=r("./app/views/starfish/utils/chartValueFormatters/formatThroughput.ts"),I=r("./app/views/starfish/views/spans/types.tsx"),H=r("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx"),K=r("../node_modules/query-string/index.js"),J=r("./app/components/assistant/guideAnchor.tsx"),U=r("./app/components/duration.tsx"),tt=r("./app/components/gridEditable/sortLink.tsx"),et=r("./app/components/links/link.tsx"),rt=r("./app/components/pagination.tsx"),st=r("./app/components/searchBar.tsx"),nt=r("./app/components/tooltip.tsx"),it=r("./app/utils/analytics.tsx"),at=r("./app/utils/discover/discoverQuery.tsx"),ot=r("./app/utils/discover/fieldRenderers.tsx"),lt=r("./app/utils/discover/fields.tsx"),ct=r("./app/utils/discover/styles.tsx"),pt=r("./app/utils/formatters.tsx"),dt=r("./app/views/starfish/components/tableCells/throughputCell.tsx");const ut=[(0,l.t)("Endpoint"),I.F.throughput,(0,l.t)("Change"),I.F.p95,(0,l.t)("Change"),I.F.errorCount,(0,l.t)("Change"),I.F.timeSpent];function mt(t){let{eventView:e,location:r,organization:n,setError:i}=t;const[a,o]=(0,s.useState)([]),[c,p]=(0,s.useState)(e);function d(t){const s={};return t?.data?.[0]&&Object.keys(t.data[0]).forEach((t=>{t.startsWith("equation|(percentile_range(transaction.duration,0.95,lessOrEquals")&&(s["p95()"]=t)})),(s,i)=>function(t,s,i,a){if(!t||!t.meta)return i[s.key];const o=t.meta,c=String(s.key),p=(0,ot.Js)(c,o,!1)(i,{organization:n,location:r});if("transaction"===c){let t="";return i["http.method"]&&(t=`${i["http.method"]} `),(0,A.BX)(et.Z,{to:`/organizations/${n.slug}/starfish/endpoint-overview/?${K.stringify({endpoint:i.transaction,"http.method":i["http.method"],statsPeriod:e.statsPeriod,project:e.project,start:e.start,end:e.end})}`,style:{display:"block",width:"100%"},onClick:()=>{(0,it.Gi)("starfish.web_service_view.endpoint_list.endpoint.clicked",{organization:n,endpoint:i.transaction})},children:[t,i.transaction]})}if(c===b){const t=Number(i["sum(transaction.duration)"]),e=Number(i[b]);return(0,A.tZ)(nt.u,{title:(0,l._N)("Total time spent by endpoint is [cumulativeTime])",{cumulativeTime:(0,A.tZ)(U.Z,{seconds:t/1e3,fixedDigits:2,abbreviation:!0})}),containerDisplayMode:"block",position:"top",children:(0,A.tZ)(ct.Hw,{children:(0,pt.rl)(e)})})}if("tps()"===c)return(0,A.tZ)(dt.Z,{throughputPerSecond:i[c]});if("project"===c)return null;const d=(0,lt.LY)(c),u=i[d];return"integer"===o[d]&&"number"==typeof u&&u>999?(0,A.tZ)(nt.u,{title:u.toLocaleString(),containerDisplayMode:"block",position:"right",children:p}):p}(t,s,i)}function u(t){const s=ut;return(i,a)=>function(t,s,i){let a="right";"Endpoint"===i&&(a="left");const o={field:"equation"===s.column.kind?s.key:s.name,width:s.width},l={};t&&Object.keys(t).forEach((e=>{l[(0,lt.LY)(e)]=t[e]}));const c=e.sortForField(o,l),p=(0,x.M3)(o,l),d=c?c.kind:void 0;return(0,A.tZ)(tt.Z,{align:a,title:i||o.field,direction:d,canSort:p,generateSortLink:function(){if(!t)return;const s=e.sortOnField(o,l).generateQueryStringObject();return{...r,query:{...r.query,sort:s.sort}}},onClick:()=>{(0,it.Gi)("starfish.web_service_view.endpoint_list.header.clicked",{organization:n,direction:"desc"===d?"asc":"desc",header:i||o.field})}})}(t,i,s[a])}function m(t,e){o((r=>r.map(((r,s)=>s===t?Number(e.width??g.z7):r))))}(0,s.useEffect)((()=>{p((t=>{const r=e.clone();return r.query=t.query,r}))}),[e]);const h=e.getColumns().filter((t=>"project"!==t.name&&"http.method"!==t.name&&"total.transaction_duration"!==t.name&&"sum(transaction.duration)"!==t.name)).map(((t,e)=>"number"==typeof a[e]?{...t,width:a[e]}:t)),f=e.getSorts();return(0,A.BX)(J.Z,{target:"performance_table",position:"top-start",children:[(0,A.tZ)(gt,{placeholder:(0,l.t)("Search for endpoints"),onSearch:function(t){const r=e.clone();r.query+=`transaction:*${t}*`,p(r),(0,it.Gi)("starfish.web_service_view.endpoint_list.search",{organization:n,query:t})}}),(0,A.tZ)(at.Z,{eventView:c,orgSlug:n.slug,location:r,setError:t=>i(t?.message),referrer:"api.starfish.endpoint-list",queryExtras:{dataset:"metrics"},children:t=>{let{pageLinks:e,isLoading:n,tableData:i}=t;return(0,A.BX)(s.Fragment,{children:[(0,A.tZ)(g.ZP,{isLoading:n,data:i?i.data:[],columnOrder:h,columnSortBy:f,grid:{onResizeColumn:m,renderHeadCell:u(i?.meta),renderBodyCell:d(i)},location:r}),(0,A.tZ)(rt.Z,{pageLinks:e})]})}})]})}mt.displayName="EndpointList";const ht=mt,gt=(0,_.Z)(st.Z,{target:"e152i1y80"})("margin-bottom:",(0,j.D)(2),";"),ft=(0,N.Z)(E.Z);function xt(t){const{organization:e,eventView:r}=t,n=(0,z.Z)(),i=(0,B.u)();return(0,X.K4)(),(0,A.BX)("div",{"data-test-id":"starfish-view",children:[(0,A.tZ)(vt,{minSize:300,children:(0,A.BX)(yt,{children:[(0,A.tZ)(Zt,{children:(0,A.tZ)(H._2,{})}),(0,A.tZ)(wt,{children:function(){const t=new Z.MY(["event.type:transaction","has:http.method","transaction.op:http.server"]);return(0,A.tZ)(ft,{query:t.formatString(),includePrevious:!1,partial:!0,interval:(0,D.ZS)(n.selection.datetime,"low"),includeTransformedData:!0,limit:1,environment:r.environment,project:r.project,period:r.statsPeriod,referrer:"starfish-homepage-charts",start:r.start,end:r.end,organization:e,yAxis:["tps()","http_error_count()","p95(transaction.duration)"],dataset:v.as.METRICS,children:t=>{let{loading:e,results:n}=t;if(!n||!n[0]||!n[1])return null;const a={seriesName:(0,l.t)("Requests"),data:n[0].data},o={seriesName:(0,l.t)("5XX Responses"),color:q.$[5][3],data:n[1].data},c={seriesName:(0,l.t)("Requests"),data:n[2].data};return(0,A.BX)(s.Fragment,{children:[(0,A.tZ)(M,{title:I.F.p95,children:(0,A.tZ)(X.ZP,{statsPeriod:r.statsPeriod,height:71,data:[c],start:r.start,end:r.end,loading:e,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:[L.Tn],tooltipFormatterOptions:{valueFormatter:t=>(0,T.Ew)(t,"duration")}})}),(0,A.tZ)(M,{title:I.F.throughput,children:(0,A.tZ)(X.ZP,{statsPeriod:r.statsPeriod,height:71,data:[a],start:"",end:"",loading:e,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},aggregateOutputFormat:"rate",definedAxisTicks:2,stacked:!0,isLineChart:!0,chartColors:[L.SQ],tooltipFormatterOptions:{valueFormatter:t=>(0,G.Z)(t)}})}),(0,A.tZ)(M,{title:I.F.errorCount,children:(0,A.tZ)(X.ZP,{statsPeriod:r.statsPeriod,height:71,data:[o],start:r.start,end:r.end,loading:e,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:i.charts.getColorPalette(2)})})]})}})}()})]})}),(0,A.tZ)(ht,{...t,setError:(0,P.De)().setPageError})]})}xt.displayName="StarfishView";const vt=(0,_.Z)(F.c,{target:"epbipxo3"})("margin-bottom:",(0,j.D)(2),";"),yt=(0,_.Z)("div",{target:"epbipxo2"})("display:flex;flex-direction:row;flex-wrap:wrap;gap:",(0,j.D)(2),";"),Zt=(0,_.Z)("div",{target:"epbipxo1"})({name:"1189xqs",styles:"flex:2"}),wt=(0,_.Z)("div",{target:"epbipxo0"})({name:"82a6rk",styles:"flex:1"});function bt(t){const e=(0,A.tZ)(S.Z,{condensed:!0,children:(0,A.tZ)(C.Z,{})});return(0,A.tZ)(k.T3,{children:(0,A.BX)(P.V_,{children:[(0,A.tZ)(k.h4,{children:(0,A.tZ)(k.oB,{children:(0,A.tZ)(k.Dx,{children:(0,l.t)("Web Service")})})}),(0,A.tZ)(k.uT,{children:(0,A.BX)(k.or,{fullWidth:!0,children:[(0,A.tZ)(P.YY,{}),(0,A.BX)(s.Fragment,{children:[(0,A.tZ)(_t,{children:e}),(0,A.tZ)(xt,{...t})]})]})})]})})}bt.displayName="StarfishLanding";const _t=(0,_.Z)("div",{target:"e160gsn70"})("display:grid;grid-template-rows:auto auto auto;gap:",(0,j.D)(2),";margin-bottom:",(0,j.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-rows:auto;grid-template-columns:auto 1fr auto;}");function kt(t){let{selection:e,location:r,router:n}=t;const m=(0,p.Z)(),b=(0,d.Z)(),_=(0,s.useRef)(!1),k=(0,u.Z)(e.datetime),S=(0,c.gp)(b),j=function(t){let{withStaticFilters:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const{query:s}=t,n=s.start&&s.end,i=(0,y.ro)(s.sort,"-time_spent_percentage"),a={id:void 0,name:(0,l.t)("Performance"),query:"event.type:transaction has:http.method transaction.op:http.server",fields:["transaction","http.method","tps()","tps_percent_change()","p95(transaction.duration)","percentile_percent_change(transaction.duration,0.95)","http_error_count()","http_error_count_percent_change()","time_spent_percentage()","sum(transaction.duration)"],version:2,dataset:v.as.METRICS},o=Array(a.fields.length).fill(g.z7);o[a.fields.length-1]="110",a.widths=o,s.statsPeriod||n||(a.range=(t=>t?.features?.includes("performance-landing-page-stats-period")?"14d":"7d")(r)),a.orderby=i;const c=(0,y.ro)(s.query,"");return a.query=`${a.query} ${function(t,e){const r=new Z.MY(t);if(r.freeText.length>0){const t=r.freeText.join(" ");r.setFilterValues("transaction",[(0,f.D)(t)],!1),r.freeText=[]}return e&&(r.tokens=r.tokens.filter((t=>t.key&&w.includes(t.key)))),r.formatString()}(c,e)}`,x.ZP.fromNewQueryWithLocation(a,t)}(r,{withStaticFilters:S},b);return(0,s.useEffect)((()=>{if(!_.current)return(0,a.QK)(m,b.slug,e),void(_.current=!0);i()(k,e.datetime)||(0,a.QK)(m,b.slug,e)}),[e.datetime,k,e,m,b,r]),(0,A.tZ)(o.Z,{title:(0,l.t)("Web Service"),orgSlug:b.slug,children:(0,A.tZ)(h.ZP,{children:(0,A.tZ)(bt,{router:n,eventView:j,organization:b,location:r,selection:e,withStaticFilters:S})})})}kt.displayName="WebServiceView";const St=(0,m.Z)(kt)},"../node_modules/lodash/negate.js":t=>{t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},"../node_modules/lodash/omitBy.js":(t,e,r)=>{var s=r("../node_modules/lodash/_baseIteratee.js"),n=r("../node_modules/lodash/negate.js"),i=r("../node_modules/lodash/pickBy.js");t.exports=function(t,e){return i(t,n(s(e)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_starfish_views_webServiceView_index_tsx-node_modules_lodash_omitBy_js.5a3f9607b6e15e053f9a0bce52301d89.js.map