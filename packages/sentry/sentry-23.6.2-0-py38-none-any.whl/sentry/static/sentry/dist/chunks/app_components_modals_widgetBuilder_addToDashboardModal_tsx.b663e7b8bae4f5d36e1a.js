"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetBuilder_addToDashboardModal_tsx"],{"./app/components/modals/widgetBuilder/addToDashboardModal.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>A,modalCss:()=>T});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),o=a("./app/actionCreators/dashboards.tsx"),d=a("./app/actionCreators/indicator.tsx"),n=a("./app/components/button.tsx"),r=a("./app/components/buttonBar.tsx"),l=a("./app/components/forms/controls/selectControl.tsx"),c=a("./app/locale.tsx"),u=a("./app/styles/space.tsx"),p=a("./app/utils/performance/contexts/metricsCardinality.tsx"),h=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),g=a("./app/utils/useApi.tsx"),m=a("./app/utils/withDomainRequired.tsx"),w=a("./app/views/dashboards/types.tsx"),b=a("./app/views/dashboards/utils.tsx"),x=a("./app/views/dashboards/widgetBuilder/utils.tsx"),y=a("./app/views/dashboards/widgetCard/index.tsx"),f=a("./app/views/organizationContext.tsx"),v=a("./app/views/performance/landing/metricsDataSwitcher.tsx"),Z=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D=(0,c.t)("Select a dashboard");function C(e){let{Header:t,Body:a,Footer:s,closeModal:r,location:u,organization:C,router:A,selection:T,widget:z,widgetAsQueryParams:_}=e;const j=(0,g.Z)(),[q,k]=(0,i.useState)(null),[E,M]=(0,i.useState)(null),[P,O]=(0,i.useState)(null);(0,i.useEffect)((()=>{let e=!1;return(0,o.j2)(j,C.slug).then((t=>{e||k(t)})),()=>{e=!0}}),[j,C.slug]),(0,i.useEffect)((()=>{let e=!1;return P===x.i0||null===P?M(null):(0,o.AK)(j,C.slug,P).then((t=>{e||M(t)})),()=>{e=!0}}),[j,C.slug,P]);const F=null!==P;return(0,Z.BX)(f.g.Provider,{value:C,children:[(0,Z.tZ)(t,{closeButton:!0,children:(0,Z.tZ)("h4",{children:(0,c.t)("Add to Dashboard")})}),(0,Z.BX)(a,{children:[(0,Z.tZ)(B,{children:(0,Z.tZ)(l.Z,{disabled:null===q,menuPlacement:"auto",name:"dashboard",placeholder:(0,c.t)("Select Dashboard"),value:P,options:q&&[{label:(0,c.t)("+ Create New Dashboard"),value:"new"},...q.map((e=>{let{title:t,id:a,widgetDisplay:s}=e;return{label:t,value:a,disabled:s.length>=w.ZU,tooltip:s.length>=w.ZU&&(0,c._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:w.ZU}),tooltipOptions:{position:"right"}}}))],onChange:e=>{e.disabled||O(e.value)}})}),(0,Z.tZ)(B,{children:(0,c.t)("Any conflicting filters from this query will be overridden by Dashboard filters. This is a preview of how the widget will appear in your dashboard.")}),(0,Z.tZ)(p.BT,{organization:C,location:u,children:(0,Z.tZ)(v.d,{organization:C,eventView:(0,b.tT)(z.title,z.queries[0],T,z.displayType),location:u,hideLoadingIndicator:!0,children:e=>(0,Z.tZ)(h.kP,{location:u,forceTransactions:e.forceTransactionsOnly,children:(0,Z.tZ)(y.ZP,{organization:C,isEditing:!1,widgetLimitReached:!1,selection:E?(0,b.fK)(E):T,dashboardFilters:(0,b.lM)(u)??E?.filters,widget:z,showStoredAlert:!0})})})})]}),(0,Z.tZ)(s,{children:(0,Z.BX)(S,{gap:1.5,children:[(0,Z.tZ)(n.zx,{onClick:async function(){if(null===E)return;let e=z.queries[0].orderby;w.FO.AREA&&z.queries[0].columns.length||(e="");const t=z.queries[0],a={...z,title:""===z.title?(0,c.t)("All Events"):z.title,queries:[{...t,orderby:e}]},s={...E,widgets:[...E.widgets,a]};await(0,o.Y)(j,C.slug,s),r(),(0,d.S9)((0,c.t)("Successfully added widget to dashboard"))},disabled:!F||P===x.i0,title:F?void 0:D,children:(0,c.t)("Add + Stay in Discover")}),(0,Z.tZ)(n.zx,{priority:"primary",onClick:function(){const e=P===x.i0?`/organizations/${C.slug}/dashboards/new/widget/new/`:`/organizations/${C.slug}/dashboard/${P}/widget/new/`;A.push((0,m.D)({pathname:e,query:{..._,...E?(0,b.aq)(E):{}}})),r()},disabled:!F,title:F?void 0:D,children:(0,c.t)("Open in Widget Builder")})]})})]})}C.displayName="AddToDashboardModal";const A=C,B=(0,s.Z)("div",{target:"enumv91"})("margin-bottom:",(0,u.D)(2),";"),S=(0,s.Z)(r.ZP,{target:"enumv90"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-rows:repeat(2, 1fr);gap:",(0,u.D)(1.5),";width:100%;>button{width:100%;}}"),T={name:"jzg5s9",styles:"max-width:700px;margin:70px auto"}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetBuilder_addToDashboardModal_tsx.fb639e69200235753a6407042f30a965.js.map