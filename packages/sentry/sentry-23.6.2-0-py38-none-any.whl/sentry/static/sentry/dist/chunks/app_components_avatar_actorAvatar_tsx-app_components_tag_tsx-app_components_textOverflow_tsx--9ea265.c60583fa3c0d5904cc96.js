"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--9ea265"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{Cm:()=>d,PX:()=>a,s:()=>u,tT:()=>m,um:()=>c,z_:()=>l});var r=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),n=s("./app/stores/teamStore.tsx");const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,r=new Array(s>2?s-2:0),o=2;o<s;o++)r[o-2]=arguments[o];return e[t]?.(...r)};async function a(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);n.Z.loadUserTeams(s)}function l(e,t){n.Z.onUpdateSuccess(e,t)}function c(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(r,{method:"POST",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),i(s,"success",e)},error:e=>{i(s,"error",e)}})}function u(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(r,{method:"DELETE",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),i(s,"success",e)},error:e=>{i(s,"error",e)}})}function d(e,t,s){return e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(n.Z.onCreateSuccess(e),(0,r.S9)((0,o._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw(0,r.Iw)((0,o._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function m(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(n.Z.onRemoveSuccess(t.teamId),(0,r.S9)((0,o._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,r.Iw)((0,o._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{s.d(t,{Z:()=>u}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/@sentry/core/esm/exports.js"),o=s("./app/components/avatar/teamAvatar.tsx"),n=s("./app/components/avatar/userAvatar.tsx"),i=s("./app/components/loadingIndicator.tsx"),a=s("./app/stores/memberListStore.tsx"),l=s("./app/utils/teams.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=function(e){let{size:t=24,hasTooltip:s=!0,actor:u,...d}=e;const m={size:t,hasTooltip:s,...d};if("user"===u.type){const e=u.id?a.Z.getById(u.id)??u:u;return(0,c.tZ)(n.Z,{user:e,...m})}return"team"===u.type?(0,c.tZ)(l.Z,{ids:[u.id],children:e=>{let{initiallyLoaded:t,teams:s}=e;return t?(0,c.tZ)(o.Z,{team:s[0],...m}):(0,c.tZ)(i.Z,{mini:!0})}}):(r.$e((e=>{e.setExtra("actor",u),r.Tb(new Error("Unknown avatar type"))})),null)}},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>Z,Z:()=>S});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),n=s("./app/components/button.tsx"),i=s("./app/components/links/externalLink.tsx"),a=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),m=s("./app/utils.tsx"),p=s("./app/utils/analytics.tsx"),h=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x="20px";function f(e){let{type:t="default",icon:s,tooltipText:r,tooltipProps:n,to:d,onClick:x,href:f,onDismiss:S,children:b,textMaxWidth:M=150,...C}=e;const z={size:"xs",color:h.ZP.tag[t].iconColor},_=(0,g.tZ)(l.u,{title:r,containerDisplayMode:"inline-flex",...n,children:(0,g.BX)(Z,{type:t,children:[(0,o.isValidElement)(s)?(0,g.tZ)(v,{children:(0,o.cloneElement)(s,{...z})}):((0,m.ri)(f)||(0,m.ri)(d))&&void 0===s?(0,g.tZ)(v,{children:(0,g.tZ)(c.V$,{...z})}):null,(0,g.tZ)(j,{type:t,maxWidth:M,children:b}),(0,m.ri)(S)&&(0,g.tZ)(w,{onClick:function(e){e.preventDefault(),S?.()},size:"zero",priority:"link","aria-label":(0,u.t)("Dismiss"),icon:(0,g.tZ)(c.bM,{isCircled:!0,...z})})]})});return(0,g.tZ)(y,{...C,onClick:()=>{(0,p.Gi)("tag.clicked",{is_clickable:(0,m.ri)(x)||(0,m.ri)(d)||(0,m.ri)(f),organization:null})},children:(0,m.ri)(f)?(0,g.tZ)(i.Z,{href:f,children:_}):(0,m.ri)(d)&&(0,m.ri)(x)?(0,g.tZ)(a.Z,{to:d,onClick:x,children:_}):(0,m.ri)(d)?(0,g.tZ)(a.Z,{to:d,children:_}):_})}f.displayName="Tag";const y=(0,r.Z)("span",{target:"ecaysl4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),Z=(0,r.Z)("div",{target:"ecaysl3"})("display:inline-flex;align-items:center;height:",x,";border-radius:",x,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,d.D)(1),";"),v=(0,r.Z)("span",{target:"ecaysl2"})("margin-right:",(0,d.D)(.5),";display:inline-flex;"),j=(0,r.Z)("span",{target:"ecaysl1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",x,";"),w=(0,r.Z)(n.zx,{target:"ecaysl0"})("margin-left:",(0,d.D)(.5),";margin-right:-",(0,d.D)(.5),";border:none;"),S=f},"./app/components/textOverflow.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,r.Z)((e=>{let{children:t,className:s,ellipsisDirection:r,isParagraph:n,"data-test-id":i}=e;const a=n?"p":"div";return"left"===r?(0,o.tZ)(a,{className:s,"data-test-id":i,children:(0,o.tZ)("bdi",{children:t})}):(0,o.tZ)(a,{className:s,"data-test-id":i,children:t})}),{target:"e1lyrgnz0"})((e=>e.theme.overflowEllipsis)," ",(e=>"left"===e.ellipsisDirection&&"\n      direction: rtl;\n      text-align: left;\n    "),";width:auto;line-height:1.2;");n.defaultProps={ellipsisDirection:"right",isParagraph:!1};const i=n},"./app/components/timeSince.tsx":(e,t,s)=>{s.d(t,{Z:()=>y});var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/isNumber.js"),n=s.n(o),i=s("../node_modules/lodash/isString.js"),a=s.n(i),l=s("../node_modules/moment-timezone/index.js"),c=s.n(l),u=s("./app/components/tooltip.tsx"),d=s("./app/locale.tsx"),m=s("./app/stores/configStore.tsx"),p=s("./app/utils/formatters.tsx"),h=s("./app/utils/getDynamicText.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){return a()(e)||n()(e)?new Date(e):e}function f(e){let{date:t,disabledAbsoluteTooltip:s,tooltipShowSeconds:o,tooltipPrefix:n,tooltipBody:i,tooltipSuffix:a,tooltipUnderlineColor:l,unitStyle:f,prefix:y=(0,d.t)("in"),suffix:Z=(0,d.t)("ago"),liveUpdateInterval:v="minute",...j}=e;const w=(0,r.useRef)(),S=(0,r.useCallback)((()=>function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"human";const o=c()(x(e)),n=o.isAfter(c()());let i="";return i="human"===r?o.fromNow(!0):(0,p.g9)(c()().diff(o,"seconds"),0,"short"===r,"extraShort"===r,n),t||s?n?`${s} ${i}`:`${i} ${t}`:i}(t,Z,y,f)),[t,Z,y,f]),[b,M]=(0,r.useState)(S());(0,r.useEffect)((()=>{M(S());const e="minute"===v?6e4:"second"===v?1e3:v;return w.current=window.setInterval((()=>M(S())),e),()=>window.clearInterval(w.current)}),[v,S]);const C=x(t),z=m.Z.get("user"),_=z?z.options:null,k=o?"MMM D, YYYY h:mm:ss A z":"MMMM D, YYYY h:mm A z",I=_?.clock24Hours?"MMMM D, YYYY HH:mm z":k,$=(0,h.Z)({fixed:_?.clock24Hours?"November 3, 2020 08:57 UTC":"November 3, 2020 8:58 AM UTC",value:c().tz(C,_?.timezone??"").format(I)});return(0,g.tZ)(u.u,{disabled:s,underlineColor:l,showUnderline:!0,title:(0,g.BX)(r.Fragment,{children:[n&&(0,g.tZ)("div",{children:n}),i??$,a&&(0,g.tZ)("div",{children:a})]}),children:(0,g.tZ)("time",{dateTime:C?.toISOString(),...j,children:b})})}f.displayName="TimeSince";const y=f},"./app/stores/memberListStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const r={state:{members:[],loading:!0,hasMore:null,cursor:null},init(){this.reset()},reset(){this.state={members:[],loading:!0,hasMore:null,cursor:null}},loadInitialData(e,t,s){this.state={members:e,loading:!1,hasMore:t??this.state.hasMore,cursor:s??this.state.cursor},this.trigger(this.state,"initial")},getById(e){return this.state.members.find((t=>{let{id:s}=t;return e===s}))},getAll(){return this.state.members},getState(){return this.state}},o=(0,s("../node_modules/reflux/src/index.js").createStore)(r)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>a});var r=s("../node_modules/js-cookie/dist/js.cookie.mjs"),o=s("./app/stores/configStore.tsx");const n=window.superUserCookieName??"su",i=window.superUserCookieDomain;function a(){const{isSuperuser:e}=o.Z.get("user")||{};if(e){const e=o.Z.get("superUserCookieName")||n,t=o.Z.get("superUserCookieDomain")||i;if(r.Z.set(e,"set-in-isActiveSuperuser",{domain:t}),void 0===r.Z.get(e))return!0}return!1}},"./app/utils/teams.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("../node_modules/react/index.js"),o=s("./app/utils/useTeams.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{children:t,...s}=e;const i=(0,o.y)(s);return(0,n.tZ)(r.Fragment,{children:t(i)})}i.displayName="Teams";const a=i},"./app/utils/useApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/react/index.js"),o=s("./app/api.tsx");const n=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,r.useRef)();void 0===s.current&&void 0===t&&(s.current=new o.KU);const n=t??s.current,i=(0,r.useCallback)((()=>{e||n.clear()}),[n,e]);return(0,r.useEffect)((()=>i),[i]),n}},"./app/utils/useProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),n=s.n(o),i=s("./app/stores/organizationStore.tsx"),a=s("./app/stores/projectsStore.tsx"),l=s("./app/stores/useLegacyStore.tsx"),c=s("./app/utils/parseLinkHeader.tsx"),u=s("./app/utils/useApi.tsx");async function d(e,t){let{slugs:s,search:r,limit:o,lastSearch:n,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={collapse:["latestDeploys"]};void 0!==s&&s.length>0&&(a.query=s.map((e=>`slug:${e}`)).join(" ")),r&&(a.query=`${a.query??""}${r}`.trim()),(!n&&!r||n===r)&&i&&(a.cursor=i),void 0!==o&&(a.per_page=o);let l=!1,u=null;const[d,,m]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:a}),p=m?.getResponseHeader("Link");if(p){const e=(0,c.Z)(p);l=e?.next?.results||e?.previous?.results,u=e?.next?.cursor}return{results:d,hasMore:l,nextCursor:u}}const m=function(){let{limit:e,slugs:t,orgId:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=(0,u.Z)(),{organization:c}=(0,l.X)(i.Z),m=(0,l.X)(a.Z),p=s??c?.slug,h=new Set(m.projects.map((e=>e.slug))),g=t?.filter((e=>!h.has(e)))??[],x=g.length>0,[f,y]=(0,r.useState)({initiallyLoaded:!m.loading&&!x,fetching:x,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),Z=(0,r.useRef)(null);void 0!==t&&(null===Z.current&&(Z.current=new Set(t)),(t.length!==Z.current.size||t.some((e=>!Z.current?.has(e))))&&(Z.current=new Set(t))),(0,r.useEffect)((()=>{x&&async function(){if(void 0!==p){y((e=>({...e,fetching:!0})));try{const{results:t,hasMore:s,nextCursor:r}=await d(o,p,{slugs:g,limit:e}),i=n()([...m.projects,...t],(e=>{let{slug:t}=e;return t}));a.Z.loadInitialData(i),y((e=>({...e,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:r})))}catch(e){console.error(e),y((t=>({...t,fetching:!1,initiallyLoaded:!m.loading,fetchError:e})))}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}()}),[Z.current]),(0,r.useEffect)((()=>{const e=!m.loading;f.initiallyLoaded!==e&&(x||y((t=>({...t,initiallyLoaded:e}))))}),[m.loading]);const{initiallyLoaded:v,fetching:j,fetchError:w,hasMore:S}=f;return{projects:t?m.projects.filter((e=>t.includes(e.slug))):m.projects,placeholders:g.map((e=>({slug:e}))),fetching:j||m.loading,initiallyLoaded:v,fetchError:w,hasMore:S,onSearch:async function(t){const{lastSearch:s}=f,r=f.nextCursor;if(""!==t)if(void 0!==p){y((e=>({...e,fetching:!0})));try{o.clear();const{results:i,hasMore:l,nextCursor:c}=await d(o,p,{search:t,limit:e,lastSearch:s,cursor:r}),u=n()([...m.projects,...i],(e=>{let{slug:t}=e;return t}));u.length>m.projects.length&&a.Z.loadInitialData(u),y((e=>({...e,hasMore:l,fetching:!1,lastSearch:t,nextCursor:c})))}catch(e){console.error(e),y((t=>({...t,fetching:!1,fetchError:e})))}}else console.error("Cannot use useProjects.onSearch without an organization in context")}}}},"./app/utils/useTeams.tsx":(e,t,s)=>{s.d(t,{y:()=>h});var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),n=s.n(o),i=s("./app/actionCreators/teams.tsx"),a=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/teamStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),u=s("./app/utils/isActiveSuperuser.tsx"),d=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/useApi.tsx");async function p(e,t){let{slugs:s,ids:r,search:o,limit:n,lastSearch:i,cursor:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==r&&r.length>0&&(l.query=r.map((e=>`id:${e}`)).join(" ")),o&&(l.query=`${l.query??""} ${o}`.trim()),(i===o||!i&&!o)&&a&&(l.cursor=a),void 0!==n&&(l.per_page=n);let c=!1,u=null;const[m,,p]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),h=p?.getResponseHeader("Link");if(h){const e=(0,d.Z)(h);c=e?.next?.results,u=e?.next?.cursor}return{results:m,hasMore:c,nextCursor:u}}function h(){let{limit:e,slugs:t,ids:s,provideUserTeams:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=(0,m.Z)(),{organization:h}=(0,c.X)(a.Z),g=(0,c.X)(l.Z),x=h?.slug,f=(0,r.useMemo)((()=>new Set(g.teams.map((e=>e.slug)))),[g.teams]),y=(0,r.useMemo)((()=>new Set(g.teams.map((e=>e.id)))),[g.teams]),Z=(0,r.useMemo)((()=>t?.filter((e=>!f.has(e)))??[]),[t,f]),v=(0,r.useMemo)((()=>s?.filter((e=>!y.has(e)))??[]),[s,y]),j=Z.length>0||v.length>0,w=o&&!g.loadedUserTeams,S=!w&&!j,[b,M]=(0,r.useState)({initiallyLoaded:S,fetching:!1,hasMore:g.hasMore,lastSearch:null,nextCursor:g.cursor,fetchError:null}),C=(0,r.useCallback)((async function(){if(void 0!==x){M((e=>({...e,fetching:!0})));try{await(0,i.PX)(d,{orgId:x}),M((e=>({...e,fetching:!1,initiallyLoaded:!0})))}catch(e){console.error(e),M((t=>({...t,fetching:!1,initiallyLoaded:!0,fetchError:e})))}}}),[d,x]),z=(0,r.useCallback)((async function(){if(void 0!==x){M((e=>({...e,fetching:!0})));try{const{results:t,hasMore:s,nextCursor:r}=await p(d,x,{slugs:Z,ids:v,limit:e}),o=n()([...t,...g.teams],(e=>{let{id:t}=e;return t}));l.Z.loadInitialData(o),M((e=>({...e,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:r})))}catch(e){console.error(e),M((t=>({...t,fetching:!1,initiallyLoaded:!0,fetchError:e})))}}}),[d,v,e,x,Z,g.teams]),_=(0,r.useCallback)((async function(t){const s=b.lastSearch,r=t?b.nextCursor:g.cursor;if(void 0!==x){M((e=>({...e,fetching:!0})));try{d.clear();const{results:o,hasMore:i,nextCursor:a}=await p(d,x,{search:t,limit:e,lastSearch:s,cursor:r}),c=n()([...g.teams,...o],(e=>{let{slug:t}=e;return t}));t?c.length>g.teams.length&&l.Z.loadInitialData(c):l.Z.loadInitialData(c,i,a),M((e=>({...e,hasMore:i&&g.hasMore,fetching:!1,lastSearch:t??null,nextCursor:a})))}catch(e){console.error(e),M((t=>({...t,fetching:!1,fetchError:e})))}}else console.error("Cannot fetch teams without an organization in context")}),[d,e,x,b.lastSearch,b.nextCursor,g.cursor,g.hasMore,g.teams]),k=(0,r.useCallback)((function(e){return""!==e?_(e):(b.hasMore===g.hasMore&&b.nextCursor===g.cursor||M((t=>({...t,lastSearch:e,hasMore:g.hasMore,nextCursor:g.cursor}))),Promise.resolve())}),[_,b.hasMore,b.nextCursor,g.cursor,g.hasMore]);(0,r.useEffect)((()=>{j&&z()}),[j,z]),(0,r.useEffect)((()=>{w&&C()}),[w,C]);const I=(0,u.M)();return{teams:(0,r.useMemo)((()=>t?g.teams.filter((e=>t.includes(e.slug))):s?g.teams.filter((e=>s.includes(e.id))):o&&!I?g.teams.filter((e=>e.isMember)):g.teams),[g.teams,s,t,o,I]),fetching:b.fetching||g.loading,initiallyLoaded:b.initiallyLoaded,fetchError:b.fetchError,hasMore:b.hasMore??g.hasMore,onSearch:k,loadMore:_}}},"./app/utils/withApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useApi.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function s(s){let{api:r,...i}=s;const a=(0,o.Z)({api:r,...t});return(0,n.tZ)(e,{...i,api:a})}return s.displayName=`withApi(${(0,r.Z)(e)})`,s}},"./app/utils/withProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useProjects.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){function t(t){const{projects:s,initiallyLoaded:r}=(0,o.Z)(),i=!r;return(0,n.tZ)(e,{...t,projects:s,loadingProjects:i})}return t.displayName=`withProjects(${(0,r.Z)(e)})`,t}}}]);
//# sourceMappingURL=../sourcemaps/app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--9ea265.8cee1329122a665a1ce901b20622f586.js.map