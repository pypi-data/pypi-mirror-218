"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const i="13px",o=(0,r.Z)("span",{target:"efr73n80"})("padding:0;position:relative;width:",(e=>e.size||i),";height:",(e=>e.size||i),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/components/events/errorLevel.tsx"),o=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,r.Z)((e=>{let{className:t,level:s,levelIndicatorSize:r,message:o,annotations:a}=e;return(0,n.BX)("div",{className:t,children:[s&&(0,n.tZ)(i.Z,{size:r,level:s,children:s}),o&&(0,n.tZ)(l,{children:o}),a]})}),{target:"e1ms02k71"})("display:flex;gap:",(0,o.D)(1),";align-items:center;position:relative;line-height:1.2;overflow:hidden;"),l=(0,r.Z)("span",{target:"e1ms02k70"})((e=>e.theme.overflowEllipsis)," width:auto;max-height:38px;"),d=a},"./app/components/pageAlertBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e4nzktk0"})("display:flex;align-items:center;justify-content:center;color:",(e=>e.theme.headerBackground),";background-color:",(e=>e.theme.bannerBackground),";padding:6px 30px;font-size:14px;")},"./app/components/replays/replayCountBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./app/components/badge.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{count:t}=e;const s=t&&t>50?"50+":t??null;return(0,i.tZ)(r.Z,{text:s})}o.displayName="ReplayCountBadge";const n=o},"./app/components/switchButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{forwardedRef:t,size:s="sm",isActive:r,forceActiveColor:i,isLoading:n,isDisabled:a,toggle:l,id:d,name:c,className:m,...g}=e;return(0,o.tZ)(u,{ref:t,id:d,name:c,type:"button",className:m,onClick:a?void 0:l,role:"checkbox","aria-checked":r,isLoading:n,disabled:a,isActive:r,size:s,"data-test-id":"switch",...g,children:(0,o.tZ)(p,{isDisabled:a,isActive:r,forceActiveColor:i,size:s})})}n.displayName="Switch";const a=e=>"sm"===e.size?16:24,l=e=>a(e)-("sm"===e.size?4:8),d=e=>"sm"===e.size?1:3,c=e=>e.isActive?d(e)+.875*a(e):d(e),u=(0,r.Z)("button",{target:"e1slsb9u1"})("display:inline-block;background:none;padding:0;border:1px solid ",(e=>e.theme.border),";position:relative;box-shadow:inset ",(e=>e.theme.dropShadowMedium),";height:",a,"px;width:",(e=>1.875*a(e)),"px;border-radius:",a,"px;transition:border 0.1s,box-shadow 0.1s;&[disabled]{cursor:not-allowed;}&:focus,&.focus-visible{outline:none;border-color:",(e=>e.theme.focusBorder),";box-shadow:",(e=>e.theme.focusBorder)," 0 0 0 1px;}"),p=(0,r.Z)("span",{target:"e1slsb9u0"})("display:block;position:absolute;border-radius:50%;transition:0.25s all ease;top:",d,"px;transform:translateX(",c,"px);width:",l,"px;height:",l,"px;background:",(e=>e.isActive||e.forceActiveColor?e.theme.active:e.theme.border),";opacity:",(e=>e.isDisabled?.4:null),";"),m=(0,i.forwardRef)(((e,t)=>(0,o.tZ)(n,{...e,forwardedRef:t})))},"./app/utils/displayReprocessEventAction.tsx":(e,t,s)=>{s.d(t,{B:()=>n});var r=s("./app/types/index.tsx");const i=["cocoa","native"];function o(e){const t=e?.frames??[],s=e?.stacktrace?.frames??[];return t.length||s.length?[...t,...s].map((e=>e.platform)).filter((e=>!!e)):[]}function n(e,t){if(!t||!e.includes("reprocessing-v2"))return!1;const{entries:s}=t,n=s.find((e=>e.type===r.UZ.EXCEPTION));return!!n&&!!(function(e){const{data:t}=e;return(t.values??[]).some((e=>"minidump"===e.mechanism?.type))}(n)||function(e){const{data:t}=e;return(t.values??[]).some((e=>"applecrashreport"===e.mechanism?.type))}(n)||function(e,t){const{platform:s}=e;if(s&&i.includes(s))return!0;const n=function(e,t){const s=(t.data.values??[]).flatMap(o),i=e.entries.find((e=>e.type===r.UZ.STACKTRACE))?.data??{},n=Object.keys(i).flatMap((e=>o(i[e]))),a=(e.entries.find((e=>e.type===r.UZ.THREADS))?.data.values??[]).flatMap((e=>{let{stacktrace:t}=e;return o(t)}));return new Set([...s,...n,...a])}(e,t);return i.some((e=>n.has(e)))}(t,n))}},"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("../node_modules/react/index.js"),i=s("./app/views/routeAnalyticsContextProvider.tsx");function o(e,t){const{setEventNames:s,previousUrl:o}=(0,r.useContext)(i.o);(0,r.useEffect)((()=>{s(e,t)}),[s,e,t,o])}},"./app/views/issueDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>It});var r=s("../node_modules/react/index.js"),i=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),n=s("./app/stores/projectsStore.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/useApi.tsx"),d=s("./app/utils/useOrganization.tsx"),c=s("./app/utils/useProjects.tsx"),u=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react-router/es/index.js")),m=s("../node_modules/@sentry/core/esm/exports.js"),g=s("../node_modules/@sentry/react/esm/profiler.js"),h=s("../node_modules/query-string/index.js"),b=s("./app/components/loadingError.tsx"),v=s("./app/components/loadingIndicator.tsx"),f=s("./app/components/organizations/pageFilters/container.tsx"),y=s("./app/components/projects/missingProjectMembership.tsx"),Z=s("./app/components/sentryDocumentTitle.tsx"),x=s("./app/components/tabs/index.tsx"),S=s("./app/stores/groupStore.tsx"),E=s("./app/styles/space.tsx"),I=s("./app/types/index.tsx"),w=s("./app/utils.tsx"),_=s("./app/utils/analytics.tsx"),j=s("./app/utils/dates.tsx"),D=s("./app/utils/events.tsx"),k=s("./app/utils/projects.tsx"),A=s("./app/utils/queryClient.tsx"),T=s("./app/utils/recreateRoute.tsx"),R=s("./app/views/routeAnalyticsContextProvider.tsx"),z=s("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),C=s("./app/utils/routeAnalytics/useRouteAnalyticsParams.tsx"),N=s("./app/utils/useLocation.tsx"),O=s("./app/utils/useRouter.tsx"),B=s("./app/utils/withDomainRequired.tsx");const $={GROUP_NOT_FOUND:"GROUP_NOT_FOUND",MISSING_MEMBERSHIP:"MISSING_MEMBERSHIP"};var U=s("../node_modules/lodash/omit.js"),M=s.n(U),G=s("./app/components/assistant/guideAnchor.tsx"),P=s("./app/components/badge.tsx"),X=s("./app/components/breadcrumbs.tsx"),q=s("./app/components/count.tsx"),L=s("./app/components/environmentPageFilter.tsx"),F=s("./app/components/eventOrGroupTitle.tsx"),V=s("./app/components/events/errorLevel.tsx"),H=s("./app/components/events/eventMessage.tsx"),Y=s("./app/components/group/inboxBadges/inboxReason.tsx"),K=s("./app/components/group/inboxBadges/statusBadge.tsx"),Q=s("./app/components/group/inboxBadges/unhandledTag.tsx"),W=s("./app/components/idBadge/projectBadge.tsx"),J=s("./app/components/layouts/thirds.tsx"),ee=s("./app/components/links/link.tsx"),te=s("./app/components/replays/replayCountBadge.tsx"),se=s("./app/components/replays/useReplaysCount.tsx"),re=s("./app/components/shortId.tsx"),ie=s("./app/components/tooltip.tsx"),oe=s("./app/icons/index.tsx"),ne=s("./app/utils/issueTypeConfig/index.tsx"),ae=s("./app/actionCreators/group.tsx"),le=s("./app/actionCreators/modal.tsx"),de=s("./app/components/acl/feature.tsx"),ce=s("./app/components/acl/featureDisabled.tsx"),ue=s("./app/components/actions/archive.tsx"),pe=s("./app/components/actions/button.tsx"),me=s("./app/components/actions/ignore.tsx"),ge=s("./app/components/actions/resolve.tsx"),he=s("./app/components/button.tsx"),be=s("./app/components/dropdownMenu/index.tsx"),ve=s("./app/utils/discover/eventView.tsx"),fe=s("./app/utils/discover/types.tsx"),ye=s("./app/utils/displayReprocessEventAction.tsx"),Ze=s("./app/utils/guid.tsx"),xe=s("./app/utils/withApi.tsx"),Se=s("./app/utils/withOrganization.tsx"),Ee=s("./app/components/autoSelectText.tsx"),Ie=s("./app/components/copyToClipboardButton.tsx"),we=s("./app/components/switchButton.tsx"),_e=s("./app/stores/useLegacyStore.tsx"),je=s("./app/utils/useCopyToClipboard.tsx"),De=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ke(e){let{Header:t,Body:s,Footer:n,organization:a,projectSlug:d,groupId:c,onToggle:u,closeModal:p}=e;const m=(0,l.Z)({persistInFlight:!0}),[g,h]=(0,r.useState)(!1),b=(0,r.useRef)(null),f=(0,_e.X)(S.Z).find((e=>e.id===c)),y=f?.isPublic,Z=(0,r.useCallback)(((e,t)=>{e?.preventDefault(),h(!0),u(),(0,ae.Gv)(m,{orgId:a.slug,projectId:d,itemIds:[c],data:{isPublic:t??!y}},{error:()=>{(0,i.Iw)((0,o.t)("Error sharing"))},complete:()=>{h(!1)}})}),[m,h,u,y,a.slug,d,c]);(0,r.useEffect)((()=>{y||Z(null,!0)}),[]);const x=f?.shareId?function(){const e=`/share/issue/${f.shareId}/`,{host:t,protocol:s}=window.location;return`${s}//${t}${e}`}():null,{onClick:E}=(0,je.Z)({text:x,onCopy:p});return(0,De.BX)(r.Fragment,{children:[(0,De.tZ)(t,{closeButton:!0,children:(0,De.tZ)("h4",{children:(0,o.t)("Share Issue")})}),(0,De.tZ)(s,{children:(0,De.BX)(Te,{children:[(0,De.BX)(Re,{children:[(0,De.BX)("div",{children:[(0,De.tZ)(ze,{children:(0,o.t)("Create a public link")}),(0,De.tZ)(Ce,{children:(0,o.t)("Share a link with anyone outside your organization")})]}),(0,De.tZ)(we.Z,{"aria-label":y?(0,o.t)("Unshare"):(0,o.t)("Share"),isActive:y,size:"lg",toggle:Z})]}),(!f||g)&&(0,De.tZ)(Ne,{children:(0,De.tZ)(v.Z,{mini:!0})}),f&&!g&&y&&x&&(0,De.BX)(Oe,{children:[(0,De.tZ)($e,{children:(0,De.tZ)(Be,{ref:b,children:x})}),(0,De.tZ)(Ue,{text:x,title:(0,o.t)("Copy to clipboard"),borderless:!0,size:"sm",onClick:E,"aria-label":(0,o.t)("Copy to clipboard")}),(0,De.tZ)(Me,{title:(0,o.t)("Generate new URL. Invalidates previous URL"),"aria-label":(0,o.t)("Generate new URL"),borderless:!0,size:"sm",icon:(0,De.tZ)(oe.tr,{}),onClick:()=>Z(null,!0)})]})]})}),(0,De.tZ)(n,{children:!g&&y&&x?(0,De.tZ)(he.zx,{priority:"primary",onClick:E,children:(0,o.t)("Copy Link")}):(0,De.tZ)(he.zx,{priority:"primary",onClick:p,children:(0,o.t)("Close")})})]})}ke.displayName="ShareIssueModal";const Ae=ke,Te=(0,u.Z)("div",{target:"e1w9vv749"})("display:flex;gap:",(0,E.D)(2),";flex-direction:column;min-height:100px;"),Re=(0,u.Z)("div",{target:"e1w9vv748"})("display:flex;justify-content:space-between;align-items:center;gap:",(0,E.D)(2),";"),ze=(0,u.Z)("div",{target:"e1w9vv747"})("padding-right:",(0,E.D)(4),";white-space:nowrap;"),Ce=(0,u.Z)("p",{target:"e1w9vv746"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";"),Ne=(0,u.Z)("div",{target:"e1w9vv745"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Oe=(0,u.Z)("div",{target:"e1w9vv744"})("display:grid;grid-template-columns:1fr max-content max-content;align-items:center;border:1px solid ",(e=>e.theme.border),";border-radius:",(0,E.D)(.5),";"),Be=(0,u.Z)(Ee.Z,{target:"e1w9vv743"})("padding:",(0,E.D)(1)," ",(0,E.D)(1),";",(e=>e.theme.overflowEllipsis),";"),$e=(0,u.Z)("div",{target:"e1w9vv742"})("position:relative;display:flex;flex-grow:1;background-color:transparent;border-right:1px solid ",(e=>e.theme.border),";min-width:0;"),Ue=(0,u.Z)(Ie.m,{target:"e1w9vv741"})("border-radius:0;border-right:1px solid ",(e=>e.theme.border),";height:100%;flex-shrink:0;margin:0;&:hover{border-right:1px solid ",(e=>e.theme.border),";}"),Me=(0,u.Z)(he.zx,{target:"e1w9vv740"})({name:"1f2ljh2",styles:"border-radius:0;height:100%;flex-shrink:0"});var Ge=s("./app/views/issueDetails/utils.tsx");function Pe(e){let{className:t,disabled:s,group:r,icon:i,onClick:n,disablePriority:a,size:l="xs"}=e;const d=r.subscriptionDetails?.disabled??!1;return(0,De.tZ)(pe.Z,{className:t,disabled:s||d,title:(0,Ge.sC)(r),tooltipProps:{delay:300},priority:!a&&r.isSubscribed?"primary":"default",size:l,"aria-label":(0,o.t)("Subscribe"),onClick:n,icon:i??(0,De.tZ)(oe.lJ,{size:l})})}Pe.displayName="SubscribeAction";const Xe=Pe;function qe(e){const{api:t,group:s,project:n,organization:a,disabled:l,event:d,query:c={}}=e,{status:u,isBookmarked:m}=s,g=m?"unbookmark":"bookmark",h=m?(0,o.t)("Remove bookmark"):(0,o.t)("Bookmark"),b=!!n.features?.includes("releases"),v="resolved"===u,f="resolved"===s.status?s.statusDetails.autoResolved:void 0,y="ignored"===u,Z=a.features.includes("escalating-issues"),x=a.access.includes("event:admin"),{delete:w,deleteAndDiscard:k,share:A}=(0,ne.Y)(s).actions,T=()=>{const{title:e,type:t,shortId:r}=s,i=s.issueCategory===I.qE.PERFORMANCE&&!!d?.occurrence,o=(0,ne.Y)(s),l={id:void 0,name:e||t,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:`issue:${r}`,projects:[Number(n.id)],version:2,range:"90d",dataset:o.usesIssuePlatform||i?fe.as.ISSUE_PLATFORM:void 0};return ve.ZP.fromSavedQuery(l).getResultsViewUrlTarget(a.slug)},R=(e,t,r)=>{const{alert_date:i,alert_rule_id:o,alert_type:l}=c;(0,_.Gi)("issue_details.action_clicked",{organization:a,project_id:parseInt(n.id,10),action_type:e,action_substatus:t,action_status_details:r,alert_date:"string"==typeof i?(0,j.v5)(Number(i)):void 0,alert_rule_id:"string"==typeof o?o:void 0,alert_type:"string"==typeof l?l:void 0,...(0,D.Sq)(s)})},z=()=>{(0,i.E3)((0,o.t)("Delete event…")),(0,ae.MU)(t,{orgId:a.slug,projectId:n.slug,itemIds:[s.id]},{complete:()=>{(0,i.B8)(),p.browserHistory.push((0,B.D)({pathname:`/organizations/${a.slug}/issues/`,query:{project:n.id}}))}}),R("deleted")},C=e=>{(0,i.E3)((0,o.t)("Saving changes…")),(0,ae.Gv)(t,{orgId:a.slug,projectId:n.slug,itemIds:[s.id],data:e},{complete:i.B8}),(e=>void 0!==e.status)(e)&&R(e.status,e.substatus,Object.keys(e.statusDetails||{})[0]),void 0!==e.inbox&&R("mark_reviewed")},N=()=>{!s.isPublic&&(0,_.Gi)("issue.shared_publicly",{organization:a}),R("shared")},O=()=>{C({isSubscribed:!s.isSubscribed}),R("subscribed")},$=()=>{const e=(0,Ze.E)();(0,i.E3)((0,o.t)("Discarding event…")),S.Z.onDiscard(e,s.id),t.request(`/issues/${s.id}/`,{method:"PUT",data:{discard:!0},success:t=>{S.Z.onDiscardSuccess(e,s.id,t),p.browserHistory.push((0,B.D)({pathname:`/organizations/${a.slug}/issues/`,query:{project:n.id}}))},error:t=>{S.Z.onDiscardError(e,s.id,t)},complete:i.B8}),R("discarded")},U=e=>{let{Body:t,Footer:s,closeModal:i}=e;return(0,De.tZ)(de.Z,{features:["projects:discard-groups"],hookName:"feature-disabled:discard-groups",organization:a,project:n,renderDisabled:function(e){let{children:t,...s}=e;return t({...s,renderDisabled:e=>{let{features:t}=e;return(0,De.tZ)(ce.Z,{alert:!0,featureName:(0,o.t)("Discard and Delete"),features:t})}})},children:e=>{let{hasFeature:n,renderDisabled:a,...l}=e;return(0,De.BX)(r.Fragment,{children:[(0,De.BX)(t,{children:[!n&&"function"==typeof a&&a({...l,hasFeature:n,children:null}),(0,o.t)("Discarding this event will result in the deletion of most data associated with this issue and future events being discarded before reaching your stream. Are you sure you wish to continue?")]}),(0,De.BX)(s,{children:[(0,De.tZ)(he.zx,{onClick:i,children:(0,o.t)("Cancel")}),(0,De.tZ)(he.zx,{style:{marginLeft:(0,E.D)(1)},priority:"primary",onClick:$,disabled:!n,children:(0,o.t)("Discard Future Events")})]})]})}})},{dropdownItems:M,onIgnore:P}=(0,me.c)({onUpdate:C}),{dropdownItems:X}=(0,ue.X)({onUpdate:C});return(0,De.BX)(Le,{children:[(0,De.tZ)(be.h,{triggerProps:{"aria-label":(0,o.t)("More Actions"),icon:(0,De.tZ)(oe.YR,{size:"xs"}),showChevron:!1,size:"sm"},items:[...y||Z?[]:[{key:"ignore",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Ignore"),isSubmenu:!0,disabled:l,children:[{key:"ignore-now",label:(0,o.t)("Ignore Issue"),onAction:()=>P()},...M]}],...Z?y?[]:[{key:"Archive",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Archive"),isSubmenu:!0,disabled:l,children:X}]:[],{key:"open-in-discover",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Open in Discover"),to:l?"":T(),onAction:()=>R("open_in_discover")},{key:s.isSubscribed?"unsubscribe":"subscribe",className:"hidden-sm hidden-md hidden-lg",label:s.isSubscribed?(0,o.t)("Unsubscribe"):(0,o.t)("Subscribe"),disabled:l||s.subscriptionDetails?.disabled,onAction:O},{key:"mark-review",label:(0,o.t)("Mark reviewed"),disabled:!s.inbox||l,details:!s.inbox||l?(0,o.t)("Issue has been reviewed"):void 0,onAction:()=>C({inbox:!1})},{key:"share",label:(0,o.t)("Share"),disabled:l||!A.enabled,hidden:!a.features.includes("shared-issues"),onAction:()=>{(0,le.openModal)((e=>(0,De.tZ)(Ae,{...e,organization:a,projectSlug:s.project.slug,groupId:s.id,onToggle:N})))}},{key:g,label:h,onAction:()=>{C({isBookmarked:!s.isBookmarked}),R("bookmarked")}},{key:"reprocess",label:(0,o.t)("Reprocess events"),hidden:!(0,ye.B)(a.features,d),onAction:()=>{(0,le.openReprocessEventModal)({organization:a,groupId:s.id})}},{key:"delete-issue",priority:"danger",label:(0,o.t)("Delete"),hidden:!x,disabled:!w.enabled,details:w.disabledReason,onAction:()=>(0,le.openModal)((e=>{let{Body:t,Footer:s,closeModal:i}=e;return(0,De.BX)(r.Fragment,{children:[(0,De.tZ)(t,{children:(0,o.t)("Deleting this issue is permanent. Are you sure you wish to continue?")}),(0,De.BX)(s,{children:[(0,De.tZ)(he.zx,{onClick:i,children:(0,o.t)("Cancel")}),(0,De.tZ)(he.zx,{style:{marginLeft:(0,E.D)(1)},priority:"primary",onClick:z,children:(0,o.t)("Delete")})]})]})}))},{key:"delete-and-discard",priority:"danger",label:(0,o.t)("Delete and discard future events"),hidden:!x,disabled:!k.enabled,details:k.disabledReason,onAction:()=>{(0,le.openModal)(U)}}]}),(0,De.tZ)(Xe,{className:"hidden-xs",disabled:l,disablePriority:!0,group:s,onClick:(q=O,function(e){if(l)return e.preventDefault(),void e.stopPropagation();q(e)}),icon:s.isSubscribed?(0,De.tZ)(oe.lJ,{}):(0,De.tZ)(oe.mA,{}),size:"sm"}),(0,De.tZ)("div",{className:"hidden-xs",children:(0,De.tZ)(L.Z,{alignDropdown:"right",size:"sm"})}),(0,De.tZ)(de.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:a,children:(0,De.tZ)(pe.Z,{className:"hidden-xs",disabled:l,to:l?"":T(),onClick:()=>R("open_in_discover"),size:"sm",children:(0,De.tZ)(G.Z,{target:"open_in_discover",children:(0,o.t)("Open in Discover")})})}),v||y?(0,De.tZ)(pe.Z,{priority:"primary",title:f?(0,o.t)("This event is resolved due to the Auto Resolve configuration for this project"):(0,o.t)("Change status to unresolved"),size:"sm",icon:Z?null:v?(0,De.tZ)(oe.DL,{}):(0,De.tZ)(oe.i1,{}),disabled:l||f,onClick:()=>C({status:I.d7.UNRESOLVED,statusDetails:{}}),children:y?Z?(0,o.t)("Archived"):(0,o.t)("Ignored"):(0,o.t)("Resolved")}):(0,De.BX)(r.Fragment,{children:[Z?(0,De.tZ)(G.Z,{target:"issue_details_archive_button",position:"bottom",children:(0,De.tZ)(ue.Z,{className:"hidden-xs",size:"sm",isArchived:y,onUpdate:C,disabled:l})}):(0,De.tZ)(me.Z,{className:"hidden-xs",isIgnored:y,onUpdate:C,disabled:l,size:"sm"}),(0,De.tZ)(G.Z,{target:"resolve",position:"bottom",offset:20,children:(0,De.tZ)(ge.Z,{disabled:l,disableDropdown:l,hasRelease:b,latestRelease:n.latestRelease,onUpdate:C,projectSlug:n.slug,isResolved:v,isAutoResolved:f,size:"sm",priority:"primary"})})]})]});var q}qe.displayName="Actions";const Le=(0,u.Z)("div",{target:"e1muhq5a0"})("display:flex;align-items:center;gap:",(0,E.D)(.5),";"),Fe=(0,xe.Z)((0,Se.Z)(qe));var Ve=s("./app/views/issueDetails/types.tsx"),He=s("./app/views/issueDetails/unhandledTag.tsx");function Ye(e){let{baseUrl:t,disabledTabs:s,eventRoute:r,group:i,project:n}=e;const a=(0,d.Z)(),l=(0,se.Z)({groupIds:i.id,organization:a})[i.id],c=new Set(n?n.features:[]),u=new Set(a?a.features:[]),p=u.has("grouping-tree-ui"),m=c.has("similarity-view"),g=u.has("event-attachments"),h=u.has("session-replay"),b=(0,ne.Y)(i);return(0,C.Z)({group_has_replay:(l??0)>0}),(0,De.BX)(lt,{hideBorder:!0,children:[(0,De.tZ)(x.td.Item,{disabled:s.includes(Ve.O.DETAILS),to:`${t}${location.search}`,children:(0,o.t)("Details")},Ve.O.DETAILS),(0,De.BX)(x.td.Item,{textValue:(0,o.t)("Activity"),disabled:s.includes(Ve.O.ACTIVITY),to:`${t}activity/${location.search}`,children:[(0,o.t)("Activity"),(0,De.BX)(at,{children:[i.numComments,(0,De.tZ)(oe.f7,{size:"xs"})]})]},Ve.O.ACTIVITY),(0,De.BX)(x.td.Item,{textValue:(0,o.t)("User Feedback"),hidden:!b.userFeedback.enabled,disabled:s.includes(Ve.O.USER_FEEDBACK),to:`${t}feedback/${location.search}`,children:[(0,o.t)("User Feedback")," ",(0,De.tZ)(P.Z,{text:i.userReportCount})]},Ve.O.USER_FEEDBACK),(0,De.tZ)(x.td.Item,{hidden:!g||!b.attachments.enabled,disabled:s.includes(Ve.O.ATTACHMENTS),to:`${t}attachments/${location.search}`,children:(0,o.t)("Attachments")},Ve.O.ATTACHMENTS),(0,De.tZ)(x.td.Item,{disabled:s.includes(Ve.O.TAGS),to:`${t}tags/${location.search}`,children:(0,o.t)("Tags")},Ve.O.TAGS),(0,De.tZ)(x.td.Item,{disabled:s.includes(Ve.O.EVENTS),to:r,children:(0,o.t)("All Events")},Ve.O.EVENTS),(0,De.tZ)(x.td.Item,{hidden:!b.mergedIssues.enabled,disabled:s.includes(Ve.O.MERGED),to:`${t}merged/${location.search}`,children:(0,o.t)("Merged Issues")},Ve.O.MERGED),(0,De.tZ)(x.td.Item,{hidden:!p||!b.grouping.enabled,disabled:s.includes(Ve.O.GROUPING),to:`${t}grouping/${location.search}`,children:(0,o.t)("Grouping")},Ve.O.GROUPING),(0,De.tZ)(x.td.Item,{hidden:!m||!b.similarIssues.enabled,disabled:s.includes(Ve.O.SIMILAR_ISSUES),to:`${t}similar/${location.search}`,children:(0,o.t)("Similar Issues")},Ve.O.SIMILAR_ISSUES),(0,De.BX)(x.td.Item,{textValue:(0,o.t)("Replays"),hidden:!h||!b.replays.enabled,to:`${t}replays/${location.search}`,children:[(0,o.t)("Replays"),(0,De.tZ)(te.Z,{count:l})]},Ve.O.REPLAYS)]})}function Ke(e){let{baseUrl:t,group:s,groupReprocessingStatus:i,organization:n,event:a,project:l}=e;const d=(0,N.T)(),c=n.features.includes("escalating-issues"),u=(0,r.useMemo)((()=>n.features.includes("reprocessing-v2")?i===Ge.m7.REPROCESSING?[Ve.O.ACTIVITY,Ve.O.USER_FEEDBACK,Ve.O.ATTACHMENTS,Ve.O.EVENTS,Ve.O.MERGED,Ve.O.GROUPING,Ve.O.SIMILAR_ISSUES,Ve.O.TAGS]:i===Ge.m7.REPROCESSED_AND_HASNT_EVENT?[Ve.O.DETAILS,Ve.O.ATTACHMENTS,Ve.O.EVENTS,Ve.O.MERGED,Ve.O.GROUPING,Ve.O.SIMILAR_ISSUES,Ve.O.TAGS,Ve.O.USER_FEEDBACK]:[]:[]),[n,i]),p=(0,r.useMemo)((()=>{const e=M()(d.query,"query");return{pathname:`${t}events/`,query:e}}),[d,t]),{userCount:m}=s;let g="group-detail";s.hasSeen&&(g+=" hasSeen"),"resolved"===s.status&&(g+=" isResolved");const h=(0,D.FC)(s),b=!!u.length,v=s.shortId&&(0,De.tZ)(G.Z,{target:"issue_number",position:"bottom",children:(0,De.BX)(Je,{children:[(0,De.tZ)(W.Z,{project:l,avatarSize:16,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:l.slug}}),(0,De.tZ)(ie.u,{className:"help-link",title:(0,o.t)("This identifier is unique across your organization, and can be used to reference an issue in various places, like commit messages."),position:"bottom",children:(0,De.tZ)(et,{shortId:s.shortId})})]})});return(0,De.tZ)(J.h4,{children:(0,De.BX)("div",{className:g,children:[(0,De.BX)(We,{children:[(0,De.tZ)(X.Z,{crumbs:[{label:"Issues",to:`/organizations/${n.slug}/issues/${d.search}`},{label:v}]}),(0,De.tZ)(Fe,{group:s,project:l,disabled:b,event:a,query:d.query})]}),(0,De.BX)(tt,{children:[(0,De.BX)(st,{children:[(0,De.BX)(rt,{children:[(0,De.tZ)("h3",{children:(0,De.tZ)(it,{data:s})}),!c&&s.inbox&&(0,De.tZ)(Y.Z,{inbox:s.inbox,fontSize:"md"}),c&&(0,De.tZ)(K.O,{status:s.status,substatus:s.substatus,fontSize:"md"})]}),(0,De.BX)(nt,{children:[s.level&&(0,De.tZ)(V.Z,{level:s.level,size:"11px"}),s.isUnhandled&&(0,De.tZ)(Q.Z,{}),(0,De.tZ)(H.Z,{message:h})]})]}),(0,De.BX)(ot,{children:[(0,De.BX)("div",{className:"count",children:[(0,De.tZ)("h6",{className:"nav-header",children:(0,o.t)("Events")}),(0,De.tZ)(ee.Z,{disabled:b,to:p,children:(0,De.tZ)(q.Z,{className:"count",value:s.count})})]}),(0,De.BX)("div",{className:"count",children:[(0,De.tZ)("h6",{className:"nav-header",children:(0,o.t)("Users")}),0!==m?(0,De.tZ)(ee.Z,{disabled:b,to:`${t}tags/user/${d.search}`,children:(0,De.tZ)(q.Z,{className:"count",value:m})}):(0,De.tZ)("span",{children:"0"})]})]})]}),(0,De.tZ)(tt,{className:"hidden-sm hidden-md hidden-lg",children:(0,De.tZ)(L.Z,{alignDropdown:"right"})}),(0,De.tZ)(Ye,{baseUrl:t,disabledTabs:u,eventRoute:p,group:s,project:l})]})})}Ye.displayName="GroupHeaderTabs",Ke.displayName="GroupHeader";const Qe=Ke,We=(0,u.Z)("div",{target:"ez9r7o610"})("display:flex;flex-direction:row;justify-content:space-between;gap:",(0,E.D)(1),";align-items:center;"),Je=(0,u.Z)("div",{target:"ez9r7o69"})("display:flex;gap:",(0,E.D)(1),";align-items:center;"),et=(0,u.Z)(re.Z,{target:"ez9r7o68"})("font-family:",(e=>e.theme.text.family),";font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),tt=(0,u.Z)("div",{target:"ez9r7o67"})("display:flex;gap:",(0,E.D)(2),";justify-content:space-between;margin-top:",(0,E.D)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;}"),st=(0,u.Z)("div",{target:"ez9r7o66"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:65%;}"),rt=(0,u.Z)("div",{target:"ez9r7o65"})("display:flex;line-height:2;gap:",(0,E.D)(1),";"),it=(0,u.Z)(F.Z,{target:"ez9r7o64"})({name:"870gjp",styles:"font-size:inherit"}),ot=(0,u.Z)("div",{target:"ez9r7o63"})("display:grid;grid-template-columns:repeat(2, min-content);gap:calc(",(0,E.D)(3)," + ",(0,E.D)(3),");@media (min-width: ",(e=>e.theme.breakpoints.small),"){justify-content:flex-end;}"),nt=(0,u.Z)(He.S,{target:"ez9r7o62"})("display:flex;gap:",(0,E.D)(1),";justify-content:flex-start;line-height:1.2;"),at=(0,u.Z)(P.Z,{target:"ez9r7o61"})("display:flex;align-items:center;gap:",(0,E.D)(.5),";"),lt=(0,u.Z)(x.td,{target:"ez9r7o60"})("margin-top:",(0,E.D)(2),";");var dt=s("./app/components/pageAlertBar.tsx");function ct(e){let{organization:t,project:s}=e;return(0,De.BX)(dt.Z,{children:[(0,De.tZ)(oe.Db,{}),(0,De.tZ)(pt,{children:(0,o.t)("You are viewing a sample error. Configure Sentry to start viewing real errors.")}),(0,De.tZ)(he.zx,{size:"xs",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,onClick:()=>(0,_.Gi)("growth.sample_error_onboarding_link_clicked",{project_id:s.id?.toString(),organization:t,platform:s.platform}),children:(0,o.t)("Get Started")})]})}ct.displayName="SampleEventAlert";const ut=ct,pt=(0,u.Z)("span",{target:"egvxlkr0"})("margin:0 ",(0,E.D)(1),";");function mt(e){let{group:t,event:s,organization:r,router:i}=e;const o=function(e){let{router:t}=e;const s=t.routes[t.routes.length-1];return t.params.tagKey?Ve.O.TAGS:Object.values(Ve.O).find((e=>s.path===Ve.h[e]))??Ve.O.DETAILS}({router:i});return{baseUrl:(0,B.D)(`/organizations/${r.slug}/issues/${t.id}/${i.params.eventId&&s?`events/${s.id}/`:""}`),currentTab:o}}function gt(e){let{groupId:t,environments:s}=e;return[`/issues/${t}/`,{query:(0,Ge.NM)({environments:s})}]}const ht=e=>{let{organization:t,project:s,group:r,event:i,tab:o}=e;if(!s||!r)return;if((0,_.Gi)("issue_details.tab_changed",{organization:t,project_id:parseInt(s.id,10),tab:o,...(0,D.Sq)(r)}),r.issueCategory!==I.qE.ERROR)return;const n=i?i.tags.filter((e=>{let{key:t}=e;return["device","os","browser"].includes(t)})).reduce(((e,t)=>{let{key:s,value:r}=t;return e[s]=r,e}),{}):{};(0,_.Gi)("issue_group_details.tab.clicked",{organization:t,tab:o,platform:s.platform,...n})};function bt(e){let{errorType:t,onRetry:s}=e;const r=(0,d.Z)(),i=(0,N.T)().query.project,{projects:n}=(0,c.Z)(),a=n.find((e=>e.id===i));switch(t){case $.GROUP_NOT_FOUND:return(0,De.tZ)(xt,{message:(0,o.t)("The issue you were looking for was not found.")});case $.MISSING_MEMBERSHIP:return(0,De.tZ)(y.Z,{organization:r,project:a});default:return(0,De.tZ)(xt,{onRetry:s})}}function vt(e){let{children:t,group:s,project:i,loadingEvent:o,eventError:n,event:a,refetchData:l}=e;const c=(0,d.Z)(),u=(0,O.Z)(),{currentTab:p,baseUrl:m}=mt({group:s,event:a,router:u,organization:c}),g=(0,Ge.M3)(s),h=(0,Ge.V8)();(function(e){let{group:t,event:s,project:i,tab:o}=e;const n=(0,N.T)(),{alert_date:a,alert_rule_id:l,alert_type:d,ref_fallback:c,stream_index:u,query:p}=n.query;(0,z.Z)("issue_details.viewed","Issue Details: Viewed"),(0,C.Z)({...(0,D.Sq)(t),...(0,D.T7)(s),...(0,k.p)(i),tab:o,stream_index:"string"==typeof u?Number(u):void 0,query:"string"==typeof p?p:void 0,alert_date:"string"==typeof a?(0,j.v5)(Number(a)):void 0,alert_rule_id:"string"==typeof l?l:void 0,alert_type:"string"==typeof d?d:void 0,ref_fallback:c,stacktrace_link_viewed:!1,trace_status:"none",group_has_replay:!1}),function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{setDisableRouteAnalytics:t,previousUrl:s}=(0,r.useContext)(R.o);(0,r.useEffect)((()=>{t(e)}),[t,s,e])}(!t||!s||!i)})({group:s,event:a,project:i,tab:p}),(0,r.useEffect)((()=>{if(p===Ve.O.DETAILS&&s&&a&&s.id!==a?.groupID&&!n){const e=`/organizations/${c.slug}/issues/${a.groupID}/events/${a.id}/`;u.push((0,B.D)(e))}}),[p,a,n,s,c.slug,u]);const b={environments:h,group:s,project:i,event:a,loadingEvent:o,eventError:n,groupReprocessingStatus:g,onRetry:l,baseUrl:m};return(0,De.BX)(x.mQ,{value:p,onChange:e=>ht({tab:e,group:s,project:i,event:a,organization:c}),children:[(0,De.tZ)(Qe,{organization:c,groupReprocessingStatus:g,event:a??void 0,group:s,baseUrl:m,project:i}),(0,De.tZ)(St,{children:(0,De.tZ)(x.nP.Item,{children:(0,r.isValidElement)(t)?(0,r.cloneElement)(t,b):t},p)})]})}function ft(e){const t=e.group?.project?.slug,{projects:s,initiallyLoaded:i,fetchError:n}=(0,c.Z)({slugs:t?[t]:[]}),a=s.find((e=>{let{slug:s}=e;return s===t})),l=a??s[0];return(0,r.useEffect)((()=>{e.group&&i&&!a&&m.$e((t=>{const r=s.map((e=>e.id));t.setContext("missingProject",{projectId:e.group?.project.id,availableProjects:r}),m.Tb(new Error("Project not found"))}))}),[e.group,a,s,i]),e.error?(0,De.tZ)(bt,{errorType:e.errorType,onRetry:e.refetchData}):n?(0,De.tZ)(xt,{message:(0,o.t)("Error loading the specified project")}):t&&!n&&i&&!l?(0,De.tZ)(xt,{message:(0,o.t)("The project %s does not exist",t)}):i&&l&&e.group?(0,De.tZ)(vt,{...e,project:l,group:e.group}):(0,De.tZ)(v.Z,{})}function yt(e){const t=(0,d.Z)(),s=(0,O.Z)(),{group:i,...o}=function(){const e=(0,l.Z)(),t=(0,d.Z)(),s=(0,O.Z)(),i=s.params,[o,n]=(0,r.useState)(!1),[a,c]=(0,r.useState)(null),[u,g]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),f=(0,Ge.V8)(),y=i.groupId,{data:Z,isLoading:x,isError:E,refetch:I}=function(e){let{groupId:t,eventId:s,environments:r}=e;const i=(0,d.Z)(),o=(0,N.T)(),n=i.features.includes("issue-details-most-helpful-event"),a=s??(n?"helpful":"latest"),l=[`/issues/${t}/events/${a}/`,{query:(0,Ge._2)({environments:r,query:n?o.query.query:void 0})}],c="latest"===a||"helpful"===a,u=(0,A.WE)(l,{staleTime:3e4,cacheTime:3e4,enabled:c,retry:(e,t)=>404!==t.status}),p=(0,A.WE)(l,{staleTime:1/0,enabled:!c,retry:(e,t)=>404!==t.status});return c?u:p}({groupId:y,eventId:i.eventId,environments:f}),{data:_,isLoading:j,isError:D,error:k,refetch:R}=(0,A.WE)(gt({groupId:y,environments:f}),{staleTime:3e4,cacheTime:3e4}),z=_??null;(0,r.useEffect)((()=>{(0,w.ri)(z)&&S.Z.loadInitialData([z])}),[y,z]),function(e){const t=(0,A.NL)(),s=(0,r.useRef)(e);s.current=e;const i=(0,r.useRef)();void 0===i.current&&(i.current=S.Z.listen((()=>{const[e]=S.Z.getState(),r=s.current;(0,w.ri)(e)&&(0,A.XN)(t,gt({groupId:e.id,environments:r}),e)}),void 0)),(0,r.useEffect)((()=>()=>i.current?.()),[])}(f),(0,r.useEffect)((()=>{Z&&g(Z)}),[Z]),(0,r.useEffect)((()=>{if(z&&u){const e=function(e){let{group:t,event:s,organization:r,router:i}=e;const{routes:o,params:n,location:a}=i,{groupId:l}=n,{currentTab:d,baseUrl:c}=mt({group:t,event:s,organization:r,router:i}),u=r.features?.includes("reprocessing-v2"),{id:p}=t,m=(0,Ge.M3)(t);if(l!==p)return u&&m===Ge.m7.REPROCESSED_AND_HASNT_EVENT&&d!==Ve.O.ACTIVITY?{pathname:`${c}${Ve.O.ACTIVITY}/`,query:{...n,groupId:p}}:(0,T.Z)("",{routes:o,location:a,params:{...n,groupId:p}});if(u){if(m===Ge.m7.REPROCESSING&&d!==Ve.O.DETAILS)return{pathname:c,query:n};if(m===Ge.m7.REPROCESSED_AND_HASNT_EVENT&&d!==Ve.O.ACTIVITY&&d!==Ve.O.USER_FEEDBACK)return{pathname:`${c}${Ve.O.ACTIVITY}/`,query:n}}}({group:z,event:u,router:s,organization:t});if(e)return void p.browserHistory.push(e)}}),[z,u,s,t]),(0,r.useEffect)((()=>{const s=z?.project?.slug;s&&(z.hasSeen||(0,Ge.V7)(e,t.slug,s,i.groupId))}),[e,z?.hasSeen,z?.project?.id,z?.project?.slug,t.slug,i.groupId]);const C=s.location.query._allp;(0,r.useEffect)((()=>{const e=h.parse(window.location.search)||{};void 0!==e.project||C||b||!z?.project.id||(e.project=z?.project.id,p.browserHistory.replace({...window.location,query:e})),C&&!b&&(delete e.project,delete e._allp,p.browserHistory.replace({...window.location,query:e}),v(!0))}),[C,z?.project.id,b]);const B=(0,r.useCallback)((e=>{var t;m.Tb(e),c((t=e?.status,t?404===t?$.GROUP_NOT_FOUND:403===t?$.MISSING_MEMBERSHIP:null:null)),n(!0)}),[]);(0,r.useEffect)((()=>{D&&B(k)}),[D,k,B]);const U=(0,r.useCallback)((()=>{z?.status!==Ge.m7.REPROCESSING||j||x||R()}),[z,j,x,R]),M=(0,r.useCallback)((()=>{n(!1),c(null),I(),U()}),[U,I]);return(0,r.useEffect)((()=>{z&&z.stale&&U()}),[U,z]),function(e){let{refetchGroup:t}=e;const s=(0,d.Z)(),i=s.features?.includes("reprocessing-v2");(0,r.useEffect)((()=>{let e;return i&&(e=window.setInterval(t,3e4)),()=>{window.clearInterval(e)}}),[i,t])}({refetchGroup:U}),(0,r.useEffect)((()=>()=>{S.Z.reset()}),[]),{loadingGroup:j,loadingEvent:x,group:z,event:u,errorType:a,error:o,eventError:E,refetchData:M,refetchGroup:U}}(),n=(0,Ge.V8)(),{data:a}=(0,Ge.by)({groupId:s.params.groupId,environment:n},{enabled:(0,w.ri)(i)}),c=a?.some((e=>"sample_event"===e.key))??!1;return(0,De.BX)(r.Fragment,{children:[c&&i&&(0,De.tZ)(ut,{project:i.project,organization:t}),(0,De.tZ)(Z.Z,{noSuffix:!0,title:(()=>{const e="Sentry";if(!i)return e;const{title:s}=(0,D.YQ)(i,t?.features),r=(0,D.FC)(i),o=`${t.slug} — ${i.project.slug}`;return s&&r?`${s}: ${r} — ${o}`:`${s||r||e} — ${o}`})(),children:(0,De.tZ)(f.Z,{skipLoadLastUsed:!0,forceProject:i?.project,shouldForceProject:!0,children:(0,De.tZ)(ft,{...e,group:i,...o})})})]})}vt.displayName="GroupDetailsContent",ft.displayName="GroupDetailsPageContent",yt.displayName="GroupDetails";const Zt=g.zH(yt),xt=(0,u.Z)(b.Z,{target:"e218s1f1"})("margin:",(0,E.D)(2),";"),St=(0,u.Z)(x.nP,{target:"e218s1f0"})({name:"1xwzzid",styles:"flex-grow:1;display:flex;flex-direction:column;justify-content:stretch"});function Et(e){const t=(0,d.Z)(),{projects:s}=(0,c.Z)(),u=(0,l.Z)(),{location:p}=e,m=p.query.project,g=s.find((e=>e.id===m));return(0,r.useEffect)((()=>{g?.slug&&function(e){let{api:t,orgSlug:s,projSlug:r}=e;t.requestPromise(`/projects/${s}/${r}/`).then(n.Z.onUpdateSuccess).catch((e=>{const t=(0,o.t)("Unable to fetch project details");(0,a.X)(t,e),(0,i.Iw)(t)}))}({api:u,orgSlug:t.slug,projSlug:g.slug})}),[u,t.slug,g?.slug]),(0,De.tZ)(Zt,{organization:t,projects:s,...e})}Et.displayName="IssueDetailsContainer";const It=Et}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_index_tsx.9d043ee29b06cc92b3692cefa99df633.js.map