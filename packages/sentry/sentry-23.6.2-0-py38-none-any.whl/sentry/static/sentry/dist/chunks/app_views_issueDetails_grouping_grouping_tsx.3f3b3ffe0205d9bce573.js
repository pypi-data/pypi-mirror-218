"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_grouping_grouping_tsx"],{"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var i=n("../node_modules/react/index.js"),a=n("../node_modules/react-router/es/index.js"),s=n("./app/utils/useLocation.tsx");const r=function(e){let{fieldsToClean:t}=e;const n=(0,s.T)(),r=(0,i.useCallback)((e=>{!function(e){let{fieldsToClean:t,newLocation:n,oldPathname:i}=e;const s=t.some((e=>void 0!==n.query[e]));if(n.pathname===i||!s)return;const r=t.reduce(((e,t)=>(e[t]=void 0,e)),{...n.query});a.browserHistory.replace({pathname:n.pathname,query:r})}({fieldsToClean:t,newLocation:e,oldPathname:n.pathname})}),[n.pathname,t]);(0,i.useEffect)((()=>a.browserHistory.listen(r)),[r])}},"./app/views/issueDetails/grouping/grouping.tsx":(e,t,n)=>{n.d(t,{Z:()=>F,p:()=>G});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),s=n("../node_modules/lodash/debounce.js"),r=n.n(s),o=n("./app/components/button.tsx"),l=n("./app/components/buttonBar.tsx"),d=n("./app/components/featureFeedback/index.tsx"),u=n("./app/components/forms/controls/rangeSlider/index.tsx"),p=n("./app/components/forms/controls/rangeSlider/slider.tsx"),g=n("./app/components/layouts/thirds.tsx"),c=n("./app/components/loadingIndicator.tsx"),m=n("./app/components/pagination.tsx"),h=n("./app/components/panels/index.tsx"),f=n("./app/constants/index.tsx"),x=n("./app/locale.tsx"),y=n("./app/styles/space.tsx"),Z=n("./app/utils.tsx"),v=n("./app/utils/parseLinkHeader.tsx"),b=n("./app/utils/toArray.tsx"),w=n("./app/utils/useCleanQueryParamsOnRouteLeave.tsx"),z=n("./app/utils/withApi.tsx"),j=n("./app/components/alert.tsx"),k=n("./app/components/emptyMessage.tsx"),S=n("./app/components/featureBadge.tsx"),T=n("./app/components/loadingError.tsx"),_=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function D(e){let{error:t,groupId:n,onRetry:i,orgSlug:s,projSlug:r,hasProjectWriteAccess:d,className:u}=e;if("string"==typeof t)return(0,_.tZ)(j.bZ,{type:"warning",className:u,children:t});if(403===t.status&&t.responseJSON?.detail){const{code:e,message:i}=t.responseJSON.detail,{action:p,title:g,subTitle:c,leftAligned:m}=function(e){switch(e){case"merged_issues":return{title:(0,x.t)("Grouping breakdown is not available in this issue"),subTitle:(0,x.t)("This issue needs to be fully unmerged before grouping breakdown is available"),action:(0,_.tZ)(o.zx,{priority:"primary",to:`/organizations/${s}/issues/${n}/merged/?${location.search}`,children:(0,x.t)("Unmerge issue")})};case"missing_feature":return{title:(0,x.t)("This project does not have the grouping breakdown available. Is your organization still an early adopter?")};case"no_events":return{title:(0,x.t)("This issue has no events")};case"issue_not_hierarchical":return{title:(0,x.t)("Grouping breakdown is not available in this issue"),subTitle:(0,x.t)("Only new issues with the latest grouping strategy have this feature available")};case"project_not_hierarchical":return{title:(0,_.BX)(a.Fragment,{children:[(0,x.t)("Update your Grouping Config"),(0,_.tZ)(S.Z,{type:"beta"})]}),subTitle:(0,_.BX)(a.Fragment,{children:[(0,_.tZ)("p",{children:(0,x.t)("Enable advanced grouping insights and functionality by updating this project to the latest Grouping Config:")}),(0,_.BX)("ul",{children:[(0,_.tZ)("li",{children:(0,x._N)("[strong:Breakdowns:] Explore events in this issue by call hierarchy.",{strong:(0,_.tZ)("strong",{})})}),(0,_.tZ)("li",{children:(0,x._N)("[strong:Stack trace annotations:] See important frames Sentry uses to group issues directly in the stack trace.",{strong:(0,_.tZ)("strong",{})})})]})]}),leftAligned:!0,action:(0,_.BX)(l.ZP,{gap:1,children:[(0,_.tZ)(o.zx,{priority:"primary",to:`/settings/${s}/projects/${r}/issue-grouping/#upgrade-grouping`,disabled:!d,title:d?void 0:(0,x.t)("You do not have permission to update this project"),children:(0,x.t)("Upgrade Grouping Strategy")}),(0,_.tZ)(o.zx,{href:"https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/",children:(0,x.t)("Read the docs")})]})};default:return{}}}(e);return(0,_.tZ)(h.s_,{className:u,children:(0,_.tZ)(k.Z,{size:"large",title:g??i,description:c,action:p,leftAligned:m})})}return(0,_.tZ)(T.Z,{message:(0,x.t)("Unable to load grouping levels, please try again later"),onRetry:i,className:u})}D.displayName="ErrorMessage";const B=D;var C=n("./app/components/eventOrGroupHeader.tsx"),N=n("./app/components/timeSince.tsx"),X=n("./app/icons/index.tsx");function E(e){let{sampleEvent:t,eventCount:n,organization:i}=e;return(0,_.BX)(a.Fragment,{children:[(0,_.BX)(R,{children:[(0,_.tZ)(C.Z,{data:t,organization:i,grouping:!0,hideIcons:!0,hideLevel:!0,source:"new-issue"}),(0,_.tZ)(P,{children:(0,_.BX)($,{children:[(0,_.tZ)(A,{legacySize:"11px"}),(0,_.tZ)(N.Z,{date:t.dateCreated?t.dateCreated:t.dateReceived,suffix:(0,x.t)("old")})]})})]}),(0,_.tZ)(L,{children:n})]})}E.displayName="NewIssue";const q=E,R=(0,i.Z)("div",{target:"e1h52xj44"})({name:"1eiwmge",styles:"overflow:hidden;line-height:1.1"}),P=(0,i.Z)("div",{target:"e1h52xj43"})("display:grid;grid-auto-flow:column;gap:",(0,y.D)(2),";justify-content:flex-start;"),$=(0,i.Z)("div",{target:"e1h52xj42"})("display:grid;gap:",(0,y.D)(.5),";grid-template-columns:max-content 1fr;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),L=(0,i.Z)("div",{target:"e1h52xj41"})({name:"1ewtsvq",styles:"align-items:center;font-variant-numeric:tabular-nums;line-height:1.1"}),A=(0,i.Z)(X.jo,{target:"e1h52xj40"})("color:",(e=>e.theme.subText),";"),G=[(0,x.t)("Too eager grouping"),(0,x.t)("Too specific grouping"),(0,x.t)("Other grouping issue")],I="https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/";function O(e){let{api:t,groupId:n,location:i,organization:s,router:u,projSlug:p}=e;const{cursor:m,level:h}=i.query,[y,z]=(0,a.useState)(!1),[j,k]=(0,a.useState)(!1),[S,T]=(0,a.useState)(void 0),[D,B]=(0,a.useState)([]),[C,N]=(0,a.useState)(void 0),[X,E]=(0,a.useState)([]),[R,P]=(0,a.useState)("");(0,w.Z)({fieldsToClean:["cursor","level"]}),(0,a.useEffect)((()=>{L()}),[]),(0,a.useEffect)((()=>{!function(){if(D.length)if((0,Z.ri)(h)){if(!(0,Z.ri)(D[h]))return void T((0,x.t)("The level you were looking for was not found."));if(h===C)return;N(h)}else D.length>1?N(D[1].id):N(D[0].id)}()}),[D]),(0,a.useEffect)((()=>{(0,Z.ri)(C)&&h!==C&&u.replace({pathname:i.pathname,query:{...i.query,cursor:void 0,level:C}})}),[C]),(0,a.useEffect)((()=>{!async function(){if(D.length&&(0,Z.ri)(C)){k(!0),T(void 0);try{const[e,,a]=await t.requestPromise(`/issues/${n}/grouping/levels/${C}/new-issues/`,{method:"GET",includeAllArgs:!0,query:{...i.query,per_page:10}}),s=a?.getResponseHeader?.("Link");P(s??""),E((0,b.Z)(e)),k(!1)}catch(e){k(!1),T(e)}}}()}),[C,m]);const $=r()((e=>{N(Number(e))}),f.Dk);async function L(){z(!0),T(void 0);try{const e=await t.requestPromise(`/issues/${n}/grouping/levels/`);z(!1),B(e.levels)}catch(e){z(!1),T(e)}}if(y)return(0,_.tZ)(c.Z,{});if(S)return(0,_.tZ)(a.Fragment,{children:(0,_.tZ)(g.uT,{children:(0,_.tZ)(g.or,{fullWidth:!0,children:(0,_.BX)(K,{children:[(0,_.BX)(l.ZP,{gap:1,children:[(0,_.tZ)(o.zx,{href:I,external:!0,children:(0,x.t)("Read Docs")}),(0,_.tZ)(d.z,{featureName:"grouping",feedbackTypes:G})]}),(0,_.tZ)(Q,{onRetry:L,groupId:n,error:S,projSlug:p,orgSlug:s.slug,hasProjectWriteAccess:s.access.includes("project:write")})]})})})});if(!X.length)return(0,_.tZ)(c.Z,{});const A=(0,v.Z)(R),O=A.previous?.results||A.next?.results,F=X.length;return(0,_.tZ)(g.uT,{children:(0,_.tZ)(g.or,{fullWidth:!0,children:(0,_.BX)(H,{children:[(0,_.tZ)(U,{children:(0,x.t)("This issue is an aggregate of multiple events that sentry determined originate from the same root-cause. Use this page to explore more detailed groupings that exist within this issue.")}),(0,_.BX)(M,{children:[(0,_.BX)(W,{children:[(0,_.BX)(te,{children:[(0,x.t)("Fewer issues"),(0,_.tZ)(ne,{name:"grouping-level",allowedValues:D.map((e=>Number(e.id))),value:C??0,onChange:$,showLabel:!1}),(0,x.t)("More issues")]}),(0,_.BX)(J,{gap:1,children:[(0,_.tZ)(o.zx,{href:I,external:!0,children:(0,x.t)("Read Docs")}),(0,_.tZ)(d.z,{featureName:"grouping",feedbackTypes:G})]})]}),(0,_.BX)(ee,{isReloading:j,children:[(0,_.tZ)(V,{headers:["",(0,x.t)("Events")],children:X.map((e=>{let{hash:t,title:n,metadata:i,latestEvent:a,eventCount:r}=e;return(0,_.tZ)(q,{sampleEvent:{...a,metadata:{...i||a.metadata,current_level:C},title:n||a.title},eventCount:r,organization:s},t)}))}),(0,_.tZ)(Y,{pageLinks:R,disabled:j,caption:(0,x._N)("Showing [current] of [total] [result]",{result:O?(0,x.t)("results"):(0,x.tn)("result","results",F),current:F,total:O?`${F}+`:F})})]})]})]})})})}O.displayName="Grouping";const F=(0,z.Z)(O),H=(0,i.Z)("div",{target:"ez5w3g11"})("flex:1;display:grid;align-content:flex-start;margin:-",(0,y.D)(3)," -",(0,y.D)(4),";padding:",(0,y.D)(3)," ",(0,y.D)(4),";"),U=(0,i.Z)("p",{target:"ez5w3g10"})("&&{margin-bottom:",(0,y.D)(2),";}"),M=(0,i.Z)("div",{target:"ez5w3g9"})("display:grid;gap:",(0,y.D)(3),";"),W=(0,i.Z)("div",{target:"ez5w3g8"})("display:grid;align-items:center;gap:",(0,y.D)(3),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:1fr max-content;gap:",(0,y.D)(2),";}"),J=(0,i.Z)(l.ZP,{target:"ez5w3g7"})({name:"11g6mpt",styles:"justify-content:flex-start"}),Q=(0,i.Z)(B,{target:"ez5w3g6"})({name:"1d3w5wq",styles:"width:100%"}),K=(0,i.Z)("div",{target:"ez5w3g5"})("display:flex;flex-direction:column;align-items:flex-end;gap:",(0,y.D)(1),";"),V=(0,i.Z)(h.KB,{target:"ez5w3g4"})("grid-template-columns:1fr minmax(60px, auto);>*{padding:",(0,y.D)(1.5)," ",(0,y.D)(2),";:nth-child(-n + 2){padding:",(0,y.D)(2),";}:nth-child(2n){display:flex;text-align:right;justify-content:flex-end;}}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:1fr minmax(80px, auto);}"),Y=(0,i.Z)(m.Z,{target:"ez5w3g3"})({name:"1i9vogi",styles:"margin-top:0"}),ee=(0,i.Z)("div",{target:"ez5w3g2"})((e=>e.isReloading&&`\n      ${V}, ${Y} {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    `),";"),te=(0,i.Z)("div",{target:"ez5w3g1"})("display:grid;gap:",(0,y.D)(1.5),";grid-template-columns:max-content max-content;justify-content:space-between;align-items:flex-start;position:relative;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";padding-bottom:",(0,y.D)(2),";@media (min-width: 700px){grid-template-columns:max-content minmax(270px, auto) max-content;align-items:center;justify-content:flex-start;padding-bottom:0;}"),ne=(0,i.Z)(u.Z,{target:"ez5w3g0"})(p.Z,"{background:transparent;margin-top:0;margin-bottom:0;::-ms-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-moz-range-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-webkit-slider-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}}position:absolute;bottom:0;left:",(0,y.D)(1.5),";right:",(0,y.D)(1.5),";@media (min-width: 700px){position:static;left:auto;right:auto;}")}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_grouping_grouping_tsx.cce8849c2f0286b9d825073bfaa7b8ca.js.map