(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_releases_list_index_tsx-node_modules_lodash_mean_js"],{"./app/components/charts/lineChart.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var r=s("./app/components/charts/series/lineSeries.tsx"),o=s("./app/components/charts/baseChart.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,seriesOptions:s,...i}=e;return(0,a.tZ)(o.Z,{...i,series:t.map((e=>{let{seriesName:t,data:o,dataArray:a,...i}=e;return(0,r.Z)({...s,...i,name:t,data:a||o?.map((e=>{let{value:t,name:s}=e;return[s,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}i.displayName="LineChart"},"./app/components/charts/sessionsRequest.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),a=s("../node_modules/lodash/isEqual.js"),i=s.n(a),n=s("../node_modules/lodash/omitBy.js"),l=s.n(n),d=s("./app/actionCreators/indicator.tsx"),p=s("./app/locale.tsx"),c=s("./app/utils/sessions.tsx");const h=["api","children","organization"],u=e=>l()(e,((e,t)=>h.includes(t)));class m extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{reloading:!1,errored:!1,response:null}),(0,r.Z)(this,"fetchData",(async()=>{const{api:e,isDisabled:t,shouldFilterSessionsInTimeWindow:s}=this.props;if(!t){this.setState((e=>({reloading:null!==e.response,errored:!1})));try{const t=await e.requestPromise(this.path,{query:this.baseQueryParams});this.setState({reloading:!1,response:s?(0,c.U5)(t,this.baseQueryParams.start,this.baseQueryParams.end):t})}catch(e){(0,d.Iw)(e.responseJSON?.detail??(0,p.t)("Error loading health data")),this.setState({reloading:!1,errored:!0})}}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){i()(u(e),u(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return`/organizations/${e.slug}/sessions/`}get baseQueryParams(){const{project:e,environment:t,field:s,statsPeriod:r,start:o,end:a,query:i,groupBy:n,interval:l,organization:d}=this.props;return{project:e,environment:t,field:s,statsPeriod:r,query:i,groupBy:n,start:o,end:a,interval:l||(0,c.Xz)({start:o,end:a,period:r},{highFidelity:d.features.includes("minute-resolution-sessions")})}}render(){const{reloading:e,errored:t,response:s}=this.state,{children:r}=this.props;return r({loading:null===s,reloading:e,errored:t,response:s})}}m.displayName="SessionsRequest";const g=m},"./app/components/collapsible.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("../node_modules/react/index.js"),o=s("./app/components/button.tsx"),a=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{collapseButton:t,expandButton:s,maxVisibleItems:n=5,children:l}=e;const[d,p]=(0,r.useState)(!0),c=()=>p(!d),h=r.Children.toArray(l);if(!(h.length>n))return(0,i.tZ)(r.Fragment,{children:l});const u=d?h.slice(0,n):h,m=h.length-u.length,g=m>0&&!s||0===m&&!t;return(0,i.BX)(r.Fragment,{children:[u,g&&(0,i.tZ)(o.zx,{priority:"link",onClick:c,children:d?(0,a.tn)("Show %s hidden item","Show %s hidden items",m):(0,a.t)("Collapse")}),m>0&&s?.({onExpand:c,numberOfHiddenItems:m}),0===m&&t?.({onCollapse:c})]})}n.displayName="Collapsible";const l=n},"./app/components/notAvailable.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/tooltip.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{tooltip:t,className:s}=e;return(0,a.tZ)(o.u,{title:t,skipWrapper:!0,disabled:void 0===t,children:(0,a.tZ)(n,{className:s,children:"â€”"})})}i.displayName="NotAvailable";const n=(0,r.Z)("div",{target:"encv6uu0"})("color:",(e=>e.theme.gray200),";"),l=i},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const r=function(e,t){let s=arguments.length>3?arguments[3]:void 0;const r=`${e} - ${t}`,o=s?`${r} - ${s}`:r;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?o:`${o} - Sentry`}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,a.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/releases/detail/overview/releaseArchivedNotice.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),a=s("./app/components/alert.tsx"),i=s("./app/components/button.tsx"),n=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{onRestore:t,multi:s}=e;return(0,l.BX)(a.bZ,{type:"warning",children:[s?(0,n.t)("These releases have been archived."):(0,n.t)("This release has been archived."),!s&&t&&(0,l.BX)(o.Fragment,{children:[" ",(0,l.tZ)(p,{size:"zero",priority:"link",onClick:t,children:(0,n.t)("Restore this release")})]})]})}d.displayName="ReleaseArchivedNotice";const p=(0,r.Z)(i.zx,{target:"eq1looh0"})("font-size:inherit;text-decoration:underline;&,&:hover,&:focus,&:active{color:",(e=>e.theme.textColor),";}"),c=d},"./app/views/releases/list/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>os});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-lazyload/lib/index.js"),n=s("../node_modules/lodash/pick.js"),l=s.n(n),d=s("./app/actionCreators/tags.tsx"),p=s("./app/components/alert.tsx"),c=s("./app/components/assistant/guideAnchor.tsx"),h=s("./app/components/datePageFilter.tsx"),u=s("./app/components/emptyMessage.tsx"),m=s("./app/components/environmentPageFilter.tsx"),g=s("./app/components/layouts/thirds.tsx"),y=s("./app/components/links/externalLink.tsx"),S=s("./app/components/loadingIndicator.tsx"),Z=s("./app/components/noProjectMessage.tsx"),f=s("./app/components/organizations/pageFilterBar.tsx"),x=s("./app/components/organizations/pageFilters/container.tsx"),v=s("./app/components/organizations/timeRangeSelector/utils.tsx"),b=s("./app/components/pageHeadingQuestionTooltip.tsx"),j=s("./app/components/pagination.tsx"),w=s("./app/components/panels/index.tsx"),R=s("./app/components/projectPageFilter.tsx"),C=s("./app/components/smartSearchBar/index.tsx"),P=s("./app/components/smartSearchBar/types.tsx"),_=s("./app/constants/index.tsx"),B=s("./app/constants/pageFilters.tsx"),I=s("./app/data/platformCategories.tsx"),E=s("./app/icons/index.tsx"),D=s("./app/locale.tsx"),z=s("./app/stores/projectsStore.tsx"),T=s("./app/styles/space.tsx"),A=s("./app/types/index.tsx"),q=s("./app/utils/analytics.tsx"),k=s("./app/utils/discover/fields.tsx"),N=s("./app/utils/projects.tsx"),O=s("./app/utils/routeTitle.tsx"),H=s("./app/utils/withOrganization.tsx"),U=s("./app/utils/withPageFilters.tsx"),$=s("./app/utils/withProjects.tsx"),F=s("./app/views/asyncView.tsx"),V=s("./app/views/releases/detail/overview/releaseArchivedNotice.tsx"),X=s("./app/views/releases/utils/index.tsx"),L=s("../node_modules/color/index.js"),M=s.n(L),Q=s("../node_modules/lodash/partition.js"),Y=s.n(Q),G=s("./app/components/button.tsx"),W=s("./app/components/collapsible.tsx"),J=s("./app/components/globalSelectionLink.tsx"),K=s("./app/components/textOverflow.tsx"),ee=s("./app/components/timeSince.tsx"),te=s("./app/components/tooltip.tsx"),se=s("./app/components/version.tsx"),re=s("./app/components/avatar/avatarList.tsx"),oe=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ae(e){let{release:t,withHeading:s=!0}=e;const r=t.commitCount||0,o=t.authors&&t.authors.length||0;if(0===r)return null;const a=[(0,D.tn)("%s commit","%s commits",r),(0,D.t)("by"),(0,D.tn)("%s author","%s authors",o)].join(" ");return(0,oe.BX)("div",{className:"release-stats",children:[s&&(0,oe.tZ)(ie,{children:a}),(0,oe.tZ)("span",{style:{display:"inline-block"},children:(0,oe.tZ)(re.Z,{users:t.authors,avatarSize:25,typeMembers:"authors"})})]})}ae.displayName="ReleaseCardCommits";const ie=(0,o.Z)("div",{target:"epf2wnr0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeSmall),";line-height:1.2;font-weight:600;text-transform:uppercase;margin-bottom:",(0,T.D)(.5),";"),ne=ae;var le=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),de=s("./app/components/charts/miniBarChart.tsx"),pe=s("./app/components/count.tsx"),ce=s("./app/components/idBadge/projectBadge.tsx"),he=s("./app/components/links/link.tsx"),ue=s("./app/components/notAvailable.tsx"),me=s("./app/components/organizations/pageFilters/utils.tsx"),ge=s("./app/components/placeholder.tsx"),ye=s("./app/components/tag.tsx"),Se=s("./app/utils.tsx"),Ze=s("./app/components/compactSelect/index.tsx");function fe(e){let{label:t,options:s,selected:r,onSelect:o}=e;const a=Object.entries(s).map((e=>{let[t,{label:s,tooltip:r,disabled:o}]=e;return{value:t,label:s,tooltip:r,disabled:o}}));return(0,oe.tZ)(Ze.Z,{options:a,onChange:e=>o(e.value),value:r,triggerProps:{prefix:t,style:{width:"100%"}}})}fe.displayName="ReleasesDropdown";const xe=fe;let ve;!function(e){e.USERS="users",e.SESSIONS="sessions"}(ve||(ve={}));const be={[ve.SESSIONS]:{label:(0,D.t)("Sessions")},[ve.USERS]:{label:(0,D.t)("Users")}};function je(e){let{selected:t,onSelect:s}=e;return(0,oe.tZ)(Re,{label:(0,D.t)("Display"),options:be,selected:t,onSelect:s})}je.displayName="ReleasesDisplayOptions";const we=je,Re=(0,o.Z)(xe,{target:"e1pyrzyz0"})("z-index:1;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:3;}"),Ce=98,Pe=99.5;function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sm";return e<Ce?(0,oe.tZ)(E.zC,{color:"errorText",size:t}):e<Pe?(0,oe.tZ)(E.FC,{color:"warningText",size:t}):(0,oe.tZ)(E.DL,{isCircled:!0,color:"successText",size:t})}function Be(e){let{index:t,project:s,organization:r,location:o,getHealthData:a,releaseVersion:n,activeDisplay:l,showPlaceholders:d,showReleaseAdoptionStages:p,isTopRelease:h,adoptionStages:u}=e;const m=(0,le.u)(),{id:g,newGroups:y}=s,S=a.getCrashCount(n,g,ve.SESSIONS),Z=a.getCrashFreeRate(n,g,l),f=a.get24hCountByProject(g,l),x=a.getTimeSeries(n,g,l),v=a.getAdoption(n,g,l),b=p&&u?.[s.slug]&&u?.[s.slug].stage,j=f&&b&&(0,X.Jl)(s.platform)?X.EB[b]:null;return(0,oe.tZ)(Ee,{"data-test-id":"release-card-project-row",children:(0,oe.BX)(et,{showReleaseAdoptionStages:p,children:[(0,oe.tZ)(tt,{children:(0,oe.tZ)(ce.Z,{project:s,avatarSize:16})}),p&&(0,oe.tZ)(ot,{children:j?(0,oe.tZ)(te.u,{title:j.tooltipTitle,isHoverable:!0,children:(0,oe.tZ)(he.Z,{to:{pathname:`/organizations/${r.slug}/releases/`,query:{...o.query,query:`release.stage:${b}`}},children:(0,oe.tZ)(ye.Z,{type:j.type,children:j.name})})}):(0,oe.tZ)(ue.Z,{})}),(0,oe.tZ)(rt,{children:d?(0,oe.tZ)(De,{width:"100px"}):(0,oe.BX)(ze,{children:[(0,oe.BX)("span",{children:[v?Math.round(v):"0","%"]}),(0,oe.tZ)(i.ZP,{debounce:50,height:20,children:(0,oe.tZ)(de.Z,{series:x,height:20,isGroupedByDate:!0,showTimeInTooltip:!0,hideDelay:50,tooltipFormatter:e=>{const t=l===ve.USERS?(0,D.tn)("user","users",e):(0,D.tn)("session","sessions",e);return`${e.toLocaleString()} ${t}`},colors:[m.purple300,m.gray200]})})]})}),(0,oe.tZ)(at,{children:d?(0,oe.tZ)(De,{width:"60px"}):(0,Se.ri)(Z)?(0,oe.BX)(Te,{children:[_e(Z),(0,X.zB)(Z)]}):(0,oe.tZ)(ue.Z,{})}),(0,oe.tZ)(it,{children:d?(0,oe.tZ)(De,{width:"30px"}):(0,Se.ri)(S)?(0,oe.tZ)(te.u,{title:(0,D.t)("Open in Issues"),children:(0,oe.tZ)(J.Z,{to:(0,X.eY)(r.slug,s.id,n),children:(0,oe.tZ)(pe.Z,{value:S})})}):(0,oe.tZ)(ue.Z,{})}),(0,oe.tZ)(st,{children:(0,oe.tZ)(te.u,{title:(0,D.t)("Open in Issues"),children:(0,oe.tZ)(J.Z,{to:(0,X.PS)(r.slug,s.id,n),children:(0,oe.tZ)(pe.Z,{value:y||0})})})}),(0,oe.tZ)(Ae,{children:(0,oe.tZ)(c.Z,{disabled:!h||0!==t,target:"view_release",children:(0,oe.tZ)(G.zx,{size:"xs",to:{pathname:`/organizations/${r.slug}/releases/${encodeURIComponent(n)}/`,query:{...(0,me.GN)(o.query),project:s.id,yAxis:void 0}},children:(0,D.t)("View")})})})]})})}_e.displayName="getCrashFreeIcon",Be.displayName="ReleaseCardProjectRow";const Ie=Be,Ee=(0,o.Z)(w.Lv,{target:"eew31qb4"})("padding:",(0,T.D)(1)," ",(0,T.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){font-size:",(e=>e.theme.fontSizeMedium),";}"),De=(0,o.Z)(ge.Z,{target:"eew31qb3"})("height:15px;display:inline-block;position:relative;top:",(0,T.D)(.25),";"),ze=(0,o.Z)("span",{target:"eew31qb2"})("flex:1;display:inline-grid;grid-template-columns:30px 1fr;gap:",(0,T.D)(1),";align-items:center;overflow:visible;"),Te=(0,o.Z)("div",{target:"eew31qb1"})("display:inline-grid;grid-auto-flow:column;grid-column-gap:",(0,T.D)(1),";align-items:center;vertical-align:middle;"),Ae=(0,o.Z)("div",{target:"eew31qb0"})((e=>e.theme.overflowEllipsis),";line-height:20px;text-align:right;");function qe(e){let{location:t,selection:s}=e;const r=t.query.healthStatsPeriod||A.$A.TWENTY_FOUR_HOURS,{pathname:o,query:a}=t;return(0,oe.BX)(ke,{children:[s.datetime.period!==A.$A.TWENTY_FOUR_HOURS&&(0,oe.tZ)(Ne,{to:{pathname:o,query:{...a,healthStatsPeriod:A.$A.TWENTY_FOUR_HOURS}},selected:r===A.$A.TWENTY_FOUR_HOURS,children:(0,D.t)("24h")}),(0,oe.tZ)(Ne,{to:{pathname:o,query:{...a,healthStatsPeriod:A.$A.AUTO}},selected:r===A.$A.AUTO,children:s.datetime.start?(0,D.t)("Custom"):s.datetime.period??(0,D.t)("14d")})]})}qe.displayName="ReleaseCardStatsPeriod";const ke=(0,o.Z)("div",{target:"e1u9vs011"})("display:grid;grid-auto-flow:column;grid-column-gap:",(0,T.D)(.75),";flex:1;justify-content:flex-end;text-align:right;margin-left:",(0,T.D)(.5),";"),Ne=(0,o.Z)(he.Z,{target:"e1u9vs010"})("color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";&:hover,&:focus{color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";}"),Oe=(0,U.Z)(qe);function He(e,t){return 1===e.projects.length?e.projects[0].id:1===t.projects.length&&e.projects.map((e=>e.id)).includes(t.projects[0])?t.projects[0]:void 0}class Ue extends a.Component{shouldComponentUpdate(e){return!this.props.reloading||!e.reloading}render(){const{release:e,organization:t,activeDisplay:s,location:r,reloading:o,selection:a,showHealthPlaceholders:i,isTopRelease:n,getHealthData:l,showReleaseAdoptionStages:d}=this.props,{version:p,commitCount:h,lastDeploy:u,dateCreated:m,versionInfo:g}=e,[y,S]=Y()(e.projects.sort(((e,t)=>e.slug.localeCompare(t.slug))),(e=>!(a.projects.length>0&&!a.projects.includes(-1))||a.projects.includes(e.id)));return(0,oe.BX)(Ve,{reloading:o?1:0,"data-test-id":"release-panel",children:[(0,oe.BX)(Xe,{children:[(0,oe.BX)(Ye,{children:[(0,oe.tZ)(J.Z,{to:{pathname:`/organizations/${t.slug}/releases/${encodeURIComponent(p)}/`,query:{project:He(e,a)}},children:(0,oe.tZ)(c.Z,{disabled:!n||y.length>1,target:"release_version",children:(0,oe.tZ)($e,{children:(0,oe.tZ)(Fe,{version:p,tooltipRawVersion:!0,anchor:!1})})})}),h>0&&(0,oe.tZ)(ne,{release:e,withHeading:!1})]}),(0,oe.BX)(Le,{children:[g?.package&&(0,oe.tZ)(Me,{ellipsisDirection:"left",children:g.package}),(0,oe.tZ)(ee.Z,{date:u?.dateFinished||m}),u?.dateFinished&&` | ${u.environment}`]})]}),(0,oe.BX)(Qe,{children:[(0,oe.tZ)(Ge,{lightText:!0,children:(0,oe.BX)(et,{showReleaseAdoptionStages:d,children:[(0,oe.tZ)(tt,{children:(0,D.t)("Project Name")}),d&&(0,oe.tZ)(ot,{children:(0,D.t)("Adoption Stage")}),(0,oe.BX)(rt,{children:[(0,oe.tZ)("span",{children:(0,D.t)("Adoption")}),(0,oe.tZ)(Oe,{location:r})]}),(0,oe.tZ)(at,{children:(0,D.t)("Crash Free Rate")}),(0,oe.tZ)(it,{children:(0,D.t)("Crashes")}),(0,oe.tZ)(st,{children:(0,D.t)("New Issues")})]})}),(0,oe.tZ)(We,{children:(0,oe.tZ)(W.Z,{expandButton:e=>{let{onExpand:t,numberOfHiddenItems:s}=e;return(0,oe.tZ)(Je,{children:(0,oe.tZ)(G.zx,{priority:"primary",size:"xs",onClick:t,children:(0,D._N)("Show [numberOfHiddenItems] More",{numberOfHiddenItems:s})})})},collapseButton:e=>{let{onCollapse:t}=e;return(0,oe.tZ)(Ke,{children:(0,oe.tZ)(G.zx,{priority:"primary",size:"xs",onClick:t,children:(0,D.t)("Collapse")})})},children:y.map(((o,a)=>(0,oe.tZ)(Ie,{index:a,organization:t,project:o,location:r,getHealthData:l,releaseVersion:e.version,activeDisplay:s,showPlaceholders:i,showReleaseAdoptionStages:d,isTopRelease:n,adoptionStages:e.adoptionStages},`${e.version}-${o.slug}-row`)))})}),S.length>0&&(0,oe.tZ)(nt,{"data-test-id":"hidden-projects",children:(0,oe.tZ)(te.u,{title:function(){const e=S.map((e=>e.slug)).slice(0,5),t=S.length-e.length;return t&&e.push((0,D.tn)("and %s more","and %s more",t)),e.join(", ")}(),children:(0,oe.tZ)(K.Z,{children:1===S.length?(0,D._N)("[number:1] hidden project",{number:(0,oe.tZ)("strong",{})}):(0,D._N)("[number] hidden projects",{number:(0,oe.tZ)("strong",{children:S.length})})})})})]})]})}}Ue.displayName="ReleaseCard";const $e=(0,o.Z)("div",{target:"eymivf619"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Fe=(0,o.Z)(se.Z,{target:"eymivf618"})((e=>e.theme.overflowEllipsis),";"),Ve=(0,o.Z)(w.s_,{target:"eymivf617"})("opacity:",(e=>e.reloading?.5:1),";pointer-events:",(e=>e.reloading?"none":"auto"),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){display:flex;}"),Xe=(0,o.Z)("div",{target:"eymivf616"})("padding:",(0,T.D)(1.5)," ",(0,T.D)(2),";flex-shrink:0;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){border-right:1px solid ",(e=>e.theme.border),";min-width:260px;width:22%;max-width:300px;}"),Le=(0,o.Z)("div",{target:"eymivf615"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray400),";"),Me=(0,o.Z)(K.Z,{target:"eymivf614"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";"),Qe=(0,o.Z)("div",{target:"eymivf613"})("border-top:1px solid ",(e=>e.theme.border),";flex-grow:1;display:grid;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){border-top:none;}"),Ye=(0,o.Z)("div",{target:"eymivf612"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";display:grid;grid-template-columns:minmax(0, 1fr) max-content;gap:",(0,T.D)(2),";align-items:center;"),Ge=(0,o.Z)(w.V9,{target:"eymivf611"})("border-top-left-radius:0;padding:",(0,T.D)(1.5)," ",(0,T.D)(2),";font-size:",(e=>e.theme.fontSizeSmall),";"),We=(0,o.Z)("div",{target:"eymivf610"})({name:"bjn8wh",styles:"position:relative"}),Je=(0,o.Z)("div",{target:"eymivf69"})("position:absolute;width:100%;bottom:0;display:flex;align-items:center;justify-content:center;background-image:linear-gradient(\n    180deg,\n    ",(e=>M()(e.theme.background).alpha(0).string())," 0,\n    ",(e=>e.theme.background),"\n  );background-repeat:repeat-x;border-bottom:",(0,T.D)(1)," solid ",(e=>e.theme.background),";border-top:",(0,T.D)(1)," solid transparent;border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),Ke=(0,o.Z)("div",{target:"eymivf68"})({name:"rsdkje",styles:"display:flex;align-items:center;justify-content:center;height:41px"}),et=(0,o.Z)("div",{target:"eymivf67"})("display:grid;grid-template-columns:1fr 1.4fr 0.6fr 0.7fr;grid-column-gap:",(0,T.D)(1),";align-items:center;width:100%;@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){",(e=>e.showReleaseAdoptionStages?"\n      grid-template-columns: 1fr 0.7fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    ":"\n      grid-template-columns: 1fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    "),";}"),tt=(0,o.Z)("div",{target:"eymivf66"})((e=>e.theme.overflowEllipsis),";line-height:20px;"),st=(0,o.Z)(tt,{target:"eymivf65"})("font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){text-align:right;}"),rt=(0,o.Z)(tt,{target:"eymivf64"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;overflow:visible;}&>*{flex:1;}"),ot=(0,o.Z)(tt,{target:"eymivf63"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){display:flex;overflow:visible;}"),at=(0,o.Z)(tt,{target:"eymivf62"})("font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){text-align:center;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){text-align:right;}"),it=(0,o.Z)(tt,{target:"eymivf61"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:block;text-align:right;}"),nt=(0,o.Z)("div",{target:"eymivf60"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";padding:0 ",(0,T.D)(2),";border-top:1px solid ",(e=>e.theme.border),";overflow:hidden;height:24px;line-height:24px;color:",(e=>e.theme.gray300),";background-color:",(e=>e.theme.backgroundSecondary),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),lt=Ue;var dt=s("../node_modules/lodash/compact.js"),pt=s.n(dt),ct=s("../node_modules/moment/moment.js"),ht=s.n(ct),ut=s("./app/components/charts/chartZoom.tsx"),mt=s("./app/components/charts/lineChart.tsx"),gt=s("./app/components/charts/sessionsRequest.tsx"),yt=s("./app/components/charts/styles.tsx"),St=s("./app/components/charts/transitionChart.tsx"),Zt=s("./app/components/charts/transparentLoadingMask.tsx"),ft=s("./app/components/charts/utils.tsx"),xt=s("./app/components/organizations/pageFilters/parse.tsx"),vt=s("./app/utils/formatters.tsx"),bt=s("./app/utils/queryString.tsx"),jt=s("./app/utils/sessions.tsx"),wt=s("./app/utils/withApi.tsx"),Rt=s("./app/utils/withDomainRequired.tsx"),Ct=s("../node_modules/lodash/isEqual.js"),Pt=s.n(Ct),_t=s("../node_modules/lodash/omit.js"),Bt=s.n(_t),It=s("./app/actionCreators/indicator.tsx"),Et=s("./app/utils/tokenizeSearch.tsx");function Dt(e){return Bt()(e,["api","organization","children","selection.datetime.utc","location"])}function zt(e){const t=(0,ft.Nm)(e);return t>=ft.$i?"1d":t>=ft.IZ?"6h":t>ft.w3?"4h":"1h"}function Tt(e,t,s){return t.series[s]?.forEach(((t,s)=>e[s]=(e[s]??0)+t)),e}function At(e){switch(e){case ve.USERS:return A.kI.USERS;case ve.SESSIONS:default:return A.kI.SESSIONS}}class qt extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{loading:!1,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null,statusCountByProjectInPeriod:null,totalCountByReleaseInPeriod:null,totalCountByProjectInPeriod:null}),(0,r.Z)(this,"fetchData",(async()=>{const{api:e,healthStatsPeriod:t,disable:s}=this.props;if(s)return;e.clear(),this.setState({loading:!0,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null});const r=[this.fetchStatusCountByReleaseInPeriod(),this.fetchTotalCountByReleaseIn24h(),this.fetchTotalCountByProjectIn24h()];t===A.$A.AUTO&&(r.push(this.fetchStatusCountByProjectInPeriod()),r.push(this.fetchTotalCountByReleaseInPeriod()),r.push(this.fetchTotalCountByProjectInPeriod()));try{const[e,t,s,o,a,i]=await Promise.all(r);this.setState({loading:!1,statusCountByReleaseInPeriod:e,totalCountByReleaseIn24h:t,totalCountByProjectIn24h:s,statusCountByProjectInPeriod:o,totalCountByReleaseInPeriod:a,totalCountByProjectInPeriod:i})}catch(e){(0,It.Iw)(e.responseJSON?.detail??(0,D.t)("Error loading health data")),this.setState({loading:!1,errored:!0})}})),(0,r.Z)(this,"getHealthData",(()=>({getCrashCount:this.getCrashCount,getCrashFreeRate:this.getCrashFreeRate,get24hCountByRelease:this.get24hCountByRelease,get24hCountByProject:this.get24hCountByProject,getTimeSeries:this.getTimeSeries,getAdoption:this.getAdoption}))),(0,r.Z)(this,"getCrashCount",((e,t,s)=>{const{statusCountByReleaseInPeriod:r}=this.state,o=At(s);return r?.groups.find((s=>{let{by:r}=s;return r.release===e&&r.project===t&&"crashed"===r["session.status"]}))?.totals[o]})),(0,r.Z)(this,"getCrashFreeRate",((e,t,s)=>{const{statusCountByReleaseInPeriod:r}=this.state,o=At(s),a=r?.groups.filter((s=>{let{by:r}=s;return r.release===e&&r.project===t}))?.reduce(((e,t)=>e+t.totals[o]),0),i=this.getCrashCount(e,t,s);return(0,Se.ri)(a)&&0!==a?(0,X.Mf)(100-(0,Se.aQ)(i??0,a??0)):null})),(0,r.Z)(this,"get24hCountByRelease",((e,t,s)=>{const{totalCountByReleaseIn24h:r}=this.state,o=At(s);return r?.groups.filter((s=>{let{by:r}=s;return r.release===e&&r.project===t}))?.reduce(((e,t)=>e+t.totals[o]),0)})),(0,r.Z)(this,"getPeriodCountByRelease",((e,t,s)=>{const{totalCountByReleaseInPeriod:r}=this.state,o=At(s);return r?.groups.filter((s=>{let{by:r}=s;return r.release===e&&r.project===t}))?.reduce(((e,t)=>e+t.totals[o]),0)})),(0,r.Z)(this,"get24hCountByProject",((e,t)=>{const{totalCountByProjectIn24h:s}=this.state,r=At(t);return s?.groups.filter((t=>{let{by:s}=t;return s.project===e}))?.reduce(((e,t)=>e+t.totals[r]),0)})),(0,r.Z)(this,"getPeriodCountByProject",((e,t)=>{const{totalCountByProjectInPeriod:s}=this.state,r=At(t);return s?.groups.filter((t=>{let{by:s}=t;return s.project===e}))?.reduce(((e,t)=>e+t.totals[r]),0)})),(0,r.Z)(this,"getTimeSeries",((e,t,s)=>{const{healthStatsPeriod:r}=this.props;return r===A.$A.AUTO?this.getPeriodTimeSeries(e,t,s):this.get24hTimeSeries(e,t,s)})),(0,r.Z)(this,"get24hTimeSeries",((e,t,s)=>{const{totalCountByReleaseIn24h:r,totalCountByProjectIn24h:o}=this.state,a=At(s),i=o?.intervals??[],n=o?.groups.find((e=>{let{by:s}=e;return s.project===t}))?.series[a],l=r?.groups.find((s=>{let{by:r}=s;return r.project===t&&r.release===e}))?.series[a];return[{seriesName:(0,D.t)("This Release"),data:i?.map(((e,t)=>({name:ht()(e).valueOf(),value:l?.[t]??0})))},{seriesName:(0,D.t)("Total Project"),data:i?.map(((e,t)=>({name:ht()(e).valueOf(),value:n?.[t]??0}))),z:0}]})),(0,r.Z)(this,"getPeriodTimeSeries",((e,t,s)=>{const{statusCountByReleaseInPeriod:r,statusCountByProjectInPeriod:o}=this.state,a=At(s),i=o?.intervals??[],n=o?.groups.filter((e=>{let{by:s}=e;return s.project===t}))?.reduce(((e,t)=>Tt(e,t,a)),[]),l=r?.groups.filter((s=>{let{by:r}=s;return r.project===t&&r.release===e}))?.reduce(((e,t)=>Tt(e,t,a)),[]);return[{seriesName:(0,D.t)("This Release"),data:i?.map(((e,t)=>({name:ht()(e).valueOf(),value:l?.[t]??0})))},{seriesName:(0,D.t)("Total Project"),data:i?.map(((e,t)=>({name:ht()(e).valueOf(),value:n?.[t]??0}))),z:0}]})),(0,r.Z)(this,"getAdoption",((e,t,s)=>{const{healthStatsPeriod:r}=this.props,o=(r===A.$A.AUTO?this.getPeriodCountByRelease:this.get24hCountByRelease)(e,t,s),a=(r===A.$A.AUTO?this.getPeriodCountByProject:this.get24hCountByProject)(t,s);return(0,Se.ri)(o)&&(0,Se.ri)(a)?(0,Se.aQ)(o,a):void 0}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.releasesReloading||Pt()(Dt(e),Dt(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return`/organizations/${e.slug}/sessions/`}get baseQueryParams(){const{location:e,selection:t,defaultStatsPeriod:s,releases:r}=this.props;return{query:new Et.MY(r.reduce(((e,t,s,r)=>(e.push(`release:"${t}"`),s<r.length-1&&e.push("OR"),e)),[])).formatString(),interval:zt(t.datetime),...(0,xt.fK)(l()(e.query,Object.values(B.nF)),{defaultStatsPeriod:s})}}async fetchStatusCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:[...new Set([...t.map((e=>At(e))),"sum(session)"])],groupBy:["project","release","session.status"]}})}async fetchStatusCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:[...new Set([...t.map((e=>At(e))),"sum(session)"])],groupBy:["project","session.status"]}})}async fetchTotalCountByReleaseIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>At(e))),groupBy:["project","release"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>At(e))),groupBy:["project","release"]}})}async fetchTotalCountByProjectIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>At(e))),groupBy:["project"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>At(e))),groupBy:["project"]}})}render(){const{loading:e,errored:t}=this.state,{children:s}=this.props;return s({isHealthLoading:e,errored:t,getHealthData:this.getHealthData()})}}qt.displayName="ReleasesRequest";const kt=(0,wt.Z)(qt);class Nt extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"handleClick",(e=>{const{organization:t,router:s,selection:r,location:o}=this.props,a=r.projects[0];s.push((0,Rt.D)({pathname:`/organizations/${t?.slug}/releases/${encodeURIComponent(e.seriesId)}/`,query:{project:a,environment:o.query.environment}}))}))}getInterval(){const{organization:e,location:t}=this.props,s={start:(0,bt.ro)(t.query.start),end:(0,bt.ro)(t.query.end),period:(0,bt.ro)(t.query.statsPeriod)},r=(0,ft.Nm)(s);return e.features.includes("minute-resolution-sessions")&&r<360?"10m":r>=ft.IZ?"1d":"1h"}getReleasesSeries(e){const{activeDisplay:t}=this.props;let s=e?.groups.map((e=>e.by.release))??[];return e?.groups&&e.groups.length>50&&(s=e.groups.sort(((e,t)=>t.totals["sum(session)"]-e.totals["sum(session)"])).slice(0,50).map((e=>e.by.release))),s?s.map((s=>({id:s,seriesName:(0,vt.ko)(s),data:(0,jt.hD)([e?.groups.find((e=>{let{by:t}=e;return t.release===s}))],e?.groups,e?.intervals,At(t)),emphasis:{focus:"series"}}))):null}renderEmpty(){return(0,oe.BX)(w.s_,{children:[(0,oe.BX)(w.N,{withPadding:!0,children:[(0,oe.tZ)(Ht,{children:(0,oe.tZ)(ge.Z,{height:"24px"})}),(0,oe.tZ)(ge.Z,{height:"200px"})]}),(0,oe.tZ)($t,{children:(0,oe.tZ)(ge.Z,{height:"34px"})})]})}render(){const{activeDisplay:e,router:t,selection:s,api:r,organization:o,location:a}=this.props,{start:i,end:n,period:d,utc:p}=s.datetime,c=this.getInterval(),h=At(e);return(0,oe.tZ)(gt.Z,{api:r,organization:o,interval:c,groupBy:["release"],field:[h],...(0,xt.fK)(l()(a.query,Object.values(B.nF))),children:s=>{let{response:r,loading:o,reloading:a}=s;const l=(0,jt.sA)(r?.groups,h),u=this.getReleasesSeries(r);if(o)return this.renderEmpty();if(!u?.length)return null;const m=u[0].data.length,g=u[0].data.map((e=>e.name)),y=-1===u.findIndex((e=>e.data[m-1].value>0));return(0,oe.BX)(w.s_,{children:[(0,oe.BX)(w.N,{withPadding:!0,children:[(0,oe.tZ)(Ht,{children:(0,oe.tZ)(Ut,{children:(0,D.t)("Release Adoption")})}),(0,oe.BX)(St.Z,{loading:o,reloading:a,children:[(0,oe.tZ)(Zt.Z,{visible:a}),(0,oe.tZ)(ut.Z,{router:t,period:d,utc:p,start:i,end:n,children:e=>(0,oe.tZ)(mt.w,{...e,grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},series:u.map((e=>({...e,data:y?e.data.slice(0,-1):e.data}))),yAxis:{min:0,max:100,type:"value",interval:10,splitNumber:10,axisLabel:{formatter:"{value}%"}},xAxis:{show:!0,min:g[0],max:g[m-1],type:"time"},tooltip:{formatter:e=>{const t=Array.isArray(e)?e:[e],s=t[0].data[0],[o,a,i,...n]=t.filter((e=>e.data[1]>0)).sort(((e,t)=>t.data[1]-e.data[1])),l=n.reduce(((e,t)=>e+t.data[1]),0),d=pt()([o,a,i]);if(n.length&&d.push({seriesName:(0,D.tn)("%s Other","%s Others",n.length),data:[s,l],marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;"></span>'}),!d.length)return"<div/>";const p=(0,xt.su)(c)||{periodLength:"d",period:"1"},h=ht()(s).format("MMM D LT"),u=(t[0].dataIndex===m-1?ht()(r?.end):ht()(s).add(parseInt(p.period,10),p.periodLength)).format("MMM D LT");return['<div class="tooltip-series">',d.map((e=>`<div><span class="tooltip-label">${e.marker}<strong>${e.seriesName&&(0,ft.oS)(e.seriesName,32)}</strong></span>${e.data[1].toFixed(2)}%</div>`)).join(""),"</div>",`<div class="tooltip-footer">${h} &mdash; ${u}</div>`,'<div class="tooltip-arrow"></div>'].join("")}},onClick:this.handleClick})})]})]}),(0,oe.tZ)($t,{children:(0,oe.BX)(yt.m2,{children:[(0,oe.tZ)(yt.OT,{children:(0,D._N)("Total [display]",{display:e===ve.USERS?"Users":"Sessions"})}),(0,oe.tZ)(yt.uN,{children:(0,oe.tZ)(pe.Z,{value:l||0})})]})})]})}})}}Nt.displayName="ReleasesAdoptionChart";const Ot=(0,wt.Z)(Nt),Ht=(0,o.Z)(yt.ws,{target:"e7e7fdf2"})("margin-bottom:",(0,T.D)(1),";"),Ut=(0,o.Z)("header",{target:"e7e7fdf1"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),$t=(0,o.Z)(w.jH,{target:"e7e7fdf0"})("display:flex;align-items:center;padding:",(0,T.D)(1)," 20px;");var Ft=s("./app/views/releases/list/releasesPromo.tsx");let Vt;function Xt(e){let{selected:t,selectedDisplay:s,onSelect:r,environments:o}=e;const a={[Vt.DATE]:{label:(0,D.t)("Date Created")},[Vt.SESSIONS]:{label:(0,D.t)("Total Sessions")},...s===ve.USERS?{[Vt.USERS_24_HOURS]:{label:(0,D.t)("Active Users")},[Vt.CRASH_FREE_USERS]:{label:(0,D.t)("Crash Free Users")}}:{[Vt.SESSIONS_24_HOURS]:{label:(0,D.t)("Active Sessions")},[Vt.CRASH_FREE_SESSIONS]:{label:(0,D.t)("Crash Free Sessions")}},[Vt.BUILD]:{label:(0,D.t)("Build Number")},[Vt.SEMVER]:{label:(0,D.t)("Semantic Version")}},i=1!==o.length;return a[Vt.ADOPTION]={label:(0,D.t)("Date Adopted"),disabled:i,tooltip:i?(0,D.t)("Select one environment to use this sort option."):void 0},(0,oe.tZ)(Mt,{label:(0,D.t)("Sort By"),options:a,selected:t,onSelect:r})}!function(e){e.CRASH_FREE_USERS="crash_free_users",e.CRASH_FREE_SESSIONS="crash_free_sessions",e.USERS_24_HOURS="users_24h",e.SESSIONS_24_HOURS="sessions_24h",e.SESSIONS="sessions",e.DATE="date",e.BUILD="build",e.SEMVER="semver",e.ADOPTION="adoption"}(Vt||(Vt={})),Xt.displayName="ReleasesSortOptions";const Lt=Xt,Mt=(0,o.Z)(xe,{target:"e1f3nj310"})("z-index:2;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:2;}");let Qt;!function(e){e.ACTIVE="active",e.ARCHIVED="archived"}(Qt||(Qt={}));const Yt={[Qt.ACTIVE]:{label:(0,D.t)("Active")},[Qt.ARCHIVED]:{label:(0,D.t)("Archived")}};function Gt(e){let{selected:t,onSelect:s}=e;return(0,oe.tZ)(Jt,{label:(0,D.t)("Status"),options:Yt,selected:t,onSelect:s})}Gt.displayName="ReleasesStatusOptions";const Wt=Gt,Jt=(0,o.Z)(xe,{target:"e19sk9bk0"})("z-index:3;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:1;}");class Kt extends F.Z{constructor(){super(...arguments),(0,r.Z)(this,"shouldReload",!0),(0,r.Z)(this,"shouldRenderBadRequests",!0),(0,r.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})})),(0,r.Z)(this,"handleSortBy",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,sort:e}})})),(0,r.Z)(this,"handleDisplay",(e=>{const{location:t,router:s}=this.props;let r=t.query.sort;r===Vt.USERS_24_HOURS&&e===ve.SESSIONS?r=Vt.SESSIONS_24_HOURS:r===Vt.SESSIONS_24_HOURS&&e===ve.USERS?r=Vt.USERS_24_HOURS:r===Vt.CRASH_FREE_USERS&&e===ve.SESSIONS?r=Vt.CRASH_FREE_SESSIONS:r===Vt.CRASH_FREE_SESSIONS&&e===ve.USERS&&(r=Vt.CRASH_FREE_USERS),s.push({...t,query:{...t.query,cursor:void 0,display:e,sort:r}})})),(0,r.Z)(this,"handleStatus",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,status:e}})})),(0,r.Z)(this,"trackAddReleaseHealth",(()=>{const{organization:e,selection:t}=this.props;e.id&&t.projects[0]&&(0,q.Gi)("releases_list.click_add_release_health",{organization:e,project_id:t.projects[0]})})),(0,r.Z)(this,"tagValueLoader",((e,t)=>{const{location:s,organization:r}=this.props,{project:o}=s.query;return(0,d.Fo)({api:this.api,orgSlug:r.slug,tagKey:e,search:t,projectIds:o?[o]:void 0,endpointParams:s.query})})),(0,r.Z)(this,"getTagValues",(async(e,t)=>(await this.tagValueLoader(e.key,t)).map((e=>{let{value:t}=e;return t}))))}getTitle(){return(0,O.Z)((0,D.t)("Releases"),this.props.organization.slug,!1)}getEndpoints(){const{organization:e,location:t}=this.props,{statsPeriod:s}=t.query,r=this.getSort(),o=this.getStatus(),a={...l()(t.query,["project","environment","cursor","query","sort"]),summaryStatsPeriod:s,per_page:20,flatten:r===Vt.DATE?0:1,adoptionStages:1,status:o===Qt.ARCHIVED?A.dE.ARCHIVED:A.dE.ACTIVE};return[["releases",`/organizations/${e.slug}/releases/`,{query:a},{disableEntireQuery:!0}]]}componentDidUpdate(e,t){super.componentDidUpdate(e,t),t.releases!==this.state.releases&&(0,i.be)()}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getSort(){const{environments:e}=this.props.selection,{sort:t}=this.props.location.query;return t===Vt.ADOPTION&&1!==e.length?Vt.DATE:Object.values(Vt).includes(t)?t:Vt.DATE}getDisplay(){const{display:e}=this.props.location.query;return e===ve.USERS?ve.USERS:ve.SESSIONS}getStatus(){const{status:e}=this.props.location.query;return e===Qt.ARCHIVED?Qt.ARCHIVED:Qt.ACTIVE}getSelectedProject(){const{selection:e,projects:t}=this.props,s=e.projects&&1===e.projects.length&&e.projects[0];return t?.find((e=>e.id===`${s}`))}get projectHasSessions(){return this.getSelectedProject()?.hasSessions??null}shouldShowLoadingIndicator(){const{loading:e,releases:t,reloading:s}=this.state;return e&&!s||e&&!t?.length}renderLoading(){return this.renderBody()}renderError(){return this.renderBody()}get shouldShowQuickstart(){const{releases:e}=this.state,t=this.getSelectedProject(),s=t?.features.includes("releases");return!e?.length&&!s&&t}renderEmptyMessage(){const{location:e}=this.props,{statsPeriod:t,start:s,end:r}=e.query,o=this.getQuery(),a=this.getSort(),i=this.getStatus(),n=s&&r?(0,D.t)("time range"):(0,v.TI)(t||_.GY).toLowerCase();return o&&o.length?(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:`${(0,D.t)("There are no releases that match")}: '${o}'.`})}):a===Vt.USERS_24_HOURS?(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:(0,D.t)("There are no releases with active user data (users in the last 24 hours).")})}):a===Vt.SESSIONS_24_HOURS?(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:(0,D.t)("There are no releases with active session data (sessions in the last 24 hours).")})}):a===Vt.BUILD||a===Vt.SEMVER?(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:(0,D.t)("There are no releases with semantic versioning.")})}):a!==Vt.DATE?(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:`${(0,D.t)("There are no releases with data in the")} ${n}.`})}):i===Qt.ARCHIVED?(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:(0,D.t)("There are no archived releases.")})}):(0,oe.tZ)(w.s_,{children:(0,oe.tZ)(u.Z,{icon:(0,oe.tZ)(E.jV,{size:"xl"}),size:"large",children:`${(0,D.t)("There are no releases with data in the")} ${n}.`})})}renderHealthCta(){const{organization:e}=this.props,{releases:t}=this.state,s=this.getSelectedProject();return s&&!1===this.projectHasSessions&&t?.length?(0,oe.tZ)(N.Z,{orgId:e.slug,slugs:[s.slug],children:e=>{let{projects:t,initiallyLoaded:s,fetchError:r}=e;const o=t&&1===t.length&&t[0],a=o&&o.platform&&I.an.includes(o.platform);return s&&!r&&a?(0,oe.tZ)(p.bZ,{type:"info",showIcon:!0,children:(0,oe.BX)(es,{children:[(0,oe.tZ)("div",{children:(0,D.t)("To track user adoption, crash rates, session data and more, add Release Health to your current setup.")}),(0,oe.tZ)(y.Z,{href:"https://docs.sentry.io/product/releases/setup/#release-health",onClick:this.trackAddReleaseHealth,children:(0,D.t)("Add Release Health")})]})}):null}}):null}renderInnerBody(e,t){const{location:s,selection:r,organization:o,router:i}=this.props,{releases:n,reloading:l,releasesPageLinks:d}=this.state,p=this.getSelectedProject(),c=p?.features.includes("releases");return this.shouldShowLoadingIndicator()?(0,oe.tZ)(S.Z,{}):!n?.length&&c?this.renderEmptyMessage():this.shouldShowQuickstart?(0,oe.tZ)(Ft.Z,{organization:o,project:p}):(0,oe.tZ)(kt,{releases:n.map((e=>{let{version:t}=e;return t})),organization:o,selection:r,location:s,display:[this.getDisplay()],releasesReloading:l,healthStatsPeriod:s.query.healthStatsPeriod,children:c=>{let{isHealthLoading:h,getHealthData:u}=c;const m=1===r.projects?.length&&r.projects[0]!==B.mP,g=p?.platform&&(0,X.Jl)(p.platform);return(0,oe.BX)(a.Fragment,{children:[m&&this.projectHasSessions&&g&&(0,oe.tZ)(Ot,{organization:o,selection:r,location:s,router:i,activeDisplay:e}),n.map(((a,i)=>(0,oe.tZ)(lt,{activeDisplay:e,release:a,organization:o,location:s,selection:r,reloading:l,showHealthPlaceholders:h,isTopRelease:0===i,getHealthData:u,showReleaseAdoptionStages:t},`${a.version}-${a.projects[0].slug}`))),(0,oe.tZ)(j.Z,{pageLinks:d})]})}})}renderBody(){const{organization:e,selection:t}=this.props,{releases:s,reloading:r,error:o}=this.state,a=this.getSort(),i=this.getStatus(),n=this.getDisplay(),l=t.projects.map((e=>`${e}`)).map(z.Z.getById).some((e=>e?.platform&&(0,X.Jl)(e.platform)))&&1===t.environments.length,d=s&&s.length>0;return(0,oe.tZ)(x.Z,{showAbsolute:!1,children:(0,oe.BX)(Z.Z,{organization:e,children:[(0,oe.tZ)(g.h4,{children:(0,oe.tZ)(g.oB,{children:(0,oe.BX)(g.Dx,{children:[(0,D.t)("Releases"),(0,oe.tZ)(b.u,{docsUrl:"https://docs.sentry.io/product/releases/",title:(0,D.t)("A visualization of your release adoption from the past 24 hours, providing a high-level view of the adoption stage, percentage of crash-free users and sessions, and more.")})]})})}),(0,oe.tZ)(g.uT,{children:(0,oe.BX)(g.or,{fullWidth:!0,children:[this.renderHealthCta(),(0,oe.BX)(ts,{condensed:!0,children:[(0,oe.tZ)(c.Z,{target:"release_projects",children:(0,oe.tZ)(R.Z,{})}),(0,oe.tZ)(m.Z,{}),(0,oe.tZ)(h.Z,{alignDropdown:"left",disallowArbitraryRelativeRanges:!0,hint:(0,D.t)("Changing this date range will recalculate the release metrics.")})]}),this.shouldShowQuickstart?null:(0,oe.BX)(ss,{children:[(0,oe.tZ)(c.Z,{target:"releases_search",position:"bottom",disabled:!d,children:(0,oe.tZ)(rs,{searchSource:"releases",query:this.getQuery(),placeholder:(0,D.t)("Search by version, build, package, or stage"),hasRecentSearches:!1,supportedTags:{...k.jg,release:{key:"release",name:"release"}},maxMenuHeight:500,supportedTagType:P.qG.PROPERTY,onSearch:this.handleSearch,onGetTagValues:this.getTagValues})}),(0,oe.tZ)(Wt,{selected:i,onSelect:this.handleStatus}),(0,oe.tZ)(Lt,{selected:a,selectedDisplay:n,onSelect:this.handleSortBy,environments:t.environments}),(0,oe.tZ)(we,{selected:n,onSelect:this.handleDisplay})]}),!r&&i===Qt.ARCHIVED&&!!s?.length&&(0,oe.tZ)(V.Z,{multi:!0}),o?super.renderError():this.renderInnerBody(n,l)]})})]})})}}const es=(0,o.Z)("div",{target:"edrqwtd3"})("display:flex;align-items:flex-start;justify-content:flex-start;gap:",(0,T.D)(2),";>*:nth-child(1){flex:1;}flex-direction:column;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){flex-direction:row;}"),ts=(0,o.Z)(f.Z,{target:"edrqwtd2"})("margin-bottom:",(0,T.D)(2),";"),ss=(0,o.Z)("div",{target:"edrqwtd1"})("display:grid;grid-template-columns:1fr repeat(3, max-content);gap:",(0,T.D)(2),";margin-bottom:",(0,T.D)(2),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:repeat(3, 1fr);&>div{width:auto;}}@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr);}"),rs=(0,o.Z)(C.Z,{target:"edrqwtd0"})("@media (max-width: ",(e=>e.theme.breakpoints.medium),"){grid-column:1/-1;}"),os=(0,$.Z)((0,H.Z)((0,U.Z)(Kt)))},"../node_modules/lodash/_baseMean.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseSum.js");e.exports=function(e,t){var s=null==e?0:e.length;return s?r(e,t)/s:NaN}},"../node_modules/lodash/_baseSum.js":e=>{e.exports=function(e,t){for(var s,r=-1,o=e.length;++r<o;){var a=t(e[r]);void 0!==a&&(s=void 0===s?a:s+a)}return s}},"../node_modules/lodash/mean.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseMean.js"),o=s("../node_modules/lodash/identity.js");e.exports=function(e){return r(e,o)}},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseIteratee.js"),o=s("../node_modules/lodash/negate.js"),a=s("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return a(e,o(r(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_list_index_tsx-node_modules_lodash_mean_js.3f11489ec97b3cf16acb50f7558f6e5b.js.map