"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectPlugins_index_tsx"],{"./app/actionCreators/plugins.tsx":(e,t,s)=>{s.d(t,{Cg:()=>d,MM:()=>c,rR:()=>g}),s("../node_modules/core-js/modules/es.error.cause.js");var n=s("./app/actionCreators/indicator.tsx"),i=s("./app/api.tsx"),o=s("./app/locale.tsx"),r=s("./app/stores/pluginsStore.tsx");const a={},l=new i.KU;function p(e){let{orgId:t,projectId:s,pluginId:n,update:i,...o}=e;r.Z.onUpdate(n,i);const a=l.requestPromise(`/projects/${t}/${s}/plugins/${n}/`,{...o});return a.then((()=>{r.Z.onUpdateSuccess(n,i)})).catch((e=>{const t=e&&e.responseJSON&&"string"==typeof e.responseJSON.detail?new Error(e.responseJSON.detail):new Error("Unable to update plugin");r.Z.onUpdateError(n,i,t)})),a}function c(e,t){let{orgId:s,projectId:n}=e;const i=`/projects/${s}/${n}/plugins/`;if(a[i])return a[i];r.Z.onFetchAll(t);const o=l.requestPromise(i,{method:"GET",includeAllArgs:!0});return a[i]=o,o.then((e=>{let[t,s,n]=e;return r.Z.onFetchAllSuccess(t,{pageLinks:n?.getResponseHeader("Link")??void 0}),t})).catch((e=>{throw r.Z.onFetchAllError(e),new Error("Unable to fetch plugins")})).then((()=>a[i]=null)),o}function d(e){return(0,n.E3)((0,o.t)("Enabling...")),p({...e,update:{enabled:!0},method:"POST"}).then((()=>(0,n.S9)((0,o.t)("Plugin was enabled")))).catch((()=>(0,n.Iw)((0,o.t)("Unable to enable plugin"))))}function g(e){return(0,n.E3)((0,o.t)("Disabling...")),p({...e,update:{enabled:!1},method:"DELETE"}).then((()=>(0,n.S9)((0,o.t)("Plugin was disabled")))).catch((()=>(0,n.Iw)((0,o.t)("Unable to disable plugin"))))}},"./app/components/switchButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{forwardedRef:t,size:s="sm",isActive:n,forceActiveColor:i,isLoading:r,isDisabled:a,toggle:l,id:p,name:c,className:u,...h}=e;return(0,o.tZ)(d,{ref:t,id:p,name:c,type:"button",className:u,onClick:a?void 0:l,role:"checkbox","aria-checked":n,isLoading:r,disabled:a,isActive:n,size:s,"data-test-id":"switch",...h,children:(0,o.tZ)(g,{isDisabled:a,isActive:n,forceActiveColor:i,size:s})})}r.displayName="Switch";const a=e=>"sm"===e.size?16:24,l=e=>a(e)-("sm"===e.size?4:8),p=e=>"sm"===e.size?1:3,c=e=>e.isActive?p(e)+.875*a(e):p(e),d=(0,n.Z)("button",{target:"e1slsb9u1"})("display:inline-block;background:none;padding:0;border:1px solid ",(e=>e.theme.border),";position:relative;box-shadow:inset ",(e=>e.theme.dropShadowMedium),";height:",a,"px;width:",(e=>1.875*a(e)),"px;border-radius:",a,"px;transition:border 0.1s,box-shadow 0.1s;&[disabled]{cursor:not-allowed;}&:focus,&.focus-visible{outline:none;border-color:",(e=>e.theme.focusBorder),";box-shadow:",(e=>e.theme.focusBorder)," 0 0 0 1px;}"),g=(0,n.Z)("span",{target:"e1slsb9u0"})("display:block;position:absolute;border-radius:50%;transition:0.25s all ease;top:",p,"px;transform:translateX(",c,"px);width:",l,"px;height:",l,"px;background:",(e=>e.isActive||e.forceActiveColor?e.theme.active:e.theme.border),";opacity:",(e=>e.isDisabled?.4:null),";"),u=(0,i.forwardRef)(((e,t)=>(0,o.tZ)(r,{...e,forwardedRef:t})))},"./app/stores/pluginsStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var n=s("../node_modules/reflux/src/index.js");const i={loading:!0,plugins:[],error:null,pageLinks:null},o={plugins:null,state:{...i},updating:new Map,reset(){return this.plugins=null,this.state={...i},this.updating=new Map,this.state},getInitialState(){return this.getState()},getState(){const{plugins:e,...t}=this.state;return{...t,plugins:this.plugins?Array.from(this.plugins.values()):[]}},init(){this.reset()},triggerState(){this.trigger(this.getState())},onFetchAll(){let{resetLoading:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&(this.state.loading=!0,this.state.error=null,this.plugins=null),this.triggerState()},onFetchAllSuccess(e,t){let{pageLinks:s}=t;this.plugins=new Map(e.map((e=>[e.id,e]))),this.state.pageLinks=s||null,this.state.loading=!1,this.triggerState()},onFetchAllError(e){this.plugins=null,this.state.loading=!1,this.state.error=e,this.triggerState()},onUpdate(e,t){if(!this.plugins)return;const s=this.plugins.get(e);if(!s)return;const n={...s,...t};this.plugins.set(e,n),this.updating.set(e,s),this.triggerState()},onUpdateSuccess(e,t){this.updating.delete(e)},onUpdateError(e,t,s){const n=this.updating.get(e);n&&this.plugins&&(this.plugins.set(e,n),this.updating.delete(e),this.state.error=s,this.triggerState())}},r=(0,n.createStore)(o)},"./app/utils/withPlugins.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),o=s("./app/actionCreators/plugins.tsx"),r=s("./app/stores/pluginsStore.tsx"),a=s("./app/utils.tsx"),l=s("./app/utils/getDisplayName.tsx"),p=s("./app/utils/withOrganization.tsx"),c=s("./app/utils/withProject.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=function(e){class t extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{plugins:[],loading:!0}),(0,n.Z)(this,"unsubscribe",r.Z.listen((e=>{let{plugins:t,loading:s}=e;this.setState({plugins:t,loading:s})}),void 0))}componentDidMount(){this.fetchPlugins()}componentDidUpdate(e,t,s){const{organization:n,project:i}=this.props,o=e.organization||s?.organization,r=e.project||s?.project;if(!(0,a.ri)(r)||!(0,a.ri)(o))return;const l=o.slug===n.slug,p=r.slug===i?.slug;l&&p||this.fetchPlugins()}componentWillUnmount(){this.unsubscribe()}fetchPlugins(){const{organization:e,project:t}=this.props;t&&e&&(0,o.MM)({projectId:t.slug,orgId:e.slug})}render(){return(0,d.tZ)(e,{...this.props,plugins:this.state})}}return t.displayName="WithPlugins",(0,n.Z)(t,"displayName",`withPlugins(${(0,l.Z)(e)})`),(0,p.Z)((0,c.Z)(t))}},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var n=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,o.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function l(e){let{access:t=["project:write"],project:s,team:o,...l}=e;return(0,r.tZ)(n.Z,{access:t,project:s,team:o,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(i.bZ,{"data-test-id":"project-permission-alert",type:"warning",...l,children:a})}})}l.displayName="PermissionAlert";const p=l},"./app/views/settings/projectPlugins/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{ProjectPluginsContainer:()=>U,default:()=>B});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),o=s("./app/actionCreators/plugins.tsx"),r=s("./app/components/sentryDocumentTitle.tsx"),a=s("./app/locale.tsx"),l=s("./app/utils/integrationUtil.tsx"),p=s("./app/utils/withPlugins.tsx"),c=s("./app/views/settings/components/settingsPageHeader.tsx"),d=s("./app/views/settings/project/permissionAlert.tsx"),g=s("./app/components/acl/access.tsx"),u=s("./app/components/links/link.tsx"),h=s("./app/components/loadingIndicator.tsx"),m=s("./app/components/panels/index.tsx"),x=s("./app/views/routeError.tsx"),b=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),Z=s("./app/components/links/externalLink.tsx"),j=s("./app/components/switchButton.tsx"),w=s("./app/plugins/components/pluginIcon.tsx"),f=s("./app/utils/getDynamicText.tsx"),y=s("./app/utils/recreateRoute.tsx"),v=s("./app/utils/withOrganization.tsx"),C=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const P={name:"is2cq7",styles:"color:#979ba0"};class S extends i.PureComponent{constructor(){super(...arguments),(0,n.Z)(this,"handleChange",(()=>{const{onChange:e,id:t,enabled:s}=this.props;e(t,!s);const n=s?"integrations.disabled":"integrations.enabled";(0,l.Db)(n,{integration:t,integration_type:"plugin",view:"legacy_integrations",organization:this.props.organization})}))}render(){const{id:e,name:t,slug:s,version:n,author:i,hasConfiguration:o,enabled:r,canDisable:l,project:p}=this.props,c=(0,y.Z)(e,this.props);return(0,C.tZ)(g.Z,{access:["project:write"],project:p,children:p=>{let{hasAccess:d}=p;const g=d?u.Z:"span";return(0,C.BX)(I,{className:s,children:[(0,C.BX)(A,{children:[(0,C.tZ)(D,{size:48,pluginId:e}),(0,C.BX)(_,{children:[(0,C.BX)(k,{children:[`${t} `,(0,f.Z)({value:(0,C.tZ)(N,{children:n?`v${n}`:(0,C.tZ)("em",{children:(0,a.t)("n/a")})}),fixed:(0,C.tZ)(N,{children:"v10"})})]}),(0,C.BX)("div",{children:[i&&(0,C.tZ)(Z.Z,{css:P,href:i.url,children:i.name}),o&&(0,C.BX)("span",{children:[" ","Â·"," ",(0,C.tZ)(g,{css:P,to:c,children:(0,a.t)("Configure plugin")})]})]})]})]}),(0,C.tZ)(j.Z,{size:"lg",isDisabled:!d||!l,isActive:r,toggle:this.handleChange})]},e)}})}}S.displayName="ProjectPluginRow";const z=(0,v.Z)(S),I=(0,b.Z)("div",{target:"e2xbo7y5"})({name:"zol16h",styles:"display:flex;flex:1;align-items:center"}),_=(0,b.Z)("div",{target:"e2xbo7y4"})({name:"1cepywk",styles:"display:flex;justify-content:center;flex-direction:column"}),A=(0,b.Z)("div",{target:"e2xbo7y3"})({name:"1l1txui",styles:"display:flex;flex:1;line-height:24px"}),k=(0,b.Z)("div",{target:"e2xbo7y2"})({name:"11g4mt0",styles:"font-size:16px"}),D=(0,b.Z)(w.ZP,{target:"e2xbo7y1"})({name:"o7nnmj",styles:"margin-right:16px"}),N=(0,b.Z)("span",{target:"e2xbo7y0"})({name:"qhuumn",styles:"color:#babec2"});class E extends i.Component{render(){const{plugins:e,loading:t,error:s,onChange:n,routes:i,organization:o,project:r}=this.props,l=!s&&t;if(s)return(0,C.tZ)(x.Z,{error:s});if(l)return(0,C.tZ)(h.Z,{});const p={orgId:o.slug,projectId:r.slug};return(0,C.tZ)(g.Z,{access:["org:integrations"],project:r,children:t=>{let{hasAccess:s}=t;return(0,C.BX)(m.s_,{children:[(0,C.BX)(m.V9,{children:[(0,C.tZ)("div",{children:(0,a.t)("Legacy Integration")}),(0,C.tZ)("div",{})]}),(0,C.BX)(m.N,{children:[(0,C.tZ)(m.aU,{type:"warning",children:s?(0,a._N)("Legacy Integrations must be configured per-project. It's recommended to prefer organization integrations over the legacy project integrations when available. Visit the [link:organization integrations] settings to manage them.",{link:(0,C.tZ)(u.Z,{to:`/settings/${o.slug}/integrations`})}):(0,a.t)("Legacy Integrations must be configured per-project. It's recommended to prefer organization integrations over the legacy project integrations when available.")}),e.filter((e=>!e.isHidden)).map((e=>(0,C.tZ)(m.Lv,{children:(0,C.tZ)(z,{params:p,routes:i,project:r,...e,onChange:n})},e.id)))]})]})}})}}E.displayName="ProjectPlugins";const L=E;class U extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"fetchData",(async()=>{const{organization:e,params:t}=this.props,s=(await(0,o.MM)({...t,orgId:e.slug})).filter((e=>e.hasConfiguration&&e.enabled)).length;(0,l.Db)("integrations.index_viewed",{integrations_installed:s,view:"legacy_integrations",organization:this.props.organization},{startSession:!0})})),(0,n.Z)(this,"handleChange",((e,t)=>{const{organization:s,params:n}=this.props;(t?o.Cg:o.rR)({projectId:n.projectId,orgId:s.slug,pluginId:e})}))}componentDidMount(){this.fetchData()}render(){const{loading:e,error:t,plugins:s}=this.props.plugins||{},{organization:n,project:o}=this.props,l=(0,a.t)("Legacy Integrations");return(0,C.BX)(i.Fragment,{children:[(0,C.tZ)(r.Z,{title:l,orgSlug:n.slug}),(0,C.tZ)(c.Z,{title:l}),(0,C.tZ)(d.Z,{project:o}),(0,C.tZ)(L,{...this.props,onChange:this.handleChange,loading:e,error:t,plugins:s})]})}}U.displayName="ProjectPluginsContainer";const B=(0,p.Z)(U)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectPlugins_index_tsx.9625d70acc176c562833de29f2c30121.js.map