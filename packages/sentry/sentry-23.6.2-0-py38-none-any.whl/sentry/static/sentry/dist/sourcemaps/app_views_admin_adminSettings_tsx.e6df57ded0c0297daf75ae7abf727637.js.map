{"version":3,"file":"chunks/app_views_admin_adminSettings_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/admin/adminSettings.tsx"],"sourcesContent":["import Feature from 'sentry/components/acl/feature';\nimport Form from 'sentry/components/forms/form';\nimport {Panel, PanelHeader} from 'sentry/components/panels';\nimport {t} from 'sentry/locale';\nimport AsyncView from 'sentry/views/asyncView';\n\nimport {getOption, getOptionField} from './options';\n\nconst optionsAvailable = [\n  'system.url-prefix',\n  'system.admin-email',\n  'system.support-email',\n  'system.security-email',\n  'system.rate-limit',\n  'auth.allow-registration',\n  'auth.ip-rate-limit',\n  'auth.user-rate-limit',\n  'api.rate-limit.org-create',\n  'beacon.anonymous',\n  'performance.issues.all.problem-detection',\n  'performance.issues.n_plus_one_db.problem-creation',\n  'performance.issues.n_plus_one_db_ext.problem-creation',\n  'performance.issues.n_plus_one_db.count_threshold',\n  'performance.issues.n_plus_one_db.duration_threshold',\n  'performance.issues.consecutive_db.problem-creation',\n  'performance.issues.consecutive_db.la-rollout',\n  'performance.issues.consecutive_db.ea-rollout',\n  'performance.issues.consecutive_db.ga-rollout',\n  'performance.issues.n_plus_one_api_calls.problem-creation',\n  'performance.issues.n_plus_one_api_calls.la-rollout',\n  'performance.issues.n_plus_one_api_calls.ea-rollout',\n  'performance.issues.n_plus_one_api_calls.ga-rollout',\n  'performance.issues.compressed_assets.problem-creation',\n  'performance.issues.compressed_assets.la-rollout',\n  'performance.issues.compressed_assets.ea-rollout',\n  'performance.issues.compressed_assets.ga-rollout',\n  'performance.issues.file_io_main_thread.problem-creation',\n  'performance.issues.slow_db_query.problem-creation',\n  'performance.issues.slow_db_query.la-rollout',\n  'performance.issues.slow_db_query.ea-rollout',\n  'performance.issues.slow_db_query.ga-rollout',\n  'performance.issues.render_blocking_assets.problem-creation',\n  'performance.issues.render_blocking_assets.la-rollout',\n  'performance.issues.render_blocking_assets.ea-rollout',\n  'performance.issues.render_blocking_assets.ga-rollout',\n  'performance.issues.m_n_plus_one_db.problem-creation',\n  'performance.issues.m_n_plus_one_db.la-rollout',\n  'performance.issues.m_n_plus_one_db.ea-rollout',\n  'performance.issues.m_n_plus_one_db.ga-rollout',\n  'performance.issues.consecutive_http.max_duration_between_spans',\n  'performance.issues.consecutive_http.consecutive_count_threshold',\n  'performance.issues.consecutive_http.span_duration_threshold',\n  'performance.issues.large_http_payload.size_threshold',\n  'profile.issues.blocked_main_thread-ingest.la-rollout',\n  'profile.issues.blocked_main_thread-ingest.ea-rollout',\n  'profile.issues.blocked_main_thread-ingest.ga-rollout',\n  'profile.issues.blocked_main_thread-ppg.la-rollout',\n  'profile.issues.blocked_main_thread-ppg.ea-rollout',\n  'profile.issues.blocked_main_thread-ppg.ga-rollout',\n];\n\ntype Field = ReturnType<typeof getOption>;\n\ntype FieldDef = {\n  field: Field;\n  value: string | undefined;\n};\n\ntype State = AsyncView['state'] & {\n  data: Record<string, FieldDef>;\n};\n\nexport default class AdminSettings extends AsyncView<{}, State> {\n  get endpoint() {\n    return '/internal/options/';\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    return [['data', this.endpoint]];\n  }\n\n  renderBody() {\n    const {data} = this.state;\n\n    const initialData = {};\n    const fields = {};\n    for (const key of optionsAvailable) {\n      // TODO(dcramer): we should not be mutating options\n      const option = data[key] ?? {field: {}, value: undefined};\n\n      if (option.value === undefined || option.value === '') {\n        const defn = getOption(key);\n        initialData[key] = defn.defaultValue ? defn.defaultValue() : '';\n      } else {\n        initialData[key] = option.value;\n      }\n      fields[key] = getOptionField(key, option.field);\n    }\n\n    return (\n      <div>\n        <h3>{t('Settings')}</h3>\n\n        <Form\n          apiMethod=\"PUT\"\n          apiEndpoint={this.endpoint}\n          initialData={initialData}\n          saveOnBlur\n        >\n          <Panel>\n            <PanelHeader>General</PanelHeader>\n            {fields['system.url-prefix']}\n            {fields['system.admin-email']}\n            {fields['system.support-email']}\n            {fields['system.security-email']}\n            {fields['system.rate-limit']}\n          </Panel>\n\n          <Panel>\n            <PanelHeader>Security & Abuse</PanelHeader>\n            {fields['auth.allow-registration']}\n            {fields['auth.ip-rate-limit']}\n            {fields['auth.user-rate-limit']}\n            {fields['api.rate-limit.org-create']}\n          </Panel>\n\n          <Panel>\n            <PanelHeader>Beacon</PanelHeader>\n            {fields['beacon.anonymous']}\n          </Panel>\n\n          <Feature features={['organizations:performance-issues-dev']}>\n            <Panel>\n              <PanelHeader>Performance Issues - All</PanelHeader>\n              {fields['performance.issues.all.problem-detection']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - Detectors</PanelHeader>\n              {fields['performance.issues.n_plus_one_db.problem-creation']}\n              {fields['performance.issues.n_plus_one_db_ext.problem-creation']}\n              {fields['performance.issues.n_plus_one_db.count_threshold']}\n              {fields['performance.issues.n_plus_one_db.duration_threshold']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - Consecutive DB Detector</PanelHeader>\n              {fields['performance.issues.consecutive_db.problem-creation']}\n              {fields['performance.issues.consecutive_db.la-rollout']}\n              {fields['performance.issues.consecutive_db.ea-rollout']}\n              {fields['performance.issues.consecutive_db.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - N+1 API Calls Detector</PanelHeader>\n              {fields['performance.issues.n_plus_one_api_calls.problem-creation']}\n              {fields['performance.issues.n_plus_one_api_calls.la-rollout']}\n              {fields['performance.issues.n_plus_one_api_calls.ea-rollout']}\n              {fields['performance.issues.n_plus_one_api_calls.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - Compressed Assets Detector</PanelHeader>\n              {fields['performance.issues.compressed_assets.problem-creation']}\n              {fields['performance.issues.compressed_assets.la-rollout']}\n              {fields['performance.issues.compressed_assets.ea-rollout']}\n              {fields['performance.issues.compressed_assets.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - File IO on Main Thread</PanelHeader>\n              {fields['performance.issues.file_io_main_thread.problem-creation']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - Slow DB Span Detector</PanelHeader>\n              {fields['performance.issues.slow_db_query.problem-creation']}\n              {fields['performance.issues.slow_db_query.la-rollout']}\n              {fields['performance.issues.slow_db_query.ea-rollout']}\n              {fields['performance.issues.slow_db_query.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>\n                Performance Issues - Large Render Blocking Asset Detector\n              </PanelHeader>\n              {fields['performance.issues.render_blocking_assets.problem-creation']}\n              {fields['performance.issues.render_blocking_assets.la-rollout']}\n              {fields['performance.issues.render_blocking_assets.ea-rollout']}\n              {fields['performance.issues.render_blocking_assets.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - MN+1 DB Detector</PanelHeader>\n              {fields['performance.issues.m_n_plus_one_db.problem-creation']}\n              {fields['performance.issues.m_n_plus_one_db.la-rollout']}\n              {fields['performance.issues.m_n_plus_one_db.ea-rollout']}\n              {fields['performance.issues.m_n_plus_one_db.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>\n                Performance Issues - Consecutive HTTP Span Detector\n              </PanelHeader>\n              {fields['performance.issues.consecutive_http.max_duration_between_spans']}\n              {fields['performance.issues.consecutive_http.consecutive_count_threshold']}\n              {fields['performance.issues.consecutive_http.span_duration_threshold']}\n            </Panel>\n            <Panel>\n              <PanelHeader>Performance Issues - Large HTTP Payload Detector</PanelHeader>\n              {fields['performance.issues.large_http_payload.size_threshold']}\n            </Panel>\n            <Panel>\n              <PanelHeader>\n                Profiling Issues - Block Main Thread Detector Ingest\n              </PanelHeader>\n              {fields['profile.issues.blocked_main_thread-ingest.la-rollout']}\n              {fields['profile.issues.blocked_main_thread-ingest.ea-rollout']}\n              {fields['profile.issues.blocked_main_thread-ingest.ga-rollout']}\n            </Panel>\n            <Panel>\n              <PanelHeader>\n                Profiling Issues - Block Main Thread Detector Post Process Group\n              </PanelHeader>\n              {fields['profile.issues.blocked_main_thread-ppg.la-rollout']}\n              {fields['profile.issues.blocked_main_thread-ppg.ea-rollout']}\n              {fields['profile.issues.blocked_main_thread-ppg.ga-rollout']}\n            </Panel>\n          </Feature>\n          <Feature features={['organizations:view-hierarchies-options-dev']}>\n            <Panel>\n              <PanelHeader>View Hierarchy</PanelHeader>\n            </Panel>\n          </Feature>\n        </Form>\n      </div>\n    );\n  }\n}\n"],"names":["optionsAvailable","AdminSettings","AsyncView","endpoint","getEndpoints","this","renderBody","data","state","initialData","fields","key","option","field","value","undefined","defn","getOption","defaultValue","getOptionField","_jsxs","children","_jsx","t","Form","apiMethod","apiEndpoint","saveOnBlur","Panel","PanelHeader","Feature","features"],"sourceRoot":""}