{"version":3,"file":"chunks/app_components_gridEditable_sortLink_tsx-app_views_performance_landing_widgets_components_per-5df0e3.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/gridEditable/sortLink.tsx","webpack:///./app/views/performance/landing/widgets/components/performanceWidgetContainer.tsx","webpack:///./app/views/performance/landing/widgets/components/dataStateSwitch.tsx","webpack:///./app/views/performance/landing/widgets/components/queryHandler.tsx","webpack:///./app/views/performance/landing/widgets/components/widgetHeader.tsx","webpack:///./app/views/performance/landing/widgets/components/performanceWidget.tsx","webpack:///./app/views/performance/landing/widgets/components/selectableList.tsx"],"sourcesContent":["import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {LocationDescriptorObject} from 'history';\n\nimport Link from 'sentry/components/links/link';\nimport {IconArrow} from 'sentry/icons';\n\nexport type Alignments = 'left' | 'right' | undefined;\nexport type Directions = 'desc' | 'asc' | undefined;\n\ntype Props = {\n  align: Alignments;\n  canSort: boolean;\n  direction: Directions;\n  generateSortLink: () => LocationDescriptorObject | undefined;\n  title: React.ReactNode;\n  onClick?: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n  replace?: boolean;\n};\n\nfunction SortLink({\n  align,\n  title,\n  canSort,\n  generateSortLink,\n  onClick,\n  direction,\n  replace,\n}: Props) {\n  const target = generateSortLink();\n\n  if (!target || !canSort) {\n    return <StyledNonLink align={align}>{title}</StyledNonLink>;\n  }\n\n  const arrow = !direction ? null : (\n    <StyledIconArrow size=\"xs\" direction={direction === 'desc' ? 'down' : 'up'} />\n  );\n\n  const handleOnClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\n    if (replace) {\n      e.preventDefault();\n      browserHistory.replace(target);\n    }\n    onClick?.(e);\n  };\n\n  return (\n    <StyledLink align={align} to={target} onClick={handleOnClick}>\n      {title} {arrow}\n    </StyledLink>\n  );\n}\n\ntype LinkProps = React.ComponentPropsWithoutRef<typeof Link>;\ntype StyledLinkProps = LinkProps & {align: Alignments};\n\nconst StyledLink = styled((props: StyledLinkProps) => {\n  // @ts-expect-error It doesn't look like the `css` property is a part of the props,\n  // but prior to this style of destructure-omitting it, it was being omitted\n  // with lodash.omit. I mean keeping it omitted here just in case.\n  const {align: _align, css: _css, ...forwardProps} = props;\n  return <Link {...forwardProps} />;\n})`\n  display: block;\n  width: 100%;\n  white-space: nowrap;\n  color: inherit;\n\n  &:hover,\n  &:active,\n  &:focus,\n  &:visited {\n    color: inherit;\n  }\n\n  ${(p: StyledLinkProps) => (p.align ? `text-align: ${p.align};` : '')}\n`;\n\nconst StyledNonLink = styled('div')<{align: Alignments}>`\n  display: block;\n  width: 100%;\n  white-space: nowrap;\n  ${(p: {align: Alignments}) => (p.align ? `text-align: ${p.align};` : '')}\n`;\n\nconst StyledIconArrow = styled(IconArrow)`\n  vertical-align: top;\n`;\n\nexport default SortLink;\n","import styled from '@emotion/styled';\n\nimport {Panel} from 'sentry/components/panels';\nimport {space} from 'sentry/styles/space';\n\nexport type PerformanceWidgetContainerTypes = 'panel' | 'inline';\n\nconst StyledPanel = styled(Panel)`\n  padding-top: ${space(2)};\n  margin-bottom: 0;\n`;\nconst Div = styled('div')``;\n\nconst getPerformanceWidgetContainer = ({\n  containerType,\n}: {\n  containerType: PerformanceWidgetContainerTypes;\n}) => {\n  if (containerType === 'panel') {\n    return StyledPanel;\n  }\n  if (containerType === 'inline') {\n    return Div;\n  }\n  return Div;\n};\n\nexport default getPerformanceWidgetContainer;\n","import {Fragment} from 'react';\n\nexport function DataStateSwitch(props: {\n  dataComponents: JSX.Element[];\n  emptyComponent: JSX.Element;\n  errorComponent: JSX.Element;\n\n  hasData: boolean;\n  isErrored: boolean;\n  isLoading: boolean;\n  loadingComponent?: JSX.Element;\n}): JSX.Element {\n  if (props.isErrored) {\n    return props.errorComponent;\n  }\n  if (props.isLoading && props.loadingComponent) {\n    return props.loadingComponent;\n  }\n  if (!props.hasData) {\n    return props.emptyComponent;\n  }\n  return <Fragment>{props.dataComponents}</Fragment>;\n}\n","import {Fragment, useEffect} from 'react';\n\nimport {getUtcToLocalDateObject} from 'sentry/utils/dates';\nimport {\n  getIsMetricsDataFromResults,\n  useMEPDataContext,\n} from 'sentry/utils/performance/contexts/metricsEnhancedPerformanceDataContext';\n\nimport {QueryDefinitionWithKey, QueryHandlerProps, WidgetDataConstraint} from '../types';\nimport {PerformanceWidgetSetting} from '../widgetDefinitions';\n\n/*\n  Component to handle switching component-style queries over to state. This should be temporary to make it easier to switch away from waterfall style api components.\n*/\nexport function QueryHandler<T extends WidgetDataConstraint>(\n  props: QueryHandlerProps<T>\n) {\n  const children = props.children ?? <Fragment />;\n\n  if (!props.queries.length) {\n    return <Fragment>{children}</Fragment>;\n  }\n\n  return (\n    <Fragment>\n      {props.queries\n        .filter(q => (q.enabled ? q.enabled(props.widgetData) : true))\n        .map(query => (\n          <SingleQueryHandler key={query.queryKey} {...props} query={query} />\n        ))}\n    </Fragment>\n  );\n}\n\nfunction genericQueryReferrer(setting: PerformanceWidgetSetting) {\n  return `api.performance.generic-widget-chart.${setting.replace(/_/g, '-')}`;\n}\n\nfunction SingleQueryHandler<T extends WidgetDataConstraint>(\n  props: QueryHandlerProps<T> & {query: QueryDefinitionWithKey<T>}\n) {\n  const query = props.query;\n  const globalSelection = props.queryProps.eventView.getPageFilters();\n  const start = globalSelection.datetime.start\n    ? getUtcToLocalDateObject(globalSelection.datetime.start)\n    : null;\n\n  const end = globalSelection.datetime.end\n    ? getUtcToLocalDateObject(globalSelection.datetime.end)\n    : null;\n\n  useEffect(\n    () => () => {\n      // Destroy previous data on unmount, in case enabled value changes and unmounts the query component.\n      props.removeWidgetDataForKey(query.queryKey);\n    },\n    []\n  );\n\n  return (\n    <query.component\n      key={query.queryKey}\n      fields={query.fields}\n      yAxis={query.fields}\n      start={start}\n      end={end}\n      period={globalSelection.datetime.period}\n      project={globalSelection.projects}\n      environment={globalSelection.environments}\n      organization={props.queryProps.organization}\n      orgSlug={props.queryProps.organization.slug}\n      eventView={props.queryProps.eventView}\n      query={props.queryProps.eventView.getQueryWithAdditionalConditions()}\n      widgetData={props.widgetData}\n      referrer={genericQueryReferrer(props.queryProps.chartSetting)}\n    >\n      {results => {\n        return (\n          <Fragment>\n            <QueryResultSaver<T> results={results} {...props} query={query} />\n          </Fragment>\n        );\n      }}\n    </query.component>\n  );\n}\n\nfunction QueryResultSaver<T extends WidgetDataConstraint>(\n  props: {\n    // TODO(k-fish): Fix this any.\n    query: QueryDefinitionWithKey<T>;\n    results: any;\n  } & QueryHandlerProps<T>\n) {\n  const mepContext = useMEPDataContext();\n  const {results, query} = props;\n\n  const transformed = query.transform(props.queryProps, results, props.query);\n\n  useEffect(() => {\n    const isMetricsData = getIsMetricsDataFromResults(\n      results,\n      props.queryProps.fields[0]\n    );\n    mepContext.setIsMetricsData(isMetricsData);\n    props.setWidgetDataForKey(query.queryKey, transformed);\n  }, [transformed?.hasData, transformed?.isLoading, transformed?.isErrored]);\n  return <Fragment />;\n}\n","import styled from '@emotion/styled';\n\nimport {HeaderTitleLegend} from 'sentry/components/charts/styles';\nimport QuestionTooltip from 'sentry/components/questionTooltip';\nimport TextOverflow from 'sentry/components/textOverflow';\nimport {space} from 'sentry/styles/space';\nimport {MEPTag} from 'sentry/utils/performance/contexts/metricsEnhancedPerformanceDataContext';\n\nimport {\n  GenericPerformanceWidgetProps,\n  WidgetDataConstraint,\n  WidgetDataProps,\n} from '../types';\n\nexport function WidgetHeader<T extends WidgetDataConstraint>(\n  props: GenericPerformanceWidgetProps<T> & WidgetDataProps<T>\n) {\n  const {title, titleTooltip, Subtitle, HeaderActions, InteractiveTitle} = props;\n  return (\n    <WidgetHeaderContainer>\n      <TitleContainer>\n        <StyledHeaderTitleLegend data-test-id=\"performance-widget-title\">\n          {InteractiveTitle ? (\n            <InteractiveTitle {...props} />\n          ) : (\n            <TextOverflow>{title}</TextOverflow>\n          )}\n          <MEPTag />\n          {titleTooltip && (\n            <QuestionTooltip position=\"top\" size=\"sm\" title={titleTooltip} />\n          )}\n        </StyledHeaderTitleLegend>\n        {Subtitle ? <Subtitle {...props} /> : null}\n      </TitleContainer>\n      <HeaderActionsContainer>\n        {HeaderActions && <HeaderActions {...props} />}\n      </HeaderActionsContainer>\n    </WidgetHeaderContainer>\n  );\n}\n\nconst StyledHeaderTitleLegend = styled(HeaderTitleLegend)`\n  position: relative;\n  z-index: initial;\n  top: -${space(0.5)};\n`;\n\nconst TitleContainer = styled('div')`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n`;\n\nconst WidgetHeaderContainer = styled('div')`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: ${space(1)};\n`;\n\nconst HeaderActionsContainer = styled('div')`\n  display: flex;\n  align-items: center;\n  gap: ${space(1)};\n`;\n","import {Fragment, useCallback, useRef, useState} from 'react';\nimport styled from '@emotion/styled';\n\nimport ErrorPanel from 'sentry/components/charts/errorPanel';\nimport Placeholder from 'sentry/components/placeholder';\nimport {IconWarning} from 'sentry/icons/iconWarning';\nimport {space} from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport {trackAnalytics} from 'sentry/utils/analytics';\nimport getDynamicText from 'sentry/utils/getDynamicText';\nimport {MEPDataProvider} from 'sentry/utils/performance/contexts/metricsEnhancedPerformanceDataContext';\nimport useApi from 'sentry/utils/useApi';\nimport getPerformanceWidgetContainer from 'sentry/views/performance/landing/widgets/components/performanceWidgetContainer';\n\nimport {\n  GenericPerformanceWidgetProps,\n  WidgetDataConstraint,\n  WidgetDataProps,\n  WidgetDataResult,\n  WidgetPropUnion,\n} from '../types';\nimport {PerformanceWidgetSetting} from '../widgetDefinitions';\n\nimport {DataStateSwitch} from './dataStateSwitch';\nimport {QueryHandler} from './queryHandler';\nimport {WidgetHeader} from './widgetHeader';\n\n// Generic performance widget for type T, where T defines all the data contained in the widget.\nexport function GenericPerformanceWidget<T extends WidgetDataConstraint>(\n  props: WidgetPropUnion<T>\n) {\n  // Use object keyed to chart setting so switching between charts of a similar type doesn't retain data with query components still having inflight requests.\n  const [allWidgetData, setWidgetData] = useState<{[chartSetting: string]: T}>({});\n  const widgetData = allWidgetData[props.chartSetting] ?? {};\n  const widgetDataRef = useRef(widgetData);\n\n  const setWidgetDataForKey = useCallback(\n    (dataKey: string, result?: WidgetDataResult) => {\n      const _widgetData = widgetDataRef.current;\n      const newWidgetData = {..._widgetData, [dataKey]: result};\n      widgetDataRef.current = newWidgetData;\n      setWidgetData({[props.chartSetting]: newWidgetData});\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [allWidgetData, setWidgetData]\n  );\n  const removeWidgetDataForKey = useCallback(\n    (dataKey: string) => {\n      const _widgetData = widgetDataRef.current;\n      const newWidgetData = {..._widgetData};\n      delete newWidgetData[dataKey];\n      widgetDataRef.current = newWidgetData;\n      setWidgetData({[props.chartSetting]: newWidgetData});\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [allWidgetData, setWidgetData]\n  );\n  const widgetProps = {widgetData, setWidgetDataForKey, removeWidgetDataForKey};\n\n  const queries = Object.entries(props.Queries).map(([key, definition]) => ({\n    ...definition,\n    queryKey: key,\n  }));\n\n  const api = useApi();\n\n  const totalHeight = props.Visualizations.reduce((acc, curr) => acc + curr.height, 0);\n\n  return (\n    <Fragment>\n      <MEPDataProvider chartSetting={props.chartSetting}>\n        <QueryHandler\n          eventView={props.eventView}\n          widgetData={widgetData}\n          setWidgetDataForKey={setWidgetDataForKey}\n          removeWidgetDataForKey={removeWidgetDataForKey}\n          queryProps={props}\n          queries={queries}\n          api={api}\n        />\n        <DataDisplay<T> {...props} {...widgetProps} totalHeight={totalHeight} />\n      </MEPDataProvider>\n    </Fragment>\n  );\n}\n\nfunction trackDataComponentClicks(\n  chartSetting: PerformanceWidgetSetting,\n  organization: Organization\n) {\n  trackAnalytics('performance_views.landingv3.widget.interaction', {\n    organization,\n    widget_type: chartSetting,\n  });\n}\n\nexport function DataDisplay<T extends WidgetDataConstraint>(\n  props: GenericPerformanceWidgetProps<T> & WidgetDataProps<T> & {totalHeight: number}\n) {\n  const {Visualizations, chartHeight, totalHeight, containerType, EmptyComponent} = props;\n\n  const Container = getPerformanceWidgetContainer({\n    containerType,\n  });\n\n  const numberKeys = Object.keys(props.Queries).length;\n  const missingDataKeys = Object.values(props.widgetData).length !== numberKeys;\n  const hasData =\n    !missingDataKeys && Object.values(props.widgetData).every(d => !d || d.hasData);\n  const isLoading = Object.values(props.widgetData).some(d => !d || d.isLoading);\n  const isErrored =\n    !missingDataKeys && Object.values(props.widgetData).some(d => d && d.isErrored);\n\n  return (\n    <Container data-test-id=\"performance-widget-container\">\n      <ContentContainer>\n        <WidgetHeader<T> {...props} />\n      </ContentContainer>\n      <DataStateSwitch\n        isLoading={isLoading}\n        isErrored={isErrored}\n        hasData={hasData}\n        errorComponent={<DefaultErrorComponent height={totalHeight} />}\n        dataComponents={Visualizations.map((Visualization, index) => (\n          <ContentContainer\n            key={index}\n            noPadding={Visualization.noPadding}\n            bottomPadding={Visualization.bottomPadding}\n            data-test-id=\"widget-state-has-data\"\n            onClick={() =>\n              trackDataComponentClicks(props.chartSetting, props.organization)\n            }\n          >\n            {getDynamicText({\n              value: (\n                <Visualization.component\n                  grid={defaultGrid}\n                  queryFields={Visualization.fields}\n                  widgetData={props.widgetData}\n                  height={chartHeight}\n                />\n              ),\n              fixed: <Placeholder height={`${chartHeight}px`} />,\n            })}\n          </ContentContainer>\n        ))}\n        loadingComponent={<PerformanceWidgetPlaceholder height={`${totalHeight}px`} />}\n        emptyComponent={\n          EmptyComponent ? (\n            <EmptyComponent />\n          ) : (\n            <PerformanceWidgetPlaceholder height={`${totalHeight}px`} />\n          )\n        }\n      />\n    </Container>\n  );\n}\n\nfunction DefaultErrorComponent(props: {height: number}) {\n  return (\n    <ErrorPanel data-test-id=\"widget-state-is-errored\" height={`${props.height}px`}>\n      <IconWarning color=\"gray300\" size=\"lg\" />\n    </ErrorPanel>\n  );\n}\n\nconst defaultGrid = {\n  left: space(0),\n  right: space(0),\n  top: space(2),\n  bottom: space(1),\n};\n\nconst ContentContainer = styled('div')<{bottomPadding?: boolean; noPadding?: boolean}>`\n  padding-left: ${p => (p.noPadding ? space(0) : space(2))};\n  padding-right: ${p => (p.noPadding ? space(0) : space(2))};\n  padding-bottom: ${p => (p.bottomPadding ? space(1) : space(0))};\n`;\n\nconst PerformanceWidgetPlaceholder = styled(Placeholder)`\n  border-color: transparent;\n  border-bottom-right-radius: inherit;\n  border-bottom-left-radius: inherit;\n`;\n\nGenericPerformanceWidget.defaultProps = {\n  containerType: 'panel',\n  chartHeight: 200,\n};\n","import styled from '@emotion/styled';\n\nimport EmptyStateWarning from 'sentry/components/emptyStateWarning';\nimport {RadioLineItem} from 'sentry/components/forms/controls/radioGroup';\nimport Link from 'sentry/components/links/link';\nimport Radio from 'sentry/components/radio';\nimport {Tooltip} from 'sentry/components/tooltip';\nimport {IconClose} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\n\ntype Props = {\n  items: (() => React.ReactNode)[];\n  selectedIndex: number;\n  setSelectedIndex: (index: number) => void;\n  radioColor?: string;\n};\n\nexport default function SelectableList(props: Props) {\n  return (\n    <div>\n      {props.items.map((item, index) => (\n        <SelectableItem\n          {...props}\n          isSelected={index === props.selectedIndex}\n          currentIndex={index}\n          key={index}\n        >\n          {item()}\n        </SelectableItem>\n      ))}\n    </div>\n  );\n}\n\nfunction SelectableItem({\n  isSelected,\n  currentIndex: index,\n  children,\n  setSelectedIndex,\n  radioColor,\n}: {children: React.ReactNode; currentIndex: number; isSelected: boolean} & Props) {\n  return (\n    <ListItemContainer>\n      <ItemRadioContainer color={radioColor ?? ''}>\n        <RadioLineItem index={index} role=\"radio\">\n          <Radio checked={isSelected} onChange={() => setSelectedIndex(index)} />\n        </RadioLineItem>\n      </ItemRadioContainer>\n      {children}\n    </ListItemContainer>\n  );\n}\n\nexport const RightAlignedCell = styled('div')`\n  text-align: right;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 ${space(1)};\n`;\n\nexport const Subtitle = styled('span')`\n  color: ${p => p.theme.gray300};\n  font-size: ${p => p.theme.fontSizeMedium};\n  display: inline-block;\n`;\n\nexport const GrowLink = styled(Link)`\n  flex-grow: 1;\n  display: inherit;\n`;\n\nexport function WidgetEmptyStateWarning() {\n  return (\n    <StyledEmptyStateWarning>\n      <PrimaryMessage>{t('No results found')}</PrimaryMessage>\n      <SecondaryMessage>\n        {t(\n          'Transactions may not be listed due to the filters above or a low sampling rate'\n        )}\n      </SecondaryMessage>\n    </StyledEmptyStateWarning>\n  );\n}\n\nexport function ListClose(props: {\n  onClick: () => void;\n  setSelectListIndex: (n: number) => void;\n}) {\n  return (\n    <StyledTooltip title={t('Exclude this transaction from the search filter.')}>\n      <StyledIconClose\n        onClick={() => {\n          props.onClick();\n          props.setSelectListIndex(0);\n        }}\n      />\n    </StyledTooltip>\n  );\n}\n\nconst StyledTooltip = styled(Tooltip)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst StyledIconClose = styled(IconClose)`\n  cursor: pointer;\n  color: ${p => p.theme.gray200};\n`;\n\nconst StyledEmptyStateWarning = styled(EmptyStateWarning)`\n  min-height: 300px;\n  justify-content: center;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst PrimaryMessage = styled('span')`\n  font-size: ${p => p.theme.fontSizeExtraLarge};\n  color: ${p => p.theme.gray300};\n  font-weight: 600;\n  margin: 0 auto ${space(1)};\n`;\n\nconst SecondaryMessage = styled('p')`\n  font-size: ${p => p.theme.fontSizeMedium};\n  color: ${p => p.theme.gray300};\n  max-width: 300px;\n`;\n\nconst ListItemContainer = styled('div')`\n  display: flex;\n  border-top: 1px solid ${p => p.theme.border};\n  padding: ${space(1)} ${space(2)};\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nconst ItemRadioContainer = styled('div')`\n  grid-row: 1/3;\n  input {\n    cursor: pointer;\n  }\n  input:checked::after {\n    background-color: ${p => p.color};\n  }\n`;\n"],"names":["SortLink","_ref","align","title","canSort","generateSortLink","onClick","direction","replace","target","_jsx","StyledNonLink","children","arrow","StyledIconArrow","size","_jsxs","StyledLink","to","e","preventDefault","browserHistory","displayName","_styled","props","_align","css","_css","forwardProps","Link","p","IconArrow","name","styles","StyledPanel","Panel","space","Div","containerType","DataStateSwitch","isErrored","errorComponent","isLoading","loadingComponent","hasData","Fragment","dataComponents","emptyComponent","QueryHandler","queries","length","filter","q","enabled","widgetData","map","query","SingleQueryHandler","queryKey","globalSelection","queryProps","eventView","getPageFilters","start","datetime","getUtcToLocalDateObject","end","useEffect","removeWidgetDataForKey","component","fields","yAxis","period","project","projects","environment","environments","organization","orgSlug","slug","getQueryWithAdditionalConditions","referrer","setting","chartSetting","results","QueryResultSaver","mepContext","useMEPDataContext","transformed","transform","isMetricsData","getIsMetricsDataFromResults","setIsMetricsData","setWidgetDataForKey","WidgetHeader","titleTooltip","Subtitle","HeaderActions","InteractiveTitle","WidgetHeaderContainer","TitleContainer","StyledHeaderTitleLegend","TextOverflow","MEPTag","QuestionTooltip","position","HeaderActionsContainer","HeaderTitleLegend","GenericPerformanceWidget","allWidgetData","setWidgetData","useState","widgetDataRef","useRef","useCallback","dataKey","result","newWidgetData","current","widgetProps","Object","entries","Queries","key","definition","api","useApi","totalHeight","Visualizations","reduce","acc","curr","height","MEPDataProvider","DataDisplay","chartHeight","EmptyComponent","Container","getPerformanceWidgetContainer","numberKeys","keys","missingDataKeys","values","every","d","some","ContentContainer","DefaultErrorComponent","Visualization","index","noPadding","bottomPadding","trackDataComponentClicks","trackAnalytics","widget_type","getDynamicText","value","grid","defaultGrid","queryFields","fixed","Placeholder","PerformanceWidgetPlaceholder","ErrorPanel","IconWarning","color","left","right","top","bottom","defaultProps","SelectableList","items","item","_createElement","SelectableItem","isSelected","selectedIndex","currentIndex","setSelectedIndex","radioColor","ListItemContainer","ItemRadioContainer","RadioLineItem","role","Radio","checked","onChange","RightAlignedCell","theme","gray300","fontSizeMedium","GrowLink","WidgetEmptyStateWarning","StyledEmptyStateWarning","PrimaryMessage","t","SecondaryMessage","ListClose","StyledTooltip","StyledIconClose","setSelectListIndex","Tooltip","IconClose","gray200","EmptyStateWarning","fontSizeExtraLarge","border"],"sourceRoot":""}