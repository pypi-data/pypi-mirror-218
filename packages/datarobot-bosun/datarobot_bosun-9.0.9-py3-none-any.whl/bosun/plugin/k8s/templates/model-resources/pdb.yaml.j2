{% import '_helpers.j2' as helpers %}
{# TODO update apiVersion when v1.21 is min supported version #}
- apiVersion: policy/v1beta1
  kind: PodDisruptionBudget
  metadata:
    name: "{{ helpers.name(di) }}"
    labels:
      {{ COMPONENT_LABEL_NAME }}: predictionServer
      {{ helpers.default_labels(di) | indent(6) }}
    annotations:
      {{ helpers.default_annotations() | indent(6) }}
  spec:
    minAvailable: 1
    selector:
      matchLabels:
        {{ DEPLOYMENT_LABEL_NAME }}: "{{ di.id }}"
        {{ PRED_ENV_LABEL_NAME }}: "{{ pei.id }}"
