import{d as oe}from"../chunks/environment.9aa685ef.js";import{S as ne,i as re,s as ce,k as g,a as C,q as U,l as b,m as w,h as y,c as L,r as q,n as u,b as se,D as s,Q as $,F as R,U as ie,u as W,E as x,G as ae,L as ue,o as de,W as K,C as he,X as fe,Y as pe,V as _e}from"../chunks/index.84b8b39e.js";import{l as ve}from"../chunks/logo.8522a027.js";import{c as G}from"../chunks/store.322467ea.js";const me=oe,ge=!0,Oe=Object.freeze(Object.defineProperty({__proto__:null,csr:me,prerender:ge},Symbol.toStringTag,{value:"Module"}));function ee(r,e,t){const a=r.slice();return a[12]=e[t],a[14]=t,a}function te(r,e){let t,a,c,_,h,f,n,T,p,j=e[12].question+"",S,I,E,i,d=e[12].answer+"",v,O,m,V,l,o,k,P,D,F,J;function Q(){return e[7](e[14])}function le(){return e[8](e[14])}return{key:r,first:null,c(){t=g("div"),a=g("div"),c=g("div"),_=g("img"),f=C(),n=g("div"),T=g("p"),p=U("Q: "),S=U(j),I=C(),E=g("p"),i=U("A: "),v=U(d),O=C(),m=g("button"),V=U("👍"),l=C(),o=g("button"),k=U("👎"),P=C(),this.h()},l(B){t=b(B,"DIV",{class:!0});var N=w(t);a=b(N,"DIV",{class:!0});var A=w(a);c=b(A,"DIV",{class:!0});var X=w(c);_=b(X,"IMG",{src:!0,alt:!0,class:!0}),X.forEach(y),f=L(A),n=b(A,"DIV",{class:!0});var M=w(n);T=b(M,"P",{class:!0});var z=w(T);p=q(z,"Q: "),S=q(z,j),z.forEach(y),I=L(M),E=b(M,"P",{class:!0});var H=w(E);i=q(H,"A: "),v=q(H,d),H.forEach(y),O=L(M),m=b(M,"BUTTON",{class:!0});var Y=w(m);V=q(Y,"👍"),Y.forEach(y),l=L(M),o=b(M,"BUTTON",{class:!0});var Z=w(o);k=q(Z,"👎"),Z.forEach(y),M.forEach(y),A.forEach(y),P=L(N),N.forEach(y),this.h()},h(){he(_.src,h=ve)||u(_,"src",h),u(_,"alt","SvelteKit"),u(_,"class","svelte-ji0dhf"),u(c,"class","avatar svelte-ji0dhf"),u(T,"class","svelte-ji0dhf"),u(E,"class","svelte-ji0dhf"),u(m,"class","small-button thumbs-up svelte-ji0dhf"),u(o,"class","small-button thumbs-down svelte-ji0dhf"),u(n,"class","message-content svelte-ji0dhf"),u(a,"class","chat-message-center svelte-ji0dhf"),u(t,"class","chat-message svelte-ji0dhf"),this.first=t},m(B,N){se(B,t,N),s(t,a),s(a,c),s(c,_),s(a,f),s(a,n),s(n,T),s(T,p),s(T,S),s(n,I),s(n,E),s(E,i),s(E,v),s(n,O),s(n,m),s(m,V),s(n,l),s(n,o),s(o,k),s(t,P),F||(J=[R(m,"click",Q),R(o,"click",le),fe(D=je.call(null,t,e[14]===e[3].length-1))],F=!0)},p(B,N){e=B,N&8&&j!==(j=e[12].question+"")&&W(S,j),N&8&&d!==(d=e[12].answer+"")&&W(v,d),D&&pe(D.update)&&N&8&&D.update.call(null,e[14]===e[3].length-1)},d(B){B&&y(t),F=!1,ae(J)}}}function be(r){let e,t,a=[],c=new Map,_,h,f,n,T,p,j=(r[1]?r[2]:"Send")+"",S,I,E,i,d,v,O,m=r[3];const V=l=>l[14];for(let l=0;l<m.length;l+=1){let o=ee(r,m,l),k=V(o);c.set(k,a[l]=te(k,o))}return{c(){e=g("section"),t=g("div");for(let l=0;l<a.length;l+=1)a[l].c();_=C(),h=g("div"),f=g("form"),n=g("input"),T=C(),p=g("button"),S=U(j),E=C(),i=g("p"),d=U("Note - may produce inaccurate information."),this.h()},l(l){e=b(l,"SECTION",{class:!0});var o=w(e);t=b(o,"DIV",{class:!0});var k=w(t);for(let Q=0;Q<a.length;Q+=1)a[Q].l(k);k.forEach(y),_=L(o),h=b(o,"DIV",{class:!0});var P=w(h);f=b(P,"FORM",{class:!0});var D=w(f);n=b(D,"INPUT",{rows:!0,class:!0,placeholder:!0}),T=L(D),p=b(D,"BUTTON",{class:!0,type:!0});var F=w(p);S=q(F,j),F.forEach(y),D.forEach(y),E=L(P),i=b(P,"P",{class:!0});var J=w(i);d=q(J,"Note - may produce inaccurate information."),J.forEach(y),P.forEach(y),o.forEach(y),this.h()},h(){u(t,"class","chat-log svelte-ji0dhf"),u(n,"rows","1"),u(n,"class","chat-input-textarea svelte-ji0dhf"),u(n,"placeholder","Type Message Here"),u(p,"class",I="btnyousend "+(r[0]===""?"":"active")+" svelte-ji0dhf"),u(p,"type","submit"),u(f,"class","chat-input-form svelte-ji0dhf"),u(i,"class","message svelte-ji0dhf"),u(h,"class","chat-input-holder svelte-ji0dhf"),u(e,"class","chatbox svelte-ji0dhf")},m(l,o){se(l,e,o),s(e,t);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(t,null);s(e,_),s(e,h),s(h,f),s(f,n),$(n,r[0]),s(f,T),s(f,p),s(p,S),s(h,E),s(h,i),s(i,d),v||(O=[R(n,"input",r[9]),R(f,"submit",r[4])],v=!0)},p(l,[o]){o&40&&(m=l[3],a=ie(a,o,V,1,l,m,c,t,_e,te,null,ee)),o&1&&n.value!==l[0]&&$(n,l[0]),o&6&&j!==(j=(l[1]?l[2]:"Send")+"")&&W(S,j),o&1&&I!==(I="btnyousend "+(l[0]===""?"":"active")+" svelte-ji0dhf")&&u(p,"class",I)},i:x,o:x,d(l){l&&y(e);for(let o=0;o<a.length;o+=1)a[o].d();v=!1,ae(O)}}}async function ye(r){console.log("INSERT"),console.log("entry",r);const e=await fetch("http://127.0.0.1:5000/preference_table/insert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(e.ok)console.log("ok!",e);else{const t=await e.text();alert(t)}}function je(r){setTimeout(()=>{r.scrollIntoView({behavior:"smooth"})},0)}function ke(r,e,t){let a,c;ue(r,G,i=>t(3,c=i));let _="",h="",f=!1;de(()=>{console.log("hey"),n()});async function n(){const v=(await(await fetch("http://127.0.0.1:5000/preference_table/get")).json()).preference_result;K(G,c=[...v],c)}const T=async i=>{i.preventDefault(),_=h,t(0,h=""),t(1,f=!0);let d={id:c.length+1,question:_,answer:"Loading...",vote:"na"};K(G,c=[...c,d],c);const v=await fetch(`http://127.0.0.1:5000/objects/retrieve/${_}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:_})});if(v.ok){const O=await v.json();d.answer=O.answer,K(G,c[c.length-1]=d,c),ye(d)}else{const O=await v.text();alert(O)}t(1,f=!1)};let p=0;setInterval(()=>{t(6,p=(p+1)%4)},200);async function j(i,d){const v=c[d];v.vote=i;const m=await fetch("http://127.0.0.1:5000/preference_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,vote:i})});if(m.ok)console.log("update worked!",m);else{const V=await m.text();alert(V)}}const S=i=>j("good",i),I=i=>j("bad",i);function E(){h=this.value,t(0,h)}return r.$$.update=()=>{r.$$.dirty&64&&t(2,a=".".repeat(p).padEnd(3))},[h,f,a,c,T,j,p,S,I,E]}class Ie extends ne{constructor(e){super(),re(this,e,ke,be,ce,{})}}export{Ie as component,Oe as universal};
