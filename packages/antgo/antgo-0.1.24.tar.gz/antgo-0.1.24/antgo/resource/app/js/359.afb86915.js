(self["webpackChunkantgo_web"]=self["webpackChunkantgo_web"]||[]).push([[359],{359:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("b-container",[t("b-row",[t("b-col",{ref:"samplelistcontent",staticStyle:{height:"800px","overflow-y":"scroll"},attrs:{cols:"4"}},[t("b-container",[t("b-row",{staticStyle:{"border-bottom":"1px solid rgba(0, 0, 0, 0.1)"}},[t("b-col",{staticClass:"m-md-2",staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.1)"}},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[e._v(" ID ")])]),t("b-col",{staticClass:"m-md-2",staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.1)"}},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[t("b-icon",{attrs:{icon:"bounding-box-circles",scale:"1",variant:"info"}})],1)]),t("b-col",{staticClass:"m-md-2",staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.1)"}},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[e._v(" 图片 ")])]),t("b-col",{staticClass:"m-md-2"},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[e._v(" 信息 ")])])],1),e._l(e.samples,(function(r,n){return t("b-row",{key:n,staticClass:"row_activate",class:{row_activate_selected:n==e.activate_sample["sample_id"]},on:{click:function(t){return e.select(r["sample_id"])}}},[t("b-col",[t("div",{staticClass:"dm-table__cell",staticStyle:{"margin-top":"7px"}},[t("div",{staticStyle:{width:"20px",display:"flex",height:"100%","align-items":"center"}},[e._v(" "+e._s(r["sample_id"])+" ")])])]),t("b-col",[t("div",{staticClass:"dm-table__cell",staticStyle:{"margin-top":"7px"}},["completed"!=r["state"]?t("div",{staticStyle:{width:"5px",display:"flex",height:"100%","align-items":"center"}},[e._v(" "+e._s(r["label_info"].length)+" ")]):t("div",{staticStyle:{width:"5px",display:"flex",height:"100%","align-items":"center",color:"red","font-weight":"bold"}},[e._v(" "+e._s(r["label_info"].length)+" ")])])]),t("b-col",[t("div",{staticClass:"dm-table__cell"},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[t("img",{attrs:{src:r["image_file"],width:"40",height:"40"}})])])]),t("b-col",[t("div",{staticClass:"dm-table__cell",staticStyle:{"margin-top":"7px"}},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[t("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"code-slash",scale:"1",variant:"info"}})],1)])])],1)}))],2)],1),t("b-col",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.1)"},attrs:{cols:"8"}},[t("b-container",[t("b-row",{staticStyle:{"border-bottom":"1px solid rgba(0, 0, 0, 0.1)"}},[t("b-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.1)",display:"flex","flex-direction":"row","justify-content":"center"}},[t("div",{staticClass:"dm-table__cell"},[t("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[e._v(" #"+e._s(e.activate_sample["sample_id"])+" ")])])]),t("b-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.1)"}},[t("div",{staticClass:"dm-table__cell"},[t("div",{staticStyle:{width:"200px",display:"flex",height:"100%","align-items":"center"}},[t("div",{staticClass:"lsf-space lsf-space_direction_horizontal lsf-space_size_small"},[t("div",{staticClass:"lsf-userpic lsf-annotations-list__userpic",staticStyle:{background:"rgb(179, 218, 216)",color:"rgb(0, 0, 0)"},attrs:{block:"lsf-annotations-list"}},[t("img",{staticClass:"lsf-userpic__avatar",staticStyle:{opacity:"0"},attrs:{alt:e.label_operator["full_name"]}}),t("span",{staticClass:"lsf-userpic__username"},[e._v(e._s(e.label_operator["short_name"]))])]),t("div",{staticClass:"lsf-space lsf-space_direction_vertical lsf-space_size_none"},[t("div",{staticClass:"lsf-annotations-list__user"},[t("span",{staticClass:"lsf-annotations-list__name"},[e._v(e._s(e.label_operator["full_name"]))]),t("span",{staticClass:"lsf-annotations-list__entity-id"},[e._v("#"+e._s(e.activate_sample["sample_id"]))])]),"completed"!=e.activate_sample["state"]?t("div",{staticClass:"lsf-annotations-list__created"},[e._v("created, "),t("time",{staticClass:"lsf-annotations-list__date",attrs:{tag:"div"}},[e._v(e._s(e.activate_sample["created_time"]))])]):t("div",{staticClass:"lsf-annotations-list__created"},[t("div",[e._v("completed, "),t("time",{staticClass:"lsf-annotations-list__date",attrs:{tag:"div"}},[e._v(e._s(e.activate_sample["completed_time"]))])]),t("div",[e._v("update, "),t("time",{staticClass:"lsf-annotations-list__date",attrs:{tag:"div"}},[e._v(e._s(e.activate_sample["update_time"]))])])])])])])])]),t("b-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.1)",display:"flex","flex-direction":"row","justify-content":"center"}},[t("div",{staticClass:"dm-table__cell",staticStyle:{"margin-top":"7px"}},[t("div",{staticStyle:{display:"flex",height:"100%","align-items":"center"}},[t("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"trash",scale:"2",variant:"info"},on:{click:function(t){return e.remove_annotations()}}})],1)])]),t("b-col",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center"}},[t("div",{staticClass:"dm-table__cell"},[t("div",{staticStyle:{width:"100%",display:"flex",height:"100%","align-items":"center"}},["completed"!=e.activate_sample["state"]?t("b-button",{staticStyle:{width:"100px"},attrs:{variant:"primary"},on:{click:function(t){return e.update_annotations()}}},[e._v("提交")]):t("b-button",{staticStyle:{width:"100px"},attrs:{variant:"primary"},on:{click:function(t){return e.update_annotations()}}},[e._v("更新")])],1)])]),t("b-col",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center"}},[t("div",{staticClass:"dm-table__cell"},[t("div",{staticStyle:{width:"100%",display:"flex",height:"100%","align-items":"center"}},[t("b-button",{staticStyle:{width:"100px"},attrs:{variant:"primary"},on:{click:function(t){return e.next()}}},[e._v("下一个")])],1)])])],1)],1),t("b-container",[t("b-row",[t("b-col",[t("b-container",[t("b-row",[t("b-col",{staticStyle:{height:"400px"}},[t("div",[t("div",{attrs:{id:"label-image"}})])])],1),t("hr"),"instance-level"==e.label_metas["label_level"]?t("b-row",e._l(e.label_metas["label_category"],(function(r,n){return t("b-col",{key:n},[n!=e.label_metas["activate_label_index"]?t("b-badge",{style:{width:"100px",height:"20px","background-color":r["background_color"],color:r["color"],cursor:"pointer"},on:{click:function(t){return e.switch_label_category(e.label_type,n,r)}}},[e._v(e._s(r["class_name"])+" ("+e._s(r["class_index"])+")")]):t("b-badge",{style:{width:"100px",height:"20px","background-color":"yellow",color:r["color"],cursor:"pointer"},on:{click:function(t){return e.switch_label_category(e.label_type,n,r)}}},[e._v(e._s(r["class_name"])+" ("+e._s(r["class_index"])+")")])],1)})),1):t("b-row",[t("b-col",e._l(e.label_metas["label_category"],(function(r,n){return t("div",{key:n,staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.choices,expression:"choices"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:r["class_name"],checked:Array.isArray(e.choices)?e._i(e.choices,r["class_name"])>-1:e.choices},on:{change:function(t){var n=e.choices,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=r["class_name"],s=e._i(n,a);i.checked?s<0&&(e.choices=n.concat([a])):s>-1&&(e.choices=n.slice(0,s).concat(n.slice(s+1)))}else e.choices=o}}}),t("label",{staticClass:"form-check-label"},[e._v(" "+e._s(r["class_name"])+" ")])])})),0)],1)],1)],1)],1)],1)],1)],1)],1)},i=[],o=r(9773),a=r.n(o),s={name:"Label",data(){return{img:r(6949),gMap:null,gFirstFeatureLayer:null,gFirstImageLayer:null,label_metas:{label_category:[],label_level:"",activate_label_index:-1},samples:[],activate_sample:{},label_operator:{full_name:"",short_name:""},now_page:0,page_size:50,more_show:!0,task_name:"",task_type:"",label_type:"",choices:[]}},mounted:function(){var e=this;e.axios.get("/antgo/api/label/task/").then((function(t){e.task_name=t.data.content["task_name"],e.task_type=t.data.content["task_type"],e.label_type=t.data.content["label_type"],e.label_operator=t.data.content["operator"],e.label_metas["label_category"]=t.data.content["label_metas"]["label_category"],e.label_metas["label_level"]=t.data.content["label_metas"]["level"],e.initMap(),e.setMode(e.label_type)})).catch((function(e){console.log(e)})),e.scrollMore(e.$route.params.id),e.$refs.samplelistcontent.addEventListener("scroll",this.handleScroll,!0),e.axios.get("/antgo/api/label/sample/get/",{params:{sample_i:e.$route.params.id}}).then((function(t){e.start_label_sample(t.data.content["sample"])})).catch((function(e){console.log(e)}))},methods:{initMap:function(){let e={};const t=new(a().Map)("label-image",{center:{x:100,y:100},zoom:1e3,mode:"ban",refreshDelayWhenZooming:!0,zoomWhenDrawing:!0,panWhenDrawing:!1,zoomWheelRatio:5,withHotKeys:!1}),n=new(a().Layer.Image)("layer-image",{src:r(6949),width:200,height:200,crossOrigin:!1,position:{x:0,y:0}},{name:"第一个图片图层"},{zIndex:5});t.events.on("click",(e=>{console.log("--click--",e)})),t.events.on("drawDone",((r,n,o)=>{if("MARKER"===r){const e=new(a().Marker)(""+ +new Date,{src:"",position:n,offset:{x:0,y:0}},{name:"第一个marker注记"});e.events.on("click",(e=>{t.markerLayer.removeMarkerById(e.id)})),t.markerLayer.addMarker(e)}else if("POINT"===r){if(this.label_metas["activate_label_index"]<0)return;n["sr"]=5;const e=new(a().Feature.Point)(""+ +new Date,n,{name:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["class_name"],label:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["class_index"]},{fillStyle:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["background_color"]});this.gFirstFeatureLayer.addFeature(e)}else if("LINE"===r){const r=t.getScale(),o=e.lineWidth/r,s=new(a().Feature.Line)(""+ +new Date,{...n,width:o},{name:"第一个矢量图层"},e);i.addFeature(s)}else if("RECT"===r){if(this.label_metas["activate_label_index"]<0)return;const e=new(a().Feature.Rect)(""+ +new Date,n,{name:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["class_name"],label:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["class_index"]},{fillStyle:"rgba(255,255,255,0.5)",strokeStyle:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["color"],lineWidth:2,fill:!0});this.gFirstFeatureLayer.addFeature(e)}else if("POLYGON"===r){if(this.label_metas["activate_label_index"]<0)return;const e=new(a().Feature.Polygon)(""+ +new Date,{points:n},{name:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["class_name"],label:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["class_index"]},{fillStyle:"rgba(255,255,255,0.5)",strokeStyle:this.label_metas["label_category"][this.label_metas["activate_label_index"]]["color"],lineWidth:2,fill:!0});this.gFirstFeatureLayer.addFeature(e)}})),t.events.on("boundsChanged",(e=>{console.log("--map boundsChanged--")})),t.events.on("featureSelected",(e=>{this.gFirstFeatureLayer.removeFeatureById(e.id)})),t.events.on("featureUnselected",(()=>{console.log("取消激活feature"),t.setActiveFeature(null)})),t.events.on("featureUpdated",((e,t)=>{console.log("feature updated")})),t.events.on("featureDeleted",(({id:e})=>{console.log("feature delete")})),t.addLayer(n);const i=new(a().Layer.Feature)("first-layer-feature",{name:"第一个矢量图层"},{zIndex:10});t.addLayer(i),this.gFirstImageLayer=n,this.gFirstFeatureLayer=i,this.gMap=t,window.onresize=function(){t&&t.resize()}},setMode:function(e){var t;switch(this.gMap.setMode(e),e){case"PAN":break;case"MARKER":break;case"POINT":t={fillStyle:"#9370DB",strokeStyle:"#f00"},this.gMap.setDrawingStyle(t);break;case"LINE":t={strokeStyle:"#FF0000",lineJoin:"round",lineCap:"round",lineWidth:5,arrow:!1},this.gMap.setDrawingStyle(t);break;case"POLYLINE":t={strokeStyle:"#FF1493",lineJoin:"round",lineCap:"round",lineWidth:1},this.gMap.setDrawingStyle(t);break;case"RECT":t={strokeStyle:"#f00",lineWidth:1},this.gMap.setDrawingStyle(t);break;case"POLYGON":t={strokeStyle:"#00f",fillStyle:"#0f0",globalAlpha:.3,lineWidth:1,fill:!0,stroke:!0},this.gMap.setDrawingStyle(t);break;case"TEXT":t={fillStyle:"#00f",lineWidth:30},this.gMap.setDrawingStyle(t);break;default:break}},switch_label_category:function(e,t,r){var n=r["color"],i={strokeStyle:n,lineWidth:1};this.gMap.setDrawingStyle(i),this.label_metas["activate_label_index"]=t},remove_annotations:function(){var e=this.gFirstFeatureLayer.getAllFeatures();for(var t in e)this.gFirstFeatureLayer.removeFeatureById(e[t].id)},update_annotations:function(){var e=[],t=this.gFirstFeatureLayer.getAllFeatures();for(var r in t)if("RECT"==t[r].type){var n=t[r].shape.width,i=t[r].shape.height,o=t[r].shape.x,a=t[r].shape.y,s=t[r].props.label;e.push({shape:{width:n,height:i,x:o,y:a},type:"RECT",label:s})}else"POINT"==t[r].type?e.push({shape:{x:t[r].shape.x,y:t[r].shape.y,sr:t[r].shape.sr},type:"POINT",label:t[r].props.label}):"POLYGON"==t[r].type&&e.push({shape:{points:t[r].shape.points},type:"POLYGON",label:t[r].props.label});this.choices.length>0&&e.push({type:"CHOICES",label:this.choices}),this.activate_sample["label_info"]=e,this.samples[this.activate_sample["sample_id"]]["label_info"]=e;var l=this;let c=new FormData;c.append("sample",JSON.stringify(this.activate_sample)),l.axios.post("/antgo/api/label/sample/update/",c).then((function(e){var t=e.data.content["sample_id"];l.samples[t]["completed_time"]=e.data.content["completed_time"],l.samples[t]["update_time"]=e.data.content["update_time"],l.samples[t]["state"]=e.data.content["sample_state"],l.activate_sample["completed_time"]=e.data.content["completed_time"],l.activate_sample["update_time"]=e.data.content["update_time"],l.activate_sample["state"]=e.data.content["sample_state"]})).catch((function(e){console.log(e)}))},show_anno_info:function(e){},start_label_sample:function(e){this.activate_sample=e,this.gMap.removeLayerById(this.gFirstImageLayer.id);const t=new(a().Layer.Image)("layer-image",{src:e["image_file"],width:e["width"],height:e["height"],crossOrigin:!1,position:{x:0,y:0}},{name:e["image_file"]},{zIndex:5});this.gMap.addLayer(t),this.gFirstImageLayer=t,this.clear_state();var r=e["label_info"];for(var n in r){var i=r[n];if("RECT"==i["type"]){const e=new(a().Feature.Rect)(""+ +new Date,i["shape"],{name:this.label_metas["label_category"][i["label"]]["class_name"],label:this.label_metas["label_category"][i["label"]]["class_index"]},{fillStyle:"rgba(255,255,255,0.5)",strokeStyle:this.label_metas["label_category"][i["label"]]["color"],lineWidth:2,fill:!0});this.gFirstFeatureLayer.addFeature(e)}else if("POINT"==i["type"]){const e=new(a().Feature.Point)(""+ +new Date,i["shape"],{name:this.label_metas["label_category"][i["label"]]["class_name"],label:this.label_metas["label_category"][i["label"]]["class_index"]},{fillStyle:this.label_metas["label_category"][i["label"]]["background_color"]});this.gFirstFeatureLayer.addFeature(e)}else if("POLYGON"==i["type"]){const e=new(a().Feature.Polygon)(""+ +new Date,{points:i["shape"]["points"]},{name:this.label_metas["label_category"][i["label"]]["class_name"],label:this.label_metas["label_category"][i["label"]]["class_index"]},{fillStyle:"rgba(255,255,255,0.5)",strokeStyle:this.label_metas["label_category"][i["label"]]["color"],lineWidth:2,fill:!0});this.gFirstFeatureLayer.addFeature(e)}else"CHOICES"==i["type"]&&(this.choices=i["choices"])}},clear_state:function(){this.label_metas.activate_label_index=-1;var e=this.gFirstFeatureLayer.getAllFeatures();for(var t in e)this.gFirstFeatureLayer.removeFeatureById(e[t].id);var r={strokeStyle:"#f00",lineWidth:1};this.gMap.setDrawingStyle(r),this.choices=[]},next:function(){var e=this;e.axios.get("/antgo/api/label/sample/next/").then((function(t){"finish"!=t.data.content["stage"]?(e.start_label_sample(t.data.content["sample"]),e.now_page*e.page_size<=t.data.content["sample"]["sample_id"]&&e.axios.get("/antgo/api/label/sample/",{params:{page_index:e.now_page,index_offset:t.data.content["sample"]["sample_id"],page_size:50}}).then((function(t){var r=t.data.content["total_sample_num"];for(var n in t.data.content["page_samples"])e.samples.push(t.data.content["page_samples"][n]);e.samples.length<r?e.more_show=!0:e.more_show=!1,e.now_page=t.data.content["page_index"]})).catch((function(e){}))):e.$router.push({path:"/"})})).catch((function(e){console.log(e)}))},select:function(e){var t=this;t.axios.get("/antgo/api/label/sample/get/",{params:{sample_i:e}}).then((function(e){t.start_label_sample(e.data.content["sample"])})).catch((function(e){console.log(e)}))},scrollMore:function(e){var t=this,r={};r=e<0?{page_index:t.now_page,page_size:50}:{page_index:t.now_page,index_offset:e,page_size:50},t.axios.get("/antgo/api/label/sample/",{params:r}).then((function(e){var r=e.data.content["total_sample_num"];for(var n in e.data.content["page_samples"])t.samples.push(e.data.content["page_samples"][n]);t.samples.length<r?t.more_show=!0:t.more_show=!1,t.now_page=e.data.content["page_index"]})).catch((function(e){}))},handleScroll:function(e){var t=e.target.scrollTop,r=e.target.clientHeight,n=e.target.scrollHeight;t+r==n&&this.scrollMore(-1)}}},l=s,c=r(1001),u=(0,c.Z)(l,n,i,!1,null,null,null),h=u.exports},9773:function(e,t,r){r(1703),function(t,r){e.exports=r()}(0,(function(){"use strict";function e(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=t.apply(r,n);function s(t){e(a,i,o,s,l,"next",t)}function l(t){e(a,i,o,s,l,"throw",t)}s(void 0)}))}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self?self:{},l={exports:{}};(function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new j(n||[]);return o._invoke=P(e,r,a),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",v="executing",d="completed",p={};function y(){}function m(){}function g(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==r&&n.call(x,o)&&(b=x);var k=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;function o(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function P(e,t,r){var n=h;return function(i,o){if(n===v)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return I()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var l=u(e,t,r);if("normal"===l.type){if(n=r.done?d:f,l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=d,r.method="throw",r.arg=l.arg)}}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=u(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var r=e[o];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){while(++i<e.length)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return m.prototype=g,l(k,"constructor",g),l(g,"constructor",m),m.displayName=l(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(k),l(k,s,"Generator"),l(k,o,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;D(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(l);var c,u=l.exports,h={exports:{}},f="object"===typeof Reflect?Reflect:null,v=f&&"function"===typeof f.apply?f.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function d(e){console&&console.warn&&console.warn(e)}c=f&&"function"===typeof f.ownKeys?f.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var p=Number.isNaN||function(e){return e!==e};function y(){y.init.call(this)}h.exports=y,h.exports.once=D,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var m=10;function g(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function b(e){return void 0===e._maxListeners?y.defaultMaxListeners:e._maxListeners}function w(e,t,r,n){var i,o,a;if(g(r),o=e._events,void 0===o?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"===typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=b(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,d(s)}return e}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=x.bind(n);return i.listener=r,n.wrapFn=i,i}function S(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?C(i):P(i,i.length)}function O(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function P(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function _(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function C(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function D(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}A(e,t,o,{once:!0}),"error"!==t&&j(e,i,{once:!0})}))}function j(e,t,r){"function"===typeof e.on&&A(e,"error",t,r)}function A(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(e){if("number"!==typeof e||e<0||p(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");m=e}}),y.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||p(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},y.prototype.getMaxListeners=function(){return b(this)},y.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"===typeof s)v(s,this,t);else{var l=s.length,c=P(s,l);for(r=0;r<l;++r)v(c[r],this,t)}return!0},y.prototype.addListener=function(e,t){return w(this,e,t,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(e,t){return w(this,e,t,!0)},y.prototype.once=function(e,t){return g(t),this.on(e,k(this,e,t)),this},y.prototype.prependOnceListener=function(e,t){return g(t),this.prependListener(e,k(this,e,t)),this},y.prototype.removeListener=function(e,t){var r,n,i,o,a;if(g(t),n=this._events,void 0===n)return this;if(r=n[e],void 0===r)return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():_(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)i=o[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},y.prototype.listeners=function(e){return S(this,e,!0)},y.prototype.rawListeners=function(e){return S(this,e,!1)},y.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):O.call(e,t)},y.prototype.listenerCount=O,y.prototype.eventNames=function(){return this._eventsCount>0?c(this._events):[]};var I=h.exports,M="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;
/*!
   * hotkeys-js v3.8.7
   * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
   * 
   * Copyright (c) 2021 kenny wong <wowohoo@qq.com>
   * http://jaywcjlove.github.io/hotkeys
   * 
   * Licensed under the MIT license.
   */function L(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on".concat(t),(function(){r(window.event)}))}function R(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function E(e){"string"!==typeof e&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function T(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,i=!0,o=0;o<r.length;o++)-1===n.indexOf(r[o])&&(i=!1);return i}for(var F={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":M?173:189,"=":M?61:187,";":M?59:186,"'":222,"[":219,"]":221,"\\":220},z={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},B={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},W={16:!1,18:!1,17:!1,91:!1},U={},G=1;G<20;G++)F["f".concat(G)]=111+G;var N=[],K="all",Y=[],Z=function(e){return F[e.toLowerCase()]||z[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function X(e){K=e||"all"}function V(){return K||"all"}function Q(){return N.slice(0)}function J(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==r&&"TEXTAREA"!==r&&"SELECT"!==r||t.readOnly)||(n=!1),n}function H(e){return"string"===typeof e&&(e=Z(e)),-1!==N.indexOf(e)}function q(e,t){var r,n;for(var i in e||(e=V()),U)if(Object.prototype.hasOwnProperty.call(U,i))for(r=U[i],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;V()===e&&X(t||"all")}function $(e){var t=e.keyCode||e.which||e.charCode,r=N.indexOf(t);if(r>=0&&N.splice(r,1),e.key&&"meta"===e.key.toLowerCase()&&N.splice(0,N.length),93!==t&&224!==t||(t=91),t in W)for(var n in W[t]=!1,z)z[n]===t&&(oe[n]=!1)}function ee(e){if(e){if(Array.isArray(e))e.forEach((function(e){e.key&&te(e)}));else if("object"===typeof e)e.key&&te(e);else if("string"===typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=r[0],o=r[1];"function"===typeof i&&(o=i,i=""),te({key:e,scope:i,method:o,splitKey:"+"})}}else Object.keys(U).forEach((function(e){return delete U[e]}))}var te=function(e){var t=e.key,r=e.scope,n=e.method,i=e.splitKey,o=void 0===i?"+":i,a=E(t);a.forEach((function(e){var t=e.split(o),i=t.length,a=t[i-1],s="*"===a?"*":Z(a);if(U[s]){r||(r=V());var l=i>1?R(z,t):[];U[s]=U[s].map((function(e){var t=!n||e.method===n;return t&&e.scope===r&&T(e.mods,l)?{}:e}))}}))};function re(e,t,r){var n;if(t.scope===r||"all"===t.scope){for(var i in n=t.mods.length>0,W)Object.prototype.hasOwnProperty.call(W,i)&&(!W[i]&&t.mods.indexOf(+i)>-1||W[i]&&-1===t.mods.indexOf(+i))&&(n=!1);(0!==t.mods.length||W[16]||W[18]||W[17]||W[91])&&!n&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function ne(e){var t=U["*"],r=e.keyCode||e.which||e.charCode;if(oe.filter.call(this,e)){if(93!==r&&224!==r||(r=91),-1===N.indexOf(r)&&229!==r&&N.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var r=B[t];e[t]&&-1===N.indexOf(r)?N.push(r):!e[t]&&N.indexOf(r)>-1?N.splice(N.indexOf(r),1):"metaKey"===t&&e[t]&&3===N.length&&(e.ctrlKey||e.shiftKey||e.altKey||(N=N.slice(N.indexOf(r))))})),r in W){for(var n in W[r]=!0,z)z[n]===r&&(oe[n]=!0);if(!t)return}for(var i in W)Object.prototype.hasOwnProperty.call(W,i)&&(W[i]=e[B[i]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===N.indexOf(17)&&N.push(17),-1===N.indexOf(18)&&N.push(18),W[17]=!0,W[18]=!0);var o=V();if(t)for(var a=0;a<t.length;a++)t[a].scope===o&&("keydown"===e.type&&t[a].keydown||"keyup"===e.type&&t[a].keyup)&&re(e,t[a],o);if(r in U)for(var s=0;s<U[r].length;s++)if(("keydown"===e.type&&U[r][s].keydown||"keyup"===e.type&&U[r][s].keyup)&&U[r][s].key){for(var l=U[r][s],c=l.splitKey,u=l.key.split(c),h=[],f=0;f<u.length;f++)h.push(Z(u[f]));h.sort().join("")===N.sort().join("")&&re(e,l,o)}}}function ie(e){return Y.indexOf(e)>-1}function oe(e,t,r){N=[];var n=E(e),i=[],o="all",a=document,s=0,l=!1,c=!0,u="+";for(void 0===r&&"function"===typeof t&&(r=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(a=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(c=t.keydown),"string"===typeof t.splitKey&&(u=t.splitKey)),"string"===typeof t&&(o=t);s<n.length;s++)e=n[s].split(u),i=[],e.length>1&&(i=R(z,e)),e=e[e.length-1],e="*"===e?"*":Z(e),e in U||(U[e]=[]),U[e].push({keyup:l,keydown:c,scope:o,mods:i,shortcut:n[s],method:r,key:n[s],splitKey:u});"undefined"!==typeof a&&!ie(a)&&window&&(Y.push(a),L(a,"keydown",(function(e){ne(e)})),L(window,"focus",(function(){N=[]})),L(a,"keyup",(function(e){ne(e),$(e)})))}var ae={setScope:X,getScope:V,deleteScope:q,getPressedKeyCodes:Q,isPressed:H,filter:J,unbind:ee};for(var se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&(oe[se]=ae[se]);if("undefined"!==typeof window){var le=window.hotkeys;oe.noConflict=function(e){return e&&window.hotkeys===oe&&(window.hotkeys=le),oe},window.hotkeys=oe}var ce="object"==typeof s&&s&&s.Object===Object&&s,ue=ce,he=ue,fe="object"==typeof self&&self&&self.Object===Object&&self,ve=he||fe||Function("return this")(),de=ve,pe=de,ye=pe.Symbol,me=ye,ge=me,be=Object.prototype,we=be.hasOwnProperty,xe=be.toString,ke=ge?ge.toStringTag:void 0;function Se(e){var t=we.call(e,ke),r=e[ke];try{e[ke]=void 0;var n=!0}catch(o){}var i=xe.call(e);return n&&(t?e[ke]=r:delete e[ke]),i}var Oe=Se,Pe=Object.prototype,_e=Pe.toString;function Ce(e){return _e.call(e)}var De=Ce,je=me,Ae=Oe,Ie=De,Me="[object Null]",Le="[object Undefined]",Re=je?je.toStringTag:void 0;function Ee(e){return null==e?void 0===e?Le:Me:Re&&Re in Object(e)?Ae(e):Ie(e)}var Te=Ee;function Fe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var ze=Fe,Be=Te,We=ze,Ue="[object AsyncFunction]",Ge="[object Function]",Ne="[object GeneratorFunction]",Ke="[object Proxy]";function Ye(e){if(!We(e))return!1;var t=Be(e);return t==Ge||t==Ne||t==Ue||t==Ke}var Ze=Ye,Xe=de,Ve=Xe["__core-js_shared__"],Qe=Ve,Je=Qe,He=function(){var e=/[^.]+$/.exec(Je&&Je.keys&&Je.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qe(e){return!!He&&He in e}var $e=qe,et=Function.prototype,tt=et.toString;function rt(e){if(null!=e){try{return tt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var nt=rt,it=Ze,ot=$e,at=ze,st=nt,lt=/[\\^$.*+?()[\]{}|]/g,ct=/^\[object .+?Constructor\]$/,ut=Function.prototype,ht=Object.prototype,ft=ut.toString,vt=ht.hasOwnProperty,dt=RegExp("^"+ft.call(vt).replace(lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pt(e){if(!at(e)||ot(e))return!1;var t=it(e)?dt:ct;return t.test(st(e))}var yt=pt;function mt(e,t){return null==e?void 0:e[t]}var gt=mt,bt=yt,wt=gt;function xt(e,t){var r=wt(e,t);return bt(r)?r:void 0}var kt=xt,St=kt,Ot=function(){try{var e=St(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Pt=Ot,_t=Pt;function Ct(e,t,r){"__proto__"==t&&_t?_t(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Dt=Ct;function jt(e,t){return e===t||e!==e&&t!==t}var At=jt,It=Dt,Mt=At,Lt=Object.prototype,Rt=Lt.hasOwnProperty;function Et(e,t,r){var n=e[t];Rt.call(e,t)&&Mt(n,r)&&(void 0!==r||t in e)||It(e,t,r)}var Tt=Et,Ft=Tt,zt=Dt;function Bt(e,t,r,n){var i=!r;r||(r={});var o=-1,a=t.length;while(++o<a){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?zt(r,s,l):Ft(r,s,l)}return r}var Wt=Bt;function Ut(e){return e}var Gt=Ut;function Nt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Kt=Nt,Yt=Kt,Zt=Math.max;function Xt(e,t,r){return t=Zt(void 0===t?e.length-1:t,0),function(){var n=arguments,i=-1,o=Zt(n.length-t,0),a=Array(o);while(++i<o)a[i]=n[t+i];i=-1;var s=Array(t+1);while(++i<t)s[i]=n[i];return s[t]=r(a),Yt(e,this,s)}}var Vt=Xt;function Qt(e){return function(){return e}}var Jt=Qt,Ht=Jt,qt=Pt,$t=Gt,er=qt?function(e,t){return qt(e,"toString",{configurable:!0,enumerable:!1,value:Ht(t),writable:!0})}:$t,tr=er,rr=800,nr=16,ir=Date.now;function or(e){var t=0,r=0;return function(){var n=ir(),i=nr-(n-r);if(r=n,i>0){if(++t>=rr)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ar=or,sr=tr,lr=ar,cr=lr(sr),ur=cr,hr=Gt,fr=Vt,vr=ur;function dr(e,t){return vr(fr(e,t,hr),e+"")}var pr=dr,yr=9007199254740991;function mr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=yr}var gr=mr,br=Ze,wr=gr;function xr(e){return null!=e&&wr(e.length)&&!br(e)}var kr=xr,Sr=9007199254740991,Or=/^(?:0|[1-9]\d*)$/;function Pr(e,t){var r=typeof e;return t=null==t?Sr:t,!!t&&("number"==r||"symbol"!=r&&Or.test(e))&&e>-1&&e%1==0&&e<t}var _r=Pr,Cr=At,Dr=kr,jr=_r,Ar=ze;function Ir(e,t,r){if(!Ar(r))return!1;var n=typeof t;return!!("number"==n?Dr(r)&&jr(t,r.length):"string"==n&&t in r)&&Cr(r[t],e)}var Mr=Ir,Lr=pr,Rr=Mr;function Er(e){return Lr((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Rr(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);while(++n<i){var s=r[n];s&&e(t,s,n,o)}return t}))}var Tr=Er,Fr=Object.prototype;function zr(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||Fr;return e===r}var Br=zr;function Wr(e,t){var r=-1,n=Array(e);while(++r<e)n[r]=t(r);return n}var Ur=Wr;function Gr(e){return null!=e&&"object"==typeof e}var Nr=Gr,Kr=Te,Yr=Nr,Zr="[object Arguments]";function Xr(e){return Yr(e)&&Kr(e)==Zr}var Vr=Xr,Qr=Vr,Jr=Nr,Hr=Object.prototype,qr=Hr.hasOwnProperty,$r=Hr.propertyIsEnumerable,en=Qr(function(){return arguments}())?Qr:function(e){return Jr(e)&&qr.call(e,"callee")&&!$r.call(e,"callee")},tn=en,rn=Array.isArray,nn=rn,on={exports:{}};function an(){return!1}var sn=an;(function(e,t){var r=de,n=sn,i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||n;e.exports=c})(on,on.exports);var ln=Te,cn=gr,un=Nr,hn="[object Arguments]",fn="[object Array]",vn="[object Boolean]",dn="[object Date]",pn="[object Error]",yn="[object Function]",mn="[object Map]",gn="[object Number]",bn="[object Object]",wn="[object RegExp]",xn="[object Set]",kn="[object String]",Sn="[object WeakMap]",On="[object ArrayBuffer]",Pn="[object DataView]",_n="[object Float32Array]",Cn="[object Float64Array]",Dn="[object Int8Array]",jn="[object Int16Array]",An="[object Int32Array]",In="[object Uint8Array]",Mn="[object Uint8ClampedArray]",Ln="[object Uint16Array]",Rn="[object Uint32Array]",En={};function Tn(e){return un(e)&&cn(e.length)&&!!En[ln(e)]}En[_n]=En[Cn]=En[Dn]=En[jn]=En[An]=En[In]=En[Mn]=En[Ln]=En[Rn]=!0,En[hn]=En[fn]=En[On]=En[vn]=En[Pn]=En[dn]=En[pn]=En[yn]=En[mn]=En[gn]=En[bn]=En[wn]=En[xn]=En[kn]=En[Sn]=!1;var Fn=Tn;function zn(e){return function(t){return e(t)}}var Bn=zn,Wn={exports:{}};(function(e,t){var r=ue,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s})(Wn,Wn.exports);var Un=Fn,Gn=Bn,Nn=Wn.exports,Kn=Nn&&Nn.isTypedArray,Yn=Kn?Gn(Kn):Un,Zn=Yn,Xn=Ur,Vn=tn,Qn=nn,Jn=on.exports,Hn=_r,qn=Zn,$n=Object.prototype,ei=$n.hasOwnProperty;function ti(e,t){var r=Qn(e),n=!r&&Vn(e),i=!r&&!n&&Jn(e),o=!r&&!n&&!i&&qn(e),a=r||n||i||o,s=a?Xn(e.length,String):[],l=s.length;for(var c in e)!t&&!ei.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Hn(c,l))||s.push(c);return s}var ri=ti;function ni(e,t){return function(r){return e(t(r))}}var ii=ni,oi=ii,ai=oi(Object.keys,Object),si=ai,li=Br,ci=si,ui=Object.prototype,hi=ui.hasOwnProperty;function fi(e){if(!li(e))return ci(e);var t=[];for(var r in Object(e))hi.call(e,r)&&"constructor"!=r&&t.push(r);return t}var vi=fi,di=ri,pi=vi,yi=kr;function mi(e){return yi(e)?di(e):pi(e)}var gi=mi,bi=Tt,wi=Wt,xi=Tr,ki=kr,Si=Br,Oi=gi,Pi=Object.prototype,_i=Pi.hasOwnProperty,Ci=xi((function(e,t){if(Si(t)||ki(t))wi(t,Oi(t),e);else for(var r in t)_i.call(t,r)&&bi(e,r,t[r])})),Di=Ci;function ji(e,t){var r=-1,n=null==e?0:e.length,i=Array(n);while(++r<n)i[r]=t(e[r],r,e);return i}var Ai=ji,Ii=Te,Mi=Nr,Li="[object Symbol]";function Ri(e){return"symbol"==typeof e||Mi(e)&&Ii(e)==Li}var Ei=Ri,Ti=me,Fi=Ai,zi=nn,Bi=Ei,Wi=1/0,Ui=Ti?Ti.prototype:void 0,Gi=Ui?Ui.toString:void 0;function Ni(e){if("string"==typeof e)return e;if(zi(e))return Fi(e,Ni)+"";if(Bi(e))return Gi?Gi.call(e):"";var t=e+"";return"0"==t&&1/e==-Wi?"-0":t}var Ki=Ni,Yi=Ki;function Zi(e){return null==e?"":Yi(e)}var Xi=Zi,Vi=Xi,Qi=0;function Ji(e){var t=++Qi;return Vi(e)+t}var Hi=Ji;function qi(e,t){var r=-1,n=null==e?0:e.length;while(++r<n)if(!1===t(e[r],r,e))break;return e}var $i=qi;function eo(e){return function(t,r,n){var i=-1,o=Object(t),a=n(t),s=a.length;while(s--){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}var to=eo,ro=to,no=ro(),io=no,oo=io,ao=gi;function so(e,t){return e&&oo(e,t,ao)}var lo=so,co=kr;function uo(e,t){return function(r,n){if(null==r)return r;if(!co(r))return e(r,n);var i=r.length,o=t?i:-1,a=Object(r);while(t?o--:++o<i)if(!1===n(a[o],o,a))break;return r}}var ho=uo,fo=lo,vo=ho,po=vo(fo),yo=po,mo=Gt;function go(e){return"function"==typeof e?e:mo}var bo=go,wo=$i,xo=yo,ko=bo,So=nn;function Oo(e,t){var r=So(e)?wo:xo;return r(e,ko(t))}var Po=Oo,_o=nn,Co=Ei,Do=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jo=/^\w*$/;function Ao(e,t){if(_o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Co(e))||(jo.test(e)||!Do.test(e)||null!=t&&e in Object(t))}var Io=Ao,Mo=kt,Lo=Mo(Object,"create"),Ro=Lo,Eo=Ro;function To(){this.__data__=Eo?Eo(null):{},this.size=0}var Fo=To;function zo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Bo=zo,Wo=Ro,Uo="__lodash_hash_undefined__",Go=Object.prototype,No=Go.hasOwnProperty;function Ko(e){var t=this.__data__;if(Wo){var r=t[e];return r===Uo?void 0:r}return No.call(t,e)?t[e]:void 0}var Yo=Ko,Zo=Ro,Xo=Object.prototype,Vo=Xo.hasOwnProperty;function Qo(e){var t=this.__data__;return Zo?void 0!==t[e]:Vo.call(t,e)}var Jo=Qo,Ho=Ro,qo="__lodash_hash_undefined__";function $o(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ho&&void 0===t?qo:t,this}var ea=$o,ta=Fo,ra=Bo,na=Yo,ia=Jo,oa=ea;function aa(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}aa.prototype.clear=ta,aa.prototype["delete"]=ra,aa.prototype.get=na,aa.prototype.has=ia,aa.prototype.set=oa;var sa=aa;function la(){this.__data__=[],this.size=0}var ca=la,ua=At;function ha(e,t){var r=e.length;while(r--)if(ua(e[r][0],t))return r;return-1}var fa=ha,va=fa,da=Array.prototype,pa=da.splice;function ya(e){var t=this.__data__,r=va(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():pa.call(t,r,1),--this.size,!0}var ma=ya,ga=fa;function ba(e){var t=this.__data__,r=ga(t,e);return r<0?void 0:t[r][1]}var wa=ba,xa=fa;function ka(e){return xa(this.__data__,e)>-1}var Sa=ka,Oa=fa;function Pa(e,t){var r=this.__data__,n=Oa(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _a=Pa,Ca=ca,Da=ma,ja=wa,Aa=Sa,Ia=_a;function Ma(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}Ma.prototype.clear=Ca,Ma.prototype["delete"]=Da,Ma.prototype.get=ja,Ma.prototype.has=Aa,Ma.prototype.set=Ia;var La=Ma,Ra=kt,Ea=de,Ta=Ra(Ea,"Map"),Fa=Ta,za=sa,Ba=La,Wa=Fa;function Ua(){this.size=0,this.__data__={hash:new za,map:new(Wa||Ba),string:new za}}var Ga=Ua;function Na(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var Ka=Na,Ya=Ka;function Za(e,t){var r=e.__data__;return Ya(t)?r["string"==typeof t?"string":"hash"]:r.map}var Xa=Za,Va=Xa;function Qa(e){var t=Va(this,e)["delete"](e);return this.size-=t?1:0,t}var Ja=Qa,Ha=Xa;function qa(e){return Ha(this,e).get(e)}var $a=qa,es=Xa;function ts(e){return es(this,e).has(e)}var rs=ts,ns=Xa;function is(e,t){var r=ns(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var os=is,as=Ga,ss=Ja,ls=$a,cs=rs,us=os;function hs(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}hs.prototype.clear=as,hs.prototype["delete"]=ss,hs.prototype.get=ls,hs.prototype.has=cs,hs.prototype.set=us;var fs=hs,vs=fs,ds="Expected a function";function ps(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ds);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(ps.Cache||vs),r}ps.Cache=vs;var ys=ps,ms=ys,gs=500;function bs(e){var t=ms(e,(function(e){return r.size===gs&&r.clear(),e})),r=t.cache;return t}var ws=bs,xs=ws,ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ss=/\\(\\)?/g,Os=xs((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ks,(function(e,r,n,i){t.push(n?i.replace(Ss,"$1"):r||e)})),t})),Ps=Os,_s=nn,Cs=Io,Ds=Ps,js=Xi;function As(e,t){return _s(e)?e:Cs(e,t)?[e]:Ds(js(e))}var Is=As,Ms=Ei,Ls=1/0;function Rs(e){if("string"==typeof e||Ms(e))return e;var t=e+"";return"0"==t&&1/e==-Ls?"-0":t}var Es=Rs,Ts=Is,Fs=Es;function zs(e,t){t=Ts(t,e);var r=0,n=t.length;while(null!=e&&r<n)e=e[Fs(t[r++])];return r&&r==n?e:void 0}var Bs=zs,Ws=Bs;function Us(e,t,r){var n=null==e?void 0:Ws(e,t);return void 0===n?r:n}var Gs=Us,Ns=Te,Ks=Nr,Ys="[object Number]";function Zs(e){return"number"==typeof e||Ks(e)&&Ns(e)==Ys}var Xs=Zs,Vs=La;function Qs(){this.__data__=new Vs,this.size=0}var Js=Qs;function Hs(e){var t=this.__data__,r=t["delete"](e);return this.size=t.size,r}var qs=Hs;function $s(e){return this.__data__.get(e)}var el=$s;function tl(e){return this.__data__.has(e)}var rl=tl,nl=La,il=Fa,ol=fs,al=200;function sl(e,t){var r=this.__data__;if(r instanceof nl){var n=r.__data__;if(!il||n.length<al-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ol(n)}return r.set(e,t),this.size=r.size,this}var ll=sl,cl=La,ul=Js,hl=qs,fl=el,vl=rl,dl=ll;function pl(e){var t=this.__data__=new cl(e);this.size=t.size}pl.prototype.clear=ul,pl.prototype["delete"]=hl,pl.prototype.get=fl,pl.prototype.has=vl,pl.prototype.set=dl;var yl=pl,ml=Wt,gl=gi;function bl(e,t){return e&&ml(t,gl(t),e)}var wl=bl;function xl(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var kl=xl,Sl=ze,Ol=Br,Pl=kl,_l=Object.prototype,Cl=_l.hasOwnProperty;function Dl(e){if(!Sl(e))return Pl(e);var t=Ol(e),r=[];for(var n in e)("constructor"!=n||!t&&Cl.call(e,n))&&r.push(n);return r}var jl=Dl,Al=ri,Il=jl,Ml=kr;function Ll(e){return Ml(e)?Al(e,!0):Il(e)}var Rl=Ll,El=Wt,Tl=Rl;function Fl(e,t){return e&&El(t,Tl(t),e)}var zl=Fl,Bl={exports:{}};function Wl(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n)t[r]=e[r];return t}(function(e,t){var r=de,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}e.exports=l})(Bl,Bl.exports);var Ul=Wl;function Gl(e,t){var r=-1,n=null==e?0:e.length,i=0,o=[];while(++r<n){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var Nl=Gl;function Kl(){return[]}var Yl=Kl,Zl=Nl,Xl=Yl,Vl=Object.prototype,Ql=Vl.propertyIsEnumerable,Jl=Object.getOwnPropertySymbols,Hl=Jl?function(e){return null==e?[]:(e=Object(e),Zl(Jl(e),(function(t){return Ql.call(e,t)})))}:Xl,ql=Hl,$l=Wt,ec=ql;function tc(e,t){return $l(e,ec(e),t)}var rc=tc;function nc(e,t){var r=-1,n=t.length,i=e.length;while(++r<n)e[i+r]=t[r];return e}var ic=nc,oc=ii,ac=oc(Object.getPrototypeOf,Object),sc=ac,lc=ic,cc=sc,uc=ql,hc=Yl,fc=Object.getOwnPropertySymbols,vc=fc?function(e){var t=[];while(e)lc(t,uc(e)),e=cc(e);return t}:hc,dc=vc,pc=Wt,yc=dc;function mc(e,t){return pc(e,yc(e),t)}var gc=mc,bc=ic,wc=nn;function xc(e,t,r){var n=t(e);return wc(e)?n:bc(n,r(e))}var kc=xc,Sc=kc,Oc=ql,Pc=gi;function _c(e){return Sc(e,Pc,Oc)}var Cc=_c,Dc=kc,jc=dc,Ac=Rl;function Ic(e){return Dc(e,Ac,jc)}var Mc=Ic,Lc=kt,Rc=de,Ec=Lc(Rc,"DataView"),Tc=Ec,Fc=kt,zc=de,Bc=Fc(zc,"Promise"),Wc=Bc,Uc=kt,Gc=de,Nc=Uc(Gc,"Set"),Kc=Nc,Yc=kt,Zc=de,Xc=Yc(Zc,"WeakMap"),Vc=Xc,Qc=Tc,Jc=Fa,Hc=Wc,qc=Kc,$c=Vc,eu=Te,tu=nt,ru="[object Map]",nu="[object Object]",iu="[object Promise]",ou="[object Set]",au="[object WeakMap]",su="[object DataView]",lu=tu(Qc),cu=tu(Jc),uu=tu(Hc),hu=tu(qc),fu=tu($c),vu=eu;(Qc&&vu(new Qc(new ArrayBuffer(1)))!=su||Jc&&vu(new Jc)!=ru||Hc&&vu(Hc.resolve())!=iu||qc&&vu(new qc)!=ou||$c&&vu(new $c)!=au)&&(vu=function(e){var t=eu(e),r=t==nu?e.constructor:void 0,n=r?tu(r):"";if(n)switch(n){case lu:return su;case cu:return ru;case uu:return iu;case hu:return ou;case fu:return au}return t});var du=vu,pu=Object.prototype,yu=pu.hasOwnProperty;function mu(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&yu.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var gu=mu,bu=de,wu=bu.Uint8Array,xu=wu,ku=xu;function Su(e){var t=new e.constructor(e.byteLength);return new ku(t).set(new ku(e)),t}var Ou=Su,Pu=Ou;function _u(e,t){var r=t?Pu(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Cu=_u,Du=/\w*$/;function ju(e){var t=new e.constructor(e.source,Du.exec(e));return t.lastIndex=e.lastIndex,t}var Au=ju,Iu=me,Mu=Iu?Iu.prototype:void 0,Lu=Mu?Mu.valueOf:void 0;function Ru(e){return Lu?Object(Lu.call(e)):{}}var Eu=Ru,Tu=Ou;function Fu(e,t){var r=t?Tu(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var zu=Fu,Bu=Ou,Wu=Cu,Uu=Au,Gu=Eu,Nu=zu,Ku="[object Boolean]",Yu="[object Date]",Zu="[object Map]",Xu="[object Number]",Vu="[object RegExp]",Qu="[object Set]",Ju="[object String]",Hu="[object Symbol]",qu="[object ArrayBuffer]",$u="[object DataView]",eh="[object Float32Array]",th="[object Float64Array]",rh="[object Int8Array]",nh="[object Int16Array]",ih="[object Int32Array]",oh="[object Uint8Array]",ah="[object Uint8ClampedArray]",sh="[object Uint16Array]",lh="[object Uint32Array]";function ch(e,t,r){var n=e.constructor;switch(t){case qu:return Bu(e);case Ku:case Yu:return new n(+e);case $u:return Wu(e,r);case eh:case th:case rh:case nh:case ih:case oh:case ah:case sh:case lh:return Nu(e,r);case Zu:return new n;case Xu:case Ju:return new n(e);case Vu:return Uu(e);case Qu:return new n;case Hu:return Gu(e)}}var uh=ch,hh=ze,fh=Object.create,vh=function(){function e(){}return function(t){if(!hh(t))return{};if(fh)return fh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),dh=vh,ph=dh,yh=sc,mh=Br;function gh(e){return"function"!=typeof e.constructor||mh(e)?{}:ph(yh(e))}var bh=gh,wh=du,xh=Nr,kh="[object Map]";function Sh(e){return xh(e)&&wh(e)==kh}var Oh=Sh,Ph=Oh,_h=Bn,Ch=Wn.exports,Dh=Ch&&Ch.isMap,jh=Dh?_h(Dh):Ph,Ah=jh,Ih=du,Mh=Nr,Lh="[object Set]";function Rh(e){return Mh(e)&&Ih(e)==Lh}var Eh=Rh,Th=Eh,Fh=Bn,zh=Wn.exports,Bh=zh&&zh.isSet,Wh=Bh?Fh(Bh):Th,Uh=Wh,Gh=yl,Nh=$i,Kh=Tt,Yh=wl,Zh=zl,Xh=Bl.exports,Vh=Ul,Qh=rc,Jh=gc,Hh=Cc,qh=Mc,$h=du,ef=gu,tf=uh,rf=bh,nf=nn,of=on.exports,af=Ah,sf=ze,lf=Uh,cf=gi,uf=Rl,hf=1,ff=2,vf=4,df="[object Arguments]",pf="[object Array]",yf="[object Boolean]",mf="[object Date]",gf="[object Error]",bf="[object Function]",wf="[object GeneratorFunction]",xf="[object Map]",kf="[object Number]",Sf="[object Object]",Of="[object RegExp]",Pf="[object Set]",_f="[object String]",Cf="[object Symbol]",Df="[object WeakMap]",jf="[object ArrayBuffer]",Af="[object DataView]",If="[object Float32Array]",Mf="[object Float64Array]",Lf="[object Int8Array]",Rf="[object Int16Array]",Ef="[object Int32Array]",Tf="[object Uint8Array]",Ff="[object Uint8ClampedArray]",zf="[object Uint16Array]",Bf="[object Uint32Array]",Wf={};function Uf(e,t,r,n,i,o){var a,s=t&hf,l=t&ff,c=t&vf;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!sf(e))return e;var u=nf(e);if(u){if(a=ef(e),!s)return Vh(e,a)}else{var h=$h(e),f=h==bf||h==wf;if(of(e))return Xh(e,s);if(h==Sf||h==df||f&&!i){if(a=l||f?{}:rf(e),!s)return l?Jh(e,Zh(a,e)):Qh(e,Yh(a,e))}else{if(!Wf[h])return i?e:{};a=tf(e,h,s)}}o||(o=new Gh);var v=o.get(e);if(v)return v;o.set(e,a),lf(e)?e.forEach((function(n){a.add(Uf(n,t,r,n,e,o))})):af(e)&&e.forEach((function(n,i){a.set(i,Uf(n,t,r,i,e,o))}));var d=c?l?qh:Hh:l?uf:cf,p=u?void 0:d(e);return Nh(p||e,(function(n,i){p&&(i=n,n=e[i]),Kh(a,i,Uf(n,t,r,i,e,o))})),a}Wf[df]=Wf[pf]=Wf[jf]=Wf[Af]=Wf[yf]=Wf[mf]=Wf[If]=Wf[Mf]=Wf[Lf]=Wf[Rf]=Wf[Ef]=Wf[xf]=Wf[kf]=Wf[Sf]=Wf[Of]=Wf[Pf]=Wf[_f]=Wf[Cf]=Wf[Tf]=Wf[Ff]=Wf[zf]=Wf[Bf]=!0,Wf[gf]=Wf[bf]=Wf[Df]=!1;var Gf=Uf,Nf=Gf,Kf=1,Yf=4;function Zf(e){return Nf(e,Kf|Yf)}var Xf=Zf,Vf=yo;function Qf(e,t){var r=[];return Vf(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}var Jf=Qf,Hf="__lodash_hash_undefined__";function qf(e){return this.__data__.set(e,Hf),this}var $f=qf;function ev(e){return this.__data__.has(e)}var tv=ev,rv=fs,nv=$f,iv=tv;function ov(e){var t=-1,r=null==e?0:e.length;this.__data__=new rv;while(++t<r)this.add(e[t])}ov.prototype.add=ov.prototype.push=nv,ov.prototype.has=iv;var av=ov;function sv(e,t){var r=-1,n=null==e?0:e.length;while(++r<n)if(t(e[r],r,e))return!0;return!1}var lv=sv;function cv(e,t){return e.has(t)}var uv=cv,hv=av,fv=lv,vv=uv,dv=1,pv=2;function yv(e,t,r,n,i,o){var a=r&dv,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,v=r&pv?new hv:void 0;o.set(e,t),o.set(t,e);while(++h<s){var d=e[h],p=t[h];if(n)var y=a?n(p,d,h,t,e,o):n(d,p,h,e,t,o);if(void 0!==y){if(y)continue;f=!1;break}if(v){if(!fv(t,(function(e,t){if(!vv(v,t)&&(d===e||i(d,e,r,n,o)))return v.push(t)}))){f=!1;break}}else if(d!==p&&!i(d,p,r,n,o)){f=!1;break}}return o["delete"](e),o["delete"](t),f}var mv=yv;function gv(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}var bv=gv;function wv(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var xv=wv,kv=me,Sv=xu,Ov=At,Pv=mv,_v=bv,Cv=xv,Dv=1,jv=2,Av="[object Boolean]",Iv="[object Date]",Mv="[object Error]",Lv="[object Map]",Rv="[object Number]",Ev="[object RegExp]",Tv="[object Set]",Fv="[object String]",zv="[object Symbol]",Bv="[object ArrayBuffer]",Wv="[object DataView]",Uv=kv?kv.prototype:void 0,Gv=Uv?Uv.valueOf:void 0;function Nv(e,t,r,n,i,o,a){switch(r){case Wv:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Bv:return!(e.byteLength!=t.byteLength||!o(new Sv(e),new Sv(t)));case Av:case Iv:case Rv:return Ov(+e,+t);case Mv:return e.name==t.name&&e.message==t.message;case Ev:case Fv:return e==t+"";case Lv:var s=_v;case Tv:var l=n&Dv;if(s||(s=Cv),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=jv,a.set(e,t);var u=Pv(s(e),s(t),n,i,o,a);return a["delete"](e),u;case zv:if(Gv)return Gv.call(e)==Gv.call(t)}return!1}var Kv=Nv,Yv=Cc,Zv=1,Xv=Object.prototype,Vv=Xv.hasOwnProperty;function Qv(e,t,r,n,i,o){var a=r&Zv,s=Yv(e),l=s.length,c=Yv(t),u=c.length;if(l!=u&&!a)return!1;var h=l;while(h--){var f=s[h];if(!(a?f in t:Vv.call(t,f)))return!1}var v=o.get(e),d=o.get(t);if(v&&d)return v==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);var y=a;while(++h<l){f=s[h];var m=e[f],g=t[f];if(n)var b=a?n(g,m,f,t,e,o):n(m,g,f,e,t,o);if(!(void 0===b?m===g||i(m,g,r,n,o):b)){p=!1;break}y||(y="constructor"==f)}if(p&&!y){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(p=!1)}return o["delete"](e),o["delete"](t),p}var Jv=Qv,Hv=yl,qv=mv,$v=Kv,ed=Jv,td=du,rd=nn,nd=on.exports,id=Zn,od=1,ad="[object Arguments]",sd="[object Array]",ld="[object Object]",cd=Object.prototype,ud=cd.hasOwnProperty;function hd(e,t,r,n,i,o){var a=rd(e),s=rd(t),l=a?sd:td(e),c=s?sd:td(t);l=l==ad?ld:l,c=c==ad?ld:c;var u=l==ld,h=c==ld,f=l==c;if(f&&nd(e)){if(!nd(t))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new Hv),a||id(e)?qv(e,t,r,n,i,o):$v(e,t,l,r,n,i,o);if(!(r&od)){var v=u&&ud.call(e,"__wrapped__"),d=h&&ud.call(t,"__wrapped__");if(v||d){var p=v?e.value():e,y=d?t.value():t;return o||(o=new Hv),i(p,y,r,n,o)}}return!!f&&(o||(o=new Hv),ed(e,t,r,n,i,o))}var fd=hd,vd=fd,dd=Nr;function pd(e,t,r,n,i){return e===t||(null==e||null==t||!dd(e)&&!dd(t)?e!==e&&t!==t:vd(e,t,r,n,pd,i))}var yd=pd,md=yl,gd=yd,bd=1,wd=2;function xd(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;e=Object(e);while(i--){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}while(++i<o){s=r[i];var l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new md;if(n)var f=n(c,u,l,e,t,h);if(!(void 0===f?gd(u,c,bd|wd,n,h):f))return!1}}return!0}var kd=xd,Sd=ze;function Od(e){return e===e&&!Sd(e)}var Pd=Od,_d=Pd,Cd=gi;function Dd(e){var t=Cd(e),r=t.length;while(r--){var n=t[r],i=e[n];t[r]=[n,i,_d(i)]}return t}var jd=Dd;function Ad(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}var Id=Ad,Md=kd,Ld=jd,Rd=Id;function Ed(e){var t=Ld(e);return 1==t.length&&t[0][2]?Rd(t[0][0],t[0][1]):function(r){return r===e||Md(r,e,t)}}var Td=Ed;function Fd(e,t){return null!=e&&t in Object(e)}var zd=Fd,Bd=Is,Wd=tn,Ud=nn,Gd=_r,Nd=gr,Kd=Es;function Yd(e,t,r){t=Bd(t,e);var n=-1,i=t.length,o=!1;while(++n<i){var a=Kd(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=null==e?0:e.length,!!i&&Nd(i)&&Gd(a,i)&&(Ud(e)||Wd(e)))}var Zd=Yd,Xd=zd,Vd=Zd;function Qd(e,t){return null!=e&&Vd(e,t,Xd)}var Jd=Qd,Hd=yd,qd=Gs,$d=Jd,ep=Io,tp=Pd,rp=Id,np=Es,ip=1,op=2;function ap(e,t){return ep(e)&&tp(t)?rp(np(e),t):function(r){var n=qd(r,e);return void 0===n&&n===t?$d(r,e):Hd(t,n,ip|op)}}var sp=ap;function lp(e){return function(t){return null==t?void 0:t[e]}}var cp=lp,up=Bs;function hp(e){return function(t){return up(t,e)}}var fp=hp,vp=cp,dp=fp,pp=Io,yp=Es;function mp(e){return pp(e)?vp(yp(e)):dp(e)}var gp=mp,bp=Td,wp=sp,xp=Gt,kp=nn,Sp=gp;function Op(e){return"function"==typeof e?e:null==e?xp:"object"==typeof e?kp(e)?wp(e[0],e[1]):bp(e):Sp(e)}var Pp=Op,_p=Nl,Cp=Jf,Dp=Pp,jp=nn;function Ap(e,t){var r=jp(e)?_p:Cp;return r(e,Dp(t))}var Ip,Mp,Lp,Rp,Ep,Tp,Fp,zp,Bp,Wp=Ap;function Up(e){if(Array.isArray(e))return e}function Gp(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0)if(o.push(n.value),t&&o.length===t)break}catch(l){s=!0,i=l}finally{try{a||null==r["return"]||r["return"]()}finally{if(s)throw i}}return o}}function Np(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kp(e,t){if(e){if("string"===typeof e)return Np(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Np(e,t):void 0}}function Yp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zp(e,t){return Up(e)||Gp(e,t)||Kp(e,t)||Yp()}function Xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vp(e)}function Qp(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Vp(e),null===e)break;return e}function Jp(){return Jp="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Qp(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Jp.apply(this,arguments)}function Hp(e,t){return Hp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hp(e,t)}function qp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hp(e,t)}function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function ey(e,t){if(t&&("object"===$p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xp(e)}(function(e){e["DOWN"]="down",e["UP"]="up",e["LEFT"]="left",e["RIGHT"]="right"})(Ip||(Ip={})),function(e){e["Left"]="left",e["Right"]="right"}(Mp||(Mp={})),function(e){e["Top"]="top",e["Bottom"]="bottom"}(Lp||(Lp={})),function(e){e["Bottom"]="bottom",e["Top"]="top",e["Middle"]="middle"}(Rp||(Rp={})),function(e){e["Pan"]="PAN",e["Ban"]="BAN",e["MARKER"]="MARKER",e["Point"]="POINT",e["Circle"]="CIRCLE",e["Line"]="LINE",e["Polyline"]="POLYLINE",e["Rect"]="RECT",e["Polygon"]="POLYGON",e["DrawMask"]="DRAWMASK",e["ClearMask"]="CLEARMASK",e["ImageMask"]="IMAGEMASK"}(Ep||(Ep={})),function(e){e["BoundsChanged"]="boundsChanged",e["FeatureSelected"]="featureSelected",e["FeatureUnselected"]="featureUnselected",e["DrawDone"]="drawDone",e["FeatureUpdated"]="featureUpdated",e["FeatureDeleted"]="featureDeleted",e["Draging"]="draging",e["Click"]="click",e["DblClick"]="dblClick",e["MouseDown"]="mouseDown",e["MouseMove"]="mouseMove",e["MouseUp"]="mouseUp",e["MouseOver"]="mouseOver",e["MouseOut"]="mouseOut"}(Tp||(Tp={})),function(e){e["DrawActivePoint"]="drawActivePoint",e["DrawActiveMiddlePoint"]="drawActiveMiddlePoint"}(Fp||(Fp={})),function(e){e["Grab"]="-webkit-grab",e["Grabbing"]="-webkit-grabbing",e["Crosshair"]="crosshair",e["Pointer"]="pointer",e["Move"]="move",e["NESW_Resize"]="nesw-resize",e["NWSE_Resize"]="nwse-resize"}(zp||(zp={})),function(e){e["DrawMask"]="crosshair",e["ClearMask"]="crosshair"}(Bp||(Bp={}));var ty=yo,ry=kr;function ny(e,t){var r=-1,n=ry(e)?Array(e.length):[];return ty(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}var iy=ny,oy=Ai,ay=Pp,sy=iy,ly=nn;function cy(e,t){var r=ly(e)?oy:sy;return r(e,ay(t))}var uy=cy;function hy(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var fy=hy;function vy(e,t,r,n){var i=e.length,o=r+(n?1:-1);while(n?o--:++o<i)if(t(e[o],o,e))return o;return-1}var dy=vy;function py(e){return e!==e}var yy=py;function my(e,t,r){var n=r-1,i=e.length;while(++n<i)if(e[n]===t)return n;return-1}var gy=my,by=dy,wy=yy,xy=gy;function ky(e,t,r){return t===t?xy(e,t,r):by(e,wy,r)}var Sy=ky,Oy=Te,Py=nn,_y=Nr,Cy="[object String]";function Dy(e){return"string"==typeof e||!Py(e)&&_y(e)&&Oy(e)==Cy}var jy=Dy,Ay=/\s/;function Iy(e){var t=e.length;while(t--&&Ay.test(e.charAt(t)));return t}var My=Iy,Ly=My,Ry=/^\s+/;function Ey(e){return e?e.slice(0,Ly(e)+1).replace(Ry,""):e}var Ty=Ey,Fy=Ty,zy=ze,By=Ei,Wy=NaN,Uy=/^[-+]0x[0-9a-f]+$/i,Gy=/^0b[01]+$/i,Ny=/^0o[0-7]+$/i,Ky=parseInt;function Yy(e){if("number"==typeof e)return e;if(By(e))return Wy;if(zy(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zy(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Fy(e);var r=Gy.test(e);return r||Ny.test(e)?Ky(e.slice(2),r?2:8):Uy.test(e)?Wy:+e}var Zy=Yy,Xy=Zy,Vy=1/0,Qy=17976931348623157e292;function Jy(e){if(!e)return 0===e?e:0;if(e=Xy(e),e===Vy||e===-Vy){var t=e<0?-1:1;return t*Qy}return e===e?e:0}var Hy=Jy,qy=Hy;function $y(e){var t=qy(e),r=t%1;return t===t?r?t-r:t:0}var em=$y,tm=Ai;function rm(e,t){return tm(t,(function(t){return e[t]}))}var nm=rm,im=nm,om=gi;function am(e){return null==e?[]:im(e,om(e))}var sm=am,lm=Sy,cm=kr,um=jy,hm=em,fm=sm,vm=Math.max;function dm(e,t,r,n){e=cm(e)?e:fm(e),r=r&&!n?hm(r):0;var i=e.length;return r<0&&(r=vm(i+r,0)),um(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&lm(e,t,r)>-1}var pm,ym=dm;(function(e){e["Draw"]="DRAW",e["Clear"]="CLEAR",e["Image"]="IMAGE"})(pm||(pm={}));var mm=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.id=t,this.type=r,this.props=i,this.style=Di({},e.defaultStyle,o)}return o(e,[{key:"onAdd",value:function(e){this.layer=e,this.refresh()}},{key:"onRemove",value:function(){}},{key:"setStyle",value:function(e,t){var r,n=t.refresh,i=void 0===n||n;this.style=e,i&&(null===(r=this.layer)||void 0===r||r.refresh())}},{key:"refresh",value:function(){}},{key:"printInfo",value:function(){}}]),e}();a(mm,"defaultStyle",{opacity:1,fillStyle:"rgba(255, 0, 0, 0)",lineWidth:1,strokeStyle:"#000"});var gm=Te,bm=Nr,wm="[object Boolean]";function xm(e){return!0===e||!1===e||bm(e)&&gm(e)==wm}var km=xm,Sm=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.id=t,this.type=r,this.props=i,this.style=Di({},e.defaultStyle,o),this.domId="layer-".concat(t,"-wrapper"),this.setDom()}return o(e,[{key:"setDom",value:function(){this.dom||(this.dom=document.createElement("div"),this.dom.setAttribute("id",this.domId),this.dom.style.position="absolute",this.dom.style.left="0",this.dom.style.top="0");var e=this.style,t=e.zIndex,r=e.opacity;this.dom.style.zIndex="".concat(t),this.dom.style.opacity="".concat(r)}},{key:"onAdd",value:function(e){this.map=e,this.resize()}},{key:"onRemove",value:function(){var e=document.getElementById(this.domId);e&&e.remove(),this.map=null}},{key:"resize",value:function(){var e=this.map.getSize(),t=e.width,r=e.height;this.dom.style.width="".concat(t,"px"),this.dom.style.height="".concat(r,"px")}},{key:"refresh",value:function(){}},{key:"resizeAndRefresh",value:function(){this.resize(),this.refresh()}},{key:"printInfo",value:function(){}}]),e}();function Om(e){var t=Pm();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Pm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(Sm,"defaultStyle",{zIndex:1,opacity:1});var _m=function(e){qp(r,e);var t=Om(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,i,a,s),o.createRenderCanvas(),o}return o(r,[{key:"onAdd",value:function(e){Jp(Vp(r.prototype),"onAdd",this).call(this,e),this.resize()}},{key:"createRenderCanvas",value:function(){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.dom.appendChild(this.canvas),this.canvasContext=this.canvas.getContext("2d")}},{key:"resize",value:function(){Jp(Vp(r.prototype),"resize",this).call(this);var e=this.map.getSize(),t=e.width,n=e.height;this.canvas.width=t*r.dpr,this.canvas.height=n*r.dpr,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px"}},{key:"refresh",value:function(){this.clear(),Jp(Vp(r.prototype),"refresh",this).call(this)}},{key:"clear",value:function(){var e;null===(e=this.canvasContext)||void 0===e||e.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),r}(Sm);function Cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}a(_m,"dpr",window.devicePixelRatio);var jm=function(){function e(){n(this,e)}return o(e,null,[{key:"setStyle",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Di({},e.defaultStyle,r);Po(n,(function(r,n){if(Ze(e.formatStyle[n])){var i=e.formatStyle[n](r);!Ze(t[n])&&(t[n]=i)}else!Ze(t[n])&&(t[n]=r)}))}},{key:"drawPolyline",value:function(t,r,n,i){var o=i.format,a=i.limitCount,s=void 0===a?2:a,l=Ze(o)?o(r):r,c=l.points,u=l.width,h=c.length;if(!(h<s)){e.setStyle(t,n),Xs(u)&&(t.lineWidth=u),t.beginPath();var f=c[0],v=f.x,d=f.y;t.moveTo(v,d);for(var p=1;p<h;p++){var y=c[p],m=y.x,g=y.y;t.lineTo(m,g)}t.stroke()}}},{key:"drawLine",value:function(t,r,n,i){e.setStyle(t,n);var o=i||{},a=o.format,s=Ze(a)?a(r):r,l=s.start,c=s.end,u=s.width;Xs(u)&&(t.lineWidth=u),t.beginPath(),t.moveTo(l.x,l.y),t.lineTo(c.x,c.y),t.stroke()}},{key:"drawRect",value:function(t,r,n,i){var o=i||{},a=o.format,s=!km(n.stroke)||n.stroke,l=!!km(n.fill)&&n.fill,c=Ze(a)?a(r):r,u=c.x,h=c.y,f=c.width,v=c.height,d=u+f,p=h+v,y=[{x:u,y:h},{x:d,y:h},{x:d,y:p},{x:u,y:p}];e.drawPolygon(t,y,n,{fill:l,stroke:s})}},{key:"drawPolygon",value:function(t,r,n,i){var o=i.format,a=i.limitCount,s=void 0===a?2:a,l=i.closePath,c=void 0===l||l,u=!km(n.stroke)||n.stroke,h=!!km(n.fill)&&n.fill,f=r.length;if(!(f<s)){e.setStyle(t,n),t.beginPath();var v=Ze(o)?o(r[0]):r[0],d=v.x,p=v.y;t.moveTo(d,p);for(var y=1;y<f;y++){var m=Ze(o)?o(r[y]):r[y],g=m.x,b=m.y;t.lineTo(g,b)}c&&t.closePath(),h&&t.fill(),u&&(t.globalAlpha=1,t.stroke())}}},{key:"drawCircle",value:function(t,r,n,i){var o=i.format,a=!km(n.stroke)||n.stroke,s=!!km(n.fill)&&n.fill,l=Ze(o)?o(r):r,c=l.cx,u=l.cy,h=l.r;e.setStyle(t,n),t.beginPath(),t.arc(c,u,h,0,2*Math.PI),s&&t.fill(),a&&(t.globalAlpha=1,t.stroke())}},{key:"drawPoint",value:function(t,r,n,i){var o=i.format,a=Ze(o)?o(r):r,s=a.x,l=a.y,c=a.r,u=void 0===c?2:c;e.setStyle(t,n),t.beginPath(),t.arc(s,l,u,0,2*Math.PI),t.fill()}},{key:"drawImage",value:function(e,t,r){var n=t.image,i=t.x,o=t.y,a=t.width,s=t.height;e.drawImage(n,i,o,a,s)}},{key:"drawText",value:function(t,r,n,i){var o=n.background,a=i.format,s=!km(n.fill)||n.fill,l=Ze(a)?a(r):r,c=l.text,u=l.position,h=l.offset;if(c){e.setStyle(t,n);var f=u.x+h.x,v=u.y-h.y,d=t.lineWidth,p=3*_m.dpr,y=4*_m.dpr,m=t.textBaseline===Rp.Bottom,g=t.textBaseline===Rp.Top,b=t.textBaseline===Rp.Middle;if(o){var w=t.measureText(c).width,x=parseInt(t.font.replace(/[^0-9.]/gi,""),10),k=w+2*y,S=x+2*p,O=u.y;m&&(O-=S),b&&(O-=S/2);var P={x:u.x+h.x,y:O-h.y,width:k,height:S};e.drawRect(t,P,Dm(Dm({},n||{}),{},{fill:!0}))}t.globalAlpha=1,s?(t.fillStyle=n.fontColor,m&&o&&t.fillText(c,f+y,v-p+d),b&&o&&t.fillText(c,f+y,v),g&&o&&t.fillText(c,f+y,v+p+d),!o&&t.fillText(c,f,v)):(t.strokeStyle=n.fontColor,m&&o&&t.strokeText(c,f+y,v-p+d),b&&o&&t.strokeText(c,f+y,v),g&&o&&t.strokeText(c,f+y,v+p+d),!o&&t.strokeText(c,f,v))}}},{key:"drawArrow",value:function(t,r,n,i,o){var a=o||{},s=a.format,l=Ze(s)?s(r):r,c=l.position,u=l.points,h=void 0===u?[]:u;e.setStyle(t,i),t.save(),t.beginPath(),t.translate(c.x,c.y),t.rotate(n),Po(h,(function(e,r){0===r?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),t.restore(),t.fill(),t.stroke()}}]),e}();function Am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Am(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mm(e){var t=Lm();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Lm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(jm,"defaultStyle",{fillStyle:"#FF0000",strokeStyle:"#FF0000",lineWidth:1,font:"normal 12px Arial",globalAlpha:1,lineCap:"round",lineJoin:"round",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0}),a(jm,"formatStyle",{lineWidth:function(e){return e*_m.dpr},font:function(e){var t=e.replace(/[^0-9.]/gi,""),r=parseInt(t,10)*_m.dpr,n=new RegExp("".concat(t),"g"),i=e.replace(n,"".concat(r));return i}});var Rm,Em,Tm,Fm,zm=function(e){qp(r,e);var t=Mm(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,pm.Clear,a,s),o.shape=i,o}return o(r,[{key:"refresh",value:function(){var e=this,t=_m.dpr,r=this.layer.map.getScale(),n=Im(Im({},this.style||{}),{},{lineCap:"round",lineJoin:"round"});this.layer.canvasContext.globalCompositeOperation="destination-out",jm.drawPolyline(this.layer.canvasContext,this.shape,n,{format:function(n){var i=n.points,o=n.width;return Im({points:uy(i,(function(r){var n=e.layer.map.transformGlobalToScreen(r),i=n.x,o=n.y;return{x:i*t,y:o*t}}))},Xs(o)?{width:o*r*t}:{})}}),this.layer.canvasContext.globalCompositeOperation="source-over"}}]),r}(mm);(function(e){e["Image"]="IMAGE",e["Feature"]="FEATURE",e["Event"]="EVENT",e["Mask"]="MASK",e["Text"]="TEXT",e["Marker"]="MARKER",e["Overlay"]="OVERLAY",e["Support"]="SUPPORT"})(Rm||(Rm={})),function(e){e["LoadStart"]="loadStart",e["LoadEnd"]="loadEnd",e["LoadError"]="loadError"}(Em||(Em={})),function(e){e["Point"]="POINT",e["Line"]="LINE",e["Polyline"]="POLYLINE",e["Polygon"]="POLYGON",e["Rect"]="RECT",e["Circle"]="CIRCLE",e["Arrow"]="ARROW"}(Tm||(Tm={})),function(e){e["Global"]="GLOBAL",e["Screen"]="SCREEN"}(Fm||(Fm={}));var Bm,Wm,Um=o((function e(){n(this,e)}));function Gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gm(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Km(e){var t=Ym();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Ym(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(Um,"MathUtil",{getMiddlePoint:function(e,t){var r=e.x,n=e.y,i=t.x,o=t.y,a=(r+i)/2,s=(n+o)/2;return{x:a,y:s}},distance:function(e,t){var r=e.x,n=e.y,i=t.x,o=t.y,a=r-i,s=n-o;return Math.sqrt(a*a+s*s)},pointInPolygon:function(e,t){for(var r=e.x,n=e.y,i=!1,o=-1,a=t.length,s=a-1;++o<a;s=o){var l=t[o],c=l.x,u=l.y,h=t[s],f=h.x,v=h.y;(u<=n&&n<v||v<=n&&n<u)&&r<(f-c)*(n-u)/(v-u)+c&&(i=!i)}return i},pointInPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.tolerance,i=Um.MathUtil.distance(e,t);return i<=n},pointInPolyline:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.tolerance,i=t.length-1,o=!1;return Po(t,(function(r,a){if(a!==i){var s=t[a+1],l=Um.MathUtil.distancePoint2Line(e,r,s);return l<=n?(o=!0,!1):void 0}})),o},distancePoint2Line:function(e,t,r){var n,i,o=e.x,a=e.y,s=t.x,l=t.y,c=r.x,u=r.y,h=o-s,f=a-l,v=c-s,d=u-l,p=h*v+f*d,y=v*v+d*d,m=-1;0!==y&&(m=p/y),m<0?(n=s,i=l):m>1?(n=c,i=u):(n=s+m*v,i=l+m*d);var g=o-n,b=a-i;return Math.sqrt(g*g+b*b)}}),a(Um,"EventUtil",{getButtonIndex:function(e){if(!+[1])switch(e.button){case 0:case 1:case 3:case 5:case 7:return 0;case 2:case 6:return 2;case 4:return 1}return e.button},getMouseDirection:function(e,t){var r=e.offsetLeft,n=-e.offsetTop,i=r+e.offsetWidth,o=n-e.offsetHeight,a=(r+i)/2,s=(n+o)/2,l=(o-n)/(i-r),c=t||window.event,u=c.clientX,h=-c.clientY,f=(h-s)/(u-a);return l<f&&f<-l?u>a?1:3:h>s?0:2}}),function(e){e["Marker"]="MARKER"}(Bm||(Bm={})),function(e){e["Click"]="click",e["MouseDown"]="mouseDown",e["MouseUp"]="mouseUp",e["MouseOver"]="mouseOver",e["MouseOut"]="mouseOut",e["DragStart"]="dragStart",e["Dragging"]="dragging",e["DragEnd"]="dragEnd",e["RightClick"]="rightClick"}(Wm||(Wm={}));var Zm=function(e){qp(r,e);var t=Km(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Event,o,s),a(Xp(i),"dragging",!1),a(Xp(i),"breakFeatureCapture",!1),a(Xp(i),"tmpPointsStore",[]),a(Xp(i),"hoverFeature",null),a(Xp(i),"hoverFeatureIndex",void 0),i.onMouseDown=i.onMouseDown.bind(Xp(i)),i.onMouseMove=i.onMouseMove.bind(Xp(i)),i.onMouseUp=i.onMouseUp.bind(Xp(i)),i.onMouseOut=i.onMouseOut.bind(Xp(i)),i.onMouseOver=i.onMouseOver.bind(Xp(i)),i.onMouseClick=i.onMouseClick.bind(Xp(i)),i.onMouseDblClick=i.onMouseDblClick.bind(Xp(i)),i.onMouseWheel=i.onMouseWheel.bind(Xp(i)),i}return o(r,[{key:"onAdd",value:function(e){Jp(Vp(r.prototype),"onAdd",this).call(this,e),this.createEventDom(),this.dom.appendChild(this.eventDom),this.addEventListener()}},{key:"createEventDom",value:function(){this.eventDom=document.createElement("div"),this.eventDom.style.position="absolute",this.eventDom.style.left="0",this.eventDom.style.right="0",this.eventDom.style.top="0",this.eventDom.style.bottom="0",this.eventDom.style.zIndex="1",this.eventDom.ondragstart=function(e){e.preventDefault(),e.stopPropagation()}}},{key:"addEventListener",value:function(){this.eventDom.addEventListener("mousedown",this.onMouseDown),this.eventDom.addEventListener("mousemove",this.onMouseMove),this.eventDom.addEventListener("mouseup",this.onMouseUp),this.eventDom.addEventListener("click",this.onMouseClick),this.eventDom.addEventListener("dblclick",this.onMouseDblClick),this.eventDom.addEventListener("mousewheel",this.onMouseWheel),this.eventDom.addEventListener("mouseout",this.onMouseOut),this.eventDom.addEventListener("mouseover",this.onMouseOver)}},{key:"removeEventListener",value:function(){this.eventDom.removeEventListener("mousedown",this.onMouseDown),this.eventDom.removeEventListener("mousemove",this.onMouseMove),this.eventDom.removeEventListener("mouseup",this.onMouseUp),this.eventDom.removeEventListener("click",this.onMouseClick),this.eventDom.removeEventListener("dblclick",this.onMouseDblClick),this.eventDom.removeEventListener("mousewheel",this.onMouseWheel),this.eventDom.removeEventListener("mouseout",this.onMouseOut),this.eventDom.removeEventListener("mouseover",this.onMouseOver)}},{key:"handleMapPanStart",value:function(e){var t=this;this.dragging=!0,this.setEventCursor(zp.Grabbing),document.onmousemove=function(e){return t.handleMapPanMove(e)},document.onmouseup=function(e){return t.handleMapPanEnd(e)}}},{key:"handleMapPanMove",value:function(e){var t=this.getDltXY(e),r=t.x,n=t.y;this.map.onDrag(r,n)}},{key:"handleMapPanEnd",value:function(e){this.dragging=!1,this.setEventCursor(zp.Grab),document.onmousemove=null,document.onmouseup=null;var t=this.getDltXY(e),r=t.x,n=t.y,i=this.map.getScreenCenter(),o=i.x,a=i.y,s=o-r,l=a-n,c=this.map.transformScreenToGlobal({x:s,y:l});this.map.reset().setCenter(c)}},{key:"getDltXY",value:function(e,t){var r=t||{},n=r.transform,i=void 0!==n&&n,o=this.map.getScale(),a=e.screenX,s=e.screenY,l=this.startPageScreenPoint,c=l.x,u=l.y,h=a-c,f=s-u,v=h/o,d=f/o;return{x:i?v:h,y:i?d:f}}},{key:"clearDownTimer",value:function(){this.downTimer&&(window.clearTimeout(this.downTimer),this.downTimer=null)}},{key:"handleMarkerStart",value:function(e){var t=this;this.clearDownTimer(),this.downTimer=window.setTimeout((function(){t.map.eventsObServer.emit(Tp.DrawDone,t.map.mode,{x:t.startPoint.global.x,y:t.startPoint.global.y})}),300)}},{key:"handlePointStart",value:function(e){var t=this;this.clearDownTimer(),this.downTimer=window.setTimeout((function(){t.map.eventsObServer.emit(Tp.DrawDone,t.map.mode,{x:t.startPoint.global.x,y:t.startPoint.global.y}),t.reset()}),300)}},{key:"handleCircleStart",value:function(e){var t=this;this.dragging=!0,document.onmousemove=function(e){return t.handleCircleMove(e)},document.onmouseup=function(e){return t.handleCircleEnd(e)};var r=this.startPoint.global;this.setTip({text:"移动开始绘制",position:r})}},{key:"handleCircleMove",value:function(e){var t=this.startPoint.global,r=this.getDltXY(e,{transform:!0}),n=r.x,i=r.y,o=this.getDltXY(e,{transform:!1}),a=o.x,s=o.y,l=Math.sqrt(a*a+s*s),c=this.map.xAxis.direction===Mp.Right,u=this.map.yAxis.direction===Lp.Top,h=c?n:-n,f=u?i:-i,v={x:t.x+h,y:t.y-f},d={cx:t.x,cy:t.y,sr:l};this.map.overlayLayer.addCircleFeature(d),this.setTip({text:"抬起完成绘制",position:v})}},{key:"handleCircleEnd",value:function(e){this.dragging=!1,document.onmousemove=null,document.onmouseup=null;var t=this.startPoint.global,r=t.x,n=t.y,i=this.getDltXY(e,{transform:!0}),o=i.x,a=i.y,s=this.getDltXY(e,{transform:!1}),l=s.x,c=s.y,u=Math.sqrt(o*o+a*a),h=Math.sqrt(l*l+c*c);if(this.reset(),Math.abs(h)<=2)console.warn("the circle is too small...");else{var f={cx:r,cy:n,r:u},v={cx:r,cy:n,sr:h};this.map.eventsObServer.emit(Tp.DrawDone,this.map.mode,f,v)}}},{key:"handleLineStart",value:function(e){var t=this;if(0===this.tmpPointsStore.length)this.clearDownTimer(),this.downTimer=window.setTimeout((function(){t.tmpPointsStore.push(t.startPoint),t.setTip({text:"移动开始绘制",position:t.startPoint.global})}),300);else if(1===this.tmpPointsStore.length){var r=this.tmpPointsStore[0].global,n=this.startPoint.global;this.map.eventsObServer.emit(Tp.DrawDone,this.map.mode,{start:r,end:n}),this.reset()}}},{key:"handleLineMove",value:function(e){var t=e.offsetX,r=e.offsetY,n={x:t,y:r},i=this.map.transformScreenToGlobal(n),o=this.tmpPointsStore.length;if(0===o)this.setTip({text:"单击确定起点",position:i});else if(1===o){var a=this.tmpPointsStore[0].global,s=this.map.transformScreenToGlobal({x:t,y:r});this.map.overlayLayer.addLineFeature({start:a,end:s}),this.setTip({text:"单击确定终点",position:i})}}},{key:"handlePolylineStart",value:function(e){var t=this;0===this.tmpPointsStore.length?(this.clearDownTimer(),this.downTimer=window.setTimeout((function(){t.tmpPointsStore.push(t.startPoint),t.setTip({text:"移动开始绘制",position:t.startPoint.global})}),300)):(this.tmpPointsStore.push(this.startPoint),this.map.withHotKeys&&this.setTip({text:"ctrl+z撤销",position:this.startPoint.global}))}},{key:"handlePolylineMove",value:function(e){var t=e.offsetX,r=e.offsetY,n=this.map.transformScreenToGlobal({x:t,y:r}),i=uy(this.tmpPointsStore,(function(e){var t=e.global;return t}));i.push(n),1===i.length?this.setTip({text:"单击确定起点",position:n}):i.length>1&&(this.map.overlayLayer.addPolylineFeature({points:i}),this.setTip({text:"单击绘制/双击结束",position:n}))}},{key:"handlePolylineEnd",value:function(e){this.tmpPointsStore.pop(),this.tmpPointsStore.length>=2&&this.map.eventsObServer.emit(Tp.DrawDone,this.map.mode,uy(this.tmpPointsStore,(function(e){var t=e.global;return t}))),this.reset()}},{key:"handleRectStart",value:function(e){var t=this;this.dragging=!0,document.onmousemove=function(e){return t.handleRectMove(e)},document.onmouseup=function(e){return t.handleRectEnd(e)};var r=this.startPoint.global;this.setTip({text:"移动开始绘制",position:r})}},{key:"handleRectMove",value:function(e){var t=this.startPoint.global,r=t.x,n=t.y,i=this.getDltXY(e,{transform:!0}),o=i.x,a=i.y,s=this.map.xAxis.direction===Mp.Right,l=this.map.yAxis.direction===Lp.Top,c=s?Math.min(r,r+o):Math.max(r,r-o),u=l?Math.max(n,n-a):Math.min(n,n+a),h={x:s?r+o:r-o,y:l?n-a:n+a},f={x:c,y:u,width:Math.abs(o),height:Math.abs(a)};this.map.overlayLayer.addRectFeature(f),this.setTip({text:"抬起完成绘制",position:h})}},{key:"handleRectEnd",value:function(e){this.dragging=!1,document.onmousemove=null,document.onmouseup=null;var t=this.map.getScale(),r=this.startPoint.screen,n=r.x,i=r.y,o=this.getDltXY(e),a=o.x,s=o.y,l=Math.abs(a)/t,c=Math.abs(s)/t,u=n+a,h=i+s,f=Math.min(u,n),v=Math.min(h,i),d=this.map.transformScreenToGlobal({x:f,y:v});if(this.reset(),Math.abs(a)<=3||Math.abs(s)<=3)console.warn("the rect is too small...");else{var p={x:d.x,y:d.y,width:l,height:c};this.map.eventsObServer.emit(Tp.DrawDone,this.map.mode,p)}}},{key:"handlePolygonStart",value:function(e){var t=this;0===this.tmpPointsStore.length?(this.clearDownTimer(),this.downTimer=window.setTimeout((function(){t.tmpPointsStore.push(t.startPoint),t.setTip({text:"移动开始绘制",position:t.startPoint.global})}),300)):(this.tmpPointsStore.push(this.startPoint),this.map.withHotKeys&&this.setTip({text:"ctrl+z撤销",position:this.startPoint.global}))}},{key:"handlePolygonMove",value:function(e){var t=e.offsetX,r=e.offsetY,n=this.map.transformScreenToGlobal({x:t,y:r}),i=uy(this.tmpPointsStore,(function(e){var t=e.global;return t}));i.push(n);var o=i.length;if(1===o)this.setTip({text:"单击确定起点",position:n});else if(o>1){this.map.overlayLayer.addPolygonFeature({points:i},{node:!0});var a=2===o?"单击绘制":"单击绘制/双击结束";this.setTip({text:a,position:n})}}},{key:"handlePolygonEnd",value:function(e){if(this.tmpPointsStore.pop(),this.tmpPointsStore.length>=3){var t=uy(this.tmpPointsStore,(function(e){var t=e.global;return t}));this.map.eventsObServer.emit(Tp.DrawDone,this.map.mode,t)}this.reset()}},{key:"handleMaskStart",value:function(e){var t=this;this.dragging=!0,document.onmousemove=function(e){return t.handleMaskMove(e)},document.onmouseup=function(e){return t.handleMaskEnd(e)},this.tmpPointsStore.push(this.startPoint);var r=uy(this.tmpPointsStore,(function(e){var t=e.global;return t}));switch(this.map.mode){case Ep.DrawMask:this.map.overlayLayer.addDrawAction({points:r});break;case Ep.ClearMask:this.handleMaskClearMoving({points:r});break}}},{key:"handleMaskMove",value:function(e){var t=this.startPoint.screen,r=t.x,n=t.y,i=this.getDltXY(e),o=i.x,a=i.y,s={x:r+o,y:n+a},l=this.map.transformScreenToGlobal(s),c=fy(this.tmpPointsStore);if(c){var u=c.screen,h=Um.MathUtil.distance(u,s);if(h<=3)return}this.tmpPointsStore.push({screen:s,global:l});var f=uy(this.tmpPointsStore,(function(e){var t=e.global;return t}));switch(this.map.mode){case Ep.DrawMask:this.map.overlayLayer.addDrawAction({points:f});break;case Ep.ClearMask:this.handleMaskClearMoving({points:f});break}}},{key:"handleMaskEnd",value:function(e){this.dragging=!1,document.onmousemove=null,document.onmouseup=null;var t=uy(this.tmpPointsStore,(function(e){var t=e.global;return t}));this.map.eventsObServer.emit(Tp.DrawDone,this.map.mode,t),this.reset(),this.handleMaskClearMoving({reset:!0})}},{key:"handleMaskClearMoving",value:function(e){var t=e.points,r=void 0===t?[]:t,n=e.reset,i=void 0!==n&&n,o=this.map.getLayers(),a=this.map.drawingStyle,s=a.lineWidth,l=void 0===s?10:s,c=this.map.getScale(),u=l/c;Po(o,(function(e){if(e.type!==Rm.Mask||i)e.type===Rm.Mask&&i&&e.setMovingClearAction(null);else{var t=new zm("".concat(+new Date),{points:r,width:u},{},a);e.setMovingClearAction(t)}}))}},{key:"handleMapZoom",value:function(e){var t=90+this.map.zoomWheelRatio,r=e.offsetX,n=e.offsetY,i={x:r,y:n},o=this.map.transformScreenToGlobal(i),a={screen:i,global:o},s=e.deltaY<0?this.map.zoom*t/100:100*this.map.zoom/t,l=this.map.getScreenCenter(),c=this.map.transformScreenToGlobal(l,{basePoint:a,zoom:s});this.map.centerAndZoom({center:c,zoom:s},{refreshDelay:!0})}},{key:"handleFeatureSelect",value:function(e){var t=this.map.getTargetFeatureWithPoint(this.startPoint.global);t&&this.map.eventsObServer.emit(Tp.FeatureSelected,t)}},{key:"handleActiveFeatureCapture",value:function(e){var t=this,r=e.offsetX,n=e.offsetY,i={x:r,y:n},o=this.map.transformScreenToGlobal(i),a=this.map.activeFeature,s=a||{},l=s.type,c=s.shape;switch(this.hoverFeature=null,this.hoverFeatureIndex=void 0,l){case Tm.Point:a.captureWithPoint(o)&&(this.hoverFeature=a,this.setEventCursor(zp.Pointer),this.map.eventLayer.breakFeatureCapture=!0,this.setTip({text:"按下移动图形/右键删除",position:o}));break;case Tm.Rect:case Tm.Circle:var u=l===Tm.Rect,h=u?a.getPoints():a.getEdgePoints();Po(h,(function(e,r){var n=t.map.transformGlobalToScreen(e),a=Um.MathUtil.distance(n,i);if(a<=5){t.hoverFeatureIndex=r;var s=1===r||3===r?zp.NESW_Resize:zp.NWSE_Resize;return t.setEventCursor(s),t.map.eventLayer.breakFeatureCapture=!0,t.setTip({text:"按下拖动",position:o}),!1}})),!Xs(this.hoverFeatureIndex)&&a.captureWithPoint(o)&&(this.hoverFeature=a,this.setEventCursor(zp.Move),this.map.eventLayer.breakFeatureCapture=!0,this.setTip({text:"按下移动图形",position:o}));break;case Tm.Line:case Tm.Polyline:case Tm.Polygon:var f=l===Tm.Line,v=l===Tm.Polyline;Tm.Polygon;var d=c,p=d.start,y=d.end,m=c,g=m.points,b=void 0===g?[]:g,w=f?[p,y]:b,x=w.length;Po(w,(function(e,r){var n=t.map.transformGlobalToScreen(e),a=Um.MathUtil.distance(n,i);if(a<=5){t.hoverFeatureIndex=r,t.setEventCursor(zp.Pointer);var s=f||v?2:3,l=x>s?"/右键删除":"";return t.map.eventLayer.breakFeatureCapture=!0,t.setTip({text:"按下拖动".concat(l),position:o}),!1}if(!f){if(v&&!w[r+1])return!1;var c=w[r+1]||w[0],u=Um.MathUtil.getMiddlePoint(e,c),h=t.map.transformGlobalToScreen(u),d=Um.MathUtil.distance(h,i);return d<=5?(t.hoverFeatureIndex=r+.5,t.setEventCursor(zp.Pointer),t.map.eventLayer.breakFeatureCapture=!0,t.setTip({text:"按下拖动添加新节点",position:o}),!1):void 0}})),!Xs(this.hoverFeatureIndex)&&a.captureWithPoint(o)&&(this.hoverFeature=a,this.setEventCursor(zp.Move),this.map.eventLayer.breakFeatureCapture=!0,this.setTip({text:"按下移动图形",position:o}));break}}},{key:"handleActiveFeatureStart",value:function(e){var t=this;this.map.tipLayer.removeAllFeatureActionText();var r=Um.EventUtil.getButtonIndex(e);0===r?(this.dragging=!0,document.onmousemove=function(e){return t.handleActiveFeatureMove(e)},document.onmouseup=function(e){return t.handleActiveFeatureEnd(e)}):2===r&&this.handleActiveFeatureElse(e)}},{key:"handleActiveFeatureMove",value:function(e){var t=this,r=this.getDltXY(e,{transform:!0}),n=r.x,i=r.y,o=this.getDltXY(e,{transform:!1}),a=o.x;o.y;var s=this.map.activeFeature,l=s.type,c=s.shape,u=s.style,h=this.map.xAxis.direction===Mp.Right,f=this.map.yAxis.direction===Lp.Top,v=h?n:-n,d=f?i:-i,p=h?a:-a;switch(l){case Tm.Point:var y,m=c,g=m.x,b=m.y;this.toUpdateShape=Nm(Nm({},c),{},{x:g+v,y:b-d}),this.map.overlayLayer.addActiveFeature(s),this.map.overlayLayer.addPointFeature(this.toUpdateShape,{clear:!1,style:Nm(Nm({},u),{},{fillStyle:null===(y=this.map)||void 0===y?void 0:y.editingColor})});break;case Tm.Circle:var w,x=c,k=x.cx,S=x.cy,O=x.r,P=x.sr;if(this.hoverFeature)this.toUpdateShape=Nm(Nm({},c),{},{cx:k+v,cy:S-d});else if(Xs(this.hoverFeatureIndex)){0===this.hoverFeatureIndex||this.hoverFeatureIndex;var _=1===this.hoverFeatureIndex||2===this.hoverFeatureIndex,C=s.getSubType(),D=C===Fm.Global,j=D?_?O+v:O-v:_?P+p:P-p;if(j<=0)return void console.warn("circle update error: invalid radius, radius <= 0");this.toUpdateShape=Nm(Nm({},c),D?{r:j}:{sr:j})}this.map.overlayLayer.addActiveFeature(s),this.map.overlayLayer.addCircleFeature(this.toUpdateShape,{clear:!1,style:Nm(Nm({},u),{},{lineWidth:1,strokeStyle:null===(w=this.map)||void 0===w?void 0:w.editingColor})});break;case Tm.Rect:var A,I=c,M=I.x,L=I.y,R=I.width,E=I.height,T=null;if(this.hoverFeature)T={x:M+v,y:L-d,width:R,height:E};else if(Xs(this.hoverFeatureIndex)){var F=0===this.hoverFeatureIndex||3===this.hoverFeatureIndex,z=0===this.hoverFeatureIndex||1===this.hoverFeatureIndex,B=F?M+v:M,W=z?L-d:L,U=F?R-n:R+n,G=z?E-i:E+i,N=h?B+U:B-U,K=f?W-G:W+G,Y=h?Math.min(B,N):Math.max(B,N),Z=f?Math.max(W,K):Math.min(W,K),X=Math.abs(U),V=Math.abs(G);T={x:Y,y:Z,width:X,height:V}}this.toUpdateShape=Nm(Nm({},c),T),this.map.overlayLayer.addActiveFeature(s),this.map.overlayLayer.addRectFeature(this.toUpdateShape,{clear:!1,style:Nm(Nm({},u),{},{lineWidth:1,strokeStyle:null===(A=this.map)||void 0===A?void 0:A.editingColor})});break;case Tm.Line:case Tm.Polyline:case Tm.Polygon:var Q,J,H,q=l===Tm.Line,$=l===Tm.Polyline,ee=l===Tm.Polygon,te=c,re=te.start,ne=te.end,ie=c,oe=ie.points,ae=void 0===oe?[]:oe,se=q?[re,ne]:ae,le=[];if(this.hoverFeature)le=uy(se,(function(e){var t=e.x,r=e.y;return{x:t+v,y:r-d}}));else if(Xs(this.hoverFeatureIndex)){var ce=parseInt("".concat(this.hoverFeatureIndex),10);Po(se,(function(e,r){var n=e.x,i=e.y;if(r===ce&&ce===t.hoverFeatureIndex)le.push({x:n+v,y:i-d});else if(r===ce&&ce!==t.hoverFeatureIndex){var o=se[r+1]||se[0],a=Um.MathUtil.getMiddlePoint({x:n,y:i},o);le.push({x:n,y:i}),le.push({x:a.x+v,y:a.y-d})}else le.push({x:n,y:i})}))}if(q){var ue=le,he=Zp(ue,2),fe=he[0],ve=he[1];this.toUpdateShape=Nm(Nm({},c),{},{start:fe,end:ve})}else this.toUpdateShape=Nm(Nm({},c),{},{points:le});this.map.overlayLayer.addActiveFeature(s),q&&this.map.overlayLayer.addLineFeature(this.toUpdateShape,{clear:!1,style:Nm(Nm({},u),{},{strokeStyle:null===(Q=this.map)||void 0===Q?void 0:Q.editingColor})}),$&&this.map.overlayLayer.addPolylineFeature(this.toUpdateShape,{clear:!1,style:Nm(Nm({},u),{},{strokeStyle:null===(J=this.map)||void 0===J?void 0:J.editingColor})}),ee&&this.map.overlayLayer.addPolygonFeature(this.toUpdateShape,{clear:!1,style:Nm(Nm({},u),{},{lineWidth:1,strokeStyle:null===(H=this.map)||void 0===H?void 0:H.editingColor})});break}this.map.eventsObServer.emit(Tp.Draging,this.map.activeFeature,this.toUpdateShape)}},{key:"handleActiveFeatureEnd",value:function(e){this.dragging=!1,document.onmousemove=null,document.onmouseup=null,this.map.overlayLayer.removeAllFeatureActionText();var t=this.map.activeFeature;if(t&&this.map.overlayLayer.addActiveFeature(t),this.toUpdateShape&&t){var r=t.type;switch(r){case Tm.Point:case Tm.Circle:case Tm.Line:case Tm.Polyline:case Tm.Rect:case Tm.Polygon:this.map.eventsObServer.emit(Tp.FeatureUpdated,t,this.toUpdateShape);break}this.toUpdateShape=null}}},{key:"handleActiveFeatureElse",value:function(e){var t=this.map.activeFeature;if(t){var r=t.type,n=t.shape;switch(r){case Tm.Point:this.map.eventsObServer.emit(Tp.FeatureDeleted,t);break;case Tm.Polyline:case Tm.Polygon:var i=r===Tm.Polyline;Tm.Polygon;var o=i?2:3,a=n,s=a.points,l=void 0===s?[]:s;if(Xs(this.hoverFeatureIndex)&&l.length>o){var c=parseInt("".concat(this.hoverFeatureIndex),10);if(c===this.hoverFeatureIndex){var u=Wp(l,(function(e,t){return t!==c})),h=Nm(Nm({},n),{},{points:u});this.map.eventsObServer.emit(Tp.FeatureUpdated,t,h)}}break}}}},{key:"handleFeatureCapture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.extraTip,n=void 0===r?"":r,i=this.dragging||this.tmpPointsStore.length;if(this.map.featureCaptureWhenMove&&!i){var o=this.map.getTargetFeatureWithPoint(e);o&&this.setTip({text:(n?n+"/":"")+"双击选中",position:e})}}},{key:"clearMousemoveTimer",value:function(){this.mousemoveTimer&&(window.clearTimeout(this.mousemoveTimer),this.mousemoveTimer=null)}},{key:"getMouseEventPoint",value:function(e){var t=e.offsetX,r=e.offsetY,n={x:t,y:r},i=this.map.transformScreenToGlobal(n);return{screen:n,global:i}}},{key:"onMouseDown",value:function(e){var t=e.screenX,r=e.screenY;this.startPoint=this.getMouseEventPoint(e),this.startPageScreenPoint={x:t,y:r};var n=this.map.mode,i=this.dragging,o=this.hoverFeature||Xs(this.hoverFeatureIndex),a=!i&&!o;if(this.map.eventsObServer.emit(Tp.MouseDown,this.startPoint),!this.map.activeFeature||o){var s=Um.EventUtil.getButtonIndex(e),l=o&&!i;(0===s||l)&&n!==Ep.Ban&&(n===Ep.Pan&&a?this.handleMapPanStart(e):n===Ep.MARKER&&a?this.handleMarkerStart(e):n===Ep.Point&&a?this.handlePointStart(e):n===Ep.Circle&&a?this.handleCircleStart(e):n===Ep.Line&&a?this.handleLineStart(e):n===Ep.Polyline&&a?this.handlePolylineStart(e):n===Ep.Rect&&a?this.handleRectStart(e):n===Ep.Polygon&&a?this.handlePolygonStart(e):n!==Ep.DrawMask&&n!==Ep.ClearMask||!a||this.handleMaskStart(e),l&&this.handleActiveFeatureStart(e))}else this.map.eventsObServer.emit(Tp.FeatureUnselected,this.map.activeFeature,"cancel by click")}},{key:"onMouseMove",value:function(e){this.mouseMoveEvent=e;var t=this.getMouseEventPoint(e),r=t.screen,n=t.global,i=this.map.mode,o=this.dragging;if(this.map.eventsObServer.emit(Tp.MouseMove,{screen:r,global:n}),this.map.activeFeature||o||this.map.overlayLayer.removeAllFeatureActionText(),i!==Ep.Ban){if(i!==Ep.Pan||o)if(i!==Ep.MARKER||o)if(i!==Ep.Point||o)if(i===Ep.Circle)this.setEventCursor(zp.Crosshair,{},n),o||(this.setTip({text:"按下确定圆心",position:n}),this.handleFeatureCapture(n));else if(i!==Ep.Line||o)if(i!==Ep.Polyline||o)if(i===Ep.Rect)this.setEventCursor(zp.Crosshair,{},n),o||(this.setTip({text:"按下确定起点",position:n}),this.handleFeatureCapture(n));else if(i!==Ep.Polygon||o){if(i===Ep.DrawMask){var a=Gs(this.map.drawingStyle,"lineWidth",1);this.setEventCursor(Bp.DrawMask,{type:Tm.Circle,shape:{sr:a/2,cx:n.x,cy:n.y}})}else if(i===Ep.ClearMask){var s=Gs(this.map.drawingStyle,"lineWidth",1);this.setEventCursor(Bp.ClearMask,{type:Tm.Circle,shape:{sr:s/2,cx:n.x,cy:n.y}})}}else this.setEventCursor(zp.Crosshair,{},n),this.handlePolygonMove(e),this.handleFeatureCapture(n);else this.setEventCursor(zp.Crosshair,{},n),this.handlePolylineMove(e),this.handleFeatureCapture(n);else this.setEventCursor(zp.Crosshair,{},n),this.handleLineMove(e),this.handleFeatureCapture(n);else this.setEventCursor(zp.Crosshair,{},n),this.setTip({text:"点击绘制点",position:n}),this.handleFeatureCapture(n);else this.setEventCursor(zp.Crosshair,{},n);else this.setEventCursor(zp.Grab);this.map.activeFeature&&!o&&this.setTip({text:"单击取消选中",position:n}),ym([Ep.Point,Ep.Circle,Ep.Line,Ep.Polyline,Ep.Rect,Ep.Polygon],i)&&!o&&this.handleActiveFeatureCapture(e)}}},{key:"onMouseUp",value:function(e){this.map.eventsObServer.emit(Tp.MouseUp,this.getMouseEventPoint(e))}},{key:"onMouseClick",value:function(e){this.map.eventsObServer.emit(Tp.Click,this.getMouseEventPoint(e))}},{key:"onMouseDblClick",value:function(e){var t=this.map.mode;this.clearDownTimer();var r=this.dragging||this.tmpPointsStore.length;this.map.eventsObServer.emit(Tp.DblClick,this.getMouseEventPoint(e)),t!==Ep.Ban&&(t===Ep.Polyline&&r?this.handlePolylineEnd(e):t===Ep.Polygon&&r&&this.handlePolygonEnd(e),ym([Ep.Point,Ep.Circle,Ep.Line,Ep.Polyline,Ep.Rect,Ep.Polygon],t)&&!r&&this.handleFeatureSelect(e))}},{key:"onMouseWheel",value:function(e){var t=this.map.mode;switch(t!==Ep.Ban&&e.preventDefault(),t){case Ep.Ban:break;case Ep.Pan:this.handleMapZoom(e);break;default:this.map.zoomWhenDrawing&&this.handleMapZoom(e);break}}},{key:"clearPanWhenDrawingTimer",value:function(){this.panWhenDrawingTimer&&(window.clearInterval(this.panWhenDrawingTimer),this.panWhenDrawingTimer=null)}},{key:"handlePanWhenDrawing",value:function(e){var t=this,r=Um.EventUtil.getMouseDirection(this.map.wrapperDom,e);this.clearPanWhenDrawingTimer();var n=10;this.map.panWhenDrawing&&this.tmpPointsStore.length&&(this.panWhenDrawingTimer=window.setInterval((function(){var e=t.map.getScale(),i=n/e,o=t.map.getCenter(),a=t.map.xAxis.direction===Mp.Right,s=t.map.yAxis.direction===Lp.Top,l=o;switch(r){case 0:l={x:o.x,y:s?o.y+i:o.y-i};break;case 1:l={x:a?o.x+i:o.x-i,y:o.y};break;case 2:l={x:o.x,y:s?o.y-i:o.y+i};break;case 3:l={x:a?o.x-i:o.x+i,y:o.y};break}t.map.setCenter(l)}),100))}},{key:"onMouseOut",value:function(e){if(e.preventDefault(),this.map.tipLayer.removeAllFeatureActionText(),this.map.supportLayer.removeAllSupports(),this.map.cursorLayer.removeAllFeatureActionText(),e.toElement){var t=e.toElement.getAttribute("data-type");if(t===Bm.Marker)return}this.handlePanWhenDrawing(e),this.map.eventsObServer.emit(Tp.MouseOut,this.getMouseEventPoint(e))}},{key:"onMouseOver",value:function(e){e.preventDefault(),this.map.tipLayer.removeAllFeatureActionText(),this.clearPanWhenDrawingTimer(),this.map.eventsObServer.emit(Tp.MouseOver,this.getMouseEventPoint(e))}},{key:"revokeTmpPointsStore",value:function(){if(this.tmpPointsStore.length){this.tmpPointsStore.pop();var e=this.mouseMoveEvent;e&&this.onMouseMove(e)}}},{key:"setTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.map.drawingTip?this.map.tipLayer.addText(e,t):this.map.tipLayer.removeAllFeatureActionText()}},{key:"setCrosshair",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.map.drawingCrosshair?this.map.supportLayer.addCrosshair(e,t):this.map.supportLayer.removeAllSupports()}},{key:"setEventCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.map.setCursor(e,t),r&&this.map.drawingCrosshair?this.setCrosshair(r):this.map.supportLayer.removeAllSupports()}},{key:"reset",value:function(){this.tmpPointsStore=[],this.map.overlayLayer.removeAllFeatureActionText(),this.map.tipLayer.removeAllFeatureActionText()}},{key:"refresh",value:function(){Jp(Vp(r.prototype),"refresh",this).call(this)}}]),r}(Sm),Xm={BASE64:"base64",BLOB:"blob"},Vm=function(){function e(t){n(this,e),a(this,"objects",[]),a(this,"map",{activeFeature:null,setActiveFeature:function(){},getScale:function(){return 1},transformGlobalToScreen:function(e){var t=e.x,r=e.y,n=this.bounds,i=n.x,o=n.y;return{x:t-i,y:r-o}}}),this.bounds=t,this.createRenderCanvas(),this.map.getScale=this.map.getScale.bind(this),this.map.transformGlobalToScreen=this.map.transformGlobalToScreen.bind(this)}return o(e,[{key:"createRenderCanvas",value:function(){var e=this.bounds,t=e.width,r=e.height;this.canvas=document.createElement("canvas"),this.canvas.width=t*_m.dpr,this.canvas.height=r*_m.dpr,this.canvas.style.width=t+"px",this.canvas.style.height=r+"px",this.canvasContext=this.canvas.getContext("2d"),jm.drawRect(this.canvasContext,{x:0,y:0,width:this.canvas.width,height:this.canvas.height},{fill:!0,fillStyle:"#fff",stroke:!1})}},{key:"addObject",value:function(e){e.onAdd(this),this.objects.push(e)}},{key:"addObjects",value:function(e){var t=this;Po(e,(function(e){return t.addObject(e)}))}},{key:"putImage",value:function(e){this.canvasContext.drawImage(e,0,0)}},{key:"addImageLayer",value:function(e){var t=this.map.transformGlobalToScreen(e.position),r=t.x,n=t.y,i=_m.dpr,o=this.map.getScale(),a=e.imageInfo,s=a.width,l=a.height,c=s*o,u=l*o;e.image&&e.imageSuccess&&jm.drawImage(this.canvasContext,{image:e.image,x:r*i,y:n*i,width:c*i,height:u*i},{})}},{key:"convertCanvasToImage",value:function(e,t,r){return e===Xm.BASE64?this.convertCanvasToBase64(t,r):e===Xm.BLOB?this.convertCanvasToBlob(t,r):new Promise((function(t,r){r(new Error("export params error："+e))}))}},{key:"convertCanvasToBlob",value:function(e,t){var r=this;return new Promise((function(n,i){r.canvas.toBlob((function(t){r.canvas=null;var o=r.bounds,a=o.width,s=o.height;r.resizeBlobImage(t,{width:a,height:s},e,n,i)}),e,t)}))}},{key:"resizeBlobImage",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=new Image,a=URL.createObjectURL(e);o.src=a;var s=t.width,l=t.height,c=document.createElement("canvas"),u=c.getContext("2d");c.width=s,c.height=l,c.style.width=s+"px",c.style.height=l+"px",o.onload=function(){URL.revokeObjectURL(a),u.drawImage(o,0,0,s,l),c.toBlob((function(e){c=null,n(e)}),r,1)},o.onerror=function(){i(new Error("resize image error"))}}},{key:"convertCanvasToBase64",value:function(e,t){var r=this.canvas.toDataURL(e);this.canvas=null;var n=this.bounds,i=n.width,o=n.height;return this.resizeBase64Image(r,{width:i,height:o},e)}},{key:"resizeBase64Image",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=new Image;n.src=e;var i=t.width,o=t.height,a=document.createElement("canvas"),s=a.getContext("2d");return a.width=i,a.height=o,a.style.width=i+"px",a.style.height=o+"px",new Promise((function(e,t){n.onload=function(){s.drawImage(n,0,0,i,o),e(a.toDataURL(r))},n.onerror=function(){t(new Error("resize image error"))}}))}},{key:"refresh",value:function(){Po(this.objects,(function(e){return e.refresh()}))}},{key:"clear",value:function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),e}(),Qm=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.id=t,this.type=r,this.props=i,this.style=Di({},e.defaultStyle,o)}return o(e,[{key:"onAdd",value:function(e){this.layer=e,this.refresh()}},{key:"onRemove",value:function(){var e,t,r=null===(e=this.layer)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.activeFeature;r&&r.id===this.id&&this.layer.map.setActiveFeature(null)}},{key:"getBounds",value:function(){return{x:0,y:0,width:0,height:0}}},{key:"captureWithPoint",value:function(e){return!1}},{key:"updateShape",value:function(e){var t,r,n;this.shape=e,null===(t=this.layer)||void 0===t||t.refresh();var i=null===(r=this.layer)||void 0===r||null===(n=r.map)||void 0===n?void 0:n.activeFeature;i&&i.id===this.id&&this.layer.map.setActiveFeature(this)}},{key:"onMove",value:function(e){}},{key:"setStyle",value:function(e,t){var r,n=t.refresh,i=void 0===n||n;this.style=e,i&&(null===(r=this.layer)||void 0===r||r.refresh())}},{key:"refresh",value:function(){}},{key:"printInfo",value:function(){}}]),e}();function Jm(e){var t=Hm();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Hm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(Qm,"moveStep",1),a(Qm,"defaultStyle",{opacity:1,fillStyle:"rgba(255, 0, 0, 0)",lineWidth:1,strokeStyle:"#000"});var qm=function(e){qp(r,e);var t=Jm(r);function r(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;return n(this,r),o=t.call(this,e,Tm.Point,s,l),a(Xp(o),"option",{}),o.shape=i,o.option=Di({},r.defaultOption,c||{}),o}return o(r,[{key:"captureWithPoint",value:function(e){var t,r,n=this.shape,i=n.x,o=n.y,a=n.r,s=n.sr,l=null===(t=this.layer)||void 0===t||null===(r=t.map)||void 0===r?void 0:r.getScale(),c=l?3/l:0,u=Xs(a)?a+c:Xs(s)?s/l+c:c;return Um.MathUtil.pointInPoint(e,{x:i,y:o},{tolerance:u})}},{key:"refresh",value:function(){var e,t=this.shape,r=t.x,n=t.y,i=t.r,o=t.sr;if(null!==(e=this.layer)&&void 0!==e&&e.map){var a=this.layer.map.transformGlobalToScreen({x:r,y:n}),s=a.x,l=a.y,c=_m.dpr,u=this.layer.map.getScale(),h=Xs(i)?i*u:Xs(o)?o:2,f=s*c,v=l*c,d=h*c;if(jm.drawPoint(this.layer.canvasContext,{x:f,y:v,r:d},this.style,{}),this.option.active){var p=f-d-2,y=v-d-2,m=2*d+4,g=2*d+4,b=p+m,w=y,x=b,k=w+g,S=p,O=k;jm.drawLine(this.layer.canvasContext,{start:{x:p,y:y},end:{x:x,y:k}},{strokeStyle:"#fff"}),jm.drawLine(this.layer.canvasContext,{start:{x:b,y:w},end:{x:S,y:O}},{strokeStyle:"#fff"}),jm.drawRect(this.layer.canvasContext,{x:p,y:y,width:m,height:g},{strokeStyle:"#666"})}}}}]),r}(Qm);function $m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tg(e){var t=rg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function rg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(qm,"defaultOption",{active:!1});var ng=function(e){qp(r,e);var t=tg(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,Tm.Line,a,s),o.shape=i,o}return o(r,[{key:"captureWithPoint",value:function(e){var t,r,n=this.shape,i=n.start,o=n.end,a=n.width,s=null===(t=this.layer)||void 0===t||null===(r=t.map)||void 0===r?void 0:r.getScale(),l=s?3/s:0,c=Xs(a)?a/2+l:l;return Um.MathUtil.pointInPolyline(e,[i,o],{tolerance:c})}},{key:"getLineWidth",value:function(){var e,t,r=this.shape,n=r.width,i=this.style.lineWidth||1,o=null===(e=this.layer)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.getScale();return n?n*o:i}},{key:"refresh",value:function(){var e;if(null!==(e=this.layer)&&void 0!==e&&e.map){var t=this.shape,r=t.start,n=t.end,i=t.width,o=this.layer.map.transformGlobalToScreen(r),a=o.x,s=o.y,l=this.layer.map.transformGlobalToScreen(n),c=l.x,u=l.y,h=_m.dpr,f=this.layer.map.getScale(),v=(i||0)*f,d=this.getLineWidth(),p=Math.atan((u-s)/(c-a));p+=(c>a?90:-90)*Math.PI/180;var y=1.2*d*h,m=1.4*d*h;this.style.arrow&&jm.drawArrow(this.layer.canvasContext,{position:{x:c*h,y:u*h},points:[{x:0*h,y:0-m},{x:y,y:2*y-m},{x:-y,y:2*y-m}]},p,eg(eg({},this.style),{},{lineWidth:2},this.style.strokeStyle?{fillStyle:this.style.strokeStyle}:{})),jm.drawLine(this.layer.canvasContext,eg({start:{x:a*h,y:s*h},end:{x:c*h,y:u*h}},Xs(i)?{width:v*h}:{}),this.style,{})}}}]),r}(Qm);function ig(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function og(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ig(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ag(e){var t=sg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function sg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var lg=function(e){qp(r,e);var t=ag(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,Tm.Polyline,a,s),o.shape=i,o}return o(r,[{key:"captureWithPoint",value:function(e){var t,r,n=this.shape,i=n.points,o=void 0===i?[]:i,a=n.width,s=null===(t=this.layer)||void 0===t||null===(r=t.map)||void 0===r?void 0:r.getScale(),l=s?3/s:0,c=Xs(a)?a/2+l:l;return Um.MathUtil.pointInPolyline(e,o,{tolerance:c})}},{key:"refresh",value:function(){var e,t=this;if(null!==(e=this.layer)&&void 0!==e&&e.map){var r=_m.dpr,n=this.layer.map.getScale();jm.drawPolyline(this.layer.canvasContext,this.shape,this.style,{format:function(e){var i=e.points,o=e.width;return og({points:uy(i,(function(e){var n=t.layer.map.transformGlobalToScreen(e),i=n.x,o=n.y;return{x:i*r,y:o*r}}))},Xs(o)?{width:o*n*r}:{})}})}}}]),r}(Qm);function cg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ug(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cg(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hg(e){var t=fg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function fg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var vg=function(e){qp(r,e);var t=hg(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,Tm.Rect,a,s),o.shape=i,o}return o(r,[{key:"captureWithPoint",value:function(e){var t=this.getPoints();return Um.MathUtil.pointInPolygon(e,t)}},{key:"getPoints",value:function(){var e,t,r,n,i=(null===(e=this.layer)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.xAxis.direction)===Mp.Left,o=(null===(r=this.layer)||void 0===r||null===(n=r.map)||void 0===n?void 0:n.yAxis.direction)===Lp.Bottom,a=this.shape,s=a.x,l=a.y,c=a.width,u=a.height,h=i?s-c:s+c,f=o?l+u:l-u;return[{x:s,y:l},{x:h,y:l},{x:h,y:f},{x:s,y:f}]}},{key:"onMove",value:function(e){var t,r,n,i,o,a,s,l,c,u,h,f=Qm.moveStep,v=this.shape,d=v.x,p=v.y,y=null===(t=this.layer)||void 0===t||null===(r=t.map)||void 0===r?void 0:r.getScale(),m=(null===(n=this.layer)||void 0===n||null===(i=n.map)||void 0===i||null===(o=i.xAxis)||void 0===o?void 0:o.direction)===Mp.Left,g=(null===(a=this.layer)||void 0===a||null===(s=a.map)||void 0===s||null===(l=s.yAxis)||void 0===l?void 0:l.direction)===Lp.Bottom,b=f/y,w={};switch(e){case Ip.UP:w={y:g?p-b:p+b};break;case Ip.DOWN:w={y:g?p+b:p-b};break;case Ip.LEFT:w={x:m?d+b:d-b};break;case Ip.RIGHT:w={x:m?d-b:d+b};break}var x=ug(ug({},this.shape),w);null===(c=this.layer)||void 0===c||null===(u=c.map)||void 0===u||null===(h=u.eventsObServer)||void 0===h||h.emit(Tp.FeatureUpdated,this,x)}},{key:"refresh",value:function(){var e,t=this;if(null!==(e=this.layer)&&void 0!==e&&e.map){var r=_m.dpr,n=this.layer.map.getScale();jm.drawRect(this.layer.canvasContext,this.shape,this.style,{format:function(e){var i=e.x,o=e.y,a=e.width,s=e.height,l=t.layer.map.transformGlobalToScreen({x:i,y:o}),c=l.x,u=l.y,h=a*n,f=s*n;return{x:c*r,y:u*r,width:h*r,height:f*r}}})}}}]),r}(Qm);function dg(e){var t=pg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function pg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var yg=function(e){qp(r,e);var t=dg(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,Tm.Polygon,a,s),o.shape=i,o}return o(r,[{key:"captureWithPoint",value:function(e){var t=this.shape,r=t.points,n=void 0===r?[]:r;return Um.MathUtil.pointInPolygon(e,n)}},{key:"refresh",value:function(){var e,t=this;if(null!==(e=this.layer)&&void 0!==e&&e.map){var r=this.shape,n=r.points;r.inner;var i=_m.dpr;jm.drawPolygon(this.layer.canvasContext,n,this.style,{format:function(e){var r=t.layer.map.transformGlobalToScreen(e),n=r.x,o=r.y;return{x:n*i,y:o*i}}})}}}]),r}(Qm);function mg(e){var t=gg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function gg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var bg=function(e){qp(r,e);var t=mg(r);function r(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;return n(this,r),o=t.call(this,e,Tm.Circle,s,l),a(Xp(o),"option",{}),o.shape=i,o.option=Di({},r.defaultOption,c||{}),o}return o(r,[{key:"getSubType",value:function(){var e=this.shape,t=e.r,r=e.sr;return Xs(t)?Fm.Global:Xs(r)?Fm.Screen:void 0}},{key:"captureWithPoint",value:function(e){var t,r,n=this.getSubType()===Fm.Global,i=this.getSubType()===Fm.Screen,o=this.shape,a=o.cx,s=o.cy,l=o.r,c=o.sr,u=null===(t=this.layer)||void 0===t||null===(r=t.map)||void 0===r?void 0:r.getScale(),h=u?3/u:0,f=n?l+h:i?c/u+h:h;return Um.MathUtil.pointInPoint(e,{x:a,y:s},{tolerance:f})}},{key:"getEdgePoints",value:function(){var e,t,r,n,i=this.getSubType()===Fm.Global,o=this.getSubType()===Fm.Screen,a=(null===(e=this.layer)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.xAxis.direction)===Mp.Left,s=(null===(r=this.layer)||void 0===r||null===(n=r.map)||void 0===n?void 0:n.yAxis.direction)===Lp.Bottom,l=this.shape,c=l.cx,u=l.cy,h=l.r,f=l.sr,v=i?h:o?f:0,d=Math.sqrt(v*v/2),p=a?-d:d,y=s?-d:d;if(i)return[{x:c-p,y:u+y},{x:c+p,y:u+y},{x:c+p,y:u-y},{x:c-p,y:u-y}];if(o){var m,g,b=null===(m=this.layer)||void 0===m||null===(g=m.map)||void 0===g?void 0:g.getScale();if(!b)return console.error("circle getEdgePoints error: no added to layer or map"),[];var w=d/b,x=a?-w:w,k=s?-w:w;return[{x:c-x,y:u+k},{x:c+x,y:u+k},{x:c+x,y:u-k},{x:c-x,y:u-k}]}return console.error("circle getEdgePoints error: no valid radius"),[]}},{key:"refresh",value:function(){var e,t=this;if(null!==(e=this.layer)&&void 0!==e&&e.map){var r=this.getSubType()===Fm.Global,n=_m.dpr,i=this.layer.map.getScale();if(jm.drawCircle(this.layer.canvasContext,this.shape,this.style,{format:function(e){var o=e.cx,a=e.cy,s=e.r,l=e.sr,c=r?s*i:Xs(l)?l:2,u=t.layer.map.transformGlobalToScreen({x:o,y:a}),h=u.x,f=u.y;return{cx:h*n,cy:f*n,r:c*n}}}),this.option.active){var o=this.getEdgePoints();Po(o,(function(e){var r=e.x,i=e.y;jm.drawCircle(t.layer.canvasContext,{sr:3.5,cx:r,cy:i},{strokeStyle:"#666",fillStyle:"#fff",stroke:!0,fill:!0,lineWidth:1},{format:function(e){var r=e.cx,i=e.cy,o=e.sr,a=o,s=t.layer.map.transformGlobalToScreen({x:r,y:i}),l=s.x,c=s.y;return{cx:l*n,cy:c*n,r:a*n}}})}))}}}}]),r}(Qm);function wg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wg(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kg(e){var t=Sg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Sg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(bg,"defaultOption",{active:!1});var Og,Pg=function(e){qp(r,e);var t=kg(r);function r(e,i,o){var s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return n(this,r),s=t.call(this,e,pm.Draw,l,c),a(Xp(s),"category",""),s.shape=o,s.category=i,s}return o(r,[{key:"refresh",value:function(){var e=this,t=_m.dpr,r=this.layer.map.getScale(),n=xg(xg({},this.style||{}),{},{lineCap:"round",lineJoin:"round"});jm.drawPolyline(this.layer.canvasContext,this.shape,n,{format:function(n){var i=n.points,o=n.width;return xg({points:uy(i,(function(r){var n=e.layer.map.transformGlobalToScreen(r),i=n.x,o=n.y;return{x:i*t,y:o*t}}))},Xs(o)?{width:o*r*t}:{})}})}}]),r}(mm);function _g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_g(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(function(e){e["Text"]="TEXT"})(Og||(Og={}));var Dg=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.id=t,this.type=Og.Text,this.props=i,this.textInfo=Di({},e.defaultTextInfo,r),this.style=Di({},e.defaultStyle,o)}return o(e,[{key:"onAdd",value:function(e){this.layer=e,this.refresh()}},{key:"onRemove",value:function(){}},{key:"updateText",value:function(e){if(jy(e)&&e){var t,r=this.textInfo;this.textInfo=Cg(Cg({},r),{},{text:e}),null===(t=this.layer)||void 0===t||t.refresh()}}},{key:"updatePosition",value:function(e){var t,r=this.textInfo;this.textInfo=Cg(Cg({},r),{},{position:e}),null===(t=this.layer)||void 0===t||t.refresh()}},{key:"refresh",value:function(){var e,t=this;if(null!==(e=this.layer)&&void 0!==e&&e.map){var r=this.textInfo,n=_m.dpr;jm.drawText(this.layer.canvasContext,r,this.style,{format:function(e){var r=e.position,i=e.offset,o=t.layer.map.transformGlobalToScreen(r),a=o.x,s=o.y,l=i.x,c=i.y;return Cg(Cg({},e),{},{position:{x:a*n,y:s*n},offset:{x:l*n,y:c*n}})}})}}},{key:"printInfo",value:function(){}}]),e}();function jg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ag(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jg(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ig(e){var t=Mg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Mg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(Dg,"defaultStyle",{opacity:1,strokeStyle:"#FF0000",background:!0,fontColor:"#FFFFFF",fillStyle:"#FF0000",font:"normal 12px Arial",textAlign:"left",textBaseline:"bottom"}),a(Dg,"defaultTextInfo",{text:"",position:{x:0,y:0},offset:{x:0,y:0}});var Lg=function(e){qp(r,e);var t=Ig(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Overlay,o,s),a(Xp(i),"featureActionTexts",[]),a(Xp(i),"defaultActiveFeatureStyle",{strokeStyle:"#FF0000",fillStyle:"#FF0000",lineWidth:1}),a(Xp(i),"defaultTextStyle",{fillStyle:"#FFFFFF",strokeStyle:"#D2691E",background:!0,globalAlpha:1,fontColor:"#333",font:"normal 10px Arial",textBaseline:"top"}),i}return o(r,[{key:"addFeatureActionText",value:function(e,t){var r=t||{},n=r.clear,i=void 0!==n&&n;i&&this.removeAllFeatureActionText(),e.onAdd(this),this.featureActionTexts.push(e)}},{key:"addPointFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.style,n=t.clear,i=void 0===n||n,o=t.active,a=void 0!==o&&o,s=new qm("".concat(+new Date),e,{},r||this.map.drawingStyle,{active:a});this.addFeatureActionText(s,{clear:i})}},{key:"addLineFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.style,n=t.clear,i=void 0===n||n,o=new ng("".concat(+new Date),e,{},r||this.map.drawingStyle);this.addFeatureActionText(o,{clear:i});var a=e,s=a.start,l=a.end;this.addDrawingPoints([s,l])}},{key:"addPolylineFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.style,n=t.clear,i=void 0===n||n,o=new lg("".concat(+new Date),e,{},r||this.map.drawingStyle);this.addFeatureActionText(o,{clear:i}),this.addDrawingPoints(e.points)}},{key:"addRectFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.style,n=t.clear,i=void 0===n||n,o=new vg("".concat(+new Date),e,{},r||this.map.drawingStyle);this.addFeatureActionText(o,{clear:i});var a=o.getPoints();this.addDrawingPoints(a)}},{key:"addPolygonFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.style,n=t.clear,i=void 0===n||n,o=new yg("".concat(+new Date),e,{},r||this.map.drawingStyle);this.addFeatureActionText(o,{clear:i}),this.addDrawingPoints(e.points)}},{key:"addCircleFeature",value:function(e,t){var r=t||{},n=r.clear,i=void 0===n||n,o=r.style,a=r.active,s=void 0!==a&&a,l=new bg("".concat(+new Date),e,{},o||this.map.drawingStyle,{active:s});this.addFeatureActionText(l,{clear:i})}},{key:"addDrawAction",value:function(e){var t=new Pg("".concat(+new Date),"drawAction",e,{},this.map.drawingStyle);this.addFeatureActionText(t,{clear:!0})}},{key:"addText",value:function(e,t){var r=t||{},n=r.clear,i=void 0===n||n,o=new Dg("".concat(+new Date),Ag(Ag({},e),{},{offset:{x:5,y:-5}}),{},this.defaultTextStyle);this.addFeatureActionText(o,{clear:i})}},{key:"addActiveFeature",value:function(e){if(e){var t=this.defaultActiveFeatureStyle,r=e.type,n=e.shape;switch(r){case Tm.Point:this.addPointFeature(n,{style:t,active:!0});break;case Tm.Line:this.addLineFeature(n,{style:t});break;case Tm.Polyline:this.addPolylineFeature(n,{style:t}),this.addActiveMiddlePoints(n.points,{withClose:!1});break;case Tm.Rect:this.addRectFeature(n,{style:t});break;case Tm.Polygon:this.addPolygonFeature(n,{style:t}),this.addActiveMiddlePoints(n.points,{withClose:!0});break;case Tm.Circle:this.addCircleFeature(n,{style:t,active:!0});break}}else this.removeAllFeatureActionText()}},{key:"addActiveMiddlePoints",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.withClose,i=void 0===n||n;Po(e,(function(r,n){var o=i?e[n+1]||e[0]:e[n+1];if(o){var a=Um.MathUtil.getMiddlePoint(r,o);t.addDrawingPoint(a,{strokeStyle:"#228B22",withAddIcon:!0,isMiddlePoint:!0})}}))}},{key:"addDrawingPoints",value:function(e){var t=this;Po(e,(function(e){t.addDrawingPoint(e)}))}},{key:"addDrawingPoint",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.strokeStyle,o=void 0===i?"#666":i,a=n.fillStyle,s=void 0===a?"#fff":a,l=n.withAddIcon,c=void 0!==l&&l,u=n.iconColor,h=void 0===u?"#228B22":u,f=n.isMiddlePoint,v=void 0!==f&&f,d=e.x,p=e.y,y=null===(t=this.map)||void 0===t?void 0:t.slotsObServer[Fp.DrawActivePoint];if(!v&&Ze(y)){var m=y(e,this);if(!1===m)return}var g=null===(r=this.map)||void 0===r?void 0:r.slotsObServer[Fp.DrawActiveMiddlePoint];if(v&&Ze(g)){var b=g(e,this);if(!1===b)return}this.addCircleFeature({sr:3.5,cx:d,cy:p},{clear:!1,style:{strokeStyle:o,fillStyle:s,stroke:!0,fill:!0,lineWidth:1}}),c&&this.addCircleFeature({sr:1.25,cx:d,cy:p},{clear:!1,style:{fillStyle:h,stroke:!1,fill:!0}})}},{key:"removeAllFeatureActionText",value:function(){this.featureActionTexts=[],this.clear()}},{key:"refresh",value:function(){Jp(Vp(r.prototype),"refresh",this).call(this),Po(this.featureActionTexts,(function(e){return e.refresh()}))}}]),r}(_m);function Rg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tg(e){var t=Fg();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Fg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var zg=function(e){qp(r,e);var t=Tg(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Support,o,s),a(Xp(i),"supports",[]),i}return o(r,[{key:"addSupports",value:function(e,t){var r=t||{},n=r.clear,i=void 0!==n&&n;i&&this.removeAllSupports(),e.onAdd(this),this.supports.push(e)}},{key:"addText",value:function(e,t){var n=t||{},i=n.style,o=n.clear,a=void 0===o||o,s=new Dg("".concat(+new Date),Eg(Eg({},e),{},{offset:{x:5,y:-5}}),{},i||r.defaultTextStyle);this.addSupports(s,{clear:a})}},{key:"addLineFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.style,i=t.clear,o=void 0===i||i,a=new ng("".concat(+new Date),e,{},n||r.defaultFeatureStyle);this.addSupports(a,{clear:o})}},{key:"addCrosshair",value:function(e){var t=e.x,r=e.y,n=this.map.getBounds(),i=n.x,o=n.y,a=n.width,s=n.height,l={x:i,y:r},c={x:i+a,y:r},u={x:t,y:o},h={x:t,y:o-s};this.addLineFeature({start:l,end:c},{clear:!0}),this.addLineFeature({start:u,end:h},{clear:!1})}},{key:"removeAllSupports",value:function(){this.supports=[],this.clear()}},{key:"refresh",value:function(){Jp(Vp(r.prototype),"refresh",this).call(this),Po(this.supports,(function(e){return e.refresh()}))}}]),r}(_m);a(zg,"defaultTextStyle",{fillStyle:"#FFFFFF",strokeStyle:"#D2691E",background:!0,globalAlpha:1,fontColor:"#333",font:"normal 10px Arial",textBaseline:"top"}),a(zg,"defaultFeatureStyle",{fillStyle:"#FFFFFF",strokeStyle:"#D2691E",background:!0,globalAlpha:.3,fontColor:"#333",font:"normal 10px Arial",textBaseline:"top"});var Bg=Pp,Wg=kr,Ug=gi;function Gg(e){return function(t,r,n){var i=Object(t);if(!Wg(t)){var o=Bg(r);t=Ug(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var Ng=Gg,Kg=dy,Yg=Pp,Zg=em,Xg=Math.max;function Vg(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Zg(r);return i<0&&(i=Xg(n+i,0)),Kg(e,Yg(t),i)}var Qg=Vg,Jg=Ng,Hg=Qg,qg=Jg(Hg),$g=qg;function eb(e){var t=tb();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function tb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var rb=function(e){qp(r,e);var t=eb(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Marker,o,s),a(Xp(i),"markers",[]),i}return o(r,[{key:"addMarker",value:function(e,t){e.onAdd(this),this.markers.push(e)}},{key:"removeMarkerById",value:function(e){var t=Wp(this.markers,(function(t){var r=t.id;return r!==e||(t.onRemove(),!1)}));this.markers=t,this.refresh()}},{key:"getMarkerById",value:function(e){return $g(this.markers,(function(t){var r=t.id;return r===e}))}},{key:"getAllMarkers",value:function(){return this.markers}},{key:"removeAllMarkers",value:function(){var e=Wp(this.markers,(function(e){return e.onRemove(),!1}));this.markers=e,this.refresh()}},{key:"resize",value:function(){this.dom.style.width="0px",this.dom.style.height="0px"}},{key:"refresh",value:function(){Jp(Vp(r.prototype),"refresh",this).call(this),Po(this.markers,(function(e){return e.refresh()}))}}]),r}(Sm),nb=function(){function e(t,r){var i=this;n(this,e),a(this,"controls",[]),a(this,"layers",[]),a(this,"drawingStyle",{}),a(this,"drawingTip",!0),a(this,"drawingCrosshair",!0),a(this,"editingColor","#FF0000"),a(this,"slotsObServer",{}),a(this,"activeFeature",null),a(this,"events",{on:function(e,t){i.eventsObServer.on(e,t)}}),a(this,"slots",{on:function(e,t){i.slotsObServer[e]=t}}),this.wrapperDomId=t,this.wrapperDom=document.getElementById(t),this.createMainDom(),this.mapOptions=Di({},e.defaultMapOptions,r),this.zoom=this.mapOptions.zoom,this.center=this.mapOptions.center,this.mode=this.mapOptions.mode,this.refreshDelayWhenZooming=this.mapOptions.refreshDelayWhenZooming,this.zoomWhenDrawing=this.mapOptions.zoomWhenDrawing,this.panWhenDrawing=this.mapOptions.panWhenDrawing,this.featureCaptureWhenMove=this.mapOptions.featureCaptureWhenMove,this.withHotKeys=this.mapOptions.withHotKeys,this.zoomWheelRatio=this.mapOptions.zoomWheelRatio,this.xAxis=this.mapOptions.xAxis,this.yAxis=this.mapOptions.yAxis,this.size=this.mapOptions.size||{width:Gs(this.dom,"clientWidth",0),height:Gs(this.dom,"clientHeight",0)},this.setDomStyle(),this.createSubDoms(),this.addOverlayLayer(),this.addTipLayer(),this.addSupportLayer(),this.addCursorLayer(),this.addEventLayer(),this.addMarkerLayer(),this.eventsObServer=new I.EventEmitter,this.withHotKeys&&this.registerHotkey()}return o(e,[{key:"setDomStyle",value:function(){this.dom.ondragstart=function(e){e.preventDefault(),e.stopPropagation()},this.dom.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()}}},{key:"setMode",value:function(e){this.mode=e,this.eventLayer.reset(),this.activeFeature&&this.eventsObServer.emit(Tp.FeatureUnselected,this.activeFeature,"cancel by switch mode")}},{key:"setDrawingStyle",value:function(e){this.drawingStyle=e}},{key:"setEditingColor",value:function(e){this.editingColor=e}},{key:"enableDrawingTip",value:function(){this.drawingTip=!0}},{key:"disableDrawingTip",value:function(){this.drawingTip=!1}},{key:"enableDrawingCrosshair",value:function(){this.drawingCrosshair=!0}},{key:"disableDrawingCrosshair",value:function(){this.drawingCrosshair=!1}},{key:"getSize",value:function(){return this.size}},{key:"getScale",value:function(e){var t=Xs(e)?e:this.zoom,r=1e6,n=this.getSize(),i=n.width,o=parseInt(i*r/t+"",10)/r;return o}},{key:"setCenter",value:function(e){return this.center=e,this.refresh(),this.triggerBoundsChanged(),this}},{key:"getCenter",value:function(){return this.center}},{key:"getScreenCenter",value:function(){var e=this.getSize(),t=e.width,r=e.height;return{x:t/2,y:r/2}}},{key:"getBounds",value:function(e){var t=this.getSize(),r=t.width,n=t.height,i=this.transformScreenToGlobal({x:0,y:0}),o=i.x,a=i.y,s=this.transformScreenToGlobal({x:r,y:n}),l=s.x,c=s.y;return{x:o,y:a,width:l-o,height:a-c}}},{key:"enableZoomWhenDrawing",value:function(){this.zoomWhenDrawing=!0}},{key:"disableZoomWhenDrawing",value:function(){this.zoomWhenDrawing=!1}},{key:"enablePanWhenDrawing",value:function(){this.panWhenDrawing=!0}},{key:"disablePanWhenDrawing",value:function(){this.panWhenDrawing=!1}},{key:"enableFeatureCaptureWhenMove",value:function(){this.featureCaptureWhenMove=!0}},{key:"disableFeatureCaptureWhenMove",value:function(){this.featureCaptureWhenMove=!1}},{key:"enableHotKeys",value:function(){this.withHotKeys||(this.withHotKeys=!0,this.registerHotkey())}},{key:"disableHotKeys",value:function(){this.withHotKeys&&(this.withHotKeys=!1,this.unbindHotkey())}},{key:"centerAndZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.refreshDelay,n=void 0!==r&&r,i=e.center,o=e.zoom;return i&&(this.center=i),Xs(o)&&(this.zoom=o),this.refresh(n&&this.refreshDelayWhenZooming),this.triggerBoundsChanged(),this}},{key:"zoomTo",value:function(e){this.zoom=e,this.refresh(),this.triggerBoundsChanged()}},{key:"zoomIn",value:function(){this.zoom=this.zoom/2,this.refresh(),this.triggerBoundsChanged()}},{key:"zoomOut",value:function(){this.zoom=2*this.zoom,this.refresh(),this.triggerBoundsChanged()}},{key:"setZoomWheelRatio",value:function(e){this.zoomWheelRatio=e}},{key:"addControl",value:function(e){e.onAdd(this),this.controls.push(e)}},{key:"removeControlById",value:function(e){var t=Wp(this.controls,(function(t){var r=t.id;return r!==e||(t.onRemove(),!1)}));this.controls=t}},{key:"addLayer",value:function(e){var t=e.dom;this.layerDom.appendChild(t),e.onAdd(this),this.layers.push(e)}},{key:"removeLayerById",value:function(e){var t=Wp(this.layers,(function(t){var r=t.id;return r!==e||(t.onRemove(),!1)}));this.layers=t,this.refresh()}},{key:"removeAllLayers",value:function(){var e=Wp(this.layers,(function(e){return e.onRemove(),!1}));this.layers=e,this.refresh()}},{key:"getLayers",value:function(){return this.layers}},{key:"triggerBoundsChanged",value:function(){var e=this;this.boundsChangedTimer&&(window.clearTimeout(this.boundsChangedTimer),this.boundsChangedTimer=null),this.boundsChangedTimer=window.setTimeout((function(){e.eventsObServer.emit(Tp.BoundsChanged)}),666),this.overlayLayer.refresh()}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Po(this.layers,(function(t){return t.refresh(e)})),this.markerLayer.refresh()}},{key:"resize",value:function(e){this.size=e||{width:Gs(this.dom,"clientWidth",0),height:Gs(this.dom,"clientHeight",0)},this.setLayerDomSize(),this.setPlatformDomSize(),Po(this.layers,(function(e){return e.resizeAndRefresh()})),this.markerLayer.resizeAndRefresh(),this.overlayLayer.resizeAndRefresh(),this.tipLayer.resizeAndRefresh(),this.cursorLayer.resizeAndRefresh(),this.supportLayer.resizeAndRefresh(),this.eventLayer.resizeAndRefresh()}},{key:"setActiveFeature",value:function(e){this.activeFeature=e,this.overlayLayer.addActiveFeature(e);var t=this.eventLayer.mouseMoveEvent;t&&this.eventLayer.onMouseMove(t)}},{key:"getActiveFeature",value:function(){return this.activeFeature}},{key:"removeDrawingPoints",value:function(){this.eventLayer.revokeTmpPointsStore()}},{key:"getTargetFeatureWithPoint",value:function(e){var t=this.getLayers(),r=[];Po(t,(function(t){if(t.type===Rm.Feature){var n=t.getTargetFeatureWithPoint(e);if(n)return r.push(n),!1}}));var n=Gs(r,"[0]",null);return n}},{key:"exportLayersToImage",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layers,i=void 0===n?this.getLayers():n,o=r.type,a=void 0===o?"base64":o,s=r.format,l=void 0===s?"image/png":s,c=r.quality,h=void 0===c?1:c,f=i,v=new Vm(e),d=[];return Po(f,function(){var r=t(u.mark((function t(r){var n,i,o,a,s,l;return u.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r.type===Rm.Feature?(n=r.getAllFeatures(),i=Xf(n),v.addObjects(i),d.push(new Promise((function(e){e(!0)})))):r.type===Rm.Text?(o=r.getAllTexts(),a=Xf(o),v.addObjects(a),d.push(new Promise((function(e){e(!0)})))):r.type===Rm.Mask?(s=r.getImageWithBounds(e),d.push(new Promise((function(e,t){var r=new Image;r.onload=function(){v.putImage(r),e(!0)},r.onerror=function(){t()},r.src=s})))):r.type===Rm.Image&&(l=Xf(r),v.addImageLayer(l),d.push(new Promise((function(e){e(!0)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),new Promise((function(e,t){Promise.all(d).then((function(){var t=v.convertCanvasToImage(a,l,h);t.then((function(t){v=null,e(t)}))["catch"]((function(e){console.log(e)}))}))["catch"]((function(e){console.log(e)}))}))}},{key:"transformScreenToGlobal",value:function(e,t){var r=t||{},n=r.basePoint,i=r.zoom,o=this.getScale(i),a=this.getScreenCenter(),s=a.x,l=a.y,c=e.x,u=e.y,h=Gs(n,"screen.x",s),f=Gs(n,"screen.y",l),v=Gs(n,"global",this.center),d=v.x,p=v.y,y=c-h,m=u-f,g=this.xAxis.direction===Mp.Right,b=this.yAxis.direction===Lp.Top,w=g?d+y/o:d-y/o,x=b?p-m/o:p+m/o;return{x:w,y:x}}},{key:"transformGlobalToScreen",value:function(e,t){var r=t||{},n=r.basePoint,i=r.zoom,o=this.getScale(i),a=this.getScreenCenter(),s=a.x,l=a.y,c=e.x,u=e.y,h=Gs(n,"screen.x",s),f=Gs(n,"screen.y",l),v=Gs(n,"global",this.center),d=v.x,p=v.y,y=c-d,m=u-p,g=this.xAxis.direction===Mp.Right,b=this.yAxis.direction===Lp.Top,w=g?h+y*o:h-y*o,x=b?f-m*o:f+m*o;return{x:w,y:x}}},{key:"createMainDom",value:function(){this.domId="main-wrapper-".concat(Hi()),this.dom=document.createElement("div"),this.dom.setAttribute("id",this.domId),this.dom.style.position="absolute",this.dom.style.left="0",this.dom.style.top="0",this.dom.style.right="0",this.dom.style.bottom="0",this.wrapperDom.appendChild(this.dom)}},{key:"createSubDoms",value:function(){this.setLayerDom(),this.setPlatformDom(),this.setLayerDom2(),this.setControlDom()}},{key:"setLayerDom",value:function(){this.layerDomId="layer-wrapper-".concat(Hi()),this.layerDom=document.createElement("div"),this.layerDom.setAttribute("id",this.layerDomId),this.layerDom.style.position="absolute",this.layerDom.style.left="0",this.layerDom.style.top="0",this.layerDom.style.zIndex="1",this.setLayerDomSize(),this.dom.appendChild(this.layerDom)}},{key:"setLayerDomSize",value:function(){var e=this.getSize(),t=e.width,r=e.height;this.layerDom.style.width="".concat(t,"px"),this.layerDom.style.height="".concat(r,"px")}},{key:"setPlatformDom",value:function(){this.platformDomId="platform-wrapper-".concat(Hi()),this.platformDom=document.createElement("div"),this.platformDom.setAttribute("id",this.platformDomId),this.platformDom.style.position="absolute",this.platformDom.style.left="0",this.platformDom.style.top="0",this.platformDom.style.zIndex="5",this.setPlatformDomSize(),this.dom.appendChild(this.platformDom)}},{key:"setPlatformDomSize",value:function(){var e=this.getSize(),t=e.width,r=e.height;this.platformDom.style.width="".concat(t,"px"),this.platformDom.style.height="".concat(r,"px")}},{key:"setLayerDom2",value:function(){this.layerDom2Id="layer2-wrapper-".concat(Hi()),this.layerDom2=document.createElement("div"),this.layerDom2.setAttribute("id",this.layerDom2Id),this.layerDom2.style.position="absolute",this.layerDom2.style.left="0",this.layerDom2.style.right="0",this.layerDom2.style.width="0",this.layerDom2.style.height="0",this.layerDom2.style.zIndex="10",this.dom.appendChild(this.layerDom2)}},{key:"setControlDom",value:function(){this.controlDomId="control-wrapper-".concat(Hi()),this.controlDom=document.createElement("div"),this.controlDom.setAttribute("id",this.controlDomId),this.controlDom.style.position="absolute",this.controlDom.style.left="0",this.controlDom.style.right="0",this.controlDom.style.width="0",this.controlDom.style.height="0",this.controlDom.style.zIndex="15",this.dom.appendChild(this.controlDom)}},{key:"addEventLayer",value:function(){this.eventLayer=new Zm("event-".concat(Hi()),{},{zIndex:5}),this.platformDom.appendChild(this.eventLayer.dom),this.eventLayer.onAdd(this)}},{key:"addOverlayLayer",value:function(){this.overlayLayer=new Lg("overlay-".concat(Hi()),{},{zIndex:1}),this.platformDom.appendChild(this.overlayLayer.dom),this.overlayLayer.onAdd(this)}},{key:"addTipLayer",value:function(){this.tipLayer=new Lg("tip-".concat(Hi()),{},{zIndex:2}),this.platformDom.appendChild(this.tipLayer.dom),this.tipLayer.onAdd(this)}},{key:"addSupportLayer",value:function(){this.supportLayer=new zg("support-".concat(Hi()),{},{zIndex:1}),this.platformDom.appendChild(this.supportLayer.dom),this.supportLayer.onAdd(this)}},{key:"addCursorLayer",value:function(){this.cursorLayer=new Lg("cursor-".concat(Hi()),{},{zIndex:3}),this.platformDom.appendChild(this.cursorLayer.dom),this.cursorLayer.onAdd(this)}},{key:"addMarkerLayer",value:function(){this.markerLayer=new rb("marker-".concat(Hi()),{},{zIndex:10}),this.layerDom2.appendChild(this.markerLayer.dom),this.markerLayer.onAdd(this)}},{key:"registerHotkey",value:function(){var e=this;oe("ctrl+z",(function(t,r){e.removeDrawingPoints()})),oe("up,down,left,right",(function(t,r){t.preventDefault(),t.stopPropagation();var n=e.getActiveFeature();n&&n.onMove(r.key)}))}},{key:"unbindHotkey",value:function(){oe.unbind("ctrl+z"),oe.unbind("up,down,left,right")}},{key:"setCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.cursorLayer.removeAllFeatureActionText(),this.platformDom.style.cursor=e,this.setCursorFeature(t),this}},{key:"setUrlCursor",value:function(e){return this}},{key:"setCursorFeature",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.shape;t===Tm.Circle&&this.cursorLayer.addCircleFeature(r,{style:{lineWidth:1,strokeStyle:"#aaa",fillStyle:"#ffffffb3",stroke:!0,fill:!0}})}},{key:"onDrag",value:function(e,t){this.layerDom.style.left="".concat(e,"px"),this.layerDom.style.top="".concat(t,"px"),this.layerDom2.style.left="".concat(e,"px"),this.layerDom2.style.top="".concat(t,"px")}},{key:"onZoom",value:function(e){this.dom.style.transform="scale(".concat(e,")")}},{key:"reset",value:function(){return this.layerDom.style.left="0",this.layerDom.style.top="0",this.layerDom2.style.left="0",this.layerDom2.style.top="0",this}},{key:"destroy",value:function(){this.dom.remove()}},{key:"printInfo",value:function(){}}]),e}();function ib(e){var t=ob();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function ob(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(nb,"defaultMapOptions",{center:{x:0,y:0},zoom:1e3,zoomWheelRatio:5,mode:Ep.Pan,size:null,refreshDelayWhenZooming:!0,zoomWhenDrawing:!1,featureCaptureWhenMove:!1,withHotKeys:!0,panWhenDrawing:!1,xAxis:{direction:Mp.Right},yAxis:{direction:Lp.Bottom}});var ab=function(e){qp(r,e);var t=ib(r);function r(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,Rm.Image,s,l),a(Xp(o),"imageSuccess",!1),a(Xp(o),"events",{on:function(e,t){o.eventsObServer.on(e,t)}}),o.eventsObServer=new I.EventEmitter,o.imageInfo=Di({},r.defaultImageInfo,i),o.position=o.imageInfo.position,o.grid=o.imageInfo.grid,o}return o(r,[{key:"updateImageInfo",value:function(e){this.imageInfo=Di({},this.imageInfo,e),e.position&&(this.position=this.imageInfo.position),e.src&&this.updateImage(),this.refresh()}},{key:"updateImage",value:function(){var e=this;this.imageInfo.src&&(this.imageSuccess=!1,this.eventsObServer.emit(Em.LoadStart,this.imageInfo.src,this),this.image=new Image,this.imageInfo.crossOrigin?this.image.setAttribute("crossOrigin","anonymous"):this.image.removeAttribute("crossOrigin"),this.image.src=this.imageInfo.src,this.image.onload=function(){e.imageSuccess=!0,e.map&&e.refresh(),e.eventsObServer.emit(Em.LoadEnd,e.imageInfo.src,e)},this.image.onerror=function(){e.imageSuccess=!1,console.error("image src: "+e.imageInfo.src+" load error"),e.eventsObServer.emit(Em.LoadError,e.imageInfo.src,e)})}},{key:"updateGrid",value:function(e){this.grid=e,this.refresh()}},{key:"onAdd",value:function(e){Jp(Vp(r.prototype),"onAdd",this).call(this,e),this.updateImage(),this.refresh()}},{key:"drawImage",value:function(){var e=this.map.transformGlobalToScreen(this.position),t=e.x,r=e.y,n=_m.dpr,i=this.map.getScale(),o=this.imageInfo,a=o.width,s=o.height,l=a*i,c=s*i;this.image&&this.imageSuccess&&jm.drawImage(this.canvasContext,{image:this.image,x:t*n,y:r*n,width:l*n,height:c*n},{})}},{key:"drawGrid",value:function(){var e=this,t=this.imageInfo,r=t.width,n=t.height,i=this.position,o=i.x,a=i.y,s=_m.dpr,l=this.map.xAxis.direction===Mp.Right,c=this.map.yAxis.direction===Lp.Top,u=Gs(this.grid,"columns",[]),h=Gs(this.grid,"rows",[]),f=u.length,v=r/(f+1);Po(u,(function(t,r){var i=t||{},u=i.color,h=void 0===u?"#333":u,f=i.width,d=void 0===f?1:f,p=(r+1)*v,y=l?o+p:o-p,m=a,g=c?a-n:a+n,b=e.map.transformGlobalToScreen({x:y,y:m}),w=e.map.transformGlobalToScreen({x:y,y:g});jm.drawLine(e.canvasContext,{start:{x:b.x*s,y:b.y*s},end:{x:w.x*s,y:w.y*s}},{strokeStyle:h,lineWidth:d})}));var d=h.length,p=n/(d+1);Po(h,(function(t,n){var i=t||{},u=i.color,h=void 0===u?"#333":u,f=i.width,v=void 0===f?1:f,d=(n+1)*p,y=c?a-d:a+d,m=o,g=l?o+r:o-r,b=e.map.transformGlobalToScreen({x:m,y:y}),w=e.map.transformGlobalToScreen({x:g,y:y});jm.drawLine(e.canvasContext,{start:{x:b.x*s,y:b.y*s},end:{x:w.x*s,y:w.y*s}},{strokeStyle:h,lineWidth:v})}))}},{key:"refresh",value:function(){Jp(Vp(r.prototype),"refresh",this).call(this),this.drawImage(),this.drawGrid()}}]),r}(_m);function sb(e){var t=lb();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function lb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}a(ab,"defaultImageInfo",{src:"",width:0,height:0,position:{x:0,y:0},crossOrigin:!1,grid:{columns:[],rows:[]}});var cb=function(e){qp(r,e);var t=sb(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Feature,o,s),a(Xp(i),"features",[]),i}return o(r,[{key:"addFeature",value:function(e,t){var r=t||{},n=r.clear,i=void 0!==n&&n;i&&(this.features=[],this.clear()),e.onAdd(this),this.features.push(e)}},{key:"removeFeatureById",value:function(e){var t=Wp(this.features,(function(t){var r=t.id;return r!==e||(t.onRemove(),!1)}));this.features=t,this.refresh()}},{key:"getFeatureById",value:function(e){return $g(this.features,(function(t){var r=t.id;return r===e}))}},{key:"getAllFeatures",value:function(){return this.features}},{key:"removeAllFeatures",value:function(){var e=Wp(this.features,(function(e){return e.onRemove(),!1}));this.features=e,this.refresh()}},{key:"getTargetFeatureWithPoint",value:function(e){var t=[];return Po(this.features,(function(r){var n=r.captureWithPoint(e);if(n)return t.push(r),!1})),Gs(t,"[0]",null)}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.refreshDelayTimer&&(window.clearTimeout(this.refreshDelayTimer),this.refreshDelayTimer=null),Jp(Vp(r.prototype),"refresh",this).call(this),t?this.refreshDelayTimer=window.setTimeout((function(){Po(e.features,(function(e){return e.refresh()}))}),100):Po(this.features,(function(e){return e.refresh()}))}}]),r}(_m),ub=Sy;function hb(e,t){var r=null==e?0:e.length;return!!r&&ub(e,t,0)>-1}var fb=hb;function vb(e,t,r){var n=-1,i=null==e?0:e.length;while(++n<i)if(r(t,e[n]))return!0;return!1}var db=vb;function pb(){}var yb=pb,mb=Kc,gb=yb,bb=xv,wb=1/0,xb=mb&&1/bb(new mb([,-0]))[1]==wb?function(e){return new mb(e)}:gb,kb=xb,Sb=av,Ob=fb,Pb=db,_b=uv,Cb=kb,Db=xv,jb=200;function Ab(e,t,r){var n=-1,i=Ob,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=Pb;else if(o>=jb){var c=t?null:Cb(e);if(c)return Db(c);a=!1,i=_b,l=new Sb}else l=t?[]:s;e:while(++n<o){var u=e[n],h=t?t(u):u;if(u=r||0!==u?u:0,a&&h===h){var f=l.length;while(f--)if(l[f]===h)continue e;t&&l.push(h),s.push(u)}else i(l,h,r)||(l!==s&&l.push(h),s.push(u))}return s}var Ib=Ab,Mb=Ib;function Lb(e){return e&&e.length?Mb(e):[]}var Rb=Lb,Eb=function(){function e(t){n(this,e),a(this,"actions",[]),a(this,"map",{getScale:function(){return 1},transformGlobalToScreen:function(e){var t=e.x,r=e.y,n=this.bounds,i=n.x,o=n.y;return{x:t-i,y:r-o}}}),this.bounds=t,this.createRenderCanvas(),this.map.getScale=this.map.getScale.bind(this),this.map.transformGlobalToScreen=this.map.transformGlobalToScreen.bind(this)}return o(e,[{key:"createRenderCanvas",value:function(){var e=this.bounds,t=e.width,r=e.height;this.canvas=new OffscreenCanvas(t,r),this.canvas.width=t*_m.dpr,this.canvas.height=r*_m.dpr,this.canvasContext=this.canvas.getContext("2d")}},{key:"addAction",value:function(e){e.setStyle({strokeStyle:"#ff0000",fillStyle:"#ff0000"},{refresh:!1}),e.onAdd(this),this.actions.push(e)}},{key:"addActions",value:function(e){var t=this;Po(e,(function(e){return t.addAction(e)}))}},{key:"getRle",value:function(){for(var e=[],t=_m.dpr,r=this.bounds,n=r.width,i=r.height,o=this.canvas,a=o.width,s=o.height,l=this.canvasContext.getImageData(0,0,a,s).data,c=0,u=1,h=0;h<i;h++)for(var f=0;f<n;f++){var v=4*(h*t*n+f)*t,d=l[v],p=l[v+1],y=l[v+2],m=l[v+3],g=+!!(d||p||y||m);g===u?c++:(e.push(c),c=1),h+1===i&&f+1===n&&e.push(c),u=g}return e}},{key:"refresh",value:function(){Po(this.actions,(function(e){return e.refresh()}))}},{key:"clear",value:function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),e}();function Tb(e){var t=Fb();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Fb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var zb=function(e){qp(r,e);var t=Tb(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Mask,o,s),a(Xp(i),"actions",[]),i}return o(r,[{key:"addAction",value:function(e,t){e.onAdd(this),this.actions.push(e)}},{key:"removeActionById",value:function(e){var t=Wp(this.actions,(function(t){var r=t.id;return r!==e||(t.onRemove(),!1)}));this.actions=t,this.refresh()}},{key:"getAllActions",value:function(){return this.actions}},{key:"removeAllActions",value:function(){var e=Wp(this.actions,(function(e){return e.onRemove(),!1}));this.actions=e,this.refresh()}},{key:"setMovingClearAction",value:function(e){e&&e.onAdd(this),!e&&this.refresh()}},{key:"getActionCategories",value:function(){var e=this.actions,t=uy(e,(function(e){var t=e.category;return t}));return Wp(Rb(t),(function(e){return!!e}))}},{key:"groupByCategory",value:function(){var e=this.actions,t=this.getActionCategories(),r=[];return Po(t,(function(t){var n=Wp(e,(function(e){var r=e.type,n=e.category;return n===t||r===pm.Clear}));r.push({category:t,actions:n})})),r}},{key:"getGroupRleData",value:function(e,t){var r=e.category,n=e.actions,i=void 0===n?[]:n,o=new Eb(t),a=Xf(i);o.addActions(a);var s=o.getRle();return{category:r,rle:s}}},{key:"getImageData",value:function(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=this.map.transformGlobalToScreen({x:t,y:r}),a=this.map.getScale(),s=o.x*_m.dpr,l=o.y*_m.dpr,c=n/a*_m.dpr,u=i/a*_m.dpr,h=this.canvasContext.getImageData(s,l,c,u);return h}},{key:"getImageWithBounds",value:function(e){var t=e.width,r=e.height,n=this.getImageData(e),i=document.createElement("canvas");i.width=t*_m.dpr,i.height=r*_m.dpr,i.style.width=t+"px",i.style.height=r+"px";var o=i.getContext("2d");o.putImageData(n,0,0);var a=i.toDataURL("image/png",1);return a}},{key:"getRleData",value:function(e){var t=this,r=this.groupByCategory(),n=[];return Po(r,(function(r){var i=t.getGroupRleData(r,e);n.push(i)})),n}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.refreshDelayTimer&&(window.clearTimeout(this.refreshDelayTimer),this.refreshDelayTimer=null),Jp(Vp(r.prototype),"refresh",this).call(this),t?this.refreshDelayTimer=window.setTimeout((function(){Po(e.actions,(function(e){return e.refresh()}))}),100):Po(this.actions,(function(e){return e.refresh()}))}}]),r}(_m);function Bb(e){var t=Wb();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Wb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ub=function(e){qp(r,e);var t=Bb(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,r),i=t.call(this,e,Rm.Text,o,s),a(Xp(i),"texts",[]),i}return o(r,[{key:"addText",value:function(e,t){var r=t||{},n=r.clear,i=void 0!==n&&n;i&&this.clear(),e.onAdd(this),this.texts.push(e)}},{key:"removeTextById",value:function(e){var t=Wp(this.texts,(function(t){var r=t.id;return r!==e||(t.onRemove(),!1)}));this.texts=t,this.refresh()}},{key:"getTextById",value:function(e){return $g(this.texts,(function(t){var r=t.id;return r===e}))}},{key:"getAllTexts",value:function(){return this.texts}},{key:"removeAllTexts",value:function(){var e=Wp(this.texts,(function(e){return e.onRemove(),!1}));this.texts=e,this.refresh()}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.refreshDelayTimer&&(window.clearTimeout(this.refreshDelayTimer),this.refreshDelayTimer=null),Jp(Vp(r.prototype),"refresh",this).call(this),t?this.refreshDelayTimer=window.setTimeout((function(){Po(e.texts,(function(e){return e.refresh()}))}),100):Po(this.texts,(function(e){return e.refresh()}))}}]),r}(_m),Gb={Text:Ub,Mask:zb,Image:ab,Feature:cb,OverlayLayer:Lg,SupportLayer:zg,EventLayer:Zm};function Nb(e){var t=Kb();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Kb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Yb=function(e){qp(r,e);var t=Nb(r);function r(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,r),o=t.call(this,e,Tm.Arrow,a,s),o.shape=i,o}return o(r,[{key:"captureWithPoint",value:function(e){return!1}},{key:"refresh",value:function(){var e;null!==(e=this.layer)&&void 0!==e&&e.map}}]),r}(Qm),Zb={Base:Qm,Point:qm,Circle:bg,Line:ng,Polyline:lg,Rect:vg,Polygon:yg,Arrow:Yb};function Xb(e){var t=Vb();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function Vb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Qb=function(e){qp(r,e);var t=Xb(r);function r(e,i,o){var s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return n(this,r),s=t.call(this,e,pm.Image,l,c),a(Xp(s),"category",""),s.imageInfo=Di({},r.defaultImageInfo,o),s.position=s.imageInfo.position,s.updateImage(),s.category=i,s}return o(r,[{key:"updateImage",value:function(){var e=this;this.imageInfo.src&&(this.image=new Image,this.imageInfo.crossOrigin?this.image.setAttribute("crossOrigin","anonymous"):this.image.removeAttribute("crossOrigin"),this.image.src=this.imageInfo.src,this.image.onload=function(){return e.layer&&e.refresh()})}},{key:"drawImage",value:function(){var e;if(null!==(e=this.layer)&&void 0!==e&&e.map){var t=this.layer.map.transformGlobalToScreen(this.position),r=t.x,n=t.y,i=_m.dpr,o=this.layer.map.getScale(),a=this.imageInfo,s=a.width,l=a.height,c=s*o,u=l*o;jm.drawImage(this.layer.canvasContext,{image:this.image,x:r*i,y:n*i,width:c*i,height:u*i},{})}}},{key:"refresh",value:function(){Jp(Vp(r.prototype),"refresh",this).call(this),this.drawImage()}}]),r}(mm);a(Qb,"defaultImageInfo",{src:"",width:0,height:0,crossOrigin:!1,position:{x:0,y:0}});var Jb={Draw:Pg,Clear:zm,Image:Qb},Hb=function(){function e(t,r,i,o){n(this,e),this.id=t,this.type=r,this.props=i||{},this.option=o||{},this.domId="control-grid-".concat(t,"-wrapper"),this.createContainer()}return o(e,[{key:"createContainer",value:function(){this.dom||(this.dom=document.createElement("div"),this.dom.setAttribute("id",this.domId),this.dom.style.position="absolute",this.dom.style.left="0",this.dom.style.top="0",this.dom.style.zIndex="20")}},{key:"onAdd",value:function(e){this.map=e,this.map.dom.appendChild(this.dom)}},{key:"onRemove",value:function(){var e=document.getElementById(this.domId);e&&e.remove()}},{key:"updatePosition",value:function(e){this.position=e,this.refresh()}},{key:"refresh",value:function(){}},{key:"printInfo",value:function(){}}]),e}();function qb(e){var t=$b();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function $b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ew,tw=function(e){qp(r,e);var t=qb(r);function r(){return n(this,r),t.call(this)}return o(r,[{key:"refresh",value:function(){}}]),r}(Hb);function rw(e){var t=nw();return function(){var r,n=Vp(e);if(t){var i=Vp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ey(this,r)}}function nw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(function(e){e["Scale"]="SCALE",e["Grid"]="GRID"})(ew||(ew={}));var iw=function(e){qp(r,e);var t=rw(r);function r(e,i,o,a){var s;return n(this,r),console.log(111,e),s=t.call(this,e,ew.Grid,o,a),s.gridInfo=Di({},r.defaultGridInfo,i),s.creatCanvasElement(),s.refreshElement(),s}return o(r,[{key:"refreshElement",value:function(){this.setContainerSize(),this.setContainerPosition(),this.setContainerStyle(),this.setRenderCanvasSize()}},{key:"setContainerSize",value:function(){var e=this.gridInfo.size,t=e.width,r=e.height;this.dom.style.width=t+"px",this.dom.style.height=r+"px"}},{key:"setContainerPosition",value:function(){var e=this.gridInfo.position,t=e.left,r=e.top,n=e.right,i=e.bottom;this.dom.style.left=Xs(t)?"".concat(t,"px"):"initial",this.dom.style.right=Xs(n)?"".concat(n,"px"):"initial",this.dom.style.top=Xs(r)?"".concat(r,"px"):"initial",this.dom.style.bottom=Xs(i)?"".concat(i,"px"):"initial"}},{key:"setContainerStyle",value:function(){this.dom.style.border="1px solid red"}},{key:"creatCanvasElement",value:function(){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.dom.appendChild(this.canvas),this.canvasContext=this.canvas.getContext("2d")}},{key:"setRenderCanvasSize",value:function(){var e=this.gridInfo.size,t=e.width,r=e.height;this.canvas.width=t*_m.dpr,this.canvas.height=r*_m.dpr,this.canvas.style.width=t+"px",this.canvas.style.height=r+"px"}},{key:"refresh",value:function(){}}]),r}(Hb);a(iw,"defaultGridInfo",{position:{right:10,bottom:10},size:{width:200,height:200},grid:{columns:[],rows:[]}});var ow={Scale:tw,Grid:iw};function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aw(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lw=function(){function e(t,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),a(this,"dragging",!1),a(this,"draggingEnabled",!1),a(this,"events",{on:function(e,t){i.eventsObServer.on(e,t)}}),this.id=t,this.type=Bm.Marker,this.props=o,this.markerInfo=Di({},e.defaultMarkerInfo,r),this.updateImage(),this.eventsObServer=new I.EventEmitter}return o(e,[{key:"onAdd",value:function(e){this.layer=e,this.refresh()}},{key:"onRemove",value:function(){var e=document.getElementById(this.id);e&&e.remove()}},{key:"enableDragging",value:function(){this.draggingEnabled=!0,this.dragging=!1}},{key:"disableDragging",value:function(){this.draggingEnabled=!1,this.dragging=!1}},{key:"updateImage",value:function(){var e=this;this.markerInfo.src&&(this.image=new Image,this.image.id=this.id,this.image.setAttribute("data-type",this.type),this.image.style.position="absolute",this.image.style.cursor="pointer",this.image.style.userSelect="none",this.image.src=this.markerInfo.src,this.image.onload=function(){var t,r;null===(t=e.layer)||void 0===t||null===(r=t.dom)||void 0===r||r.appendChild(e.image),e.attachEvents()},this.image.onerror=function(){console.error("marker‘s src onerror")})}},{key:"updatePosition",value:function(e){var t=this.markerInfo;this.markerInfo=sw(sw({},t),{},{position:e}),this.refresh()}},{key:"handleMouseDown",value:function(e){var t=this,r=e.screenX,n=e.screenY;this.startPageScreenPoint={x:r,y:n},this.toUpdatePosition=null;var i=Um.EventUtil.getButtonIndex(e);this.eventsObServer.emit(Wm.MouseDown,this),2===i&&this.eventsObServer.emit(Wm.RightClick,this),this.draggingEnabled&&(this.dragging=!0,document.onmousemove=function(e){return t.handleMarkerMove(e)},document.onmouseup=function(e){return t.handleMarkerUp(e)},this.eventsObServer.emit(Wm.DragStart,this))}},{key:"handleMarkerMove",value:function(e){var t=this.layer.map.getScale(),r=e.screenX,n=e.screenY,i=this.startPageScreenPoint,o=i.x,a=i.y,s=r-o,l=n-a,c=s/t,u=l/t,h=this.layer.map.xAxis.direction===Mp.Right,f=this.layer.map.yAxis.direction===Lp.Top,v=h?c:-c,d=f?u:-u,p=this.markerInfo.position;this.toUpdatePosition={x:p.x+v,y:p.y-d},this.refresh(this.toUpdatePosition),this.eventsObServer.emit(Wm.Dragging,this,this.toUpdatePosition)}},{key:"handleMarkerUp",value:function(e){this.dragging=!1,document.onmousemove=null,document.onmouseup=null,this.toUpdatePosition&&(this.refresh(),this.eventsObServer.emit(Wm.DragEnd,this,this.toUpdatePosition)),this.toUpdatePosition=null}},{key:"handleMouseUp",value:function(e){this.eventsObServer.emit(Wm.MouseUp,this)}},{key:"handleMouseOver",value:function(e){var t,r;this.layer.map.eventLayer.breakFeatureCapture=!0,null===(t=this.layer)||void 0===t||null===(r=t.map)||void 0===r||r.tipLayer.removeAllFeatureActionText(),this.eventsObServer.emit(Wm.MouseOver,this)}},{key:"handleMouseOut",value:function(e){this.eventsObServer.emit(Wm.MouseOut,this)}},{key:"handleClick",value:function(e){this.eventsObServer.emit(Wm.Click,this)}},{key:"attachEvents",value:function(){var e=this;this.image.onmousedown=function(t){return e.handleMouseDown(t)},this.image.onmouseup=function(t){return e.handleMouseUp(t)},this.image.onmouseover=function(t){return e.handleMouseOver(t)},this.image.onmouseout=function(t){return e.handleMouseOut(t)},this.image.onclick=function(t){return e.handleClick(t)}}},{key:"refresh",value:function(e){var t=this.markerInfo,r=t.position,n=t.offset,i=e||r,o=this.layer.map.transformGlobalToScreen(i),a=o.x,s=o.y,l=n.x,c=n.y,u=a+l,h=s-c;this.image.style.left="".concat(u,"px"),this.image.style.top="".concat(h,"px")}},{key:"printInfo",value:function(){}}]),e}();a(lw,"defaultMarkerInfo",{src:"",position:{x:0,y:0},offset:{x:0,y:0}});var cw="ailabel",uw="5.1.15",hw="图像标注",fw="dist/index.js",vw="dist/index.js",dw="demo/index.js",pw="website/src/dist/index.js",yw={"@babel/runtime":"^7.15.4",events:"^3.3.0","hotkeys-js":"^3.8.7",lodash:"^4.17.21"},mw={"@babel/core":"^7.14.6","@babel/plugin-transform-runtime":"^7.15.0","@babel/preset-env":"^7.14.7","@babel/preset-typescript":"^7.14.5","@rollup/plugin-commonjs":"^19.0.1","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.2",rollup:"^2.53.2","rollup-plugin-babel":"^4.4.0","rollup-plugin-uglify":"^6.0.4"},gw={build:"rollup -c",dev:"rollup -c -w",pretest:"npm run build"},bw=["dist"],ww={type:"git",url:"git+https://github.com/dingyang9642/AILabel.git"},xw=["ailabel","ocr","ai","label","annotation"],kw="dingyang",Sw="Apache-2.0",Ow={url:"https://github.com/dingyang9642/AILabel/issues"},Pw="https://github.com/dingyang9642/AILabel#readme",_w={name:cw,version:uw,description:hw,main:fw,browser:vw,browser_demo:dw,browser_website:pw,dependencies:yw,devDependencies:mw,scripts:gw,files:bw,repository:ww,keywords:xw,author:kw,license:Sw,bugs:Ow,homepage:Pw},Cw="".concat(_w.version),Dw={Map:nb,Layer:Gb,Feature:Zb,Mask:Jb,Control:ow,Text:Dg,Marker:lw,Util:Um,Graphic:jm,version:Cw};return Dw}))},6949:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd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"}}]);
//# sourceMappingURL=359.afb86915.js.map