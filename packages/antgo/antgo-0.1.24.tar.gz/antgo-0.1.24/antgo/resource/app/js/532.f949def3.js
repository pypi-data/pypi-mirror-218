"use strict";(self["webpackChunkantgo_web"]=self["webpackChunkantgo_web"]||[]).push([[532],{6532:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("b-container",{staticStyle:{"margin-top":"30px"}},[e("b-container",[t.samples_num>0?e("b-progress",{attrs:{value:t.index+1,max:t.samples_num,"show-progress":"",animated:""}}):t._e()],1),e("b-badge",{attrs:{href:"#",variant:"secondary"}},[t._v("索引 "+t._s(t.index)+"/"+t._s(t.samples_num))]),e("b-container",[e("b-row",{staticStyle:{"margin-bottom":"20px"}},t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},[e("h5",[t._v(" 名称："+t._s(a["title"]))])])})),1),e("b-row",t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},["IMAGE"==a["type"]?e("div",{staticStyle:{width:"800px",height:"100%"}},[e("canvas",{staticStyle:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},attrs:{id:"canvas_"+n}})]):e("div",[t._v(" "+t._s(a["data"])+" ")])])})),1),t.tags.length>0?e("b-row",t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},[e("b-form-group",[e("b-form-checkbox-group",{model:{value:a["tag"],callback:function(e){t.$set(a,"tag",e)},expression:"sample['tag']"}},t._l(t.tags,(function(a,n){return e("b-form-checkbox",{key:n,attrs:{value:a}},[t._v(t._s(a))])})),1)],1)],1)})),1):t._e(),e("b-row",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"nowrap","justify-content":"center","flex-direction":"row","align-items":"center"}},[e("b-button-group",[e("b-button",{staticClass:"btn btn-default",on:{click:function(e){return t.prev()}}},[t._v("上一个")]),e("b-button",{staticClass:"btn btn-default",on:{click:function(e){return t.next()}}},[t._v("下一个")]),e("b-button",{staticClass:"btn btn-default",on:{click:function(e){return t.randomone()}}},[t._v("随机")])],1)],1)],1),e("b-container",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"nowrap","justify-content":"center","flex-direction":"row","align-items":"center"}})],1)},s=[],l={name:"Browser",data(){return{samples_num:0,index:0,samples:[],tags:[],color_map:["#00BFFF","#00F5FF","#7FFFD4","#54FF9F","#00FF00","#FFF68F","#FFFFE0","#FFFF00","#FFD700","#FFC1C1"]}},mounted:function(){var t=this;this.$route.query.input,t.axios.get("/antgo/api/browser/sample/entry/",{params:{input:this.$route.query.input}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.samples_num=e.data.content["samples_num"],t.freshsamples()})).catch((function(e){console.log(e),t.index=-1}))},methods:{prev:function(){var t=this;t.axios.get("/antgo/api/browser/sample/prev/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},next:function(){var t=this;t.axios.get("/antgo/api/browser/sample/next/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},randomone:function(){var t=this;t.axios.get("/antgo/api/browser/sample/random/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},freshsamples:function(){this.$nextTick((()=>{var t=this;for(var e in t.samples)if("IMAGE"==t.samples[e]["type"]){var a=new Image;a.src=this.samples[e]["data"],a.onload=function(e,a){return function(){var n=document.getElementById("canvas_"+e),s=n.getContext("2d");if(n.setAttribute("width",a.width),n.setAttribute("height",a.height),s.drawImage(a,0,0,a.width,a.height),"bboxes"in t.samples[e])if("labels"in t.samples[e]&&t.samples[e]["labels"].length>0)for(var l in t.samples[e]["bboxes"]){var o=t.samples[e]["bboxes"][l],i=t.samples[e]["labels"][l];i=parseInt(i);var r=t.color_map[i];t.drawRectWithText(s,o[0],o[1],o[2]-o[0],o[3]-o[1],r,i)}else for(var c in t.samples[e]["bboxes"]){var p=t.samples[e]["bboxes"][c],m=t.color_map[0];t.drawRect(s,p[0],p[1],p[2]-p[0],p[3]-p[1],m)}if("segments"in t.samples[e])if("labels"in t.samples[e]&&t.samples[e]["labels"].length>0)for(var f in t.samples[e]["segments"]){var u=t.samples[e]["segments"][f],d=t.samples[e]["labels"][f];d=parseInt(d);var g=t.color_map[d];t.drawSegment(s,u,g,d)}else for(var h in t.samples[e]["segments"]){var b=t.samples[e]["segments"][h],v=t.color_map[0];t.drawSegment(s,b,v,"")}if("joints2d"in t.samples[e])if("skeleton"in t.samples[e]){t.samples[e]["skeleton"].length;var x=[];for(var w in t.samples[e]["skeleton"])w%=t.color_map.length,x.push(t.color_map[w]);t.drawSkeleton(s,t.samples[e]["joints2d"],t.samples[e]["skeleton"],x)}else t.drawPoint(s,t.samples[e]["joints2d"])}}(e,a)}}))},drawRect:function(t,e,a,n,s,l){t.beginPath(),t.strokeStyle=l,t.lineWidth=2,t.strokeRect(e,a,n,s),t.fillStyle="rgba(255,255,255,0.5)",t.fillRect(e,a,n,s)},drawRectWithText:function(t,e,a,n,s,l,o){this.drawRect(t,e,a,n,s,l),t.fillStyle=l,t.font="20px Georgia",a<=10?t.fillText(o,e+10,a+10):t.fillText(o,e+10,a-10)},drawSegment:function(t,e,a,n){t.beginPath();for(var s=0;s<e.length;++s)t.lineTo(e[s][0],e[s][1]);for(var l=0,o=0,i=0;i<e.length;++i)l+=e[i][0],o+=e[i][1];l/=e.length,o/=e.length,t.font="20px Georgia",t.fillText(n,l,o),t.closePath(),t.strokeStyle=a,t.lineWidth=4,t.stroke(),t.fillStyle="rgba(255,255,255,0.5)",t.fill()},drawSkeleton:function(t,e,a,n){for(var s=0;s<e.length;++s)for(var l=0;l<a.length;++l){var o=a[l][0],i=a[l][1],r=e[s][o][0],c=e[s][o][1],p=e[s][i][0],m=e[s][i][1],f=n[l%n.length];t.beginPath(),t.moveTo(r,c),t.lineTo(p,m),t.closePath(),t.strokeStyle=f,t.lineWidth=1,t.stroke()}},drawPoint:function(t,e){for(var a=0;a<e.length;++a)for(var n=0;n<e[a].length;++n){var s=e[a][n][0],l=e[a][n][1];t.beginPath(),t.fillStyle="red",t.arc(s,l,4,2*Math.PI,!0),t.closePath(),t.fill()}}}},o=l,i=a(1001),r=(0,i.Z)(o,n,s,!1,null,"357730e0",null),c=r.exports}}]);
//# sourceMappingURL=532.f949def3.js.map