"use strict";(self["webpackChunkantgo_web"]=self["webpackChunkantgo_web"]||[]).push([[385],{2385:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});var n=function(){var t=this,e=t._self._c;return e("div",[e("b-container",[e("div",[e("b-row",{attrs:{"align-h":"center"}},[e("b-col",[e("b-dropdown",{staticClass:"m-md-2",staticStyle:{width:"150px"},attrs:{text:"过滤",variant:"outline-primary"}},t._l(t.columns,(function(i){return e("b-dropdown-item",{key:i},[t._v(" "+t._s(i)+" ")])})),1)],1),e("b-col",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","align-content":"center","flex-wrap":"wrap"}},[e("div",{staticClass:"m-md-2"},[e("b-badge",{staticStyle:{height:"30px",display:"flex","flex-direction":"column","justify-content":"center"},attrs:{pill:"",variant:"info"}},[t._v(" "+t._s(t.sample_num_completed)+"/"+t._s(t.sample_num)+" ")])],1)]),e("b-col",[e("div",{staticStyle:{float:"right"}},[e("b-button",{staticClass:"m-md-2",staticStyle:{width:"100px"},attrs:{variant:"outline-primary"},on:{click:function(e){return t.showUploadWindow()}}},[t._v("导入")]),e("b-button",{staticClass:"m-md-2",staticStyle:{width:"100px"},attrs:{variant:"outline-primary"},on:{click:function(e){return t.export_samples()}}},[t._v("导出")]),e("b-button",{staticClass:"m-md-2",staticStyle:{width:"100px"},attrs:{variant:"danger"},on:{click:function(e){return t.finish_label()}}},[t._v("完成")])],1)])],1),e("b-row",{staticStyle:{height:"70px",width:"auto"}},[e("b-col",[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[e("b-form-checkbox",{model:{value:t.select_all,callback:function(e){t.select_all=e},expression:"select_all"}})],1)])]),t._l(t.heads,(function(i){return e("b-col",{key:i},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},[t._v(" "+t._s(i)+" ")])])])}))],2),t._l(t.samples,(function(i,n){return e("b-row",{key:n,staticClass:"row_activate",staticStyle:{cursor:"pointer"}},[e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"40px",display:"flex",height:"100%","align-items":"center"}},[e("b-form-checkbox",{model:{value:i["selected"],callback:function(e){t.$set(i,"selected",e)},expression:"sample['selected']"}})],1)])]),e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"},on:{click:function(e){return t.enter(i,n)}}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},[e("div",{staticStyle:{width:"180px","justify-content":"space-between",display:"flex",height:"100%","align-items":"center"}},[t._v(" "+t._s(n)+" ")])])])]),e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"},on:{click:function(e){return t.enter(i,n)}}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},["completed"==i["state"]?e("div",{staticStyle:{width:"180px","justify-content":"space-between",display:"flex",height:"100%","align-items":"center"}},[t._v(" "+t._s(i["completed_time"])+" ")]):t._e()])])]),e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"},on:{click:function(e){return t.enter(i,n)}}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},[e("div",{staticStyle:{width:"180px","justify-content":"space-between",display:"flex",height:"100%","align-items":"center"}},[t._v(" "+t._s(i["label_info"].length)+" ")])])])]),e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"},on:{click:function(e){return t.enter(i,n)}}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},[e("div",{staticStyle:{width:"180px","justify-content":"space-between",display:"flex",height:"100%","align-items":"center"}},t._l(i["operator"],(function(i,n){return e("div",{key:n,staticClass:"lsf-space lsf-space_direction_horizontal lsf-space_size_small"},[e("div",{staticClass:"lsf-userpic lsf-annotations-list__userpic",staticStyle:{background:"rgb(179, 218, 216)",color:"rgb(0, 0, 0)"},attrs:{block:"lsf-annotations-list"}},[e("img",{staticClass:"lsf-userpic__avatar",staticStyle:{opacity:"0"},attrs:{alt:i["full_name"]}}),e("span",{staticClass:"lsf-userpic__username"},[t._v(t._s(i["short_name"]))])])])})),0)])])]),e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"},on:{click:function(e){return t.enter(i,n)}}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},[e("img",{attrs:{src:i["image_file"],width:"40",height:"40"}})])])]),e("b-col",{staticStyle:{display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center"}},[e("div",{staticClass:"dm-table__cell"},[e("div",{staticStyle:{width:"110px",display:"flex",height:"100%","align-items":"center"}},[e("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"code-slash",scale:"1",variant:"info"}})],1)])])],1)}))],2)]),e("input",{ref:"file_control",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.selectedFile}}),e("div",[e("b-modal",{attrs:{id:"finish_message",title:"提示信息","ok-title":"确认","cancel-title":"取消"},on:{ok:t.force_finish_label}},[e("p",{staticClass:"my-4"},[t._v("未完成所有样本标注, 是否强制结束？")])])],1)],1)},l=[],a={name:"Project",data(){return{columns:[],heads:["ID","完成时间","标注数","人员","图像","信息"],samples:[],select_all:!1,now_page:0,more_show:!0,sample_num_completed:0,sample_num:0}},mounted:function(){var t=this;this.axios.get("/antgo/api/info/").then((function(e){var i=e.data.content["project_state"]["stage"];"labeling"!=i?t.$router.push({path:"/"}):(t.sample_num_completed=e.data.content["project_state"]["sample_num_completed"],t.sample_num=e.data.content["project_state"]["sample_num"],t.scrollMore())})).catch((function(t){})),window.addEventListener("scroll",(()=>{const t=document.documentElement.scrollTop||document.body.scrollTop,e="CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);t+e>=i&&this.scrollMore()}))},methods:{enter:function(t,e){this.$router.push({path:"/project/"+e})},scrollMore(){var t=this;t.axios.get("/antgo/api/label/sample/",{params:{page_index:t.now_page,page_size:50}}).then((function(e){var i=e.data.content["total_sample_num"];for(var n in e.data.content["page_samples"])t.samples.push(e.data.content["page_samples"][n]);t.samples.length<i?t.more_show=!0:t.more_show=!1,t.now_page+=1})).catch((function(t){}))},export_samples:function(){this.axios({method:"get",url:"/antgo/api/label/export/",responseType:"blob"}).then((t=>{this.download(t)})).catch((t=>{}))},download:function(t){if(!t)return;let e=t.headers["content-disposition"].split(";")[1].split("=")[1],i=window.URL.createObjectURL(t["data"]),n=document.createElement("a");n.style.display="none",n.href=i,n.setAttribute("download",e),document.body.appendChild(n),n.click()},selectedFile:function(){let t=this.$refs.file_control.files[0];var e=t.name;let i=e.lastIndexOf(".");e.substring(i+1)},showUploadWindow:function(){console.log("hello"),this.$refs.file_control.dispatchEvent(new MouseEvent("click"))},finish_label:function(){var t=this;let e=new FormData;e.append("running_state","running"),e.append("running_stage","finish"),t.axios.post("/antgo/api/info/",e).then((function(e){e.data.content["finish"]?t.$router.push({path:"/"}):t.$bvModal.show("finish_message")})).catch((function(t){console.log(t)}))},force_finish_label:function(){var t=this;let e=new FormData;e.append("running_state","running"),e.append("running_stage","finish"),e.append("force",!0),t.axios.post("/antgo/api/info/",e).then((function(e){t.$router.push({path:"/"})})).catch((function(t){console.log(t)}))}}},s=a,c=i(1001),o=(0,c.Z)(s,n,l,!1,null,"500d50b3",null),r=o.exports}}]);
//# sourceMappingURL=385.90ba0f66.js.map